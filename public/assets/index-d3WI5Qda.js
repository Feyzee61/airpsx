var Ag=Object.defineProperty;var Ig=(n,e,i)=>e in n?Ag(n,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):n[e]=i;var Ht=(n,e,i)=>Ig(n,typeof e!="symbol"?e+"":e,i);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=i(l);fetch(l.href,u)}})();var Ts,Ut,yh,Rn,Ru,bh,Za,xh,ml,Ja,Qa,_h,bs={},wh=[],Eg=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Uo=Array.isArray;function Ji(n,e){for(var i in e)n[i]=e[i];return n}function vl(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function tn(n,e,i){var s,l,u,f={};for(u in e)u=="key"?s=e[u]:u=="ref"?l=e[u]:f[u]=e[u];if(arguments.length>2&&(f.children=arguments.length>3?Ts.call(arguments,2):i),typeof n=="function"&&n.defaultProps!=null)for(u in n.defaultProps)f[u]===void 0&&(f[u]=n.defaultProps[u]);return hs(n,f,s,l,null)}function hs(n,e,i,s,l){var u={type:n,props:e,key:i,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:l??++yh,__i:-1,__u:0};return l==null&&Ut.vnode!=null&&Ut.vnode(u),u}function Fg(){return{current:null}}function Le(n){return n.children}function Ei(n,e){this.props=n,this.context=e}function gr(n,e){if(e==null)return n.__?gr(n.__,n.__i+1):null;for(var i;e<n.__k.length;e++)if((i=n.__k[e])!=null&&i.__e!=null)return i.__e;return typeof n.type=="function"?gr(n):null}function kh(n){var e,i;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((i=n.__k[e])!=null&&i.__e!=null){n.__e=n.__c.base=i.__e;break}return kh(n)}}function tl(n){(!n.__d&&(n.__d=!0)&&Rn.push(n)&&!Ao.__r++||Ru!==Ut.debounceRendering)&&((Ru=Ut.debounceRendering)||bh)(Ao)}function Ao(){var n,e,i,s,l,u,f,h;for(Rn.sort(Za);n=Rn.shift();)n.__d&&(e=Rn.length,s=void 0,u=(l=(i=n).__v).__e,f=[],h=[],i.__P&&((s=Ji({},l)).__v=l.__v+1,Ut.vnode&&Ut.vnode(s),yl(i.__P,s,l,i.__n,i.__P.namespaceURI,32&l.__u?[u]:null,f,u??gr(l),!!(32&l.__u),h),s.__v=l.__v,s.__.__k[s.__i]=s,Th(f,s,h),s.__e!=u&&kh(s)),Rn.length>e&&Rn.sort(Za));Ao.__r=0}function Sh(n,e,i,s,l,u,f,h,p,m,b){var w,S,T,O,L,P,A=s&&s.__k||wh,H=e.length;for(p=Rg(i,e,A,p,H),w=0;w<H;w++)(T=i.__k[w])!=null&&(S=T.__i===-1?bs:A[T.__i]||bs,T.__i=w,P=yl(n,T,S,l,u,f,h,p,m,b),O=T.__e,T.ref&&S.ref!=T.ref&&(S.ref&&bl(S.ref,null,T),b.push(T.ref,T.__c||O,T)),L==null&&O!=null&&(L=O),4&T.__u||S.__k===T.__k?p=Ch(T,p,n):typeof T.type=="function"&&P!==void 0?p=P:O&&(p=O.nextSibling),T.__u&=-7);return i.__e=L,p}function Rg(n,e,i,s,l){var u,f,h,p,m,b=i.length,w=b,S=0;for(n.__k=new Array(l),u=0;u<l;u++)(f=e[u])!=null&&typeof f!="boolean"&&typeof f!="function"?(p=u+S,(f=n.__k[u]=typeof f=="string"||typeof f=="number"||typeof f=="bigint"||f.constructor==String?hs(null,f,null,null,null):Uo(f)?hs(Le,{children:f},null,null,null):f.constructor===void 0&&f.__b>0?hs(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f).__=n,f.__b=n.__b+1,h=null,(m=f.__i=Wg(f,i,p,w))!==-1&&(w--,(h=i[m])&&(h.__u|=2)),h==null||h.__v===null?(m==-1&&S--,typeof f.type!="function"&&(f.__u|=4)):m!=p&&(m==p-1?S--:m==p+1?S++:(m>p?S--:S++,f.__u|=4))):n.__k[u]=null;if(w)for(u=0;u<b;u++)(h=i[u])!=null&&!(2&h.__u)&&(h.__e==s&&(s=gr(h)),Mh(h,h));return s}function Ch(n,e,i){var s,l;if(typeof n.type=="function"){for(s=n.__k,l=0;s&&l<s.length;l++)s[l]&&(s[l].__=n,e=Ch(s[l],e,i));return e}n.__e!=e&&(e&&n.type&&!i.contains(e)&&(e=gr(n)),i.insertBefore(n.__e,e||null),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Qi(n,e){return e=e||[],n==null||typeof n=="boolean"||(Uo(n)?n.some(function(i){Qi(i,e)}):e.push(n)),e}function Wg(n,e,i,s){var l,u,f=n.key,h=n.type,p=e[i];if(p===null||p&&f==p.key&&h===p.type&&!(2&p.__u))return i;if(s>(p!=null&&!(2&p.__u)?1:0))for(l=i-1,u=i+1;l>=0||u<e.length;){if(l>=0){if((p=e[l])&&!(2&p.__u)&&f==p.key&&h===p.type)return l;l--}if(u<e.length){if((p=e[u])&&!(2&p.__u)&&f==p.key&&h===p.type)return u;u++}}return-1}function Wu(n,e,i){e[0]=="-"?n.setProperty(e,i??""):n[e]=i==null?"":typeof i!="number"||Eg.test(e)?i:i+"px"}function co(n,e,i,s,l){var u;t:if(e=="style")if(typeof i=="string")n.style.cssText=i;else{if(typeof s=="string"&&(n.style.cssText=s=""),s)for(e in s)i&&e in i||Wu(n.style,e,"");if(i)for(e in i)s&&i[e]===s[e]||Wu(n.style,e,i[e])}else if(e[0]=="o"&&e[1]=="n")u=e!=(e=e.replace(xh,"$1")),e=e.toLowerCase()in n||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+u]=i,i?s?i.u=s.u:(i.u=ml,n.addEventListener(e,u?Qa:Ja,u)):n.removeEventListener(e,u?Qa:Ja,u);else{if(l=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=i??"";break t}catch{}typeof i=="function"||(i==null||i===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&i==1?"":i))}}function Hu(n){return function(e){if(this.l){var i=this.l[e.type+n];if(e.t==null)e.t=ml++;else if(e.t<i.u)return;return i(Ut.event?Ut.event(e):e)}}}function yl(n,e,i,s,l,u,f,h,p,m){var b,w,S,T,O,L,P,A,H,X,G,K,Y,Q,q,ht,it,tt=e.type;if(e.constructor!==void 0)return null;128&i.__u&&(p=!!(32&i.__u),u=[h=e.__e=i.__e]),(b=Ut.__b)&&b(e);t:if(typeof tt=="function")try{if(A=e.props,H="prototype"in tt&&tt.prototype.render,X=(b=tt.contextType)&&s[b.__c],G=b?X?X.props.value:b.__:s,i.__c?P=(w=e.__c=i.__c).__=w.__E:(H?e.__c=w=new tt(A,G):(e.__c=w=new Ei(A,G),w.constructor=tt,w.render=zg),X&&X.sub(w),w.props=A,w.state||(w.state={}),w.context=G,w.__n=s,S=w.__d=!0,w.__h=[],w._sb=[]),H&&w.__s==null&&(w.__s=w.state),H&&tt.getDerivedStateFromProps!=null&&(w.__s==w.state&&(w.__s=Ji({},w.__s)),Ji(w.__s,tt.getDerivedStateFromProps(A,w.__s))),T=w.props,O=w.state,w.__v=e,S)H&&tt.getDerivedStateFromProps==null&&w.componentWillMount!=null&&w.componentWillMount(),H&&w.componentDidMount!=null&&w.__h.push(w.componentDidMount);else{if(H&&tt.getDerivedStateFromProps==null&&A!==T&&w.componentWillReceiveProps!=null&&w.componentWillReceiveProps(A,G),!w.__e&&(w.shouldComponentUpdate!=null&&w.shouldComponentUpdate(A,w.__s,G)===!1||e.__v==i.__v)){for(e.__v!=i.__v&&(w.props=A,w.state=w.__s,w.__d=!1),e.__e=i.__e,e.__k=i.__k,e.__k.some(function(st){st&&(st.__=e)}),K=0;K<w._sb.length;K++)w.__h.push(w._sb[K]);w._sb=[],w.__h.length&&f.push(w);break t}w.componentWillUpdate!=null&&w.componentWillUpdate(A,w.__s,G),H&&w.componentDidUpdate!=null&&w.__h.push(function(){w.componentDidUpdate(T,O,L)})}if(w.context=G,w.props=A,w.__P=n,w.__e=!1,Y=Ut.__r,Q=0,H){for(w.state=w.__s,w.__d=!1,Y&&Y(e),b=w.render(w.props,w.state,w.context),q=0;q<w._sb.length;q++)w.__h.push(w._sb[q]);w._sb=[]}else do w.__d=!1,Y&&Y(e),b=w.render(w.props,w.state,w.context),w.state=w.__s;while(w.__d&&++Q<25);w.state=w.__s,w.getChildContext!=null&&(s=Ji(Ji({},s),w.getChildContext())),H&&!S&&w.getSnapshotBeforeUpdate!=null&&(L=w.getSnapshotBeforeUpdate(T,O)),h=Sh(n,Uo(ht=b!=null&&b.type===Le&&b.key==null?b.props.children:b)?ht:[ht],e,i,s,l,u,f,h,p,m),w.base=e.__e,e.__u&=-161,w.__h.length&&f.push(w),P&&(w.__E=w.__=null)}catch(st){if(e.__v=null,p||u!=null)if(st.then){for(e.__u|=p?160:128;h&&h.nodeType==8&&h.nextSibling;)h=h.nextSibling;u[u.indexOf(h)]=null,e.__e=h}else for(it=u.length;it--;)vl(u[it]);else e.__e=i.__e,e.__k=i.__k;Ut.__e(st,e,i)}else u==null&&e.__v==i.__v?(e.__k=i.__k,e.__e=i.__e):h=e.__e=Hg(i.__e,e,i,s,l,u,f,p,m);return(b=Ut.diffed)&&b(e),128&e.__u?void 0:h}function Th(n,e,i){for(var s=0;s<i.length;s++)bl(i[s],i[++s],i[++s]);Ut.__c&&Ut.__c(e,n),n.some(function(l){try{n=l.__h,l.__h=[],n.some(function(u){u.call(l)})}catch(u){Ut.__e(u,l.__v)}})}function Hg(n,e,i,s,l,u,f,h,p){var m,b,w,S,T,O,L,P=i.props,A=e.props,H=e.type;if(H=="svg"?l="http://www.w3.org/2000/svg":H=="math"?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),u!=null){for(m=0;m<u.length;m++)if((T=u[m])&&"setAttribute"in T==!!H&&(H?T.localName==H:T.nodeType==3)){n=T,u[m]=null;break}}if(n==null){if(H==null)return document.createTextNode(A);n=document.createElementNS(l,H,A.is&&A),h&&(Ut.__m&&Ut.__m(e,u),h=!1),u=null}if(H===null)P===A||h&&n.data===A||(n.data=A);else{if(u=u&&Ts.call(n.childNodes),P=i.props||bs,!h&&u!=null)for(P={},m=0;m<n.attributes.length;m++)P[(T=n.attributes[m]).name]=T.value;for(m in P)if(T=P[m],m!="children"){if(m=="dangerouslySetInnerHTML")w=T;else if(!(m in A)){if(m=="value"&&"defaultValue"in A||m=="checked"&&"defaultChecked"in A)continue;co(n,m,null,T,l)}}for(m in A)T=A[m],m=="children"?S=T:m=="dangerouslySetInnerHTML"?b=T:m=="value"?O=T:m=="checked"?L=T:h&&typeof T!="function"||P[m]===T||co(n,m,T,P[m],l);if(b)h||w&&(b.__html===w.__html||b.__html===n.innerHTML)||(n.innerHTML=b.__html),e.__k=[];else if(w&&(n.innerHTML=""),Sh(n,Uo(S)?S:[S],e,i,s,H=="foreignObject"?"http://www.w3.org/1999/xhtml":l,u,f,u?u[0]:i.__k&&gr(i,0),h,p),u!=null)for(m=u.length;m--;)vl(u[m]);h||(m="value",H=="progress"&&O==null?n.removeAttribute("value"):O!==void 0&&(O!==n[m]||H=="progress"&&!O||H=="option"&&O!==P[m])&&co(n,m,O,P[m],l),m="checked",L!==void 0&&L!==n[m]&&co(n,m,L,P[m],l))}return n}function bl(n,e,i){try{if(typeof n=="function"){var s=typeof n.__u=="function";s&&n.__u(),s&&e==null||(n.__u=n(e))}else n.current=e}catch(l){Ut.__e(l,i)}}function Mh(n,e,i){var s,l;if(Ut.unmount&&Ut.unmount(n),(s=n.ref)&&(s.current&&s.current!==n.__e||bl(s,null,e)),(s=n.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(u){Ut.__e(u,e)}s.base=s.__P=null}if(s=n.__k)for(l=0;l<s.length;l++)s[l]&&Mh(s[l],e,i||typeof n.type!="function");i||vl(n.__e),n.__c=n.__=n.__e=void 0}function zg(n,e,i){return this.constructor(n,i)}function Bn(n,e,i){var s,l,u,f;e==document&&(e=document.documentElement),Ut.__&&Ut.__(n,e),l=(s=typeof i=="function")?null:i&&i.__k||e.__k,u=[],f=[],yl(e,n=(!s&&i||e).__k=tn(Le,null,[n]),l||bs,bs,e.namespaceURI,!s&&i?[i]:l?null:e.firstChild?Ts.call(e.childNodes):null,u,!s&&i?i:l?l.__e:e.firstChild,s,f),Th(u,n,f)}function Lh(n,e){Bn(n,e,Lh)}function Bg(n,e,i){var s,l,u,f,h=Ji({},n.props);for(u in n.type&&n.type.defaultProps&&(f=n.type.defaultProps),e)u=="key"?s=e[u]:u=="ref"?l=e[u]:h[u]=e[u]===void 0&&f!==void 0?f[u]:e[u];return arguments.length>2&&(h.children=arguments.length>3?Ts.call(arguments,2):i),hs(n.type,h,s||n.key,l||n.ref,null)}function Ug(n,e){var i={__c:e="__cC"+_h++,__:n,Consumer:function(s,l){return s.children(l)},Provider:function(s){var l,u;return this.getChildContext||(l=new Set,(u={})[e]=this,this.getChildContext=function(){return u},this.componentWillUnmount=function(){l=null},this.shouldComponentUpdate=function(f){this.props.value!==f.value&&l.forEach(function(h){h.__e=!0,tl(h)})},this.sub=function(f){l.add(f);var h=f.componentWillUnmount;f.componentWillUnmount=function(){l&&l.delete(f),h&&h.call(f)}}),s.children}};return i.Provider.__=i.Consumer.contextType=i}Ts=wh.slice,Ut={__e:function(n,e,i,s){for(var l,u,f;e=e.__;)if((l=e.__c)&&!l.__)try{if((u=l.constructor)&&u.getDerivedStateFromError!=null&&(l.setState(u.getDerivedStateFromError(n)),f=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(n,s||{}),f=l.__d),f)return l.__E=l}catch(h){n=h}throw n}},yh=0,Ei.prototype.setState=function(n,e){var i;i=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ji({},this.state),typeof n=="function"&&(n=n(Ji({},i),this.props)),n&&Ji(i,n),n!=null&&this.__v&&(e&&this._sb.push(e),tl(this))},Ei.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),tl(this))},Ei.prototype.render=Le,Rn=[],bh=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Za=function(n,e){return n.__v.__b-e.__v.__b},Ao.__r=0,xh=/(PointerCapture)$|Capture$/i,ml=0,Ja=Hu(!1),Qa=Hu(!0),_h=0;var $g=0;function y(n,e,i,s,l,u){e||(e={});var f,h,p=e;if("ref"in p)for(h in p={},e)h=="ref"?f=e[h]:p[h]=e[h];var m={type:n,props:p,key:i,ref:f,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--$g,__i:-1,__u:0,__source:l,__self:u};if(typeof n=="function"&&(f=n.defaultProps))for(h in f)p[h]===void 0&&(p[h]=f[h]);return Ut.vnode&&Ut.vnode(m),m}var bn,le,za,zu,mr=0,Nh=[],de=Ut,Bu=de.__b,Uu=de.__r,$u=de.diffed,ju=de.__c,Vu=de.unmount,Yu=de.__;function xr(n,e){de.__h&&de.__h(le,n,mr||e),mr=0;var i=le.__H||(le.__H={__:[],__h:[]});return n>=i.__.length&&i.__.push({}),i.__[n]}function rt(n){return mr=1,xl(Eh,n)}function xl(n,e,i){var s=xr(bn++,2);if(s.t=n,!s.__c&&(s.__=[i?i(e):Eh(void 0,e),function(h){var p=s.__N?s.__N[0]:s.__[0],m=s.t(p,h);p!==m&&(s.__N=[m,s.__[1]],s.__c.setState({}))}],s.__c=le,!le.u)){var l=function(h,p,m){if(!s.__c.__H)return!0;var b=s.__c.__H.__.filter(function(S){return!!S.__c});if(b.every(function(S){return!S.__N}))return!u||u.call(this,h,p,m);var w=s.__c.props!==h;return b.forEach(function(S){if(S.__N){var T=S.__[0];S.__=S.__N,S.__N=void 0,T!==S.__[0]&&(w=!0)}}),u&&u.call(this,h,p,m)||w};le.u=!0;var u=le.shouldComponentUpdate,f=le.componentWillUpdate;le.componentWillUpdate=function(h,p,m){if(this.__e){var b=u;u=void 0,l(h,p,m),u=b}f&&f.call(this,h,p,m)},le.shouldComponentUpdate=l}return s.__N||s.__}function qt(n,e){var i=xr(bn++,3);!de.__s&&_l(i.__H,e)&&(i.__=n,i.i=e,le.__H.__h.push(i))}function Ms(n,e){var i=xr(bn++,4);!de.__s&&_l(i.__H,e)&&(i.__=n,i.i=e,le.__h.push(i))}function ei(n){return mr=5,$o(function(){return{current:n}},[])}function Dh(n,e,i){mr=6,Ms(function(){return typeof n=="function"?(n(e()),function(){return n(null)}):n?(n.current=e(),function(){return n.current=null}):void 0},i==null?i:i.concat(n))}function $o(n,e){var i=xr(bn++,7);return _l(i.__H,e)&&(i.__=n(),i.__H=e,i.__h=n),i.__}function Ph(n,e){return mr=8,$o(function(){return n},e)}function Oh(n){var e=le.context[n.__c],i=xr(bn++,9);return i.c=n,e?(i.__==null&&(i.__=!0,e.sub(le)),e.props.value):n.__}function Ah(n,e){de.useDebugValue&&de.useDebugValue(e?e(n):n)}function Ih(){var n=xr(bn++,11);if(!n.__){for(var e=le.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var i=e.__m||(e.__m=[0,0]);n.__="P"+i[0]+"-"+i[1]++}return n.__}function jg(){for(var n;n=Nh.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Co),n.__H.__h.forEach(el),n.__H.__h=[]}catch(e){n.__H.__h=[],de.__e(e,n.__v)}}de.__b=function(n){le=null,Bu&&Bu(n)},de.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),Yu&&Yu(n,e)},de.__r=function(n){Uu&&Uu(n),bn=0;var e=(le=n.__c).__H;e&&(za===le?(e.__h=[],le.__h=[],e.__.forEach(function(i){i.__N&&(i.__=i.__N),i.i=i.__N=void 0})):(e.__h.forEach(Co),e.__h.forEach(el),e.__h=[],bn=0)),za=le},de.diffed=function(n){$u&&$u(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(Nh.push(e)!==1&&zu===de.requestAnimationFrame||((zu=de.requestAnimationFrame)||Vg)(jg)),e.__H.__.forEach(function(i){i.i&&(i.__H=i.i),i.i=void 0})),za=le=null},de.__c=function(n,e){e.some(function(i){try{i.__h.forEach(Co),i.__h=i.__h.filter(function(s){return!s.__||el(s)})}catch(s){e.some(function(l){l.__h&&(l.__h=[])}),e=[],de.__e(s,i.__v)}}),ju&&ju(n,e)},de.unmount=function(n){Vu&&Vu(n);var e,i=n.__c;i&&i.__H&&(i.__H.__.forEach(function(s){try{Co(s)}catch(l){e=l}}),i.__H=void 0,e&&de.__e(e,i.__v))};var Ku=typeof requestAnimationFrame=="function";function Vg(n){var e,i=function(){clearTimeout(s),Ku&&cancelAnimationFrame(e),setTimeout(n)},s=setTimeout(i,100);Ku&&(e=requestAnimationFrame(i))}function Co(n){var e=le,i=n.__c;typeof i=="function"&&(n.__c=void 0,i()),le=e}function el(n){var e=le;n.__c=n.__(),le=e}function _l(n,e){return!n||n.length!==e.length||e.some(function(i,s){return i!==n[s]})}function Eh(n,e){return typeof e=="function"?e(n):e}const Yg="/assets/elf-icon-CuriXRkE.svg",Kg={getFileIcon:(n,e)=>{if(n==="folder")return"📁";switch(e.split(".").pop().toLowerCase()){case"pdf":return"📕";case"doc":case"docx":return"📘";case"txt":return"📄";case"xls":case"xlsx":return"📊";case"ppt":case"pptx":return"📑";case"jpg":case"jpeg":case"png":case"gif":case"bmp":return"🖼️";case"flac":case"mp3":case"wav":case"ogg":return"🎵";case"mp4":case"avi":case"mkv":return"🎬";case"zip":case"rar":case"7z":return"📦";case"pkg":return"🍺";case"js":case"jsx":case"ts":case"tsx":return"⚡";case"html":return"🌐";case"css":return"🎨";case"json":return"📋";case"bin":case"elf":case"self":case"sprx":case"prx":return y("img",{src:Yg,alt:"ELF",style:{width:"48px",height:"48px"}});default:return"📄"}}},Xg=({window:n,children:e,isActive:i,isDarkMode:s,onClose:l,onFocus:u,onDragStart:f,onMinimize:h})=>{const[p,m]=rt(!1),[b,w]=rt(!1),[S,T]=rt({x:0,y:0}),[O,L]=rt({x:0,y:0,width:0,height:0}),[P,A]=rt(!1),H=ei(null),X=ei({x:0,y:0});qt(()=>{A("ontouchstart"in n||navigator.maxTouchPoints>0)},[]);const G=it=>{if(it.target.closest(".window-header")&&!it.target.closest(".window-controls")){const tt=it.touches[0];X.current={x:tt.clientX,y:tt.clientY},m(!0),f();const st=H.current.getBoundingClientRect();T({x:tt.clientX-st.left,y:tt.clientY-st.top})}},K=it=>{if(p){const tt=it.touches[0],st=H.current.getBoundingClientRect(),R=document.querySelector(".desktop-content").getBoundingClientRect();let I=tt.clientX-S.x,C=tt.clientY-S.y;H.current.style.left=`${I}px`,H.current.style.top=`${C}px`,ht(st,R)}},Y=()=>{m(!1),w(!1)},Q=it=>{if(it.target.closest(".window-header")&&!it.target.closest(".window-controls")){m(!0),f();const tt=H.current.getBoundingClientRect();T({x:it.clientX-tt.left,y:it.clientY-tt.top})}},q=it=>{it.stopPropagation(),w(!0);const tt=H.current.getBoundingClientRect();L({x:it.clientX,y:it.clientY,width:tt.width,height:tt.height})},ht=(it,tt)=>{let st=parseInt(H.current.style.left),R=parseInt(H.current.style.top),I=it.width,C=it.height;I>tt.width&&(I=tt.width,H.current.style.width=`${I}px`),C>tt.height&&(C=tt.height,H.current.style.height=`${C}px`),st=Math.max(0,Math.min(st,tt.width-I)),R=Math.max(0,Math.min(R,tt.height-C)),H.current.style.left=`${st}px`,H.current.style.top=`${R}px`};return qt(()=>{const it=st=>{const R=H.current.getBoundingClientRect(),I=document.querySelector(".desktop-content").getBoundingClientRect();if(p){let C=st.clientX-S.x,ft=st.clientY-S.y;H.current.style.left=`${C}px`,H.current.style.top=`${ft}px`,ht(R,I)}else if(b){let C=O.width+(st.clientX-O.x),ft=O.height+(st.clientY-O.y);C=Math.max(200,Math.min(C,I.width)),ft=Math.max(150,Math.min(ft,I.height)),H.current.style.width=`${C}px`,H.current.style.height=`${ft}px`,ht(R,I)}},tt=()=>{m(!1),w(!1)};return(p||b)&&(document.addEventListener("mousemove",it),document.addEventListener("mouseup",tt)),()=>{document.removeEventListener("mousemove",it),document.removeEventListener("mouseup",tt)}},[p,b,S,O]),qt(()=>{const it=new ResizeObserver(()=>{var I,C;const st=(I=H.current)==null?void 0:I.getBoundingClientRect(),R=(C=document.querySelector(".desktop-content"))==null?void 0:C.getBoundingClientRect();st&&R&&ht(st,R)}),tt=document.querySelector(".desktop-content");return tt&&it.observe(tt),()=>{it.disconnect()}},[]),y("div",{ref:H,"data-window-id":n.id,className:`window ${i?"active":""} ${s?"dark":""} 
 ${b?"resizing":""} ${P?"touch-device":""} ${n.app==="PlayStation"?"console":""}`,style:{left:n.position.x,top:n.position.y,width:n.size.width,height:n.size.height,display:n.minimized?"none":"flex"},onMouseDown:u,onTouchStart:G,onTouchMove:K,onTouchEnd:Y,children:[y("div",{className:"window-header",onMouseDown:Q,children:[y("div",{className:"window-title",children:[y("span",{className:"window-icon icon",children:n.icon}),y("span",{className:"window-title-text",children:n.title})]}),y("div",{className:"window-controls",children:P?y(Le,{children:[y("button",{className:"window-minimize touch",onClick:h,children:"−"}),y("button",{className:"window-close touch",onClick:l,children:"×"})]}):y(Le,{children:[y("button",{className:"window-minimize",onClick:h,children:"−"}),y("button",{className:"window-close",onClick:l,children:"×"})]})})]}),y("div",{className:"window-content",children:e}),!P&&y("div",{className:"window-resize",onMouseDown:q})]})},Gg=({windows:n,activeWindow:e,isDarkMode:i,onWindowClick:s,onThemeToggle:l})=>y("div",{className:`taskbar ${i?"dark":""}`,children:[" ",y("div",{className:"taskbar-windows",children:[" ",n.map(u=>y("button",{className:`taskbar-window-button ${e===u.id?"active":""}`,onClick:()=>s(u.id,e===u.id),children:[" ",y("span",{className:"taskbar-window-icon icon",children:u.icon})," ",y("span",{className:"taskbar-window-title",children:u.title})," "]},u.id))," "]})," ",y("button",{className:"taskbar-theme-toggle icon",onClick:l,children:[" ",i?"☀️":"🌙"," "]})," "]}),oe="/".endsWith("/")?"/".slice(0,-1):"/";class At{static async fetch(e){try{const i=await fetch(`${oe}${e}`);if(!i.ok)throw new Error("Network response was not ok");return await i.json()}catch(i){throw console.error("API Error:",i),i}}static async getSystemInfo(){return this.fetch("/api/system/info")}static async getStorageInfo(){return this.fetch("/api/storage/info")}static async getProcessList(){return this.fetch("/api/process/list")}static async executeScript(e){try{const i=await fetch(`${oe}/api/hscript`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({script:e})});if(!i.ok)throw new Error("Network response was not ok");return await i.json()}catch(i){throw console.error("Script execution error:",i),i}}static async executeScriptStream(e,i){try{const l=(await fetch(`${oe}/api/hscript`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({script:e})})).body.getReader();for(;;){const{done:u,value:f}=await l.read();if(u)break;const h=new TextDecoder().decode(f);i(h)}}catch(s){throw s}}static formatBytes(e){if(e===0)return"0 B";const i=1024,s=["B","KB","MB","GB","TB"],l=Math.floor(Math.log(e)/Math.log(i));return`${(e/Math.pow(i,l)).toFixed(1)} ${s[l]}`}static getTitleImageUrl(e){return`${oe}/api/title/image/${e}`}static async getSystemStatus(){return this.fetch("/api/system/status")}static async getSystemStats(){return this.fetch("/api/system/stats")}static async getAppList(){return this.fetch("/api/app/list")}static async runApp(e){try{return await(await fetch(`${oe}/api/app/run/${e}`)).json()}catch(i){throw console.error("App run error:",i),i}}static async getProfileList(){return this.fetch("/api/profile/list")}static getProfileImageUrl(e){return`${oe}/api/profile/image/${e}`}static async downloadBackup(e=null){const i=e?`${oe}/api/save/backup/${e}`:`${oe}/api/save/backup`;window.location.href=i}static async getTaskList(){return this.fetch("/api/task/list")}static async getTaskDetail(e){try{const i=await fetch(`${oe}/api/task/detail`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});if(!i.ok)throw new Error("Network response was not ok");return await i.json()}catch(i){throw console.error("Task detail error:",i),i}}static async updateTask(e,i){try{const l=await(await fetch(`${oe}/api/task/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,...i})})).json();if(l.error)throw new Error(l.error);return{id:e,...i}}catch(s){throw console.error("Task update error:",s),s}}static async createTask(e){try{const i=await fetch(`${oe}/api/task/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(!i.ok)throw new Error("Network response was not ok");return await i.json()}catch(i){throw console.error("Task create error:",i),i}}static async deleteTask(e){try{const i=await fetch(`${oe}/api/task/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});if(!i.ok)throw new Error("Network response was not ok");return await i.json()}catch(i){throw console.error("Task delete error:",i),i}}static async streamTaskLog(e,i){try{const l=(await fetch(`${oe}/api/task/log`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).body.getReader();for(;;){const{done:u,value:f}=await l.read();if(u)break;const h=new TextDecoder().decode(f);i(h)}}catch(s){throw console.error("Task log stream error:",s),s}}static async getTaskStatus(){try{const e=await fetch(`${oe}/api/task/status`);if(!e.ok)throw new Error("Network response was not ok");return await e.json()}catch(e){throw console.error("Task status error:",e),e}}static async listFiles(e){try{const i=await fetch(`${oe}/api/fs/list`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e})});if(!i.ok)throw new Error("Network response was not ok");return(await i.json()).map(l=>({id:`${l.name}-${l.mtime}`,name:l.name,type:l.isDirectory?"folder":"file",size:l.size,mtime:l.mtime,permission:l.mode.toString(8),isDirectory:l.isDirectory}))}catch(i){throw console.error("Failed to list files:",i),i}}static async downloadFiles(e){try{const i=btoa(e.join(",")),s=`${oe}/api/fs/download/${i}`;window.open(s,"_blank")}catch(i){throw console.error("Download error:",i),i}}static async renameFile(e,i){try{const s=await fetch(`${oe}/api/fs/rename`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,name:i})});if(!s.ok)throw new Error("Network response was not ok");return await s.json()}catch(s){throw console.error("Rename error:",s),s}}static async uploadFile(e,i,s){return new Promise((l,u)=>{const f=new XMLHttpRequest,h=new FormData;h.append("file",i),f.open("POST",`${oe}/api/fs/upload/${e}`,!0),f.upload.onprogress=p=>{if(p.lengthComputable&&s){const m=p.loaded/p.total*100;s(m)}},f.onload=()=>{f.status>=200&&f.status<300?l(JSON.parse(f.responseText)):u(new Error("Network response was not ok"))},f.onerror=()=>u(new Error("Network error")),f.send(h)})}static async executePayload(e){try{const i=await fetch(`${oe}/api/fs/payload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e})});if(!i.ok)throw new Error("Network response was not ok");return await i.json()}catch(i){throw console.error("Execute payload error:",i),i}}static async uploadPkg(e,i){return new Promise((s,l)=>{if(e.size<65536){console.error("The file is not big enough.");return}const f=e.slice(0,65536),h=new FileReader;h.onload=p=>{const m=new DataView(p.target.result),b=m.getUint32(0,!1);let w=0n;const S=[];if(b===2135312712)w=parseInt(m.getBigInt64(88,!0)),S.push(e.slice(w,e.size),e.slice(0,w));else if(b===2135117396)S.push(e);else{console.error("Dosya yeterince büyük değil.");return}const T=new XMLHttpRequest,O=new FormData;O.append("file",new Blob(S,{type:e.type})),T.open("POST",`${oe}/api/package/upload?size=${e.size}&offset=${w}`,!0),T.upload.onprogress=L=>{if(L.lengthComputable&&i){const P=L.loaded/L.total*100;i(P)}},T.onload=()=>{T.status>=200&&T.status<300?s(JSON.parse(T.responseText)):l(new Error("Network response was not ok"))},T.onerror=()=>l(new Error("Network error")),T.send(O)},h.readAsArrayBuffer(f)})}static async installPackageFromUrl(e){try{const i=await fetch(`${oe}/api/package/install`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e})});if(!i.ok){const s=await i.json();throw new Error(s.error||"Network response was not ok")}return await i.json()}catch(i){throw console.error("Package install error:",i),i}}static async getMediaList(){try{const e=await fetch(`${oe}/api/media/list`);if(!e.ok)throw new Error("Network response was not ok");return await e.json()}catch(e){throw console.error("Media list error:",e),e}}static getMediaUrl(e){const i=encodeURIComponent(e);return`${oe}/api/media/${i}`}static getMediaThumbnailUrl(e){const i=encodeURIComponent(e);return`${oe}/api/media/thumbnails/${i}`}static isVideo(e){return e.toLowerCase().endsWith(".mp4")||e.toLowerCase().endsWith(".webm")||e.toLowerCase().endsWith(".mov")}static getStreamUrl(e){return`${oe}/api/fs/stream/${e}`}}const qg=({isDarkMode:n})=>{const[e,i]=rt(null),[s,l]=rt(null),[u,f]=rt(!0),[h,p]=rt(new Set),[m,b]=rt(0);qt(()=>{const L=setInterval(()=>{b(P=>P+1)},1e3);return()=>clearInterval(L)},[]);const w=async()=>{try{const L=await At.getSystemStatus(),P=new Set;e&&(Math.abs(L.cpu.frequency-e.cpu.frequency)>5e7&&P.add("frequency"),Math.abs(L.cpu.temperature-e.cpu.temperature)>.5&&P.add("temperature"),Math.abs(L.cpu.socSensorTemperature-e.cpu.socSensorTemperature)>.5&&P.add("socTemp")),p(P),i(L),l(null),setTimeout(()=>p(new Set),1e3)}catch(L){console.error("System info alınamadı:",L),l("Failed to load system information")}finally{f(!1)}};qt(()=>{w();const L=setInterval(w,5e3);return()=>clearInterval(L)},[]);const S=L=>{if(!L)return"--:--:--";const A=Math.floor(Date.now()/1e3)-L,H=Math.floor(A/3600),X=Math.floor(A%3600/60),G=A%60,K=Y=>String(Y).padStart(2,"0");return`${K(H)}:${K(X)}:${K(G)}`},T=L=>{switch(L){case 0:return"6CPU";case 1:return"7CPU (LOW)";case 5:return"7CPU (NORMAL)";default:return"Unknown"}},O=(L,P)=>{let A="info-value";return h.has(L)&&(A+=" updated"),L.includes("temperature")&&P>45&&(A+=" warning"),A};return!e||s?y("div",{className:`system-info ${n?"dark":""}`,children:[y("div",{className:"system-info-header",children:"System Information"}),y("div",{className:"system-info-error",children:[y("div",{className:"error-icon",children:"⚠️"}),y("div",{className:"error-message",children:s||"Waiting for data..."}),y("div",{className:"error-detail",children:"Unable to retrieve system information. Please check your connection."})]})]}):y("div",{className:`system-info ${n?"dark":""}`,children:[y("div",{className:"system-info-header",children:"System Status"}),y("div",{className:"system-info-content",children:[e.app&&e.app.titleID&&y("div",{className:"info-section",children:[y("div",{className:"section-title",children:"Running App"}),y("div",{className:"game-info",children:[y("div",{className:"game-image",children:y("img",{src:At.getTitleImageUrl(e.app.titleID),alt:e.app.titleName||e.app.titleID,onError:L=>L.target.style.display="none"})}),y("div",{className:"game-details",children:[y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"Title"}),y("div",{className:"info-value",children:e.app.titleName||e.app.titleID})]}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"Process"}),y("div",{className:"info-value",children:[e.app.comm," (",e.app.pid,")"]})]}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"Uptime"}),y("div",{className:"info-value uptime",children:S(e.app.start)})]})]})]})]}),y("div",{className:"info-section",children:[y("div",{className:"section-title",children:"System Status"}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"Mode"}),y("div",{className:"info-value",children:T(e.cpu.mode)})]}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"Frequency"}),y("div",{className:O("frequency",e.cpu.frequency),children:[(e.cpu.frequency/1e6).toFixed(0)," MHz"]})]}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"CPU Temp"}),y("div",{className:O("temperature",e.cpu.temperature),children:[e.cpu.temperature.toFixed(1),"°C"]})]}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"SoC Temp"}),y("div",{className:O("socTemp",e.cpu.socSensorTemperature),children:[e.cpu.socSensorTemperature.toFixed(1),"°C"]})]})]})]})]})};let hr=null;const Fh=({isDarkMode:n,showPanel:e,onClose:i})=>{const[s,l]=rt(null),[u,f]=rt(null),[h,p]=rt(!0),m=ei(null),b=async()=>{if(hr){l(hr),p(!1);return}try{const S=await At.getSystemInfo();hr=S,l(S),f(null),clearTimeout(m.current)}catch(S){console.error("System bilgisi alınamadı:",S),f("Failed to load system information"),e&&(m.current=setTimeout(()=>{p(!0),b()},5e3))}finally{p(!1)}};qt(()=>(e&&!hr?b():e&&hr&&(l(hr),p(!1)),()=>{m.current&&clearTimeout(m.current)}),[e]);const w=S=>{if(!S)return"Unknown";const O=Math.floor(Date.now()/1e3)-S,L=O%60,P=Math.floor(O/60)%60,A=Math.floor(O/3600)%24,H=Math.floor(O/86400);return H>0?`${H}d ${A}h ${P}m ${L}s`:A>0?`${A}h ${P}m ${L}s`:P>0?`${P}m ${L}s`:`${L}s`};return e?y("div",{className:`system-details-overlay ${n?"dark":""}`,children:y("div",{className:"system-details-panel",children:[y("div",{className:"system-details-header",children:[y("span",{children:"System Information"}),y("button",{onClick:i,children:"×"})]}),h?y("div",{className:"system-details-loading",children:"Loading system information..."}):u?y("div",{className:"system-details-error",children:[u,y("button",{className:"retry-button",onClick:()=>{p(!0),b()},children:"Try Again"})]}):s&&y("div",{className:"system-details-content",children:[y("div",{className:"detail-group",children:[y("h3",{children:"Hardware Information"}),y("div",{className:"detail-item",children:[y("span",{children:"Model Name:"}),y("span",{children:s.modelName})]}),y("div",{className:"detail-item",children:[y("span",{children:"Serial Number:"}),y("span",{children:s.serialNumber})]}),y("div",{className:"detail-item",children:[y("span",{children:"Hardware Model:"}),y("span",{children:s.hw_model})]}),y("div",{className:"detail-item",children:[y("span",{children:"Architecture:"}),y("span",{children:s.hw_machine})]})]}),y("div",{className:"detail-group",children:[y("h3",{children:"Software Information"}),y("div",{className:"detail-item",children:[y("span",{children:"Operating System:"}),y("span",{children:s.ostype})]}),y("div",{className:"detail-item",children:[y("span",{children:"SDK Version:"}),y("span",{children:s.sdk_version})]}),y("div",{className:"detail-item",children:[y("span",{children:"PS4 SDK:"}),y("span",{children:s.ps4_sdk_version})]}),y("div",{className:"detail-item",children:[y("span",{children:"Kernel Version:"}),y("span",{children:s.kernel_version})]}),y("div",{className:"detail-item",children:[y("span",{children:"Update Version:"}),y("span",{children:s.upd_version})]}),y("div",{className:"detail-item",children:[y("span",{children:"System Uptime:"}),y("span",{children:w(s.kernel_boot_time)})]})]})]})]})}):null},Zg=({isDarkMode:n})=>{const[e,i]=rt([]),[s,l]=rt(!0),[u,f]=rt(null),[h,p]=rt(null),[m,b]=rt(null),w=["NPXS40032","NPXS40037","NPXS40047","NPXS40053","NPXS40054","NPXS40056","NPXS40063","NPXS40071","NPXS40139","NPXS40144","NPXS40145","NPXS40148","NPXS40149","NPXS40150"];qt(()=>{(async()=>{try{const P=(await At.getAppList()).filter(A=>!w.includes(A.titleId)).sort((A,H)=>H.size-A.size);i(P),f(null)}catch(L){console.error("Apps yüklenemedi:",L),f("Failed to load applications")}finally{l(!1)}})()},[]);const S=O=>{p(O)},T=async O=>{try{const L=await At.runApp(O);b(L),setTimeout(()=>{b(null)},3e3)}catch{b({success:!1,message:"Error running application"})}};return y("div",{className:`applications ${n?"dark":""}`,children:s?y("div",{className:"applications-loading",children:"Loading applications..."}):u?y("div",{className:"applications-error",children:u}):y(Le,{children:[y("div",{className:"app-grid",children:e.map(O=>y("div",{className:"app-item",onClick:()=>S(O),children:[y("div",{className:"app-icon",children:y("img",{src:At.getTitleImageUrl(O.titleId),alt:O.titleName,onError:L=>{L.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',L.target.style.background="#2c3e50"}})}),y("div",{className:"app-name",children:O.titleName}),O.size!=0&&y("div",{className:"app-size",children:At.formatBytes(O.size)})]},O.titleId))}),h&&y("div",{className:"app-details-overlay",onClick:()=>p(null),children:y("div",{className:"app-details",onClick:O=>O.stopPropagation(),children:[y("div",{className:"app-details-header",children:[y("h2",{children:h.titleName}),y("button",{onClick:()=>p(null),children:"×"})]}),y("div",{className:"app-details-content",children:[y("div",{className:"app-details-icon",children:y("img",{src:At.getTitleImageUrl(h.titleId),alt:h.titleName,onError:O=>{O.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',O.target.style.background="#2c3e50"}})}),y("div",{className:"app-details-info",children:[y("div",{className:"detail-row",children:[y("span",{children:"Title ID:"}),y("span",{children:h.titleId})]}),h.size!=0&&y("div",{className:"detail-row",children:[y("span",{children:"Size:"}),y("span",{children:At.formatBytes(h.size)})]}),h.installTime!=null&&y("div",{className:"detail-row",children:[y("span",{children:"Install Date:"}),y("span",{children:new Date(h.installTime).toLocaleString()})]}),y("div",{className:"detail-actions",children:[y("button",{className:`run-button ${m?m.success?"success":"error":""}`,onClick:()=>T(h.titleId),children:"Run Application"}),m&&y("div",{className:`status-message ${m.success?"success":"error"}`,children:m.message})]})]})]})]})})]})})},Jg=({message:n,type:e="info",duration:i=3e3,onClose:s})=>{const[l,u]=rt(!0);return qt(()=>{const f=setTimeout(()=>{u(!1),setTimeout(()=>{s&&s()},300)},i);return()=>clearTimeout(f)},[i,s]),y("div",{className:`toast ${e} ${l?"visible":"hidden"}`,children:[y("div",{className:"toast-icon",children:[e==="success"&&"✓",e==="error"&&"✗",e==="warning"&&"⚠",e==="info"&&"ℹ"]}),y("div",{className:"toast-message",children:n}),y("button",{className:"toast-close",onClick:()=>u(!1),children:"×"})]})};class Qe{static init(){this.container||(this.container=document.createElement("div"),this.container.className="toast-container",document.body.appendChild(this.container),this.render())}static show(e,i="info",s=3e3){this.init();const l=this.nextId++;return this.toasts.push({id:l,message:e,type:i,duration:s}),this.render(),l}static success(e,i=3e3){return this.show(e,"success",i)}static error(e,i=3e3){return this.show(e,"error",i)}static warning(e,i=3e3){return this.show(e,"warning",i)}static info(e,i=3e3){return this.show(e,"info",i)}static dismiss(e){this.toasts=this.toasts.filter(i=>i.id!==e),this.render()}static render(){if(!this.container)return;document.body.classList.contains("dark")||document.documentElement.classList.contains("dark")||localStorage.getItem("theme")==="dark"?this.container.classList.add("dark"):this.container.classList.remove("dark"),Bn(y("div",{children:this.toasts.map(i=>y(Jg,{message:i.message,type:i.type,duration:i.duration,onClose:()=>this.dismiss(i.id)},i.id))}),this.container)}}Ht(Qe,"container",null),Ht(Qe,"toasts",[]),Ht(Qe,"nextId",1);const Qg=({contextMenu:n,setContextMenu:e,isDarkMode:i=!0})=>{const[s,l]=rt("/"),[u,f]=rt(["/"]),[h,p]=rt(0),[m,b]=rt([]),[w,S]=rt(!0),[T,O]=rt(null),[L,P]=rt({isSelecting:!1,start:{x:0,y:0},end:{x:0,y:0}}),[A,H]=rt(new Set),[X,G]=rt(!1),[K,Y]=rt({id:null,time:0}),[Q,q]=rt(-1),[ht,it]=rt(!1),[tt,st]=rt(""),[R,I]=rt(null),[C,ft]=rt(null),[Rt,jt]=rt(null),[$,gt]=rt(!1),[lt,Tt]=rt(null),[It,zt]=rt(!1),[Et,mt]=rt(null),[St,Ft]=rt(new Set),Wt=ei(null),ii=async z=>{try{S(!0),O(null);const ot=await At.listFiles(z);b(ot)}catch(ot){console.error("Failed to load files:",ot),O("Failed to load files")}finally{S(!1)}};qt(()=>{ii(s)},[s]),qt(()=>{const z=m.filter(ot=>Ri(ot.name)).map(ot=>ot.id);Ft(new Set(z))},[m]);const $t=z=>{l(z.target.value)},j=z=>{z.key==="Enter"&&xt(s)},xt=async z=>{const ot=z.endsWith("/")?z:z+"/";if(e({...n,show:!1}),ot!==u[h]){const yt=u.slice(0,h+1);f([...yt,ot]),p(yt.length)}l(ot)},Vt=()=>{h>0&&(p(h-1),l(u[h-1]))},kt=()=>{h<u.length-1&&(p(h+1),l(u[h+1]))},Pt=()=>{const z=s.split("/").slice(0,-2).join("/")+"/";z!==s&&xt(z)};qt(()=>{const z=ot=>{var yt;if(!(!((yt=Wt.current)!=null&&yt.contains(document.activeElement))||document.activeElement.tagName==="INPUT"||document.activeElement.tagName==="TEXTAREA"))switch(ot.key){case"Tab":ot.preventDefault(),q(_t=>{const Kt=ot.shiftKey?_t<=0?m.length-1:_t-1:_t>=m.length-1?0:_t+1;H(new Set([m[Kt].id]));const te=Wt.current.querySelector(`[data-id="${m[Kt].id}"]`);return te==null||te.scrollIntoView({block:"nearest"}),Kt});break;case"Enter":if(Q>=0){const _t=m[Q];vi(_t)}break}};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[m,Q]),qt(()=>{const z=yt=>{if(L.isSelecting){const _t=Wt.current.getBoundingClientRect();let Kt=yt.clientX-_t.left,te=yt.clientY-_t.top;Kt=Math.max(0,Math.min(Kt,_t.width)),te=Math.max(0,Math.min(te,_t.height)),P(ci=>({...ci,end:{x:Kt,y:te}})),me(Kt,te,yt.ctrlKey)}},ot=()=>{L.isSelecting&&P(yt=>({...yt,isSelecting:!1}))};return L.isSelecting&&(document.addEventListener("mousemove",z),document.addEventListener("mouseup",ot)),()=>{document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",ot)}},[L.isSelecting]);const Lt=z=>{if(!z.target.closest(".context-menu")&&(z.preventDefault(),!z.target.closest(".file-item")&&!(z.target.classList.contains("file-grid")&&z.clientX>=z.target.getBoundingClientRect().right-20)&&(e({...n,show:!1}),z.button===0))){const ot=Wt.current.getBoundingClientRect(),yt=z.clientX-ot.left,_t=z.clientY-ot.top;P({isSelecting:!0,start:{x:yt,y:_t},end:{x:yt,y:_t}}),!z.ctrlKey&&!z.target.closest(".file-item")&&H(new Set),G(!1)}},me=(z,ot,yt)=>{const _t=Wt.current.getBoundingClientRect();z=Math.max(0,Math.min(z,_t.width)),ot=Math.max(0,Math.min(ot,_t.height));const Kt={left:Math.min(L.start.x,z),right:Math.max(L.start.x,z),top:Math.min(L.start.y,ot),bottom:Math.max(L.start.y,ot)},te=Wt.current.getElementsByClassName("file-item"),ci=new Set(yt?A:[]);Array.from(te).forEach(_e=>{const ui=_e.getBoundingClientRect(),Ne={left:ui.left-_t.left,right:ui.right-_t.left,top:ui.top-_t.top,bottom:ui.bottom-_t.top};if(!(Ne.right<Kt.left||Ne.left>Kt.right||Ne.bottom<Kt.top||Ne.top>Kt.bottom)){const ni=_e.getAttribute("data-id");ni&&ci.add(ni)}}),H(ci)},Ae=z=>{if(L.isSelecting){const ot=Wt.current.getBoundingClientRect(),yt=z.clientX-ot.left,_t=z.clientY-ot.top,Kt=Math.abs(L.end.x-L.start.x),te=Math.abs(L.end.y-L.start.y);(Kt>=5||te>=5)&&me(yt,_t,z.ctrlKey)}P(ot=>({...ot,isSelecting:!1})),setTimeout(()=>G(!1),0)},nn=(z,ot)=>{if(z.stopPropagation(),!X){const yt=new Date().getTime();if(K.id===ot.id&&yt-K.time<300){vi(ot),Y({id:null,time:0});return}if(Y({id:ot.id,time:yt}),e({...n,show:!1}),z.ctrlKey||z.metaKey){const _t=new Set(A);A.has(ot.id)?_t.delete(ot.id):_t.add(ot.id),H(_t)}else if(z.shiftKey&&A.size>0){const _t=Array.from(A)[A.size-1],Kt=m.findIndex(Ne=>Ne.id===_t),te=m.findIndex(Ne=>Ne.id===ot.id),ci=Math.min(Kt,te),_e=Math.max(Kt,te),ui=new Set(A);for(let Ne=ci;Ne<=_e;Ne++)ui.add(m[Ne].id);H(ui)}else H(new Set([ot.id]))}},vi=z=>{if(z.isDirectory){e({...n,show:!1});const ot=s+z.name+"/";xt(ot)}else Wi(z.name)?Hi(z):Ri(z.name)?F(z):console.log("Open File:",z.name)},$e=z=>{if(!z)return!1;const ot=[".mp3",".wav",".ogg",".flac",".aac",".m4a"],yt=z.toLowerCase();return ot.some(_t=>yt.endsWith(_t))},yi=z=>{if(!z)return!1;const ot=[".mp4",".webm",".mkv",".avi",".mov",".wmv",".mpg",".mpeg",".m4v"],yt=z.toLowerCase();return ot.some(_t=>yt.endsWith(_t))},Ri=z=>{if(!z)return!1;const ot=[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".ico"],yt=z.toLowerCase();return ot.some(_t=>yt.endsWith(_t))},Wi=z=>$e(z)||yi(z),Hi=z=>{Tt(z),gt(!0)},F=z=>{mt(z),zt(!0)},Z=()=>{gt(!1),Tt(null)},at=()=>{zt(!1),mt(null)},pt=()=>{if(lt){const z=s+lt.name;At.downloadFiles([z])}},re=(z,ot)=>{L.isSelecting||(z.preventDefault(),A.has(ot.id)||H(new Set([ot.id])),e({show:!0,x:z.pageX,y:z.pageY,item:ot,isBackground:!1}))},Yt=z=>{const ot=Array.from(A).map(_t=>{const Kt=m.find(te=>te.id===_t);return s+Kt.name}),yt=ot.length>0?ot:[s+z.name];try{At.downloadFiles(yt)}catch(_t){console.error("Download failed:",_t)}e({...n,show:!1})},Ie=z=>{const ot=Array.from(A).map(Kt=>m.find(te=>te.id===Kt)),yt=ot.map(Kt=>`• ${Kt.name}`).join(`
`),_t=ot.length>1?`Are you sure you want to delete these ${ot.length} items?

${yt}`:`Are you sure you want to delete "${z.name}"?`;if(window.confirm(_t)){const Kt=m.filter(te=>!A.has(te.id));b(Kt),H(new Set),console.log("Deleted items:",ot.map(te=>te.name))}e({...n,show:!1})},Ct=z=>{if(z.preventDefault(),z.target.classList.contains("file-manager")||z.target.classList.contains("file-grid"))if(A.size>0){const ot=m.find(yt=>yt.id===Array.from(A)[0]);e({show:!0,x:z.pageX,y:z.pageY,isBackground:!1,item:ot})}else e({show:!0,x:z.pageX,y:z.pageY,isBackground:!0,item:null})},rn=()=>{const ot={id:Math.max(...m.map(yt=>yt.id))+1,name:"New Folder",type:"folder"};b([...m,ot]),e({...n,show:!1})},Ee=z=>{z.preventDefault(),z.dataTransfer.dropEffect="copy"},Dt=async z=>{z.preventDefault();const ot=Array.from(z.dataTransfer.files);if(ot.length>0){ft(0),jt(null);try{for(const yt of ot)await At.uploadFile(s+yt.name,yt,_t=>{ft(_t)});ft(100),setTimeout(()=>ft(null),3e3),ii(s)}catch(yt){console.error("Upload failed:",yt),jt(yt.message)}}},ue=z=>{I(z.id),st(z.name),it(!0),e({...n,show:!1})},zi=async z=>{try{tt&&tt!==z.name&&(await At.renameFile(s+z.name,tt),ii(s))}catch(ot){console.error("Rename failed:",ot)}finally{it(!1),I(null)}},xe=async z=>{try{const ot=await At.executePayload(s+z.name);ot.success?Qe.success("Payload executed successfully"):Qe.error(ot.message||"Failed to execute payload")}catch(ot){console.error("Execute payload failed:",ot),Qe.error("Network error while executing payload")}e({...n,show:!1})},li=async z=>{try{const ot=Array.from(A).map(_t=>m.find(te=>te.id===_t)).filter(_t=>_t&&_t.name.toLowerCase().endsWith(".pkg")).map(_t=>s+_t.name);if(ot.length===0&&z.name.toLowerCase().endsWith(".pkg")&&ot.push(s+z.name),ot.length===0){Qe.error("No PKG files selected for installation");return}let yt=0;for(const _t of ot)await At.installPackageFromUrl(_t),yt++;yt===1?Qe.success("Package installation started"):Qe.success(`Installation of ${yt} packages started`)}catch(ot){console.error("Package installation failed:",ot),Qe.error(ot.message||"Failed to install package")}e({...n,show:!1})};return y("div",{ref:Wt,className:`file-manager ${i?"dark":""}`,onMouseDown:Lt,onMouseUp:Ae,onContextMenu:Ct,onDragOver:Ee,onDrop:Dt,children:[y("div",{className:"path-navigation",children:[y("div",{className:"path-buttons",children:[y("button",{onClick:Vt,disabled:h<=0,title:"Back",children:"◀"}),y("button",{onClick:kt,disabled:h>=u.length-1,title:"Forward",children:"▶"}),y("button",{onClick:Pt,disabled:s==="/",title:"Parent Directory",children:"▲"})]}),y("input",{type:"text",className:"path-input",value:s,onChange:$t,onKeyDown:j})]}),y("div",{className:"file-grid",onScroll:()=>{L.isSelecting&&P(z=>({...z,isSelecting:!1}))},children:w?y("div",{className:"loading",children:"Loading files..."}):T?y("div",{className:"error",children:T}):m.length===0?y("div",{className:"empty",children:"No files found"}):m.map((z,ot)=>y("div",{"data-id":String(z.id),className:`file-item ${A.has(z.id)?"selected":""} ${ot===Q?"focused":""}`,tabIndex:0,onClick:yt=>nn(yt,z),onContextMenu:yt=>re(yt,z),onFocus:()=>{q(ot),A.has(z.id)||H(new Set([z.id]))},children:[y("div",{className:"file-icon icon",children:Ri(z.name)?y("div",{className:"image-thumbnail",children:[St.has(z.id)&&y("div",{className:"image-loading-spinner",children:y("div",{className:"spinner"})}),y("img",{src:At.getStreamUrl(s+z.name),alt:z.name,loading:"lazy",onLoad:()=>{Ft(yt=>{const _t=new Set(yt);return _t.delete(z.id),_t})},style:{opacity:St.has(z.id)?0:1},onError:()=>{Ft(yt=>{const _t=new Set(yt);return _t.delete(z.id),_t})}})]}):Kg.getFileIcon(z.type,z.name)}),ht&&R===z.id?y("input",{type:"text",className:"rename-input",value:tt,onChange:yt=>st(yt.target.value),onBlur:()=>zi(z),onKeyDown:yt=>{yt.key==="Enter"?zi(z):yt.key==="Escape"&&(it(!1),I(null))},autoFocus:!0}):y("div",{className:"file-name",children:z.name})]},z.id))}),C!==null&&y("div",{className:"upload-progress",children:["Uploading: ",Math.round(C),"%",y("div",{className:"upload-progress-bar",children:y("div",{className:"upload-progress-bar-fill",style:{width:`${C}%`}})})]}),Rt&&y("div",{className:"upload-error",children:Rt}),L.isSelecting&&y("div",{className:"selection-box",style:{left:`${Math.min(L.start.x,L.end.x)}px`,top:`${Math.min(L.start.y,L.end.y)}px`,width:`${Math.abs(L.end.x-L.start.x)}px`,height:`${Math.abs(L.end.y-L.start.y)}px`}}),n.show&&y("div",{className:`context-menu ${i?"dark":""}`,style:{left:`${n.x}px`,top:`${n.y}px`},children:[n.item.name.toLowerCase().endsWith(".pkg")&&y(Le,{children:[y("div",{className:"context-menu-item install",onClick:()=>li(n.item),children:"Install Package"}),y("div",{className:"context-menu-separator"})]}),(n.item.name.endsWith(".elf")||n.item.name.endsWith(".bin"))&&y(Le,{children:[y("div",{className:"context-menu-separator"}),y("div",{className:"context-menu-item execute",onClick:()=>xe(n.item),children:"Execute Payload"})]}),n.isBackground?y("div",{className:"context-menu-item create-folder",onClick:rn,children:"Create Folder"}):y(Le,{children:[y("div",{className:"context-menu-item download",onClick:()=>Yt(n.item),children:"Download"}),y("div",{className:"context-menu-item rename",onClick:()=>ue(n.item),children:"Rename"}),y("div",{className:"context-menu-separator"}),y("div",{className:"context-menu-item delete",onClick:()=>Ie(n.item),children:"Delete"})]})]}),$&&lt&&y("div",{className:"video-player-overlay",onClick:Z,children:y("div",{className:"video-player-container",onClick:z=>z.stopPropagation(),children:[y("div",{className:"video-player-header",children:[y("div",{className:"video-title",children:lt.name}),y("div",{className:"video-controls",children:[y("button",{className:"download-button",onClick:pt,title:"Download",children:y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[y("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),y("polyline",{points:"7 10 12 15 17 10"}),y("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}),y("button",{className:"close-button",onClick:Z,children:"✖"})]})]}),y("div",{className:"video-player-content",children:$e(lt.name)?y("div",{className:"audio-player-wrapper",children:[y("div",{className:"audio-visualization",children:[y("div",{className:"audio-icon",children:y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",children:[y("circle",{cx:"12",cy:"12",r:"10"}),y("circle",{cx:"12",cy:"12",r:"3"}),y("line",{x1:"12",y1:"2",x2:"12",y2:"4"}),y("line",{x1:"12",y1:"20",x2:"12",y2:"22"}),y("line",{x1:"4",y1:"12",x2:"2",y2:"12"}),y("line",{x1:"22",y1:"12",x2:"20",y2:"12"}),y("line",{x1:"6.34",y1:"6.34",x2:"4.93",y2:"4.93"}),y("line",{x1:"19.07",y1:"4.93",x2:"17.66",y2:"6.34"}),y("line",{x1:"17.66",y1:"17.66",x2:"19.07",y2:"19.07"}),y("line",{x1:"4.93",y1:"19.07",x2:"6.34",y2:"17.66"})]})}),y("div",{className:"audio-title-large",children:lt.name})]}),y("audio",{src:At.getStreamUrl(s+lt.name),controls:!0,autoPlay:!0,className:"audio-player-element"})]}):y("video",{src:At.getStreamUrl(s+lt.name),controls:!0,autoPlay:!0})})]})}),It&&Et&&y("div",{className:"image-viewer-overlay",onClick:at,children:y("div",{className:"image-viewer-container",onClick:z=>z.stopPropagation(),children:[y("div",{className:"image-viewer-header",children:[y("div",{className:"image-title",children:Et.name}),y("div",{className:"image-controls",children:[y("button",{className:"download-button",onClick:()=>Yt(Et),title:"Download",children:y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[y("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),y("polyline",{points:"7 10 12 15 17 10"}),y("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}),y("button",{className:"close-button",onClick:at,children:"✖"})]})]}),y("div",{className:"image-viewer-content",children:Et&&y(Le,{children:[It&&y("div",{className:"image-loading-spinner large",children:y("div",{className:"spinner"})}),y("img",{src:At.getStreamUrl(s+Et.name),alt:Et.name,className:"image-viewer-img",onLoad:z=>{const yt=z.target.parentNode.querySelector(".image-loading-spinner");yt&&(yt.style.display="none")}})]})})]})})]})},tm=({isDarkMode:n})=>{const[e,i]=rt([]),[s,l]=rt({}),[u,f]=rt(!0),[h,p]=rt(null),[m,b]=rt("all"),[w,S]=rt("all"),[T,O]=rt("date-desc"),[L,P]=rt(null),[A,H]=rt(!1);qt(()=>{X()},[]);const X=async()=>{try{f(!0),p(null);const I=await At.getMediaList(),C=I.entries.map(ft=>{const Rt=ft.filePath.toLowerCase().endsWith(".mp4"),jt=G(ft.filePath),$=ft.ext&&ft.ext.trophy,gt=ft.meta&&ft.meta.appVerTitleId;let lt=null;return ft.meta&&ft.meta.segmentInfo&&ft.meta.segmentInfo.mediaTime&&ft.meta.segmentInfo.mediaTime.length>0&&ft.meta.segmentInfo.mediaTime[0].length>1&&(lt=ft.meta.segmentInfo.mediaTime[0][1]),{...ft,isVideo:Rt,isJxr:jt,hasTrophy:$,titleId:gt,duration:lt,date:ft.meta&&ft.meta.segmentInfo?new Date(ft.meta.segmentInfo.start):new Date(0)}});i(C),l(I.titles||{})}catch(I){console.error("Failed to load media list:",I),p("Failed to load media list"),Qe.error("Failed to load media list")}finally{f(!1)}},G=I=>{if(!I)return!1;const C=I.toLowerCase();return C.endsWith(".jxr")||C.endsWith(".wdp")||C.endsWith(".hdp")},K=I=>{try{const C=At.getMediaUrl(I.filePath+"?download=true"),ft=document.createElement("a");ft.href=C,ft.download=I.filePath.split("/").pop(),document.body.appendChild(ft),ft.click(),document.body.removeChild(ft),Qe.success("Download started")}catch(C){console.error("Download failed:",C),Qe.error("Download failed")}},Y=I=>{P(I),H(!0)},Q=()=>{H(!1),P(null)},q=I=>I?s[I]||"Deleted Games and Apps":"Unknown",ht=()=>{let I=[...e];return m==="images"?I=I.filter(C=>!C.isVideo):m==="videos"?I=I.filter(C=>C.isVideo):m==="trophies"&&(I=I.filter(C=>C.hasTrophy)),w!=="all"&&(I=I.filter(C=>C.titleId===w)),T==="date-desc"?I.sort((C,ft)=>ft.date-C.date):T==="date-asc"&&I.sort((C,ft)=>C.date-ft.date),I},it=()=>{const I=new Set;return e.forEach(C=>{C.titleId&&I.add(C.titleId)}),Array.from(I)},tt=ht(),st=it(),R=I=>{if(!I)return"";const C=Math.floor(I/1e3),ft=Math.floor(C/3600),Rt=Math.floor(C%3600/60),jt=C%60;return ft>0?`${ft.toString().padStart(2,"0")}:${Rt.toString().padStart(2,"0")}:${jt.toString().padStart(2,"0")}`:`${Rt.toString().padStart(2,"0")}:${jt.toString().padStart(2,"0")}`};return y("div",{className:`media-gallery ${n?"dark":""}`,children:[y("div",{className:"media-toolbar",children:[y("div",{className:"filter-group",children:[y("label",{children:"Filter:"}),y("select",{value:m,onChange:I=>b(I.target.value),className:"filter-select",children:[y("option",{value:"all",children:"All Media"}),y("option",{value:"images",children:"Images Only"}),y("option",{value:"videos",children:"Videos Only"}),y("option",{value:"trophies",children:"Trophy Media"})]})]}),y("div",{className:"filter-group",children:[y("label",{children:"Game:"}),y("select",{value:w,onChange:I=>S(I.target.value),className:"filter-select",children:[y("option",{value:"all",children:"All Games"}),st.map(I=>y("option",{value:I,children:q(I)},I))]})]}),y("div",{className:"filter-group",children:[y("label",{children:"Sort:"}),y("select",{value:T,onChange:I=>O(I.target.value),className:"filter-select",children:[y("option",{value:"date-desc",children:"Newest First"}),y("option",{value:"date-asc",children:"Oldest First"})]})]}),y("button",{className:"refresh-button icon",onClick:X,disabled:u,children:"🔄"})]}),y("div",{className:"media-content",children:u?y("div",{className:"media-loading",children:"Loading media..."}):h?y("div",{className:"media-error",children:h}):tt.length===0?y("div",{className:"media-empty",children:"No media found"}):y("div",{className:"media-grid",children:tt.map((I,C)=>y("div",{className:"media-item",onClick:()=>Y(I),children:[y("div",{className:"media-thumbnail",children:[I.isVideo&&y("div",{className:"video-indicator",children:"▶"}),I.isJxr?y("div",{className:"jxr-thumbnail",children:y("div",{className:"jxr-thumbnail-content",children:[y("div",{className:"jxr-thumbnail-icon",children:"HDR"}),y("div",{className:"jxr-thumbnail-text",children:"HDR Content"})]})}):y("img",{src:At.getMediaThumbnailUrl(I.filePath),alt:"Media thumbnail",loading:"lazy"}),I.hasTrophy&&y("div",{className:"trophy-badge icon",title:"Trophy Earned",children:"🏆"})]}),y("div",{className:"media-info",children:[y("div",{className:"media-title",title:q(I.titleId),children:q(I.titleId)}),y("div",{className:"media-details",children:[y("div",{className:"media-date",children:I.date.toLocaleDateString()}),I.isVideo&&I.duration&&y("div",{className:"media-duration",children:R(I.duration)})]})]})]},C))})}),A&&L&&y("div",{className:"media-viewer-overlay",onClick:Q,children:y("div",{className:"media-viewer",onClick:I=>I.stopPropagation(),children:[y("div",{className:"viewer-header",children:[y("div",{className:"viewer-title",children:[q(L.titleId),L.hasTrophy&&y("span",{className:"viewer-trophy",children:"🏆"}),L.isJxr&&y("span",{className:"viewer-hdr",children:"HDR"})]}),y("div",{className:"viewer-actions",children:[y("button",{className:"download-button icon",onClick:()=>K(L),title:"Download",children:"⬇️"}),y("button",{className:"close-button",onClick:Q,title:"Close",children:"✖"})]})]}),y("div",{className:"viewer-content",children:L.isVideo?y("video",{src:At.getMediaUrl(L.filePath),controls:!0,autoPlay:!0}):L.isJxr?y("div",{className:"hdr-content-container",children:y("div",{className:"hdr-content-message",children:[y("div",{className:"hdr-icon",children:"HDR"}),y("div",{className:"hdr-text",children:"HDR Content cannot be previewed."})]})}):y("img",{src:At.getMediaUrl(L.filePath),alt:"Media content"})}),y("div",{className:"viewer-footer",children:[y("div",{className:"media-date",children:L.date.toLocaleString()}),L.isVideo&&L.duration&&y("div",{className:"media-duration viewer-duration",children:R(L.duration)})]})]})})]})},em=({isDarkMode:n})=>{const[e,i]=rt([]),[s,l]=rt(!0),[u,f]=rt(null),[h,p]=rt(new Set),[m,b]=rt(!1),[w,S]=rt(null),[T,O]=rt({key:"pid",direction:"asc"}),[L,P]=rt(0);qt(()=>{const Y=setInterval(()=>{P(Q=>Q+1)},1e3);return()=>clearInterval(Y)},[]),qt(()=>{const Y=async()=>{try{const q=await At.getProcessList();if(!Array.isArray(q))throw new Error("Invalid data format");const ht=e.reduce((st,R)=>(st[R.pid]=R,st),{}),it=new Set,tt=q.map(st=>{const R=ht[st.pid];return R&&(R.rssize!==st.rssize&&it.add(`memory-${st.pid}`),R.stat!==st.stat&&it.add(`stat-${st.pid}`)),delete ht[st.pid],st});p(it),setTimeout(()=>p(new Set),1e3),i(tt),f(null),b(!1),S(new Date)}catch(q){console.error("Failed to fetch processes:",q),e.length===0?f("Failed to load process list"):b(!0)}finally{l(!1)}};Y();const Q=setInterval(Y,5e3);return()=>clearInterval(Q)},[]);const A=Y=>{let Q="asc";T.key===Y&&T.direction==="asc"&&(Q="desc"),O({key:Y,direction:Q})},H=()=>{const Y=[...e];return Y.sort((Q,q)=>{let ht=Q[T.key],it=q[T.key];return T.key==="rssize"&&(ht=Q.rssize*Q.pageSize,it=q.rssize*q.pageSize),ht<it?T.direction==="asc"?-1:1:ht>it?T.direction==="asc"?1:-1:0}),Y},X=Y=>`${(Y*16384/(1024*1024)).toFixed(1)} MB`,G=Y=>{if(!Y)return"--:--:--";const q=Math.floor(Date.now()/1e3)-Y,ht=Math.floor(q/3600),it=Math.floor(q%3600/60),tt=q%60,st=R=>String(R).padStart(2,"0");return`${st(ht)}:${st(it)}:${st(tt)}`},K=(Y,Q)=>{const q=`${Y}-${Q}`;return h.has(q)?"updated":""};return s&&e.length===0?y("div",{className:`process-list ${n?"dark":""}`,children:y("div",{className:"process-list-message loading",children:[y("div",{className:"loading-spinner"}),y("div",{children:"Loading process list..."})]})}):u&&e.length===0?y("div",{className:`process-list ${n?"dark":""}`,children:y("div",{className:"process-list-message error",children:u})}):e.length?y("div",{className:`process-list ${n?"dark":""}`,children:[m&&y("div",{className:"update-status error",children:[y("span",{className:"error-icon",children:"⚠️"}),"Last update failed",w&&y("span",{className:"last-update",children:["Last successful update: ",w.toLocaleTimeString()]})]}),y("table",{children:[y("thead",{children:y("tr",{children:[y("th",{onClick:()=>A("pid"),children:"PID"}),y("th",{onClick:()=>A("comm"),children:"Process Name"}),y("th",{onClick:()=>A("ppid"),children:"PPID"}),y("th",{onClick:()=>A("rssize"),children:"Memory"}),y("th",{onClick:()=>A("stat"),children:"Status"}),y("th",{onClick:()=>A("start"),children:"Uptime"}),y("th",{onClick:()=>A("emul"),children:"Type"}),y("th",{onClick:()=>A("titleID"),children:"Title ID"})]})}),y("tbody",{children:H().map(Y=>y("tr",{children:[y("td",{children:Y.pid}),y("td",{children:Y.comm}),y("td",{children:Y.ppid}),y("td",{className:K("memory",Y.pid),children:X(Y.rssize)}),y("td",{className:K("stat",Y.pid),children:Y.stat}),y("td",{children:G(Y.start)}),y("td",{children:Y.emul}),y("td",{children:Y.titleID||"-"})]},Y.pid))})]})]}):y("div",{className:`process-list ${n?"dark":""}`,children:y("div",{className:"process-list-message",children:"No processes found"})})},im=({isDarkMode:n})=>{const[e,i]=rt([]),[s,l]=rt(!0),[u,f]=rt(null),[h,p]=rt(null);qt(()=>{(async()=>{try{const S=await At.getProfileList();i(S),f(null)}catch(S){console.error("Profiles yüklenemedi:",S),f("Failed to load profiles")}finally{l(!1)}})()},[]);const m=w=>{p(w)},b=async(w=null)=>{try{await At.downloadBackup(w)}catch(S){console.error("Backup failed:",S)}};return y("div",{className:`profiles ${n?"dark":""}`,children:s?y("div",{className:"profiles-loading",children:"Loading profiles..."}):u?y("div",{className:"profiles-error",children:u}):y(Le,{children:[y("div",{className:"profiles-header",children:[y("h2",{children:"User Profiles"}),y("button",{className:"backup-all-button",onClick:()=>b(),children:[y("span",{className:"icon",children:"💾"}),"Save All Profile Backup Files"]})]}),y("div",{className:"profile-grid",children:e.map(w=>y("div",{className:"profile-item",onClick:()=>m(w),children:[y("div",{className:"profile-icon",children:y("img",{src:At.getProfileImageUrl(w.profileId),alt:w.username,onError:S=>{S.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',S.target.style.background="#2c3e50"}})}),y("div",{className:"profile-name",children:w.username})]},w.profileId))}),h&&y("div",{className:"profile-details-overlay",onClick:()=>p(null),children:y("div",{className:"profile-details",onClick:w=>w.stopPropagation(),children:[y("div",{className:"profile-details-header",children:[y("h2",{children:h.username}),y("button",{onClick:()=>p(null),children:"×"})]}),y("div",{className:"profile-details-content",children:[y("div",{className:"profile-details-icon",children:y("img",{src:At.getProfileImageUrl(h.profileId),alt:h.username,onError:w=>{w.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',w.target.style.background="#2c3e50"}})}),y("div",{className:"profile-details-info",children:[y("div",{className:"detail-row",children:[y("span",{children:"Username:"}),y("span",{children:h.username})]}),y("div",{className:"detail-row",children:[y("span",{children:"Profile ID:"}),y("span",{children:h.profileId})]}),y("div",{className:"detail-actions",children:y("button",{className:"backup-button icon",onClick:()=>b(h.profileId),children:"Backup Save Files"})})]})]})]})})]})})};function nm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var To={exports:{}},rm=To.exports,Xu;function Rh(){return Xu||(Xu=1,function(n,e){(function(i,s){n.exports=s()})(rm,function(){var i=navigator.userAgent,s=navigator.platform,l=/gecko\/\d/i.test(i),u=/MSIE \d/.test(i),f=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(i),h=/Edge\/(\d+)/.exec(i),p=u||f||h,m=p&&(u?document.documentMode||6:+(h||f)[1]),b=!h&&/WebKit\//.test(i),w=b&&/Qt\/\d+\.\d+/.test(i),S=!h&&/Chrome\//.test(i),T=/Opera\//.test(i),O=/Apple Computer/.test(navigator.vendor),L=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(i),P=/PhantomJS/.test(i),A=O&&(/Mobile\/\w+/.test(i)||navigator.maxTouchPoints>2),H=/Android/.test(i),X=A||H||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(i),G=A||/Mac/.test(s),K=/\bCrOS\b/.test(i),Y=/win/i.test(s),Q=T&&i.match(/Version\/(\d*\.\d*)/);Q&&(Q=Number(Q[1])),Q&&Q>=15&&(T=!1,b=!0);var q=G&&(w||T&&(Q==null||Q<12.11)),ht=l||p&&m>=9;function it(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var tt=function(t,r){var a=t.className,o=it(r).exec(a);if(o){var c=a.slice(o.index+o[0].length);t.className=a.slice(0,o.index)+(c?o[1]+c:"")}};function st(t){for(var r=t.childNodes.length;r>0;--r)t.removeChild(t.firstChild);return t}function R(t,r){return st(t).appendChild(r)}function I(t,r,a,o){var c=document.createElement(t);if(a&&(c.className=a),o&&(c.style.cssText=o),typeof r=="string")c.appendChild(document.createTextNode(r));else if(r)for(var d=0;d<r.length;++d)c.appendChild(r[d]);return c}function C(t,r,a,o){var c=I(t,r,a,o);return c.setAttribute("role","presentation"),c}var ft;document.createRange?ft=function(t,r,a,o){var c=document.createRange();return c.setEnd(o||t,a),c.setStart(t,r),c}:ft=function(t,r,a){var o=document.body.createTextRange();try{o.moveToElementText(t.parentNode)}catch{return o}return o.collapse(!0),o.moveEnd("character",a),o.moveStart("character",r),o};function Rt(t,r){if(r.nodeType==3&&(r=r.parentNode),t.contains)return t.contains(r);do if(r.nodeType==11&&(r=r.host),r==t)return!0;while(r=r.parentNode)}function jt(){var t;try{t=document.activeElement}catch{t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function $(t,r){var a=t.className;it(r).test(a)||(t.className+=(a?" ":"")+r)}function gt(t,r){for(var a=t.split(" "),o=0;o<a.length;o++)a[o]&&!it(a[o]).test(r)&&(r+=" "+a[o]);return r}var lt=function(t){t.select()};A?lt=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:p&&(lt=function(t){try{t.select()}catch{}});function Tt(t){var r=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,r)}}function It(t,r,a){r||(r={});for(var o in t)t.hasOwnProperty(o)&&(a!==!1||!r.hasOwnProperty(o))&&(r[o]=t[o]);return r}function zt(t,r,a,o,c){r==null&&(r=t.search(/[^\s\u00a0]/),r==-1&&(r=t.length));for(var d=o||0,g=c||0;;){var v=t.indexOf("	",d);if(v<0||v>=r)return g+(r-d);g+=v-d,g+=a-g%a,d=v+1}}var Et=function(){this.id=null,this.f=null,this.time=0,this.handler=Tt(this.onTimeout,this)};Et.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},Et.prototype.set=function(t,r){this.f=r;var a=+new Date+t;(!this.id||a<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=a)};function mt(t,r){for(var a=0;a<t.length;++a)if(t[a]==r)return a;return-1}var St=50,Ft={toString:function(){return"CodeMirror.Pass"}},Wt={scroll:!1},ii={origin:"*mouse"},$t={origin:"+move"};function j(t,r,a){for(var o=0,c=0;;){var d=t.indexOf("	",o);d==-1&&(d=t.length);var g=d-o;if(d==t.length||c+g>=r)return o+Math.min(g,r-c);if(c+=d-o,c+=a-c%a,o=d+1,c>=r)return o}}var xt=[""];function Vt(t){for(;xt.length<=t;)xt.push(kt(xt)+" ");return xt[t]}function kt(t){return t[t.length-1]}function Pt(t,r){for(var a=[],o=0;o<t.length;o++)a[o]=r(t[o],o);return a}function Lt(t,r,a){for(var o=0,c=a(r);o<t.length&&a(t[o])<=c;)o++;t.splice(o,0,r)}function me(){}function Ae(t,r){var a;return Object.create?a=Object.create(t):(me.prototype=t,a=new me),r&&It(r,a),a}var nn=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function vi(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||nn.test(t))}function $e(t,r){return r?r.source.indexOf("\\w")>-1&&vi(t)?!0:r.test(t):vi(t)}function yi(t){for(var r in t)if(t.hasOwnProperty(r)&&t[r])return!1;return!0}var Ri=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Wi(t){return t.charCodeAt(0)>=768&&Ri.test(t)}function Hi(t,r,a){for(;(a<0?r>0:r<t.length)&&Wi(t.charAt(r));)r+=a;return r}function F(t,r,a){for(var o=r>a?-1:1;;){if(r==a)return r;var c=(r+a)/2,d=o<0?Math.ceil(c):Math.floor(c);if(d==r)return t(d)?r:a;t(d)?a=d:r=d+o}}function Z(t,r,a,o){if(!t)return o(r,a,"ltr",0);for(var c=!1,d=0;d<t.length;++d){var g=t[d];(g.from<a&&g.to>r||r==a&&g.to==r)&&(o(Math.max(g.from,r),Math.min(g.to,a),g.level==1?"rtl":"ltr",d),c=!0)}c||o(r,a,"ltr")}var at=null;function pt(t,r,a){var o;at=null;for(var c=0;c<t.length;++c){var d=t[c];if(d.from<r&&d.to>r)return c;d.to==r&&(d.from!=d.to&&a=="before"?o=c:at=c),d.from==r&&(d.from!=d.to&&a!="before"?o=c:at=c)}return o??at}var re=function(){var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function a(_){return _<=247?t.charAt(_):1424<=_&&_<=1524?"R":1536<=_&&_<=1785?r.charAt(_-1536):1774<=_&&_<=2220?"r":8192<=_&&_<=8203?"w":_==8204?"b":"L"}var o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,c=/[stwN]/,d=/[LRr]/,g=/[Lb1n]/,v=/[1n]/;function x(_,M,N){this.level=_,this.from=M,this.to=N}return function(_,M){var N=M=="ltr"?"L":"R";if(_.length==0||M=="ltr"&&!o.test(_))return!1;for(var W=_.length,E=[],B=0;B<W;++B)E.push(a(_.charCodeAt(B)));for(var V=0,nt=N;V<W;++V){var ct=E[V];ct=="m"?E[V]=nt:nt=ct}for(var dt=0,ut=N;dt<W;++dt){var bt=E[dt];bt=="1"&&ut=="r"?E[dt]="n":d.test(bt)&&(ut=bt,bt=="r"&&(E[dt]="R"))}for(var Nt=1,Mt=E[0];Nt<W-1;++Nt){var Bt=E[Nt];Bt=="+"&&Mt=="1"&&E[Nt+1]=="1"?E[Nt]="1":Bt==","&&Mt==E[Nt+1]&&(Mt=="1"||Mt=="n")&&(E[Nt]=Mt),Mt=Bt}for(var ne=0;ne<W;++ne){var Te=E[ne];if(Te==",")E[ne]="N";else if(Te=="%"){var ce=void 0;for(ce=ne+1;ce<W&&E[ce]=="%";++ce);for(var Ze=ne&&E[ne-1]=="!"||ce<W&&E[ce]=="1"?"1":"N",Ye=ne;Ye<ce;++Ye)E[Ye]=Ze;ne=ce-1}}for(var ve=0,Ke=N;ve<W;++ve){var De=E[ve];Ke=="L"&&De=="1"?E[ve]="L":d.test(De)&&(Ke=De)}for(var we=0;we<W;++we)if(c.test(E[we])){var ye=void 0;for(ye=we+1;ye<W&&c.test(E[ye]);++ye);for(var he=(we?E[we-1]:N)=="L",Xe=(ye<W?E[ye]:N)=="L",ur=he==Xe?he?"L":"R":N,pn=we;pn<ye;++pn)E[pn]=ur;we=ye-1}for(var We=[],Pi,Me=0;Me<W;)if(g.test(E[Me])){var Wa=Me;for(++Me;Me<W&&g.test(E[Me]);++Me);We.push(new x(0,Wa,Me))}else{var Ki=Me,Dn=We.length,Pn=M=="rtl"?1:0;for(++Me;Me<W&&E[Me]!="L";++Me);for(var ze=Ki;ze<Me;)if(v.test(E[ze])){Ki<ze&&(We.splice(Dn,0,new x(1,Ki,ze)),Dn+=Pn);var fr=ze;for(++ze;ze<Me&&v.test(E[ze]);++ze);We.splice(Dn,0,new x(2,fr,ze)),Dn+=Pn,Ki=ze}else++ze;Ki<Me&&We.splice(Dn,0,new x(1,Ki,Me))}return M=="ltr"&&(We[0].level==1&&(Pi=_.match(/^\s+/))&&(We[0].from=Pi[0].length,We.unshift(new x(0,0,Pi[0].length))),kt(We).level==1&&(Pi=_.match(/\s+$/))&&(kt(We).to-=Pi[0].length,We.push(new x(0,W-Pi[0].length,W)))),M=="rtl"?We.reverse():We}}();function Yt(t,r){var a=t.order;return a==null&&(a=t.order=re(t.text,r)),a}var Ie=[],Ct=function(t,r,a){if(t.addEventListener)t.addEventListener(r,a,!1);else if(t.attachEvent)t.attachEvent("on"+r,a);else{var o=t._handlers||(t._handlers={});o[r]=(o[r]||Ie).concat(a)}};function rn(t,r){return t._handlers&&t._handlers[r]||Ie}function Ee(t,r,a){if(t.removeEventListener)t.removeEventListener(r,a,!1);else if(t.detachEvent)t.detachEvent("on"+r,a);else{var o=t._handlers,c=o&&o[r];if(c){var d=mt(c,a);d>-1&&(o[r]=c.slice(0,d).concat(c.slice(d+1)))}}}function Dt(t,r){var a=rn(t,r);if(a.length)for(var o=Array.prototype.slice.call(arguments,2),c=0;c<a.length;++c)a[c].apply(null,o)}function ue(t,r,a){return typeof r=="string"&&(r={type:r,preventDefault:function(){this.defaultPrevented=!0}}),Dt(t,a||r.type,t,r),yt(r)||r.codemirrorIgnore}function zi(t){var r=t._handlers&&t._handlers.cursorActivity;if(r)for(var a=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),o=0;o<r.length;++o)mt(a,r[o])==-1&&a.push(r[o])}function xe(t,r){return rn(t,r).length>0}function li(t){t.prototype.on=function(r,a){Ct(this,r,a)},t.prototype.off=function(r,a){Ee(this,r,a)}}function z(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function ot(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function yt(t){return t.defaultPrevented!=null?t.defaultPrevented:t.returnValue==!1}function _t(t){z(t),ot(t)}function Kt(t){return t.target||t.srcElement}function te(t){var r=t.which;return r==null&&(t.button&1?r=1:t.button&2?r=3:t.button&4&&(r=2)),G&&t.ctrlKey&&r==1&&(r=3),r}var ci=function(){if(p&&m<9)return!1;var t=I("div");return"draggable"in t||"dragDrop"in t}(),_e;function ui(t){if(_e==null){var r=I("span","​");R(t,I("span",[r,document.createTextNode("x")])),t.firstChild.offsetHeight!=0&&(_e=r.offsetWidth<=1&&r.offsetHeight>2&&!(p&&m<8))}var a=_e?I("span","​"):I("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return a.setAttribute("cm-text",""),a}var Ne;function ni(t){if(Ne!=null)return Ne;var r=R(t,document.createTextNode("AخA")),a=ft(r,0,1).getBoundingClientRect(),o=ft(r,1,2).getBoundingClientRect();return st(t),!a||a.left==a.right?!1:Ne=o.right-a.right<3}var wr=`

b`.split(/\n/).length!=3?function(t){for(var r=0,a=[],o=t.length;r<=o;){var c=t.indexOf(`
`,r);c==-1&&(c=t.length);var d=t.slice(r,t.charAt(c-1)=="\r"?c-1:c),g=d.indexOf("\r");g!=-1?(a.push(d.slice(0,g)),r+=g+1):(a.push(d),r=c+1)}return a}:function(t){return t.split(/\r\n?|\n/)},Ps=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch{return!1}}:function(t){var r;try{r=t.ownerDocument.selection.createRange()}catch{}return!r||r.parentElement()!=t?!1:r.compareEndPoints("StartToEnd",r)!=0},Os=function(){var t=I("div");return"oncopy"in t?!0:(t.setAttribute("oncopy","return;"),typeof t.oncopy=="function")}(),kr=null;function sn(t){if(kr!=null)return kr;var r=R(t,I("span","x")),a=r.getBoundingClientRect(),o=ft(r,0,1).getBoundingClientRect();return kr=Math.abs(a.left-o.left)>1}var fi={},ri={};function As(t,r){arguments.length>2&&(r.dependencies=Array.prototype.slice.call(arguments,2)),fi[t]=r}function Bi(t,r){ri[t]=r}function jn(t){if(typeof t=="string"&&ri.hasOwnProperty(t))t=ri[t];else if(t&&typeof t.name=="string"&&ri.hasOwnProperty(t.name)){var r=ri[t.name];typeof r=="string"&&(r={name:r}),t=Ae(r,t),t.name=r.name}else{if(typeof t=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return jn("application/xml");if(typeof t=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return jn("application/json")}return typeof t=="string"?{name:t}:t||{name:"null"}}function Vn(t,r){r=jn(r);var a=fi[r.name];if(!a)return Vn(t,"text/plain");var o=a(t,r);if(bi.hasOwnProperty(r.name)){var c=bi[r.name];for(var d in c)c.hasOwnProperty(d)&&(o.hasOwnProperty(d)&&(o["_"+d]=o[d]),o[d]=c[d])}if(o.name=r.name,r.helperType&&(o.helperType=r.helperType),r.modeProps)for(var g in r.modeProps)o[g]=r.modeProps[g];return o}var bi={};function xi(t,r){var a=bi.hasOwnProperty(t)?bi[t]:bi[t]={};It(r,a)}function si(t,r){if(r===!0)return r;if(t.copyState)return t.copyState(r);var a={};for(var o in r){var c=r[o];c instanceof Array&&(c=c.concat([])),a[o]=c}return a}function Sr(t,r){for(var a;t.innerMode&&(a=t.innerMode(r),!(!a||a.mode==t));)r=a.state,t=a.mode;return a||{mode:t,state:r}}function Cr(t,r,a){return t.startState?t.startState(r,a):!0}var fe=function(t,r,a){this.pos=this.start=0,this.string=t,this.tabSize=r||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=a};fe.prototype.eol=function(){return this.pos>=this.string.length},fe.prototype.sol=function(){return this.pos==this.lineStart},fe.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},fe.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},fe.prototype.eat=function(t){var r=this.string.charAt(this.pos),a;if(typeof t=="string"?a=r==t:a=r&&(t.test?t.test(r):t(r)),a)return++this.pos,r},fe.prototype.eatWhile=function(t){for(var r=this.pos;this.eat(t););return this.pos>r},fe.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},fe.prototype.skipToEnd=function(){this.pos=this.string.length},fe.prototype.skipTo=function(t){var r=this.string.indexOf(t,this.pos);if(r>-1)return this.pos=r,!0},fe.prototype.backUp=function(t){this.pos-=t},fe.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=zt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?zt(this.string,this.lineStart,this.tabSize):0)},fe.prototype.indentation=function(){return zt(this.string,null,this.tabSize)-(this.lineStart?zt(this.string,this.lineStart,this.tabSize):0)},fe.prototype.match=function(t,r,a){if(typeof t=="string"){var o=function(g){return a?g.toLowerCase():g},c=this.string.substr(this.pos,t.length);if(o(c)==o(t))return r!==!1&&(this.pos+=t.length),!0}else{var d=this.string.slice(this.pos).match(t);return d&&d.index>0?null:(d&&r!==!1&&(this.pos+=d[0].length),d)}},fe.prototype.current=function(){return this.string.slice(this.start,this.pos)},fe.prototype.hideFirstChars=function(t,r){this.lineStart+=t;try{return r()}finally{this.lineStart-=t}},fe.prototype.lookAhead=function(t){var r=this.lineOracle;return r&&r.lookAhead(t)},fe.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};function wt(t,r){if(r-=t.first,r<0||r>=t.size)throw new Error("There is no line "+(r+t.first)+" in the document.");for(var a=t;!a.lines;)for(var o=0;;++o){var c=a.children[o],d=c.chunkSize();if(r<d){a=c;break}r-=d}return a.lines[r]}function Ti(t,r,a){var o=[],c=r.line;return t.iter(r.line,a.line+1,function(d){var g=d.text;c==a.line&&(g=g.slice(0,a.ch)),c==r.line&&(g=g.slice(r.ch)),o.push(g),++c}),o}function Tr(t,r,a){var o=[];return t.iter(r,a,function(c){o.push(c.text)}),o}function Ge(t,r){var a=r-t.height;if(a)for(var o=t;o;o=o.parent)o.height+=a}function Zt(t){if(t.parent==null)return null;for(var r=t.parent,a=mt(r.lines,t),o=r.parent;o;r=o,o=o.parent)for(var c=0;o.children[c]!=r;++c)a+=o.children[c].chunkSize();return a+r.first}function Mi(t,r){var a=t.first;t:do{for(var o=0;o<t.children.length;++o){var c=t.children[o],d=c.height;if(r<d){t=c;continue t}r-=d,a+=c.chunkSize()}return a}while(!t.lines);for(var g=0;g<t.lines.length;++g){var v=t.lines[g],x=v.height;if(r<x)break;r-=x}return a+g}function _n(t,r){return r>=t.first&&r<t.first+t.size}function Mr(t,r){return String(t.lineNumberFormatter(r+t.firstLineNumber))}function J(t,r,a){if(a===void 0&&(a=null),!(this instanceof J))return new J(t,r,a);this.line=t,this.ch=r,this.sticky=a}function k(t,r){return t.line-r.line||t.ch-r.ch}function D(t,r){return t.sticky==r.sticky&&k(t,r)==0}function U(t){return J(t.line,t.ch)}function et(t,r){return k(t,r)<0?r:t}function Ot(t,r){return k(t,r)<0?t:r}function Xt(t,r){return Math.max(t.first,Math.min(r,t.first+t.size-1))}function vt(t,r){if(r.line<t.first)return J(t.first,0);var a=t.first+t.size-1;return r.line>a?J(a,wt(t,a).text.length):Fe(r,wt(t,r.line).text.length)}function Fe(t,r){var a=t.ch;return a==null||a>r?J(t.line,r):a<0?J(t.line,0):t}function oi(t,r){for(var a=[],o=0;o<r.length;o++)a[o]=vt(t,r[o]);return a}var Yn=function(t,r){this.state=t,this.lookAhead=r},Li=function(t,r,a,o){this.state=r,this.doc=t,this.line=a,this.maxLookAhead=o||0,this.baseTokens=null,this.baseTokenPos=1};Li.prototype.lookAhead=function(t){var r=this.doc.getLine(this.line+t);return r!=null&&t>this.maxLookAhead&&(this.maxLookAhead=t),r},Li.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var r=this.baseTokens[this.baseTokenPos+1];return{type:r&&r.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},Li.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Li.fromSaved=function(t,r,a){return r instanceof Yn?new Li(t,si(t.mode,r.state),a,r.lookAhead):new Li(t,si(t.mode,r),a)},Li.prototype.save=function(t){var r=t!==!1?si(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Yn(r,this.maxLookAhead):r};function Hl(t,r,a,o){var c=[t.state.modeGen],d={};Vl(t,r.text,t.doc.mode,a,function(_,M){return c.push(_,M)},d,o);for(var g=a.state,v=function(_){a.baseTokens=c;var M=t.state.overlays[_],N=1,W=0;a.state=!0,Vl(t,r.text,M.mode,a,function(E,B){for(var V=N;W<E;){var nt=c[N];nt>E&&c.splice(N,1,E,c[N+1],nt),N+=2,W=Math.min(E,nt)}if(B)if(M.opaque)c.splice(V,N-V,E,"overlay "+B),N=V+2;else for(;V<N;V+=2){var ct=c[V+1];c[V+1]=(ct?ct+" ":"")+"overlay "+B}},d),a.state=g,a.baseTokens=null,a.baseTokenPos=1},x=0;x<t.state.overlays.length;++x)v(x);return{styles:c,classes:d.bgClass||d.textClass?d:null}}function zl(t,r,a){if(!r.styles||r.styles[0]!=t.state.modeGen){var o=Lr(t,Zt(r)),c=r.text.length>t.options.maxHighlightLength&&si(t.doc.mode,o.state),d=Hl(t,r,o);c&&(o.state=c),r.stateAfter=o.save(!c),r.styles=d.styles,d.classes?r.styleClasses=d.classes:r.styleClasses&&(r.styleClasses=null),a===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return r.styles}function Lr(t,r,a){var o=t.doc,c=t.display;if(!o.mode.startState)return new Li(o,!0,r);var d=Ed(t,r,a),g=d>o.first&&wt(o,d-1).stateAfter,v=g?Li.fromSaved(o,g,d):new Li(o,Cr(o.mode),d);return o.iter(d,r,function(x){Xo(t,x.text,v);var _=v.line;x.stateAfter=_==r-1||_%5==0||_>=c.viewFrom&&_<c.viewTo?v.save():null,v.nextLine()}),a&&(o.modeFrontier=v.line),v}function Xo(t,r,a,o){var c=t.doc.mode,d=new fe(r,t.options.tabSize,a);for(d.start=d.pos=o||0,r==""&&Bl(c,a.state);!d.eol();)Go(c,d,a.state),d.start=d.pos}function Bl(t,r){if(t.blankLine)return t.blankLine(r);if(t.innerMode){var a=Sr(t,r);if(a.mode.blankLine)return a.mode.blankLine(a.state)}}function Go(t,r,a,o){for(var c=0;c<10;c++){o&&(o[0]=Sr(t,a).mode);var d=t.token(r,a);if(r.pos>r.start)return d}throw new Error("Mode "+t.name+" failed to advance stream.")}var Ul=function(t,r,a){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=r||null,this.state=a};function $l(t,r,a,o){var c=t.doc,d=c.mode,g;r=vt(c,r);var v=wt(c,r.line),x=Lr(t,r.line,a),_=new fe(v.text,t.options.tabSize,x),M;for(o&&(M=[]);(o||_.pos<r.ch)&&!_.eol();)_.start=_.pos,g=Go(d,_,x.state),o&&M.push(new Ul(_,g,si(c.mode,x.state)));return o?M:new Ul(_,g,x.state)}function jl(t,r){if(t)for(;;){var a=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!a)break;t=t.slice(0,a.index)+t.slice(a.index+a[0].length);var o=a[1]?"bgClass":"textClass";r[o]==null?r[o]=a[2]:new RegExp("(?:^|\\s)"+a[2]+"(?:$|\\s)").test(r[o])||(r[o]+=" "+a[2])}return t}function Vl(t,r,a,o,c,d,g){var v=a.flattenSpans;v==null&&(v=t.options.flattenSpans);var x=0,_=null,M=new fe(r,t.options.tabSize,o),N,W=t.options.addModeClass&&[null];for(r==""&&jl(Bl(a,o.state),d);!M.eol();){if(M.pos>t.options.maxHighlightLength?(v=!1,g&&Xo(t,r,o,M.pos),M.pos=r.length,N=null):N=jl(Go(a,M,o.state,W),d),W){var E=W[0].name;E&&(N="m-"+(N?E+" "+N:E))}if(!v||_!=N){for(;x<M.start;)x=Math.min(M.start,x+5e3),c(x,_);_=N}M.start=M.pos}for(;x<M.pos;){var B=Math.min(M.pos,x+5e3);c(B,_),x=B}}function Ed(t,r,a){for(var o,c,d=t.doc,g=a?-1:r-(t.doc.mode.innerMode?1e3:100),v=r;v>g;--v){if(v<=d.first)return d.first;var x=wt(d,v-1),_=x.stateAfter;if(_&&(!a||v+(_ instanceof Yn?_.lookAhead:0)<=d.modeFrontier))return v;var M=zt(x.text,null,t.options.tabSize);(c==null||o>M)&&(c=v-1,o=M)}return c}function Fd(t,r){if(t.modeFrontier=Math.min(t.modeFrontier,r),!(t.highlightFrontier<r-10)){for(var a=t.first,o=r-1;o>a;o--){var c=wt(t,o).stateAfter;if(c&&(!(c instanceof Yn)||o+c.lookAhead<r)){a=o+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,a)}}var Yl=!1,Ui=!1;function Rd(){Yl=!0}function Wd(){Ui=!0}function Is(t,r,a){this.marker=t,this.from=r,this.to=a}function Nr(t,r){if(t)for(var a=0;a<t.length;++a){var o=t[a];if(o.marker==r)return o}}function Hd(t,r){for(var a,o=0;o<t.length;++o)t[o]!=r&&(a||(a=[])).push(t[o]);return a}function zd(t,r,a){var o=a&&window.WeakSet&&(a.markedSpans||(a.markedSpans=new WeakSet));o&&o.has(t.markedSpans)?t.markedSpans.push(r):(t.markedSpans=t.markedSpans?t.markedSpans.concat([r]):[r],o&&o.add(t.markedSpans)),r.marker.attachLine(t)}function Bd(t,r,a){var o;if(t)for(var c=0;c<t.length;++c){var d=t[c],g=d.marker,v=d.from==null||(g.inclusiveLeft?d.from<=r:d.from<r);if(v||d.from==r&&g.type=="bookmark"&&(!a||!d.marker.insertLeft)){var x=d.to==null||(g.inclusiveRight?d.to>=r:d.to>r);(o||(o=[])).push(new Is(g,d.from,x?null:d.to))}}return o}function Ud(t,r,a){var o;if(t)for(var c=0;c<t.length;++c){var d=t[c],g=d.marker,v=d.to==null||(g.inclusiveRight?d.to>=r:d.to>r);if(v||d.from==r&&g.type=="bookmark"&&(!a||d.marker.insertLeft)){var x=d.from==null||(g.inclusiveLeft?d.from<=r:d.from<r);(o||(o=[])).push(new Is(g,x?null:d.from-r,d.to==null?null:d.to-r))}}return o}function qo(t,r){if(r.full)return null;var a=_n(t,r.from.line)&&wt(t,r.from.line).markedSpans,o=_n(t,r.to.line)&&wt(t,r.to.line).markedSpans;if(!a&&!o)return null;var c=r.from.ch,d=r.to.ch,g=k(r.from,r.to)==0,v=Bd(a,c,g),x=Ud(o,d,g),_=r.text.length==1,M=kt(r.text).length+(_?c:0);if(v)for(var N=0;N<v.length;++N){var W=v[N];if(W.to==null){var E=Nr(x,W.marker);E?_&&(W.to=E.to==null?null:E.to+M):W.to=c}}if(x)for(var B=0;B<x.length;++B){var V=x[B];if(V.to!=null&&(V.to+=M),V.from==null){var nt=Nr(v,V.marker);nt||(V.from=M,_&&(v||(v=[])).push(V))}else V.from+=M,_&&(v||(v=[])).push(V)}v&&(v=Kl(v)),x&&x!=v&&(x=Kl(x));var ct=[v];if(!_){var dt=r.text.length-2,ut;if(dt>0&&v)for(var bt=0;bt<v.length;++bt)v[bt].to==null&&(ut||(ut=[])).push(new Is(v[bt].marker,null,null));for(var Nt=0;Nt<dt;++Nt)ct.push(ut);ct.push(x)}return ct}function Kl(t){for(var r=0;r<t.length;++r){var a=t[r];a.from!=null&&a.from==a.to&&a.marker.clearWhenEmpty!==!1&&t.splice(r--,1)}return t.length?t:null}function $d(t,r,a){var o=null;if(t.iter(r.line,a.line+1,function(E){if(E.markedSpans)for(var B=0;B<E.markedSpans.length;++B){var V=E.markedSpans[B].marker;V.readOnly&&(!o||mt(o,V)==-1)&&(o||(o=[])).push(V)}}),!o)return null;for(var c=[{from:r,to:a}],d=0;d<o.length;++d)for(var g=o[d],v=g.find(0),x=0;x<c.length;++x){var _=c[x];if(!(k(_.to,v.from)<0||k(_.from,v.to)>0)){var M=[x,1],N=k(_.from,v.from),W=k(_.to,v.to);(N<0||!g.inclusiveLeft&&!N)&&M.push({from:_.from,to:v.from}),(W>0||!g.inclusiveRight&&!W)&&M.push({from:v.to,to:_.to}),c.splice.apply(c,M),x+=M.length-3}}return c}function Xl(t){var r=t.markedSpans;if(r){for(var a=0;a<r.length;++a)r[a].marker.detachLine(t);t.markedSpans=null}}function Gl(t,r){if(r){for(var a=0;a<r.length;++a)r[a].marker.attachLine(t);t.markedSpans=r}}function Es(t){return t.inclusiveLeft?-1:0}function Fs(t){return t.inclusiveRight?1:0}function Zo(t,r){var a=t.lines.length-r.lines.length;if(a!=0)return a;var o=t.find(),c=r.find(),d=k(o.from,c.from)||Es(t)-Es(r);if(d)return-d;var g=k(o.to,c.to)||Fs(t)-Fs(r);return g||r.id-t.id}function ql(t,r){var a=Ui&&t.markedSpans,o;if(a)for(var c=void 0,d=0;d<a.length;++d)c=a[d],c.marker.collapsed&&(r?c.from:c.to)==null&&(!o||Zo(o,c.marker)<0)&&(o=c.marker);return o}function Zl(t){return ql(t,!0)}function Rs(t){return ql(t,!1)}function jd(t,r){var a=Ui&&t.markedSpans,o;if(a)for(var c=0;c<a.length;++c){var d=a[c];d.marker.collapsed&&(d.from==null||d.from<r)&&(d.to==null||d.to>r)&&(!o||Zo(o,d.marker)<0)&&(o=d.marker)}return o}function Jl(t,r,a,o,c){var d=wt(t,r),g=Ui&&d.markedSpans;if(g)for(var v=0;v<g.length;++v){var x=g[v];if(x.marker.collapsed){var _=x.marker.find(0),M=k(_.from,a)||Es(x.marker)-Es(c),N=k(_.to,o)||Fs(x.marker)-Fs(c);if(!(M>=0&&N<=0||M<=0&&N>=0)&&(M<=0&&(x.marker.inclusiveRight&&c.inclusiveLeft?k(_.to,a)>=0:k(_.to,a)>0)||M>=0&&(x.marker.inclusiveRight&&c.inclusiveLeft?k(_.from,o)<=0:k(_.from,o)<0)))return!0}}}function _i(t){for(var r;r=Zl(t);)t=r.find(-1,!0).line;return t}function Vd(t){for(var r;r=Rs(t);)t=r.find(1,!0).line;return t}function Yd(t){for(var r,a;r=Rs(t);)t=r.find(1,!0).line,(a||(a=[])).push(t);return a}function Jo(t,r){var a=wt(t,r),o=_i(a);return a==o?r:Zt(o)}function Ql(t,r){if(r>t.lastLine())return r;var a=wt(t,r),o;if(!on(t,a))return r;for(;o=Rs(a);)a=o.find(1,!0).line;return Zt(a)+1}function on(t,r){var a=Ui&&r.markedSpans;if(a){for(var o=void 0,c=0;c<a.length;++c)if(o=a[c],!!o.marker.collapsed){if(o.from==null)return!0;if(!o.marker.widgetNode&&o.from==0&&o.marker.inclusiveLeft&&Qo(t,r,o))return!0}}}function Qo(t,r,a){if(a.to==null){var o=a.marker.find(1,!0);return Qo(t,o.line,Nr(o.line.markedSpans,a.marker))}if(a.marker.inclusiveRight&&a.to==r.text.length)return!0;for(var c=void 0,d=0;d<r.markedSpans.length;++d)if(c=r.markedSpans[d],c.marker.collapsed&&!c.marker.widgetNode&&c.from==a.to&&(c.to==null||c.to!=a.from)&&(c.marker.inclusiveLeft||a.marker.inclusiveRight)&&Qo(t,r,c))return!0}function $i(t){t=_i(t);for(var r=0,a=t.parent,o=0;o<a.lines.length;++o){var c=a.lines[o];if(c==t)break;r+=c.height}for(var d=a.parent;d;a=d,d=a.parent)for(var g=0;g<d.children.length;++g){var v=d.children[g];if(v==a)break;r+=v.height}return r}function Ws(t){if(t.height==0)return 0;for(var r=t.text.length,a,o=t;a=Zl(o);){var c=a.find(0,!0);o=c.from.line,r+=c.from.ch-c.to.ch}for(o=t;a=Rs(o);){var d=a.find(0,!0);r-=o.text.length-d.from.ch,o=d.to.line,r+=o.text.length-d.to.ch}return r}function ta(t){var r=t.display,a=t.doc;r.maxLine=wt(a,a.first),r.maxLineLength=Ws(r.maxLine),r.maxLineChanged=!0,a.iter(function(o){var c=Ws(o);c>r.maxLineLength&&(r.maxLineLength=c,r.maxLine=o)})}var Kn=function(t,r,a){this.text=t,Gl(this,r),this.height=a?a(this):1};Kn.prototype.lineNo=function(){return Zt(this)},li(Kn);function Kd(t,r,a,o){t.text=r,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),t.order!=null&&(t.order=null),Xl(t),Gl(t,a);var c=o?o(t):1;c!=t.height&&Ge(t,c)}function Xd(t){t.parent=null,Xl(t)}var Gd={},qd={};function tc(t,r){if(!t||/^\s*$/.test(t))return null;var a=r.addModeClass?qd:Gd;return a[t]||(a[t]=t.replace(/\S+/g,"cm-$&"))}function ec(t,r){var a=C("span",null,null,b?"padding-right: .1px":null),o={pre:C("pre",[a],"CodeMirror-line"),content:a,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};r.measure={};for(var c=0;c<=(r.rest?r.rest.length:0);c++){var d=c?r.rest[c-1]:r.line,g=void 0;o.pos=0,o.addToken=Jd,ni(t.display.measure)&&(g=Yt(d,t.doc.direction))&&(o.addToken=tp(o.addToken,g)),o.map=[];var v=r!=t.display.externalMeasured&&Zt(d);ep(d,o,zl(t,d,v)),d.styleClasses&&(d.styleClasses.bgClass&&(o.bgClass=gt(d.styleClasses.bgClass,o.bgClass||"")),d.styleClasses.textClass&&(o.textClass=gt(d.styleClasses.textClass,o.textClass||""))),o.map.length==0&&o.map.push(0,0,o.content.appendChild(ui(t.display.measure))),c==0?(r.measure.map=o.map,r.measure.cache={}):((r.measure.maps||(r.measure.maps=[])).push(o.map),(r.measure.caches||(r.measure.caches=[])).push({}))}if(b){var x=o.content.lastChild;(/\bcm-tab\b/.test(x.className)||x.querySelector&&x.querySelector(".cm-tab"))&&(o.content.className="cm-tab-wrap-hack")}return Dt(t,"renderLine",t,r.line,o.pre),o.pre.className&&(o.textClass=gt(o.pre.className,o.textClass||"")),o}function Zd(t){var r=I("span","•","cm-invalidchar");return r.title="\\u"+t.charCodeAt(0).toString(16),r.setAttribute("aria-label",r.title),r}function Jd(t,r,a,o,c,d,g){if(r){var v=t.splitSpaces?Qd(r,t.trailingSpace):r,x=t.cm.state.specialChars,_=!1,M;if(!x.test(r))t.col+=r.length,M=document.createTextNode(v),t.map.push(t.pos,t.pos+r.length,M),p&&m<9&&(_=!0),t.pos+=r.length;else{M=document.createDocumentFragment();for(var N=0;;){x.lastIndex=N;var W=x.exec(r),E=W?W.index-N:r.length-N;if(E){var B=document.createTextNode(v.slice(N,N+E));p&&m<9?M.appendChild(I("span",[B])):M.appendChild(B),t.map.push(t.pos,t.pos+E,B),t.col+=E,t.pos+=E}if(!W)break;N+=E+1;var V=void 0;if(W[0]=="	"){var nt=t.cm.options.tabSize,ct=nt-t.col%nt;V=M.appendChild(I("span",Vt(ct),"cm-tab")),V.setAttribute("role","presentation"),V.setAttribute("cm-text","	"),t.col+=ct}else W[0]=="\r"||W[0]==`
`?(V=M.appendChild(I("span",W[0]=="\r"?"␍":"␤","cm-invalidchar")),V.setAttribute("cm-text",W[0]),t.col+=1):(V=t.cm.options.specialCharPlaceholder(W[0]),V.setAttribute("cm-text",W[0]),p&&m<9?M.appendChild(I("span",[V])):M.appendChild(V),t.col+=1);t.map.push(t.pos,t.pos+1,V),t.pos++}}if(t.trailingSpace=v.charCodeAt(r.length-1)==32,a||o||c||_||d||g){var dt=a||"";o&&(dt+=o),c&&(dt+=c);var ut=I("span",[M],dt,d);if(g)for(var bt in g)g.hasOwnProperty(bt)&&bt!="style"&&bt!="class"&&ut.setAttribute(bt,g[bt]);return t.content.appendChild(ut)}t.content.appendChild(M)}}function Qd(t,r){if(t.length>1&&!/  /.test(t))return t;for(var a=r,o="",c=0;c<t.length;c++){var d=t.charAt(c);d==" "&&a&&(c==t.length-1||t.charCodeAt(c+1)==32)&&(d=" "),o+=d,a=d==" "}return o}function tp(t,r){return function(a,o,c,d,g,v,x){c=c?c+" cm-force-border":"cm-force-border";for(var _=a.pos,M=_+o.length;;){for(var N=void 0,W=0;W<r.length&&(N=r[W],!(N.to>_&&N.from<=_));W++);if(N.to>=M)return t(a,o,c,d,g,v,x);t(a,o.slice(0,N.to-_),c,d,null,v,x),d=null,o=o.slice(N.to-_),_=N.to}}}function ic(t,r,a,o){var c=!o&&a.widgetNode;c&&t.map.push(t.pos,t.pos+r,c),!o&&t.cm.display.input.needsContentAttribute&&(c||(c=t.content.appendChild(document.createElement("span"))),c.setAttribute("cm-marker",a.id)),c&&(t.cm.display.input.setUneditable(c),t.content.appendChild(c)),t.pos+=r,t.trailingSpace=!1}function ep(t,r,a){var o=t.markedSpans,c=t.text,d=0;if(!o){for(var g=1;g<a.length;g+=2)r.addToken(r,c.slice(d,d=a[g]),tc(a[g+1],r.cm.options));return}for(var v=c.length,x=0,_=1,M="",N,W,E=0,B,V,nt,ct,dt;;){if(E==x){B=V=nt=W="",dt=null,ct=null,E=1/0;for(var ut=[],bt=void 0,Nt=0;Nt<o.length;++Nt){var Mt=o[Nt],Bt=Mt.marker;if(Bt.type=="bookmark"&&Mt.from==x&&Bt.widgetNode)ut.push(Bt);else if(Mt.from<=x&&(Mt.to==null||Mt.to>x||Bt.collapsed&&Mt.to==x&&Mt.from==x)){if(Mt.to!=null&&Mt.to!=x&&E>Mt.to&&(E=Mt.to,V=""),Bt.className&&(B+=" "+Bt.className),Bt.css&&(W=(W?W+";":"")+Bt.css),Bt.startStyle&&Mt.from==x&&(nt+=" "+Bt.startStyle),Bt.endStyle&&Mt.to==E&&(bt||(bt=[])).push(Bt.endStyle,Mt.to),Bt.title&&((dt||(dt={})).title=Bt.title),Bt.attributes)for(var ne in Bt.attributes)(dt||(dt={}))[ne]=Bt.attributes[ne];Bt.collapsed&&(!ct||Zo(ct.marker,Bt)<0)&&(ct=Mt)}else Mt.from>x&&E>Mt.from&&(E=Mt.from)}if(bt)for(var Te=0;Te<bt.length;Te+=2)bt[Te+1]==E&&(V+=" "+bt[Te]);if(!ct||ct.from==x)for(var ce=0;ce<ut.length;++ce)ic(r,0,ut[ce]);if(ct&&(ct.from||0)==x){if(ic(r,(ct.to==null?v+1:ct.to)-x,ct.marker,ct.from==null),ct.to==null)return;ct.to==x&&(ct=!1)}}if(x>=v)break;for(var Ze=Math.min(v,E);;){if(M){var Ye=x+M.length;if(!ct){var ve=Ye>Ze?M.slice(0,Ze-x):M;r.addToken(r,ve,N?N+B:B,nt,x+ve.length==E?V:"",W,dt)}if(Ye>=Ze){M=M.slice(Ze-x),x=Ze;break}x=Ye,nt=""}M=c.slice(d,d=a[_++]),N=tc(a[_++],r.cm.options)}}}function nc(t,r,a){this.line=r,this.rest=Yd(r),this.size=this.rest?Zt(kt(this.rest))-a+1:1,this.node=this.text=null,this.hidden=on(t,r)}function Hs(t,r,a){for(var o=[],c,d=r;d<a;d=c){var g=new nc(t.doc,wt(t.doc,d),d);c=d+g.size,o.push(g)}return o}var Xn=null;function ip(t){Xn?Xn.ops.push(t):t.ownsGroup=Xn={ops:[t],delayedCallbacks:[]}}function np(t){var r=t.delayedCallbacks,a=0;do{for(;a<r.length;a++)r[a].call(null);for(var o=0;o<t.ops.length;o++){var c=t.ops[o];if(c.cursorActivityHandlers)for(;c.cursorActivityCalled<c.cursorActivityHandlers.length;)c.cursorActivityHandlers[c.cursorActivityCalled++].call(null,c.cm)}}while(a<r.length)}function rp(t,r){var a=t.ownsGroup;if(a)try{np(a)}finally{Xn=null,r(a)}}var Dr=null;function ke(t,r){var a=rn(t,r);if(a.length){var o=Array.prototype.slice.call(arguments,2),c;Xn?c=Xn.delayedCallbacks:Dr?c=Dr:(c=Dr=[],setTimeout(sp,0));for(var d=function(v){c.push(function(){return a[v].apply(null,o)})},g=0;g<a.length;++g)d(g)}}function sp(){var t=Dr;Dr=null;for(var r=0;r<t.length;++r)t[r]()}function rc(t,r,a,o){for(var c=0;c<r.changes.length;c++){var d=r.changes[c];d=="text"?ap(t,r):d=="gutter"?oc(t,r,a,o):d=="class"?ea(t,r):d=="widget"&&lp(t,r,o)}r.changes=null}function Pr(t){return t.node==t.text&&(t.node=I("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),p&&m<8&&(t.node.style.zIndex=2)),t.node}function op(t,r){var a=r.bgClass?r.bgClass+" "+(r.line.bgClass||""):r.line.bgClass;if(a&&(a+=" CodeMirror-linebackground"),r.background)a?r.background.className=a:(r.background.parentNode.removeChild(r.background),r.background=null);else if(a){var o=Pr(r);r.background=o.insertBefore(I("div",null,a),o.firstChild),t.display.input.setUneditable(r.background)}}function sc(t,r){var a=t.display.externalMeasured;return a&&a.line==r.line?(t.display.externalMeasured=null,r.measure=a.measure,a.built):ec(t,r)}function ap(t,r){var a=r.text.className,o=sc(t,r);r.text==r.node&&(r.node=o.pre),r.text.parentNode.replaceChild(o.pre,r.text),r.text=o.pre,o.bgClass!=r.bgClass||o.textClass!=r.textClass?(r.bgClass=o.bgClass,r.textClass=o.textClass,ea(t,r)):a&&(r.text.className=a)}function ea(t,r){op(t,r),r.line.wrapClass?Pr(r).className=r.line.wrapClass:r.node!=r.text&&(r.node.className="");var a=r.textClass?r.textClass+" "+(r.line.textClass||""):r.line.textClass;r.text.className=a||""}function oc(t,r,a,o){if(r.gutter&&(r.node.removeChild(r.gutter),r.gutter=null),r.gutterBackground&&(r.node.removeChild(r.gutterBackground),r.gutterBackground=null),r.line.gutterClass){var c=Pr(r);r.gutterBackground=I("div",null,"CodeMirror-gutter-background "+r.line.gutterClass,"left: "+(t.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px; width: "+o.gutterTotalWidth+"px"),t.display.input.setUneditable(r.gutterBackground),c.insertBefore(r.gutterBackground,r.text)}var d=r.line.gutterMarkers;if(t.options.lineNumbers||d){var g=Pr(r),v=r.gutter=I("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px");if(v.setAttribute("aria-hidden","true"),t.display.input.setUneditable(v),g.insertBefore(v,r.text),r.line.gutterClass&&(v.className+=" "+r.line.gutterClass),t.options.lineNumbers&&(!d||!d["CodeMirror-linenumbers"])&&(r.lineNumber=v.appendChild(I("div",Mr(t.options,a),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+o.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),d)for(var x=0;x<t.display.gutterSpecs.length;++x){var _=t.display.gutterSpecs[x].className,M=d.hasOwnProperty(_)&&d[_];M&&v.appendChild(I("div",[M],"CodeMirror-gutter-elt","left: "+o.gutterLeft[_]+"px; width: "+o.gutterWidth[_]+"px"))}}}function lp(t,r,a){r.alignable&&(r.alignable=null);for(var o=it("CodeMirror-linewidget"),c=r.node.firstChild,d=void 0;c;c=d)d=c.nextSibling,o.test(c.className)&&r.node.removeChild(c);ac(t,r,a)}function cp(t,r,a,o){var c=sc(t,r);return r.text=r.node=c.pre,c.bgClass&&(r.bgClass=c.bgClass),c.textClass&&(r.textClass=c.textClass),ea(t,r),oc(t,r,a,o),ac(t,r,o),r.node}function ac(t,r,a){if(lc(t,r.line,r,a,!0),r.rest)for(var o=0;o<r.rest.length;o++)lc(t,r.rest[o],r,a,!1)}function lc(t,r,a,o,c){if(r.widgets)for(var d=Pr(a),g=0,v=r.widgets;g<v.length;++g){var x=v[g],_=I("div",[x.node],"CodeMirror-linewidget"+(x.className?" "+x.className:""));x.handleMouseEvents||_.setAttribute("cm-ignore-events","true"),up(x,_,a,o),t.display.input.setUneditable(_),c&&x.above?d.insertBefore(_,a.gutter||a.text):d.appendChild(_),ke(x,"redraw")}}function up(t,r,a,o){if(t.noHScroll){(a.alignable||(a.alignable=[])).push(r);var c=o.wrapperWidth;r.style.left=o.fixedPos+"px",t.coverGutter||(c-=o.gutterTotalWidth,r.style.paddingLeft=o.gutterTotalWidth+"px"),r.style.width=c+"px"}t.coverGutter&&(r.style.zIndex=5,r.style.position="relative",t.noHScroll||(r.style.marginLeft=-o.gutterTotalWidth+"px"))}function Or(t){if(t.height!=null)return t.height;var r=t.doc.cm;if(!r)return 0;if(!Rt(document.body,t.node)){var a="position: relative;";t.coverGutter&&(a+="margin-left: -"+r.display.gutters.offsetWidth+"px;"),t.noHScroll&&(a+="width: "+r.display.wrapper.clientWidth+"px;"),R(r.display.measure,I("div",[t.node],null,a))}return t.height=t.node.parentNode.offsetHeight}function ji(t,r){for(var a=Kt(r);a!=t.wrapper;a=a.parentNode)if(!a||a.nodeType==1&&a.getAttribute("cm-ignore-events")=="true"||a.parentNode==t.sizer&&a!=t.mover)return!0}function zs(t){return t.lineSpace.offsetTop}function ia(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function cc(t){if(t.cachedPaddingH)return t.cachedPaddingH;var r=R(t.measure,I("pre","x","CodeMirror-line-like")),a=window.getComputedStyle?window.getComputedStyle(r):r.currentStyle,o={left:parseInt(a.paddingLeft),right:parseInt(a.paddingRight)};return!isNaN(o.left)&&!isNaN(o.right)&&(t.cachedPaddingH=o),o}function Ni(t){return St-t.display.nativeBarWidth}function wn(t){return t.display.scroller.clientWidth-Ni(t)-t.display.barWidth}function na(t){return t.display.scroller.clientHeight-Ni(t)-t.display.barHeight}function fp(t,r,a){var o=t.options.lineWrapping,c=o&&wn(t);if(!r.measure.heights||o&&r.measure.width!=c){var d=r.measure.heights=[];if(o){r.measure.width=c;for(var g=r.text.firstChild.getClientRects(),v=0;v<g.length-1;v++){var x=g[v],_=g[v+1];Math.abs(x.bottom-_.bottom)>2&&d.push((x.bottom+_.top)/2-a.top)}}d.push(a.bottom-a.top)}}function uc(t,r,a){if(t.line==r)return{map:t.measure.map,cache:t.measure.cache};if(t.rest){for(var o=0;o<t.rest.length;o++)if(t.rest[o]==r)return{map:t.measure.maps[o],cache:t.measure.caches[o]};for(var c=0;c<t.rest.length;c++)if(Zt(t.rest[c])>a)return{map:t.measure.maps[c],cache:t.measure.caches[c],before:!0}}}function hp(t,r){r=_i(r);var a=Zt(r),o=t.display.externalMeasured=new nc(t.doc,r,a);o.lineN=a;var c=o.built=ec(t,o);return o.text=c.pre,R(t.display.lineMeasure,c.pre),o}function fc(t,r,a,o){return Di(t,Gn(t,r),a,o)}function ra(t,r){if(r>=t.display.viewFrom&&r<t.display.viewTo)return t.display.view[Cn(t,r)];var a=t.display.externalMeasured;if(a&&r>=a.lineN&&r<a.lineN+a.size)return a}function Gn(t,r){var a=Zt(r),o=ra(t,a);o&&!o.text?o=null:o&&o.changes&&(rc(t,o,a,ca(t)),t.curOp.forceUpdate=!0),o||(o=hp(t,r));var c=uc(o,r,a);return{line:r,view:o,rect:null,map:c.map,cache:c.cache,before:c.before,hasHeights:!1}}function Di(t,r,a,o,c){r.before&&(a=-1);var d=a+(o||""),g;return r.cache.hasOwnProperty(d)?g=r.cache[d]:(r.rect||(r.rect=r.view.text.getBoundingClientRect()),r.hasHeights||(fp(t,r.view,r.rect),r.hasHeights=!0),g=pp(t,r,a,o),g.bogus||(r.cache[d]=g)),{left:g.left,right:g.right,top:c?g.rtop:g.top,bottom:c?g.rbottom:g.bottom}}var hc={left:0,right:0,top:0,bottom:0};function dc(t,r,a){for(var o,c,d,g,v,x,_=0;_<t.length;_+=3)if(v=t[_],x=t[_+1],r<v?(c=0,d=1,g="left"):r<x?(c=r-v,d=c+1):(_==t.length-3||r==x&&t[_+3]>r)&&(d=x-v,c=d-1,r>=x&&(g="right")),c!=null){if(o=t[_+2],v==x&&a==(o.insertLeft?"left":"right")&&(g=a),a=="left"&&c==0)for(;_&&t[_-2]==t[_-3]&&t[_-1].insertLeft;)o=t[(_-=3)+2],g="left";if(a=="right"&&c==x-v)for(;_<t.length-3&&t[_+3]==t[_+4]&&!t[_+5].insertLeft;)o=t[(_+=3)+2],g="right";break}return{node:o,start:c,end:d,collapse:g,coverStart:v,coverEnd:x}}function dp(t,r){var a=hc;if(r=="left")for(var o=0;o<t.length&&(a=t[o]).left==a.right;o++);else for(var c=t.length-1;c>=0&&(a=t[c]).left==a.right;c--);return a}function pp(t,r,a,o){var c=dc(r.map,a,o),d=c.node,g=c.start,v=c.end,x=c.collapse,_;if(d.nodeType==3){for(var M=0;M<4;M++){for(;g&&Wi(r.line.text.charAt(c.coverStart+g));)--g;for(;c.coverStart+v<c.coverEnd&&Wi(r.line.text.charAt(c.coverStart+v));)++v;if(p&&m<9&&g==0&&v==c.coverEnd-c.coverStart?_=d.parentNode.getBoundingClientRect():_=dp(ft(d,g,v).getClientRects(),o),_.left||_.right||g==0)break;v=g,g=g-1,x="right"}p&&m<11&&(_=gp(t.display.measure,_))}else{g>0&&(x=o="right");var N;t.options.lineWrapping&&(N=d.getClientRects()).length>1?_=N[o=="right"?N.length-1:0]:_=d.getBoundingClientRect()}if(p&&m<9&&!g&&(!_||!_.left&&!_.right)){var W=d.parentNode.getClientRects()[0];W?_={left:W.left,right:W.left+Zn(t.display),top:W.top,bottom:W.bottom}:_=hc}for(var E=_.top-r.rect.top,B=_.bottom-r.rect.top,V=(E+B)/2,nt=r.view.measure.heights,ct=0;ct<nt.length-1&&!(V<nt[ct]);ct++);var dt=ct?nt[ct-1]:0,ut=nt[ct],bt={left:(x=="right"?_.right:_.left)-r.rect.left,right:(x=="left"?_.left:_.right)-r.rect.left,top:dt,bottom:ut};return!_.left&&!_.right&&(bt.bogus=!0),t.options.singleCursorHeightPerLine||(bt.rtop=E,bt.rbottom=B),bt}function gp(t,r){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!sn(t))return r;var a=screen.logicalXDPI/screen.deviceXDPI,o=screen.logicalYDPI/screen.deviceYDPI;return{left:r.left*a,right:r.right*a,top:r.top*o,bottom:r.bottom*o}}function pc(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var r=0;r<t.rest.length;r++)t.measure.caches[r]={}}function gc(t){t.display.externalMeasure=null,st(t.display.lineMeasure);for(var r=0;r<t.display.view.length;r++)pc(t.display.view[r])}function Ar(t){gc(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function mc(){return S&&H?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function vc(){return S&&H?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function sa(t){var r=_i(t),a=r.widgets,o=0;if(a)for(var c=0;c<a.length;++c)a[c].above&&(o+=Or(a[c]));return o}function Bs(t,r,a,o,c){if(!c){var d=sa(r);a.top+=d,a.bottom+=d}if(o=="line")return a;o||(o="local");var g=$i(r);if(o=="local"?g+=zs(t.display):g-=t.display.viewOffset,o=="page"||o=="window"){var v=t.display.lineSpace.getBoundingClientRect();g+=v.top+(o=="window"?0:vc());var x=v.left+(o=="window"?0:mc());a.left+=x,a.right+=x}return a.top+=g,a.bottom+=g,a}function yc(t,r,a){if(a=="div")return r;var o=r.left,c=r.top;if(a=="page")o-=mc(),c-=vc();else if(a=="local"||!a){var d=t.display.sizer.getBoundingClientRect();o+=d.left,c+=d.top}var g=t.display.lineSpace.getBoundingClientRect();return{left:o-g.left,top:c-g.top}}function Us(t,r,a,o,c){return o||(o=wt(t.doc,r.line)),Bs(t,o,fc(t,o,r.ch,c),a)}function wi(t,r,a,o,c,d){o=o||wt(t.doc,r.line),c||(c=Gn(t,o));function g(B,V){var nt=Di(t,c,B,V?"right":"left",d);return V?nt.left=nt.right:nt.right=nt.left,Bs(t,o,nt,a)}var v=Yt(o,t.doc.direction),x=r.ch,_=r.sticky;if(x>=o.text.length?(x=o.text.length,_="before"):x<=0&&(x=0,_="after"),!v)return g(_=="before"?x-1:x,_=="before");function M(B,V,nt){var ct=v[V],dt=ct.level==1;return g(nt?B-1:B,dt!=nt)}var N=pt(v,x,_),W=at,E=M(x,N,_=="before");return W!=null&&(E.other=M(x,W,_!="before")),E}function bc(t,r){var a=0;r=vt(t.doc,r),t.options.lineWrapping||(a=Zn(t.display)*r.ch);var o=wt(t.doc,r.line),c=$i(o)+zs(t.display);return{left:a,right:a,top:c,bottom:c+o.height}}function oa(t,r,a,o,c){var d=J(t,r,a);return d.xRel=c,o&&(d.outside=o),d}function aa(t,r,a){var o=t.doc;if(a+=t.display.viewOffset,a<0)return oa(o.first,0,null,-1,-1);var c=Mi(o,a),d=o.first+o.size-1;if(c>d)return oa(o.first+o.size-1,wt(o,d).text.length,null,1,1);r<0&&(r=0);for(var g=wt(o,c);;){var v=mp(t,g,c,r,a),x=jd(g,v.ch+(v.xRel>0||v.outside>0?1:0));if(!x)return v;var _=x.find(1);if(_.line==c)return _;g=wt(o,c=_.line)}}function xc(t,r,a,o){o-=sa(r);var c=r.text.length,d=F(function(g){return Di(t,a,g-1).bottom<=o},c,0);return c=F(function(g){return Di(t,a,g).top>o},d,c),{begin:d,end:c}}function _c(t,r,a,o){a||(a=Gn(t,r));var c=Bs(t,r,Di(t,a,o),"line").top;return xc(t,r,a,c)}function la(t,r,a,o){return t.bottom<=a?!1:t.top>a?!0:(o?t.left:t.right)>r}function mp(t,r,a,o,c){c-=$i(r);var d=Gn(t,r),g=sa(r),v=0,x=r.text.length,_=!0,M=Yt(r,t.doc.direction);if(M){var N=(t.options.lineWrapping?yp:vp)(t,r,a,d,M,o,c);_=N.level!=1,v=_?N.from:N.to-1,x=_?N.to:N.from-1}var W=null,E=null,B=F(function(Nt){var Mt=Di(t,d,Nt);return Mt.top+=g,Mt.bottom+=g,la(Mt,o,c,!1)?(Mt.top<=c&&Mt.left<=o&&(W=Nt,E=Mt),!0):!1},v,x),V,nt,ct=!1;if(E){var dt=o-E.left<E.right-o,ut=dt==_;B=W+(ut?0:1),nt=ut?"after":"before",V=dt?E.left:E.right}else{!_&&(B==x||B==v)&&B++,nt=B==0?"after":B==r.text.length?"before":Di(t,d,B-(_?1:0)).bottom+g<=c==_?"after":"before";var bt=wi(t,J(a,B,nt),"line",r,d);V=bt.left,ct=c<bt.top?-1:c>=bt.bottom?1:0}return B=Hi(r.text,B,1),oa(a,B,nt,ct,o-V)}function vp(t,r,a,o,c,d,g){var v=F(function(N){var W=c[N],E=W.level!=1;return la(wi(t,J(a,E?W.to:W.from,E?"before":"after"),"line",r,o),d,g,!0)},0,c.length-1),x=c[v];if(v>0){var _=x.level!=1,M=wi(t,J(a,_?x.from:x.to,_?"after":"before"),"line",r,o);la(M,d,g,!0)&&M.top>g&&(x=c[v-1])}return x}function yp(t,r,a,o,c,d,g){var v=xc(t,r,o,g),x=v.begin,_=v.end;/\s/.test(r.text.charAt(_-1))&&_--;for(var M=null,N=null,W=0;W<c.length;W++){var E=c[W];if(!(E.from>=_||E.to<=x)){var B=E.level!=1,V=Di(t,o,B?Math.min(_,E.to)-1:Math.max(x,E.from)).right,nt=V<d?d-V+1e9:V-d;(!M||N>nt)&&(M=E,N=nt)}}return M||(M=c[c.length-1]),M.from<x&&(M={from:x,to:M.to,level:M.level}),M.to>_&&(M={from:M.from,to:_,level:M.level}),M}var kn;function qn(t){if(t.cachedTextHeight!=null)return t.cachedTextHeight;if(kn==null){kn=I("pre",null,"CodeMirror-line-like");for(var r=0;r<49;++r)kn.appendChild(document.createTextNode("x")),kn.appendChild(I("br"));kn.appendChild(document.createTextNode("x"))}R(t.measure,kn);var a=kn.offsetHeight/50;return a>3&&(t.cachedTextHeight=a),st(t.measure),a||1}function Zn(t){if(t.cachedCharWidth!=null)return t.cachedCharWidth;var r=I("span","xxxxxxxxxx"),a=I("pre",[r],"CodeMirror-line-like");R(t.measure,a);var o=r.getBoundingClientRect(),c=(o.right-o.left)/10;return c>2&&(t.cachedCharWidth=c),c||10}function ca(t){for(var r=t.display,a={},o={},c=r.gutters.clientLeft,d=r.gutters.firstChild,g=0;d;d=d.nextSibling,++g){var v=t.display.gutterSpecs[g].className;a[v]=d.offsetLeft+d.clientLeft+c,o[v]=d.clientWidth}return{fixedPos:ua(r),gutterTotalWidth:r.gutters.offsetWidth,gutterLeft:a,gutterWidth:o,wrapperWidth:r.wrapper.clientWidth}}function ua(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function wc(t){var r=qn(t.display),a=t.options.lineWrapping,o=a&&Math.max(5,t.display.scroller.clientWidth/Zn(t.display)-3);return function(c){if(on(t.doc,c))return 0;var d=0;if(c.widgets)for(var g=0;g<c.widgets.length;g++)c.widgets[g].height&&(d+=c.widgets[g].height);return a?d+(Math.ceil(c.text.length/o)||1)*r:d+r}}function fa(t){var r=t.doc,a=wc(t);r.iter(function(o){var c=a(o);c!=o.height&&Ge(o,c)})}function Sn(t,r,a,o){var c=t.display;if(!a&&Kt(r).getAttribute("cm-not-content")=="true")return null;var d,g,v=c.lineSpace.getBoundingClientRect();try{d=r.clientX-v.left,g=r.clientY-v.top}catch{return null}var x=aa(t,d,g),_;if(o&&x.xRel>0&&(_=wt(t.doc,x.line).text).length==x.ch){var M=zt(_,_.length,t.options.tabSize)-_.length;x=J(x.line,Math.max(0,Math.round((d-cc(t.display).left)/Zn(t.display))-M))}return x}function Cn(t,r){if(r>=t.display.viewTo||(r-=t.display.viewFrom,r<0))return null;for(var a=t.display.view,o=0;o<a.length;o++)if(r-=a[o].size,r<0)return o}function je(t,r,a,o){r==null&&(r=t.doc.first),a==null&&(a=t.doc.first+t.doc.size),o||(o=0);var c=t.display;if(o&&a<c.viewTo&&(c.updateLineNumbers==null||c.updateLineNumbers>r)&&(c.updateLineNumbers=r),t.curOp.viewChanged=!0,r>=c.viewTo)Ui&&Jo(t.doc,r)<c.viewTo&&ln(t);else if(a<=c.viewFrom)Ui&&Ql(t.doc,a+o)>c.viewFrom?ln(t):(c.viewFrom+=o,c.viewTo+=o);else if(r<=c.viewFrom&&a>=c.viewTo)ln(t);else if(r<=c.viewFrom){var d=$s(t,a,a+o,1);d?(c.view=c.view.slice(d.index),c.viewFrom=d.lineN,c.viewTo+=o):ln(t)}else if(a>=c.viewTo){var g=$s(t,r,r,-1);g?(c.view=c.view.slice(0,g.index),c.viewTo=g.lineN):ln(t)}else{var v=$s(t,r,r,-1),x=$s(t,a,a+o,1);v&&x?(c.view=c.view.slice(0,v.index).concat(Hs(t,v.lineN,x.lineN)).concat(c.view.slice(x.index)),c.viewTo+=o):ln(t)}var _=c.externalMeasured;_&&(a<_.lineN?_.lineN+=o:r<_.lineN+_.size&&(c.externalMeasured=null))}function an(t,r,a){t.curOp.viewChanged=!0;var o=t.display,c=t.display.externalMeasured;if(c&&r>=c.lineN&&r<c.lineN+c.size&&(o.externalMeasured=null),!(r<o.viewFrom||r>=o.viewTo)){var d=o.view[Cn(t,r)];if(d.node!=null){var g=d.changes||(d.changes=[]);mt(g,a)==-1&&g.push(a)}}}function ln(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function $s(t,r,a,o){var c=Cn(t,r),d,g=t.display.view;if(!Ui||a==t.doc.first+t.doc.size)return{index:c,lineN:a};for(var v=t.display.viewFrom,x=0;x<c;x++)v+=g[x].size;if(v!=r){if(o>0){if(c==g.length-1)return null;d=v+g[c].size-r,c++}else d=v-r;r+=d,a+=d}for(;Jo(t.doc,a)!=a;){if(c==(o<0?0:g.length-1))return null;a+=o*g[c-(o<0?1:0)].size,c+=o}return{index:c,lineN:a}}function bp(t,r,a){var o=t.display,c=o.view;c.length==0||r>=o.viewTo||a<=o.viewFrom?(o.view=Hs(t,r,a),o.viewFrom=r):(o.viewFrom>r?o.view=Hs(t,r,o.viewFrom).concat(o.view):o.viewFrom<r&&(o.view=o.view.slice(Cn(t,r))),o.viewFrom=r,o.viewTo<a?o.view=o.view.concat(Hs(t,o.viewTo,a)):o.viewTo>a&&(o.view=o.view.slice(0,Cn(t,a)))),o.viewTo=a}function kc(t){for(var r=t.display.view,a=0,o=0;o<r.length;o++){var c=r[o];!c.hidden&&(!c.node||c.changes)&&++a}return a}function Ir(t){t.display.input.showSelection(t.display.input.prepareSelection())}function Sc(t,r){r===void 0&&(r=!0);var a=t.doc,o={},c=o.cursors=document.createDocumentFragment(),d=o.selection=document.createDocumentFragment(),g=t.options.$customCursor;g&&(r=!0);for(var v=0;v<a.sel.ranges.length;v++)if(!(!r&&v==a.sel.primIndex)){var x=a.sel.ranges[v];if(!(x.from().line>=t.display.viewTo||x.to().line<t.display.viewFrom)){var _=x.empty();if(g){var M=g(t,x);M&&ha(t,M,c)}else(_||t.options.showCursorWhenSelecting)&&ha(t,x.head,c);_||xp(t,x,d)}}return o}function ha(t,r,a){var o=wi(t,r,"div",null,null,!t.options.singleCursorHeightPerLine),c=a.appendChild(I("div"," ","CodeMirror-cursor"));if(c.style.left=o.left+"px",c.style.top=o.top+"px",c.style.height=Math.max(0,o.bottom-o.top)*t.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(t.getWrapperElement().className)){var d=Us(t,r,"div",null,null),g=d.right-d.left;c.style.width=(g>0?g:t.defaultCharWidth())+"px"}if(o.other){var v=a.appendChild(I("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));v.style.display="",v.style.left=o.other.left+"px",v.style.top=o.other.top+"px",v.style.height=(o.other.bottom-o.other.top)*.85+"px"}}function js(t,r){return t.top-r.top||t.left-r.left}function xp(t,r,a){var o=t.display,c=t.doc,d=document.createDocumentFragment(),g=cc(t.display),v=g.left,x=Math.max(o.sizerWidth,wn(t)-o.sizer.offsetLeft)-g.right,_=c.direction=="ltr";function M(ut,bt,Nt,Mt){bt<0&&(bt=0),bt=Math.round(bt),Mt=Math.round(Mt),d.appendChild(I("div",null,"CodeMirror-selected","position: absolute; left: "+ut+`px;
                             top: `+bt+"px; width: "+(Nt??x-ut)+`px;
                             height: `+(Mt-bt)+"px"))}function N(ut,bt,Nt){var Mt=wt(c,ut),Bt=Mt.text.length,ne,Te;function ce(ve,Ke){return Us(t,J(ut,ve),"div",Mt,Ke)}function Ze(ve,Ke,De){var we=_c(t,Mt,null,ve),ye=Ke=="ltr"==(De=="after")?"left":"right",he=De=="after"?we.begin:we.end-(/\s/.test(Mt.text.charAt(we.end-1))?2:1);return ce(he,ye)[ye]}var Ye=Yt(Mt,c.direction);return Z(Ye,bt||0,Nt??Bt,function(ve,Ke,De,we){var ye=De=="ltr",he=ce(ve,ye?"left":"right"),Xe=ce(Ke-1,ye?"right":"left"),ur=bt==null&&ve==0,pn=Nt==null&&Ke==Bt,We=we==0,Pi=!Ye||we==Ye.length-1;if(Xe.top-he.top<=3){var Me=(_?ur:pn)&&We,Wa=(_?pn:ur)&&Pi,Ki=Me?v:(ye?he:Xe).left,Dn=Wa?x:(ye?Xe:he).right;M(Ki,he.top,Dn-Ki,he.bottom)}else{var Pn,ze,fr,Ha;ye?(Pn=_&&ur&&We?v:he.left,ze=_?x:Ze(ve,De,"before"),fr=_?v:Ze(Ke,De,"after"),Ha=_&&pn&&Pi?x:Xe.right):(Pn=_?Ze(ve,De,"before"):v,ze=!_&&ur&&We?x:he.right,fr=!_&&pn&&Pi?v:Xe.left,Ha=_?Ze(Ke,De,"after"):x),M(Pn,he.top,ze-Pn,he.bottom),he.bottom<Xe.top&&M(v,he.bottom,null,Xe.top),M(fr,Xe.top,Ha-fr,Xe.bottom)}(!ne||js(he,ne)<0)&&(ne=he),js(Xe,ne)<0&&(ne=Xe),(!Te||js(he,Te)<0)&&(Te=he),js(Xe,Te)<0&&(Te=Xe)}),{start:ne,end:Te}}var W=r.from(),E=r.to();if(W.line==E.line)N(W.line,W.ch,E.ch);else{var B=wt(c,W.line),V=wt(c,E.line),nt=_i(B)==_i(V),ct=N(W.line,W.ch,nt?B.text.length+1:null).end,dt=N(E.line,nt?0:null,E.ch).start;nt&&(ct.top<dt.top-2?(M(ct.right,ct.top,null,ct.bottom),M(v,dt.top,dt.left,dt.bottom)):M(ct.right,ct.top,dt.left-ct.right,ct.bottom)),ct.bottom<dt.top&&M(v,ct.bottom,null,dt.top)}a.appendChild(d)}function da(t){if(t.state.focused){var r=t.display;clearInterval(r.blinker);var a=!0;r.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?r.blinker=setInterval(function(){t.hasFocus()||Jn(t),r.cursorDiv.style.visibility=(a=!a)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(r.cursorDiv.style.visibility="hidden")}}function Cc(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||ga(t))}function pa(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&Jn(t))},100)}function ga(t,r){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),t.options.readOnly!="nocursor"&&(t.state.focused||(Dt(t,"focus",t,r),t.state.focused=!0,$(t.display.wrapper,"CodeMirror-focused"),!t.curOp&&t.display.selForContextMenu!=t.doc.sel&&(t.display.input.reset(),b&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),da(t))}function Jn(t,r){t.state.delayingBlurEvent||(t.state.focused&&(Dt(t,"blur",t,r),t.state.focused=!1,tt(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function Vs(t){for(var r=t.display,a=r.lineDiv.offsetTop,o=Math.max(0,r.scroller.getBoundingClientRect().top),c=r.lineDiv.getBoundingClientRect().top,d=0,g=0;g<r.view.length;g++){var v=r.view[g],x=t.options.lineWrapping,_=void 0,M=0;if(!v.hidden){if(c+=v.line.height,p&&m<8){var N=v.node.offsetTop+v.node.offsetHeight;_=N-a,a=N}else{var W=v.node.getBoundingClientRect();_=W.bottom-W.top,!x&&v.text.firstChild&&(M=v.text.firstChild.getBoundingClientRect().right-W.left-1)}var E=v.line.height-_;if((E>.005||E<-.005)&&(c<o&&(d-=E),Ge(v.line,_),Tc(v.line),v.rest))for(var B=0;B<v.rest.length;B++)Tc(v.rest[B]);if(M>t.display.sizerWidth){var V=Math.ceil(M/Zn(t.display));V>t.display.maxLineLength&&(t.display.maxLineLength=V,t.display.maxLine=v.line,t.display.maxLineChanged=!0)}}}Math.abs(d)>2&&(r.scroller.scrollTop+=d)}function Tc(t){if(t.widgets)for(var r=0;r<t.widgets.length;++r){var a=t.widgets[r],o=a.node.parentNode;o&&(a.height=o.offsetHeight)}}function Ys(t,r,a){var o=a&&a.top!=null?Math.max(0,a.top):t.scroller.scrollTop;o=Math.floor(o-zs(t));var c=a&&a.bottom!=null?a.bottom:o+t.wrapper.clientHeight,d=Mi(r,o),g=Mi(r,c);if(a&&a.ensure){var v=a.ensure.from.line,x=a.ensure.to.line;v<d?(d=v,g=Mi(r,$i(wt(r,v))+t.wrapper.clientHeight)):Math.min(x,r.lastLine())>=g&&(d=Mi(r,$i(wt(r,x))-t.wrapper.clientHeight),g=x)}return{from:d,to:Math.max(g,d+1)}}function _p(t,r){if(!ue(t,"scrollCursorIntoView")){var a=t.display,o=a.sizer.getBoundingClientRect(),c=null;if(r.top+o.top<0?c=!0:r.bottom+o.top>(window.innerHeight||document.documentElement.clientHeight)&&(c=!1),c!=null&&!P){var d=I("div","​",null,`position: absolute;
                         top: `+(r.top-a.viewOffset-zs(t.display))+`px;
                         height: `+(r.bottom-r.top+Ni(t)+a.barHeight)+`px;
                         left: `+r.left+"px; width: "+Math.max(2,r.right-r.left)+"px;");t.display.lineSpace.appendChild(d),d.scrollIntoView(c),t.display.lineSpace.removeChild(d)}}}function wp(t,r,a,o){o==null&&(o=0);var c;!t.options.lineWrapping&&r==a&&(a=r.sticky=="before"?J(r.line,r.ch+1,"before"):r,r=r.ch?J(r.line,r.sticky=="before"?r.ch-1:r.ch,"after"):r);for(var d=0;d<5;d++){var g=!1,v=wi(t,r),x=!a||a==r?v:wi(t,a);c={left:Math.min(v.left,x.left),top:Math.min(v.top,x.top)-o,right:Math.max(v.left,x.left),bottom:Math.max(v.bottom,x.bottom)+o};var _=ma(t,c),M=t.doc.scrollTop,N=t.doc.scrollLeft;if(_.scrollTop!=null&&(Fr(t,_.scrollTop),Math.abs(t.doc.scrollTop-M)>1&&(g=!0)),_.scrollLeft!=null&&(Tn(t,_.scrollLeft),Math.abs(t.doc.scrollLeft-N)>1&&(g=!0)),!g)break}return c}function kp(t,r){var a=ma(t,r);a.scrollTop!=null&&Fr(t,a.scrollTop),a.scrollLeft!=null&&Tn(t,a.scrollLeft)}function ma(t,r){var a=t.display,o=qn(t.display);r.top<0&&(r.top=0);var c=t.curOp&&t.curOp.scrollTop!=null?t.curOp.scrollTop:a.scroller.scrollTop,d=na(t),g={};r.bottom-r.top>d&&(r.bottom=r.top+d);var v=t.doc.height+ia(a),x=r.top<o,_=r.bottom>v-o;if(r.top<c)g.scrollTop=x?0:r.top;else if(r.bottom>c+d){var M=Math.min(r.top,(_?v:r.bottom)-d);M!=c&&(g.scrollTop=M)}var N=t.options.fixedGutter?0:a.gutters.offsetWidth,W=t.curOp&&t.curOp.scrollLeft!=null?t.curOp.scrollLeft:a.scroller.scrollLeft-N,E=wn(t)-a.gutters.offsetWidth,B=r.right-r.left>E;return B&&(r.right=r.left+E),r.left<10?g.scrollLeft=0:r.left<W?g.scrollLeft=Math.max(0,r.left+N-(B?0:10)):r.right>E+W-3&&(g.scrollLeft=r.right+(B?0:10)-E),g}function va(t,r){r!=null&&(Ks(t),t.curOp.scrollTop=(t.curOp.scrollTop==null?t.doc.scrollTop:t.curOp.scrollTop)+r)}function Qn(t){Ks(t);var r=t.getCursor();t.curOp.scrollToPos={from:r,to:r,margin:t.options.cursorScrollMargin}}function Er(t,r,a){(r!=null||a!=null)&&Ks(t),r!=null&&(t.curOp.scrollLeft=r),a!=null&&(t.curOp.scrollTop=a)}function Sp(t,r){Ks(t),t.curOp.scrollToPos=r}function Ks(t){var r=t.curOp.scrollToPos;if(r){t.curOp.scrollToPos=null;var a=bc(t,r.from),o=bc(t,r.to);Mc(t,a,o,r.margin)}}function Mc(t,r,a,o){var c=ma(t,{left:Math.min(r.left,a.left),top:Math.min(r.top,a.top)-o,right:Math.max(r.right,a.right),bottom:Math.max(r.bottom,a.bottom)+o});Er(t,c.scrollLeft,c.scrollTop)}function Fr(t,r){Math.abs(t.doc.scrollTop-r)<2||(l||ba(t,{top:r}),Lc(t,r,!0),l&&ba(t),Hr(t,100))}function Lc(t,r,a){r=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,r)),!(t.display.scroller.scrollTop==r&&!a)&&(t.doc.scrollTop=r,t.display.scrollbars.setScrollTop(r),t.display.scroller.scrollTop!=r&&(t.display.scroller.scrollTop=r))}function Tn(t,r,a,o){r=Math.max(0,Math.min(r,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),!((a?r==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-r)<2)&&!o)&&(t.doc.scrollLeft=r,Ac(t),t.display.scroller.scrollLeft!=r&&(t.display.scroller.scrollLeft=r),t.display.scrollbars.setScrollLeft(r))}function Rr(t){var r=t.display,a=r.gutters.offsetWidth,o=Math.round(t.doc.height+ia(t.display));return{clientHeight:r.scroller.clientHeight,viewHeight:r.wrapper.clientHeight,scrollWidth:r.scroller.scrollWidth,clientWidth:r.scroller.clientWidth,viewWidth:r.wrapper.clientWidth,barLeft:t.options.fixedGutter?a:0,docHeight:o,scrollHeight:o+Ni(t)+r.barHeight,nativeBarWidth:r.nativeBarWidth,gutterWidth:a}}var Mn=function(t,r,a){this.cm=a;var o=this.vert=I("div",[I("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),c=this.horiz=I("div",[I("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");o.tabIndex=c.tabIndex=-1,t(o),t(c),Ct(o,"scroll",function(){o.clientHeight&&r(o.scrollTop,"vertical")}),Ct(c,"scroll",function(){c.clientWidth&&r(c.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,p&&m<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Mn.prototype.update=function(t){var r=t.scrollWidth>t.clientWidth+1,a=t.scrollHeight>t.clientHeight+1,o=t.nativeBarWidth;if(a){this.vert.style.display="block",this.vert.style.bottom=r?o+"px":"0";var c=t.viewHeight-(r?o:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+c)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(r){this.horiz.style.display="block",this.horiz.style.right=a?o+"px":"0",this.horiz.style.left=t.barLeft+"px";var d=t.viewWidth-t.barLeft-(a?o:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+d)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(o==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:a?o:0,bottom:r?o:0}},Mn.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Mn.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Mn.prototype.zeroWidthHack=function(){var t=G&&!L?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Et,this.disableVert=new Et},Mn.prototype.enableZeroWidthBar=function(t,r,a){t.style.pointerEvents="auto";function o(){var c=t.getBoundingClientRect(),d=a=="vert"?document.elementFromPoint(c.right-1,(c.top+c.bottom)/2):document.elementFromPoint((c.right+c.left)/2,c.bottom-1);d!=t?t.style.pointerEvents="none":r.set(1e3,o)}r.set(1e3,o)},Mn.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var Wr=function(){};Wr.prototype.update=function(){return{bottom:0,right:0}},Wr.prototype.setScrollLeft=function(){},Wr.prototype.setScrollTop=function(){},Wr.prototype.clear=function(){};function tr(t,r){r||(r=Rr(t));var a=t.display.barWidth,o=t.display.barHeight;Nc(t,r);for(var c=0;c<4&&a!=t.display.barWidth||o!=t.display.barHeight;c++)a!=t.display.barWidth&&t.options.lineWrapping&&Vs(t),Nc(t,Rr(t)),a=t.display.barWidth,o=t.display.barHeight}function Nc(t,r){var a=t.display,o=a.scrollbars.update(r);a.sizer.style.paddingRight=(a.barWidth=o.right)+"px",a.sizer.style.paddingBottom=(a.barHeight=o.bottom)+"px",a.heightForcer.style.borderBottom=o.bottom+"px solid transparent",o.right&&o.bottom?(a.scrollbarFiller.style.display="block",a.scrollbarFiller.style.height=o.bottom+"px",a.scrollbarFiller.style.width=o.right+"px"):a.scrollbarFiller.style.display="",o.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(a.gutterFiller.style.display="block",a.gutterFiller.style.height=o.bottom+"px",a.gutterFiller.style.width=r.gutterWidth+"px"):a.gutterFiller.style.display=""}var Dc={native:Mn,null:Wr};function Pc(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&tt(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Dc[t.options.scrollbarStyle](function(r){t.display.wrapper.insertBefore(r,t.display.scrollbarFiller),Ct(r,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),r.setAttribute("cm-not-content","true")},function(r,a){a=="horizontal"?Tn(t,r):Fr(t,r)},t),t.display.scrollbars.addClass&&$(t.display.wrapper,t.display.scrollbars.addClass)}var Cp=0;function Ln(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Cp,markArrays:null},ip(t.curOp)}function Nn(t){var r=t.curOp;r&&rp(r,function(a){for(var o=0;o<a.ops.length;o++)a.ops[o].cm.curOp=null;Tp(a)})}function Tp(t){for(var r=t.ops,a=0;a<r.length;a++)Mp(r[a]);for(var o=0;o<r.length;o++)Lp(r[o]);for(var c=0;c<r.length;c++)Np(r[c]);for(var d=0;d<r.length;d++)Dp(r[d]);for(var g=0;g<r.length;g++)Pp(r[g])}function Mp(t){var r=t.cm,a=r.display;Ap(r),t.updateMaxLine&&ta(r),t.mustUpdate=t.viewChanged||t.forceUpdate||t.scrollTop!=null||t.scrollToPos&&(t.scrollToPos.from.line<a.viewFrom||t.scrollToPos.to.line>=a.viewTo)||a.maxLineChanged&&r.options.lineWrapping,t.update=t.mustUpdate&&new Xs(r,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function Lp(t){t.updatedDisplay=t.mustUpdate&&ya(t.cm,t.update)}function Np(t){var r=t.cm,a=r.display;t.updatedDisplay&&Vs(r),t.barMeasure=Rr(r),a.maxLineChanged&&!r.options.lineWrapping&&(t.adjustWidthTo=fc(r,a.maxLine,a.maxLine.text.length).left+3,r.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(a.scroller.clientWidth,a.sizer.offsetLeft+t.adjustWidthTo+Ni(r)+r.display.barWidth),t.maxScrollLeft=Math.max(0,a.sizer.offsetLeft+t.adjustWidthTo-wn(r))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=a.input.prepareSelection())}function Dp(t){var r=t.cm;t.adjustWidthTo!=null&&(r.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<r.doc.scrollLeft&&Tn(r,Math.min(r.display.scroller.scrollLeft,t.maxScrollLeft),!0),r.display.maxLineChanged=!1);var a=t.focus&&t.focus==jt();t.preparedSelection&&r.display.input.showSelection(t.preparedSelection,a),(t.updatedDisplay||t.startHeight!=r.doc.height)&&tr(r,t.barMeasure),t.updatedDisplay&&_a(r,t.barMeasure),t.selectionChanged&&da(r),r.state.focused&&t.updateInput&&r.display.input.reset(t.typing),a&&Cc(t.cm)}function Pp(t){var r=t.cm,a=r.display,o=r.doc;if(t.updatedDisplay&&Oc(r,t.update),a.wheelStartX!=null&&(t.scrollTop!=null||t.scrollLeft!=null||t.scrollToPos)&&(a.wheelStartX=a.wheelStartY=null),t.scrollTop!=null&&Lc(r,t.scrollTop,t.forceScroll),t.scrollLeft!=null&&Tn(r,t.scrollLeft,!0,!0),t.scrollToPos){var c=wp(r,vt(o,t.scrollToPos.from),vt(o,t.scrollToPos.to),t.scrollToPos.margin);_p(r,c)}var d=t.maybeHiddenMarkers,g=t.maybeUnhiddenMarkers;if(d)for(var v=0;v<d.length;++v)d[v].lines.length||Dt(d[v],"hide");if(g)for(var x=0;x<g.length;++x)g[x].lines.length&&Dt(g[x],"unhide");a.wrapper.offsetHeight&&(o.scrollTop=r.display.scroller.scrollTop),t.changeObjs&&Dt(r,"changes",r,t.changeObjs),t.update&&t.update.finish()}function qe(t,r){if(t.curOp)return r();Ln(t);try{return r()}finally{Nn(t)}}function Se(t,r){return function(){if(t.curOp)return r.apply(t,arguments);Ln(t);try{return r.apply(t,arguments)}finally{Nn(t)}}}function He(t){return function(){if(this.curOp)return t.apply(this,arguments);Ln(this);try{return t.apply(this,arguments)}finally{Nn(this)}}}function Ce(t){return function(){var r=this.cm;if(!r||r.curOp)return t.apply(this,arguments);Ln(r);try{return t.apply(this,arguments)}finally{Nn(r)}}}function Hr(t,r){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(r,Tt(Op,t))}function Op(t){var r=t.doc;if(!(r.highlightFrontier>=t.display.viewTo)){var a=+new Date+t.options.workTime,o=Lr(t,r.highlightFrontier),c=[];r.iter(o.line,Math.min(r.first+r.size,t.display.viewTo+500),function(d){if(o.line>=t.display.viewFrom){var g=d.styles,v=d.text.length>t.options.maxHighlightLength?si(r.mode,o.state):null,x=Hl(t,d,o,!0);v&&(o.state=v),d.styles=x.styles;var _=d.styleClasses,M=x.classes;M?d.styleClasses=M:_&&(d.styleClasses=null);for(var N=!g||g.length!=d.styles.length||_!=M&&(!_||!M||_.bgClass!=M.bgClass||_.textClass!=M.textClass),W=0;!N&&W<g.length;++W)N=g[W]!=d.styles[W];N&&c.push(o.line),d.stateAfter=o.save(),o.nextLine()}else d.text.length<=t.options.maxHighlightLength&&Xo(t,d.text,o),d.stateAfter=o.line%5==0?o.save():null,o.nextLine();if(+new Date>a)return Hr(t,t.options.workDelay),!0}),r.highlightFrontier=o.line,r.modeFrontier=Math.max(r.modeFrontier,o.line),c.length&&qe(t,function(){for(var d=0;d<c.length;d++)an(t,c[d],"text")})}}var Xs=function(t,r,a){var o=t.display;this.viewport=r,this.visible=Ys(o,t.doc,r),this.editorIsHidden=!o.wrapper.offsetWidth,this.wrapperHeight=o.wrapper.clientHeight,this.wrapperWidth=o.wrapper.clientWidth,this.oldDisplayWidth=wn(t),this.force=a,this.dims=ca(t),this.events=[]};Xs.prototype.signal=function(t,r){xe(t,r)&&this.events.push(arguments)},Xs.prototype.finish=function(){for(var t=0;t<this.events.length;t++)Dt.apply(null,this.events[t])};function Ap(t){var r=t.display;!r.scrollbarsClipped&&r.scroller.offsetWidth&&(r.nativeBarWidth=r.scroller.offsetWidth-r.scroller.clientWidth,r.heightForcer.style.height=Ni(t)+"px",r.sizer.style.marginBottom=-r.nativeBarWidth+"px",r.sizer.style.borderRightWidth=Ni(t)+"px",r.scrollbarsClipped=!0)}function Ip(t){if(t.hasFocus())return null;var r=jt();if(!r||!Rt(t.display.lineDiv,r))return null;var a={activeElt:r};if(window.getSelection){var o=window.getSelection();o.anchorNode&&o.extend&&Rt(t.display.lineDiv,o.anchorNode)&&(a.anchorNode=o.anchorNode,a.anchorOffset=o.anchorOffset,a.focusNode=o.focusNode,a.focusOffset=o.focusOffset)}return a}function Ep(t){if(!(!t||!t.activeElt||t.activeElt==jt())&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&Rt(document.body,t.anchorNode)&&Rt(document.body,t.focusNode))){var r=window.getSelection(),a=document.createRange();a.setEnd(t.anchorNode,t.anchorOffset),a.collapse(!1),r.removeAllRanges(),r.addRange(a),r.extend(t.focusNode,t.focusOffset)}}function ya(t,r){var a=t.display,o=t.doc;if(r.editorIsHidden)return ln(t),!1;if(!r.force&&r.visible.from>=a.viewFrom&&r.visible.to<=a.viewTo&&(a.updateLineNumbers==null||a.updateLineNumbers>=a.viewTo)&&a.renderedView==a.view&&kc(t)==0)return!1;Ic(t)&&(ln(t),r.dims=ca(t));var c=o.first+o.size,d=Math.max(r.visible.from-t.options.viewportMargin,o.first),g=Math.min(c,r.visible.to+t.options.viewportMargin);a.viewFrom<d&&d-a.viewFrom<20&&(d=Math.max(o.first,a.viewFrom)),a.viewTo>g&&a.viewTo-g<20&&(g=Math.min(c,a.viewTo)),Ui&&(d=Jo(t.doc,d),g=Ql(t.doc,g));var v=d!=a.viewFrom||g!=a.viewTo||a.lastWrapHeight!=r.wrapperHeight||a.lastWrapWidth!=r.wrapperWidth;bp(t,d,g),a.viewOffset=$i(wt(t.doc,a.viewFrom)),t.display.mover.style.top=a.viewOffset+"px";var x=kc(t);if(!v&&x==0&&!r.force&&a.renderedView==a.view&&(a.updateLineNumbers==null||a.updateLineNumbers>=a.viewTo))return!1;var _=Ip(t);return x>4&&(a.lineDiv.style.display="none"),Fp(t,a.updateLineNumbers,r.dims),x>4&&(a.lineDiv.style.display=""),a.renderedView=a.view,Ep(_),st(a.cursorDiv),st(a.selectionDiv),a.gutters.style.height=a.sizer.style.minHeight=0,v&&(a.lastWrapHeight=r.wrapperHeight,a.lastWrapWidth=r.wrapperWidth,Hr(t,400)),a.updateLineNumbers=null,!0}function Oc(t,r){for(var a=r.viewport,o=!0;;o=!1){if(!o||!t.options.lineWrapping||r.oldDisplayWidth==wn(t)){if(a&&a.top!=null&&(a={top:Math.min(t.doc.height+ia(t.display)-na(t),a.top)}),r.visible=Ys(t.display,t.doc,a),r.visible.from>=t.display.viewFrom&&r.visible.to<=t.display.viewTo)break}else o&&(r.visible=Ys(t.display,t.doc,a));if(!ya(t,r))break;Vs(t);var c=Rr(t);Ir(t),tr(t,c),_a(t,c),r.force=!1}r.signal(t,"update",t),(t.display.viewFrom!=t.display.reportedViewFrom||t.display.viewTo!=t.display.reportedViewTo)&&(r.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function ba(t,r){var a=new Xs(t,r);if(ya(t,a)){Vs(t),Oc(t,a);var o=Rr(t);Ir(t),tr(t,o),_a(t,o),a.finish()}}function Fp(t,r,a){var o=t.display,c=t.options.lineNumbers,d=o.lineDiv,g=d.firstChild;function v(B){var V=B.nextSibling;return b&&G&&t.display.currentWheelTarget==B?B.style.display="none":B.parentNode.removeChild(B),V}for(var x=o.view,_=o.viewFrom,M=0;M<x.length;M++){var N=x[M];if(!N.hidden)if(!N.node||N.node.parentNode!=d){var W=cp(t,N,_,a);d.insertBefore(W,g)}else{for(;g!=N.node;)g=v(g);var E=c&&r!=null&&r<=_&&N.lineNumber;N.changes&&(mt(N.changes,"gutter")>-1&&(E=!1),rc(t,N,_,a)),E&&(st(N.lineNumber),N.lineNumber.appendChild(document.createTextNode(Mr(t.options,_)))),g=N.node.nextSibling}_+=N.size}for(;g;)g=v(g)}function xa(t){var r=t.gutters.offsetWidth;t.sizer.style.marginLeft=r+"px",ke(t,"gutterChanged",t)}function _a(t,r){t.display.sizer.style.minHeight=r.docHeight+"px",t.display.heightForcer.style.top=r.docHeight+"px",t.display.gutters.style.height=r.docHeight+t.display.barHeight+Ni(t)+"px"}function Ac(t){var r=t.display,a=r.view;if(!(!r.alignWidgets&&(!r.gutters.firstChild||!t.options.fixedGutter))){for(var o=ua(r)-r.scroller.scrollLeft+t.doc.scrollLeft,c=r.gutters.offsetWidth,d=o+"px",g=0;g<a.length;g++)if(!a[g].hidden){t.options.fixedGutter&&(a[g].gutter&&(a[g].gutter.style.left=d),a[g].gutterBackground&&(a[g].gutterBackground.style.left=d));var v=a[g].alignable;if(v)for(var x=0;x<v.length;x++)v[x].style.left=d}t.options.fixedGutter&&(r.gutters.style.left=o+c+"px")}}function Ic(t){if(!t.options.lineNumbers)return!1;var r=t.doc,a=Mr(t.options,r.first+r.size-1),o=t.display;if(a.length!=o.lineNumChars){var c=o.measure.appendChild(I("div",[I("div",a)],"CodeMirror-linenumber CodeMirror-gutter-elt")),d=c.firstChild.offsetWidth,g=c.offsetWidth-d;return o.lineGutter.style.width="",o.lineNumInnerWidth=Math.max(d,o.lineGutter.offsetWidth-g)+1,o.lineNumWidth=o.lineNumInnerWidth+g,o.lineNumChars=o.lineNumInnerWidth?a.length:-1,o.lineGutter.style.width=o.lineNumWidth+"px",xa(t.display),!0}return!1}function wa(t,r){for(var a=[],o=!1,c=0;c<t.length;c++){var d=t[c],g=null;if(typeof d!="string"&&(g=d.style,d=d.className),d=="CodeMirror-linenumbers")if(r)o=!0;else continue;a.push({className:d,style:g})}return r&&!o&&a.push({className:"CodeMirror-linenumbers",style:null}),a}function Ec(t){var r=t.gutters,a=t.gutterSpecs;st(r),t.lineGutter=null;for(var o=0;o<a.length;++o){var c=a[o],d=c.className,g=c.style,v=r.appendChild(I("div",null,"CodeMirror-gutter "+d));g&&(v.style.cssText=g),d=="CodeMirror-linenumbers"&&(t.lineGutter=v,v.style.width=(t.lineNumWidth||1)+"px")}r.style.display=a.length?"":"none",xa(t)}function zr(t){Ec(t.display),je(t),Ac(t)}function Rp(t,r,a,o){var c=this;this.input=a,c.scrollbarFiller=I("div",null,"CodeMirror-scrollbar-filler"),c.scrollbarFiller.setAttribute("cm-not-content","true"),c.gutterFiller=I("div",null,"CodeMirror-gutter-filler"),c.gutterFiller.setAttribute("cm-not-content","true"),c.lineDiv=C("div",null,"CodeMirror-code"),c.selectionDiv=I("div",null,null,"position: relative; z-index: 1"),c.cursorDiv=I("div",null,"CodeMirror-cursors"),c.measure=I("div",null,"CodeMirror-measure"),c.lineMeasure=I("div",null,"CodeMirror-measure"),c.lineSpace=C("div",[c.measure,c.lineMeasure,c.selectionDiv,c.cursorDiv,c.lineDiv],null,"position: relative; outline: none");var d=C("div",[c.lineSpace],"CodeMirror-lines");c.mover=I("div",[d],null,"position: relative"),c.sizer=I("div",[c.mover],"CodeMirror-sizer"),c.sizerWidth=null,c.heightForcer=I("div",null,null,"position: absolute; height: "+St+"px; width: 1px;"),c.gutters=I("div",null,"CodeMirror-gutters"),c.lineGutter=null,c.scroller=I("div",[c.sizer,c.heightForcer,c.gutters],"CodeMirror-scroll"),c.scroller.setAttribute("tabIndex","-1"),c.wrapper=I("div",[c.scrollbarFiller,c.gutterFiller,c.scroller],"CodeMirror"),c.wrapper.setAttribute("translate","no"),p&&m<8&&(c.gutters.style.zIndex=-1,c.scroller.style.paddingRight=0),!b&&!(l&&X)&&(c.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(c.wrapper):t(c.wrapper)),c.viewFrom=c.viewTo=r.first,c.reportedViewFrom=c.reportedViewTo=r.first,c.view=[],c.renderedView=null,c.externalMeasured=null,c.viewOffset=0,c.lastWrapHeight=c.lastWrapWidth=0,c.updateLineNumbers=null,c.nativeBarWidth=c.barHeight=c.barWidth=0,c.scrollbarsClipped=!1,c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null,c.alignWidgets=!1,c.cachedCharWidth=c.cachedTextHeight=c.cachedPaddingH=null,c.maxLine=null,c.maxLineLength=0,c.maxLineChanged=!1,c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null,c.shift=!1,c.selForContextMenu=null,c.activeTouch=null,c.gutterSpecs=wa(o.gutters,o.lineNumbers),Ec(c),a.init(c)}var Gs=0,Vi=null;p?Vi=-.53:l?Vi=15:S?Vi=-.7:O&&(Vi=-1/3);function Fc(t){var r=t.wheelDeltaX,a=t.wheelDeltaY;return r==null&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(r=t.detail),a==null&&t.detail&&t.axis==t.VERTICAL_AXIS?a=t.detail:a==null&&(a=t.wheelDelta),{x:r,y:a}}function Wp(t){var r=Fc(t);return r.x*=Vi,r.y*=Vi,r}function Rc(t,r){var a=Fc(r),o=a.x,c=a.y,d=Vi;r.deltaMode===0&&(o=r.deltaX,c=r.deltaY,d=1);var g=t.display,v=g.scroller,x=v.scrollWidth>v.clientWidth,_=v.scrollHeight>v.clientHeight;if(o&&x||c&&_){if(c&&G&&b){t:for(var M=r.target,N=g.view;M!=v;M=M.parentNode)for(var W=0;W<N.length;W++)if(N[W].node==M){t.display.currentWheelTarget=M;break t}}if(o&&!l&&!T&&d!=null){c&&_&&Fr(t,Math.max(0,v.scrollTop+c*d)),Tn(t,Math.max(0,v.scrollLeft+o*d)),(!c||c&&_)&&z(r),g.wheelStartX=null;return}if(c&&d!=null){var E=c*d,B=t.doc.scrollTop,V=B+g.wrapper.clientHeight;E<0?B=Math.max(0,B+E-50):V=Math.min(t.doc.height,V+E+50),ba(t,{top:B,bottom:V})}Gs<20&&r.deltaMode!==0&&(g.wheelStartX==null?(g.wheelStartX=v.scrollLeft,g.wheelStartY=v.scrollTop,g.wheelDX=o,g.wheelDY=c,setTimeout(function(){if(g.wheelStartX!=null){var nt=v.scrollLeft-g.wheelStartX,ct=v.scrollTop-g.wheelStartY,dt=ct&&g.wheelDY&&ct/g.wheelDY||nt&&g.wheelDX&&nt/g.wheelDX;g.wheelStartX=g.wheelStartY=null,dt&&(Vi=(Vi*Gs+dt)/(Gs+1),++Gs)}},200)):(g.wheelDX+=o,g.wheelDY+=c))}}var ai=function(t,r){this.ranges=t,this.primIndex=r};ai.prototype.primary=function(){return this.ranges[this.primIndex]},ai.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var r=0;r<this.ranges.length;r++){var a=this.ranges[r],o=t.ranges[r];if(!D(a.anchor,o.anchor)||!D(a.head,o.head))return!1}return!0},ai.prototype.deepCopy=function(){for(var t=[],r=0;r<this.ranges.length;r++)t[r]=new Jt(U(this.ranges[r].anchor),U(this.ranges[r].head));return new ai(t,this.primIndex)},ai.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},ai.prototype.contains=function(t,r){r||(r=t);for(var a=0;a<this.ranges.length;a++){var o=this.ranges[a];if(k(r,o.from())>=0&&k(t,o.to())<=0)return a}return-1};var Jt=function(t,r){this.anchor=t,this.head=r};Jt.prototype.from=function(){return Ot(this.anchor,this.head)},Jt.prototype.to=function(){return et(this.anchor,this.head)},Jt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function ki(t,r,a){var o=t&&t.options.selectionsMayTouch,c=r[a];r.sort(function(W,E){return k(W.from(),E.from())}),a=mt(r,c);for(var d=1;d<r.length;d++){var g=r[d],v=r[d-1],x=k(v.to(),g.from());if(o&&!g.empty()?x>0:x>=0){var _=Ot(v.from(),g.from()),M=et(v.to(),g.to()),N=v.empty()?g.from()==g.head:v.from()==v.head;d<=a&&--a,r.splice(--d,2,new Jt(N?M:_,N?_:M))}}return new ai(r,a)}function cn(t,r){return new ai([new Jt(t,r||t)],0)}function un(t){return t.text?J(t.from.line+t.text.length-1,kt(t.text).length+(t.text.length==1?t.from.ch:0)):t.to}function Wc(t,r){if(k(t,r.from)<0)return t;if(k(t,r.to)<=0)return un(r);var a=t.line+r.text.length-(r.to.line-r.from.line)-1,o=t.ch;return t.line==r.to.line&&(o+=un(r).ch-r.to.ch),J(a,o)}function ka(t,r){for(var a=[],o=0;o<t.sel.ranges.length;o++){var c=t.sel.ranges[o];a.push(new Jt(Wc(c.anchor,r),Wc(c.head,r)))}return ki(t.cm,a,t.sel.primIndex)}function Hc(t,r,a){return t.line==r.line?J(a.line,t.ch-r.ch+a.ch):J(a.line+(t.line-r.line),t.ch)}function Hp(t,r,a){for(var o=[],c=J(t.first,0),d=c,g=0;g<r.length;g++){var v=r[g],x=Hc(v.from,c,d),_=Hc(un(v),c,d);if(c=v.to,d=_,a=="around"){var M=t.sel.ranges[g],N=k(M.head,M.anchor)<0;o[g]=new Jt(N?_:x,N?x:_)}else o[g]=new Jt(x,x)}return new ai(o,t.sel.primIndex)}function Sa(t){t.doc.mode=Vn(t.options,t.doc.modeOption),Br(t)}function Br(t){t.doc.iter(function(r){r.stateAfter&&(r.stateAfter=null),r.styles&&(r.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,Hr(t,100),t.state.modeGen++,t.curOp&&je(t)}function zc(t,r){return r.from.ch==0&&r.to.ch==0&&kt(r.text)==""&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Ca(t,r,a,o){function c(dt){return a?a[dt]:null}function d(dt,ut,bt){Kd(dt,ut,bt,o),ke(dt,"change",dt,r)}function g(dt,ut){for(var bt=[],Nt=dt;Nt<ut;++Nt)bt.push(new Kn(_[Nt],c(Nt),o));return bt}var v=r.from,x=r.to,_=r.text,M=wt(t,v.line),N=wt(t,x.line),W=kt(_),E=c(_.length-1),B=x.line-v.line;if(r.full)t.insert(0,g(0,_.length)),t.remove(_.length,t.size-_.length);else if(zc(t,r)){var V=g(0,_.length-1);d(N,N.text,E),B&&t.remove(v.line,B),V.length&&t.insert(v.line,V)}else if(M==N)if(_.length==1)d(M,M.text.slice(0,v.ch)+W+M.text.slice(x.ch),E);else{var nt=g(1,_.length-1);nt.push(new Kn(W+M.text.slice(x.ch),E,o)),d(M,M.text.slice(0,v.ch)+_[0],c(0)),t.insert(v.line+1,nt)}else if(_.length==1)d(M,M.text.slice(0,v.ch)+_[0]+N.text.slice(x.ch),c(0)),t.remove(v.line+1,B);else{d(M,M.text.slice(0,v.ch)+_[0],c(0)),d(N,W+N.text.slice(x.ch),E);var ct=g(1,_.length-1);B>1&&t.remove(v.line+1,B-1),t.insert(v.line+1,ct)}ke(t,"change",t,r)}function fn(t,r,a){function o(c,d,g){if(c.linked)for(var v=0;v<c.linked.length;++v){var x=c.linked[v];if(x.doc!=d){var _=g&&x.sharedHist;a&&!_||(r(x.doc,_),o(x.doc,c,_))}}}o(t,null,!0)}function Bc(t,r){if(r.cm)throw new Error("This document is already in use.");t.doc=r,r.cm=t,fa(t),Sa(t),Uc(t),t.options.direction=r.direction,t.options.lineWrapping||ta(t),t.options.mode=r.modeOption,je(t)}function Uc(t){(t.doc.direction=="rtl"?$:tt)(t.display.lineDiv,"CodeMirror-rtl")}function zp(t){qe(t,function(){Uc(t),je(t)})}function qs(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function Ta(t,r){var a={from:U(r.from),to:un(r),text:Ti(t,r.from,r.to)};return Vc(t,a,r.from.line,r.to.line+1),fn(t,function(o){return Vc(o,a,r.from.line,r.to.line+1)},!0),a}function $c(t){for(;t.length;){var r=kt(t);if(r.ranges)t.pop();else break}}function Bp(t,r){if(r)return $c(t.done),kt(t.done);if(t.done.length&&!kt(t.done).ranges)return kt(t.done);if(t.done.length>1&&!t.done[t.done.length-2].ranges)return t.done.pop(),kt(t.done)}function jc(t,r,a,o){var c=t.history;c.undone.length=0;var d=+new Date,g,v;if((c.lastOp==o||c.lastOrigin==r.origin&&r.origin&&(r.origin.charAt(0)=="+"&&c.lastModTime>d-(t.cm?t.cm.options.historyEventDelay:500)||r.origin.charAt(0)=="*"))&&(g=Bp(c,c.lastOp==o)))v=kt(g.changes),k(r.from,r.to)==0&&k(r.from,v.to)==0?v.to=un(r):g.changes.push(Ta(t,r));else{var x=kt(c.done);for((!x||!x.ranges)&&Zs(t.sel,c.done),g={changes:[Ta(t,r)],generation:c.generation},c.done.push(g);c.done.length>c.undoDepth;)c.done.shift(),c.done[0].ranges||c.done.shift()}c.done.push(a),c.generation=++c.maxGeneration,c.lastModTime=c.lastSelTime=d,c.lastOp=c.lastSelOp=o,c.lastOrigin=c.lastSelOrigin=r.origin,v||Dt(t,"historyAdded")}function Up(t,r,a,o){var c=r.charAt(0);return c=="*"||c=="+"&&a.ranges.length==o.ranges.length&&a.somethingSelected()==o.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}function $p(t,r,a,o){var c=t.history,d=o&&o.origin;a==c.lastSelOp||d&&c.lastSelOrigin==d&&(c.lastModTime==c.lastSelTime&&c.lastOrigin==d||Up(t,d,kt(c.done),r))?c.done[c.done.length-1]=r:Zs(r,c.done),c.lastSelTime=+new Date,c.lastSelOrigin=d,c.lastSelOp=a,o&&o.clearRedo!==!1&&$c(c.undone)}function Zs(t,r){var a=kt(r);a&&a.ranges&&a.equals(t)||r.push(t)}function Vc(t,r,a,o){var c=r["spans_"+t.id],d=0;t.iter(Math.max(t.first,a),Math.min(t.first+t.size,o),function(g){g.markedSpans&&((c||(c=r["spans_"+t.id]={}))[d]=g.markedSpans),++d})}function jp(t){if(!t)return null;for(var r,a=0;a<t.length;++a)t[a].marker.explicitlyCleared?r||(r=t.slice(0,a)):r&&r.push(t[a]);return r?r.length?r:null:t}function Vp(t,r){var a=r["spans_"+t.id];if(!a)return null;for(var o=[],c=0;c<r.text.length;++c)o.push(jp(a[c]));return o}function Yc(t,r){var a=Vp(t,r),o=qo(t,r);if(!a)return o;if(!o)return a;for(var c=0;c<a.length;++c){var d=a[c],g=o[c];if(d&&g)t:for(var v=0;v<g.length;++v){for(var x=g[v],_=0;_<d.length;++_)if(d[_].marker==x.marker)continue t;d.push(x)}else g&&(a[c]=g)}return a}function er(t,r,a){for(var o=[],c=0;c<t.length;++c){var d=t[c];if(d.ranges){o.push(a?ai.prototype.deepCopy.call(d):d);continue}var g=d.changes,v=[];o.push({changes:v});for(var x=0;x<g.length;++x){var _=g[x],M=void 0;if(v.push({from:_.from,to:_.to,text:_.text}),r)for(var N in _)(M=N.match(/^spans_(\d+)$/))&&mt(r,Number(M[1]))>-1&&(kt(v)[N]=_[N],delete _[N])}}return o}function Ma(t,r,a,o){if(o){var c=t.anchor;if(a){var d=k(r,c)<0;d!=k(a,c)<0?(c=r,r=a):d!=k(r,a)<0&&(r=a)}return new Jt(c,r)}else return new Jt(a||r,r)}function Js(t,r,a,o,c){c==null&&(c=t.cm&&(t.cm.display.shift||t.extend)),Re(t,new ai([Ma(t.sel.primary(),r,a,c)],0),o)}function Kc(t,r,a){for(var o=[],c=t.cm&&(t.cm.display.shift||t.extend),d=0;d<t.sel.ranges.length;d++)o[d]=Ma(t.sel.ranges[d],r[d],null,c);var g=ki(t.cm,o,t.sel.primIndex);Re(t,g,a)}function La(t,r,a,o){var c=t.sel.ranges.slice(0);c[r]=a,Re(t,ki(t.cm,c,t.sel.primIndex),o)}function Xc(t,r,a,o){Re(t,cn(r,a),o)}function Yp(t,r,a){var o={ranges:r.ranges,update:function(c){this.ranges=[];for(var d=0;d<c.length;d++)this.ranges[d]=new Jt(vt(t,c[d].anchor),vt(t,c[d].head))},origin:a&&a.origin};return Dt(t,"beforeSelectionChange",t,o),t.cm&&Dt(t.cm,"beforeSelectionChange",t.cm,o),o.ranges!=r.ranges?ki(t.cm,o.ranges,o.ranges.length-1):r}function Gc(t,r,a){var o=t.history.done,c=kt(o);c&&c.ranges?(o[o.length-1]=r,Qs(t,r,a)):Re(t,r,a)}function Re(t,r,a){Qs(t,r,a),$p(t,t.sel,t.cm?t.cm.curOp.id:NaN,a)}function Qs(t,r,a){(xe(t,"beforeSelectionChange")||t.cm&&xe(t.cm,"beforeSelectionChange"))&&(r=Yp(t,r,a));var o=a&&a.bias||(k(r.primary().head,t.sel.primary().head)<0?-1:1);qc(t,Jc(t,r,o,!0)),!(a&&a.scroll===!1)&&t.cm&&t.cm.getOption("readOnly")!="nocursor"&&Qn(t.cm)}function qc(t,r){r.equals(t.sel)||(t.sel=r,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,zi(t.cm)),ke(t,"cursorActivity",t))}function Zc(t){qc(t,Jc(t,t.sel,null,!1))}function Jc(t,r,a,o){for(var c,d=0;d<r.ranges.length;d++){var g=r.ranges[d],v=r.ranges.length==t.sel.ranges.length&&t.sel.ranges[d],x=to(t,g.anchor,v&&v.anchor,a,o),_=to(t,g.head,v&&v.head,a,o);(c||x!=g.anchor||_!=g.head)&&(c||(c=r.ranges.slice(0,d)),c[d]=new Jt(x,_))}return c?ki(t.cm,c,r.primIndex):r}function ir(t,r,a,o,c){var d=wt(t,r.line);if(d.markedSpans)for(var g=0;g<d.markedSpans.length;++g){var v=d.markedSpans[g],x=v.marker,_="selectLeft"in x?!x.selectLeft:x.inclusiveLeft,M="selectRight"in x?!x.selectRight:x.inclusiveRight;if((v.from==null||(_?v.from<=r.ch:v.from<r.ch))&&(v.to==null||(M?v.to>=r.ch:v.to>r.ch))){if(c&&(Dt(x,"beforeCursorEnter"),x.explicitlyCleared))if(d.markedSpans){--g;continue}else break;if(!x.atomic)continue;if(a){var N=x.find(o<0?1:-1),W=void 0;if((o<0?M:_)&&(N=Qc(t,N,-o,N&&N.line==r.line?d:null)),N&&N.line==r.line&&(W=k(N,a))&&(o<0?W<0:W>0))return ir(t,N,r,o,c)}var E=x.find(o<0?-1:1);return(o<0?_:M)&&(E=Qc(t,E,o,E.line==r.line?d:null)),E?ir(t,E,r,o,c):null}}return r}function to(t,r,a,o,c){var d=o||1,g=ir(t,r,a,d,c)||!c&&ir(t,r,a,d,!0)||ir(t,r,a,-d,c)||!c&&ir(t,r,a,-d,!0);return g||(t.cantEdit=!0,J(t.first,0))}function Qc(t,r,a,o){return a<0&&r.ch==0?r.line>t.first?vt(t,J(r.line-1)):null:a>0&&r.ch==(o||wt(t,r.line)).text.length?r.line<t.first+t.size-1?J(r.line+1,0):null:new J(r.line,r.ch+a)}function tu(t){t.setSelection(J(t.firstLine(),0),J(t.lastLine()),Wt)}function eu(t,r,a){var o={canceled:!1,from:r.from,to:r.to,text:r.text,origin:r.origin,cancel:function(){return o.canceled=!0}};return a&&(o.update=function(c,d,g,v){c&&(o.from=vt(t,c)),d&&(o.to=vt(t,d)),g&&(o.text=g),v!==void 0&&(o.origin=v)}),Dt(t,"beforeChange",t,o),t.cm&&Dt(t.cm,"beforeChange",t.cm,o),o.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:o.from,to:o.to,text:o.text,origin:o.origin}}function nr(t,r,a){if(t.cm){if(!t.cm.curOp)return Se(t.cm,nr)(t,r,a);if(t.cm.state.suppressEdits)return}if(!((xe(t,"beforeChange")||t.cm&&xe(t.cm,"beforeChange"))&&(r=eu(t,r,!0),!r))){var o=Yl&&!a&&$d(t,r.from,r.to);if(o)for(var c=o.length-1;c>=0;--c)iu(t,{from:o[c].from,to:o[c].to,text:c?[""]:r.text,origin:r.origin});else iu(t,r)}}function iu(t,r){if(!(r.text.length==1&&r.text[0]==""&&k(r.from,r.to)==0)){var a=ka(t,r);jc(t,r,a,t.cm?t.cm.curOp.id:NaN),Ur(t,r,a,qo(t,r));var o=[];fn(t,function(c,d){!d&&mt(o,c.history)==-1&&(ou(c.history,r),o.push(c.history)),Ur(c,r,null,qo(c,r))})}}function eo(t,r,a){var o=t.cm&&t.cm.state.suppressEdits;if(!(o&&!a)){for(var c=t.history,d,g=t.sel,v=r=="undo"?c.done:c.undone,x=r=="undo"?c.undone:c.done,_=0;_<v.length&&(d=v[_],!(a?d.ranges&&!d.equals(t.sel):!d.ranges));_++);if(_!=v.length){for(c.lastOrigin=c.lastSelOrigin=null;;)if(d=v.pop(),d.ranges){if(Zs(d,x),a&&!d.equals(t.sel)){Re(t,d,{clearRedo:!1});return}g=d}else if(o){v.push(d);return}else break;var M=[];Zs(g,x),x.push({changes:M,generation:c.generation}),c.generation=d.generation||++c.maxGeneration;for(var N=xe(t,"beforeChange")||t.cm&&xe(t.cm,"beforeChange"),W=function(V){var nt=d.changes[V];if(nt.origin=r,N&&!eu(t,nt,!1))return v.length=0,{};M.push(Ta(t,nt));var ct=V?ka(t,nt):kt(v);Ur(t,nt,ct,Yc(t,nt)),!V&&t.cm&&t.cm.scrollIntoView({from:nt.from,to:un(nt)});var dt=[];fn(t,function(ut,bt){!bt&&mt(dt,ut.history)==-1&&(ou(ut.history,nt),dt.push(ut.history)),Ur(ut,nt,null,Yc(ut,nt))})},E=d.changes.length-1;E>=0;--E){var B=W(E);if(B)return B.v}}}}function nu(t,r){if(r!=0&&(t.first+=r,t.sel=new ai(Pt(t.sel.ranges,function(c){return new Jt(J(c.anchor.line+r,c.anchor.ch),J(c.head.line+r,c.head.ch))}),t.sel.primIndex),t.cm)){je(t.cm,t.first,t.first-r,r);for(var a=t.cm.display,o=a.viewFrom;o<a.viewTo;o++)an(t.cm,o,"gutter")}}function Ur(t,r,a,o){if(t.cm&&!t.cm.curOp)return Se(t.cm,Ur)(t,r,a,o);if(r.to.line<t.first){nu(t,r.text.length-1-(r.to.line-r.from.line));return}if(!(r.from.line>t.lastLine())){if(r.from.line<t.first){var c=r.text.length-1-(t.first-r.from.line);nu(t,c),r={from:J(t.first,0),to:J(r.to.line+c,r.to.ch),text:[kt(r.text)],origin:r.origin}}var d=t.lastLine();r.to.line>d&&(r={from:r.from,to:J(d,wt(t,d).text.length),text:[r.text[0]],origin:r.origin}),r.removed=Ti(t,r.from,r.to),a||(a=ka(t,r)),t.cm?Kp(t.cm,r,o):Ca(t,r,o),Qs(t,a,Wt),t.cantEdit&&to(t,J(t.firstLine(),0))&&(t.cantEdit=!1)}}function Kp(t,r,a){var o=t.doc,c=t.display,d=r.from,g=r.to,v=!1,x=d.line;t.options.lineWrapping||(x=Zt(_i(wt(o,d.line))),o.iter(x,g.line+1,function(E){if(E==c.maxLine)return v=!0,!0})),o.sel.contains(r.from,r.to)>-1&&zi(t),Ca(o,r,a,wc(t)),t.options.lineWrapping||(o.iter(x,d.line+r.text.length,function(E){var B=Ws(E);B>c.maxLineLength&&(c.maxLine=E,c.maxLineLength=B,c.maxLineChanged=!0,v=!1)}),v&&(t.curOp.updateMaxLine=!0)),Fd(o,d.line),Hr(t,400);var _=r.text.length-(g.line-d.line)-1;r.full?je(t):d.line==g.line&&r.text.length==1&&!zc(t.doc,r)?an(t,d.line,"text"):je(t,d.line,g.line+1,_);var M=xe(t,"changes"),N=xe(t,"change");if(N||M){var W={from:d,to:g,text:r.text,removed:r.removed,origin:r.origin};N&&ke(t,"change",t,W),M&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(W)}t.display.selForContextMenu=null}function rr(t,r,a,o,c){var d;o||(o=a),k(o,a)<0&&(d=[o,a],a=d[0],o=d[1]),typeof r=="string"&&(r=t.splitLines(r)),nr(t,{from:a,to:o,text:r,origin:c})}function ru(t,r,a,o){a<t.line?t.line+=o:r<t.line&&(t.line=r,t.ch=0)}function su(t,r,a,o){for(var c=0;c<t.length;++c){var d=t[c],g=!0;if(d.ranges){d.copied||(d=t[c]=d.deepCopy(),d.copied=!0);for(var v=0;v<d.ranges.length;v++)ru(d.ranges[v].anchor,r,a,o),ru(d.ranges[v].head,r,a,o);continue}for(var x=0;x<d.changes.length;++x){var _=d.changes[x];if(a<_.from.line)_.from=J(_.from.line+o,_.from.ch),_.to=J(_.to.line+o,_.to.ch);else if(r<=_.to.line){g=!1;break}}g||(t.splice(0,c+1),c=0)}}function ou(t,r){var a=r.from.line,o=r.to.line,c=r.text.length-(o-a)-1;su(t.done,a,o,c),su(t.undone,a,o,c)}function $r(t,r,a,o){var c=r,d=r;return typeof r=="number"?d=wt(t,Xt(t,r)):c=Zt(r),c==null?null:(o(d,c)&&t.cm&&an(t.cm,c,a),d)}function jr(t){this.lines=t,this.parent=null;for(var r=0,a=0;a<t.length;++a)t[a].parent=this,r+=t[a].height;this.height=r}jr.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,r){for(var a=t,o=t+r;a<o;++a){var c=this.lines[a];this.height-=c.height,Xd(c),ke(c,"delete")}this.lines.splice(t,r)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,r,a){this.height+=a,this.lines=this.lines.slice(0,t).concat(r).concat(this.lines.slice(t));for(var o=0;o<r.length;++o)r[o].parent=this},iterN:function(t,r,a){for(var o=t+r;t<o;++t)if(a(this.lines[t]))return!0}};function Vr(t){this.children=t;for(var r=0,a=0,o=0;o<t.length;++o){var c=t[o];r+=c.chunkSize(),a+=c.height,c.parent=this}this.size=r,this.height=a,this.parent=null}Vr.prototype={chunkSize:function(){return this.size},removeInner:function(t,r){this.size-=r;for(var a=0;a<this.children.length;++a){var o=this.children[a],c=o.chunkSize();if(t<c){var d=Math.min(r,c-t),g=o.height;if(o.removeInner(t,d),this.height-=g-o.height,c==d&&(this.children.splice(a--,1),o.parent=null),(r-=d)==0)break;t=0}else t-=c}if(this.size-r<25&&(this.children.length>1||!(this.children[0]instanceof jr))){var v=[];this.collapse(v),this.children=[new jr(v)],this.children[0].parent=this}},collapse:function(t){for(var r=0;r<this.children.length;++r)this.children[r].collapse(t)},insertInner:function(t,r,a){this.size+=r.length,this.height+=a;for(var o=0;o<this.children.length;++o){var c=this.children[o],d=c.chunkSize();if(t<=d){if(c.insertInner(t,r,a),c.lines&&c.lines.length>50){for(var g=c.lines.length%25+25,v=g;v<c.lines.length;){var x=new jr(c.lines.slice(v,v+=25));c.height-=x.height,this.children.splice(++o,0,x),x.parent=this}c.lines=c.lines.slice(0,g),this.maybeSpill()}break}t-=d}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var r=t.children.splice(t.children.length-5,5),a=new Vr(r);if(t.parent){t.size-=a.size,t.height-=a.height;var c=mt(t.parent.children,t);t.parent.children.splice(c+1,0,a)}else{var o=new Vr(t.children);o.parent=t,t.children=[o,a],t=o}a.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,r,a){for(var o=0;o<this.children.length;++o){var c=this.children[o],d=c.chunkSize();if(t<d){var g=Math.min(r,d-t);if(c.iterN(t,g,a))return!0;if((r-=g)==0)break;t=0}else t-=d}}};var Yr=function(t,r,a){if(a)for(var o in a)a.hasOwnProperty(o)&&(this[o]=a[o]);this.doc=t,this.node=r};Yr.prototype.clear=function(){var t=this.doc.cm,r=this.line.widgets,a=this.line,o=Zt(a);if(!(o==null||!r)){for(var c=0;c<r.length;++c)r[c]==this&&r.splice(c--,1);r.length||(a.widgets=null);var d=Or(this);Ge(a,Math.max(0,a.height-d)),t&&(qe(t,function(){au(t,a,-d),an(t,o,"widget")}),ke(t,"lineWidgetCleared",t,this,o))}},Yr.prototype.changed=function(){var t=this,r=this.height,a=this.doc.cm,o=this.line;this.height=null;var c=Or(this)-r;c&&(on(this.doc,o)||Ge(o,o.height+c),a&&qe(a,function(){a.curOp.forceUpdate=!0,au(a,o,c),ke(a,"lineWidgetChanged",a,t,Zt(o))}))},li(Yr);function au(t,r,a){$i(r)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&va(t,a)}function Xp(t,r,a,o){var c=new Yr(t,a,o),d=t.cm;return d&&c.noHScroll&&(d.display.alignWidgets=!0),$r(t,r,"widget",function(g){var v=g.widgets||(g.widgets=[]);if(c.insertAt==null?v.push(c):v.splice(Math.min(v.length,Math.max(0,c.insertAt)),0,c),c.line=g,d&&!on(t,g)){var x=$i(g)<t.scrollTop;Ge(g,g.height+Or(c)),x&&va(d,c.height),d.curOp.forceUpdate=!0}return!0}),d&&ke(d,"lineWidgetAdded",d,c,typeof r=="number"?r:Zt(r)),c}var lu=0,hn=function(t,r){this.lines=[],this.type=r,this.doc=t,this.id=++lu};hn.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,r=t&&!t.curOp;if(r&&Ln(t),xe(this,"clear")){var a=this.find();a&&ke(this,"clear",a.from,a.to)}for(var o=null,c=null,d=0;d<this.lines.length;++d){var g=this.lines[d],v=Nr(g.markedSpans,this);t&&!this.collapsed?an(t,Zt(g),"text"):t&&(v.to!=null&&(c=Zt(g)),v.from!=null&&(o=Zt(g))),g.markedSpans=Hd(g.markedSpans,v),v.from==null&&this.collapsed&&!on(this.doc,g)&&t&&Ge(g,qn(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var x=0;x<this.lines.length;++x){var _=_i(this.lines[x]),M=Ws(_);M>t.display.maxLineLength&&(t.display.maxLine=_,t.display.maxLineLength=M,t.display.maxLineChanged=!0)}o!=null&&t&&this.collapsed&&je(t,o,c+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Zc(t.doc)),t&&ke(t,"markerCleared",t,this,o,c),r&&Nn(t),this.parent&&this.parent.clear()}},hn.prototype.find=function(t,r){t==null&&this.type=="bookmark"&&(t=1);for(var a,o,c=0;c<this.lines.length;++c){var d=this.lines[c],g=Nr(d.markedSpans,this);if(g.from!=null&&(a=J(r?d:Zt(d),g.from),t==-1))return a;if(g.to!=null&&(o=J(r?d:Zt(d),g.to),t==1))return o}return a&&{from:a,to:o}},hn.prototype.changed=function(){var t=this,r=this.find(-1,!0),a=this,o=this.doc.cm;!r||!o||qe(o,function(){var c=r.line,d=Zt(r.line),g=ra(o,d);if(g&&(pc(g),o.curOp.selectionChanged=o.curOp.forceUpdate=!0),o.curOp.updateMaxLine=!0,!on(a.doc,c)&&a.height!=null){var v=a.height;a.height=null;var x=Or(a)-v;x&&Ge(c,c.height+x)}ke(o,"markerChanged",o,t)})},hn.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var r=this.doc.cm.curOp;(!r.maybeHiddenMarkers||mt(r.maybeHiddenMarkers,this)==-1)&&(r.maybeUnhiddenMarkers||(r.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},hn.prototype.detachLine=function(t){if(this.lines.splice(mt(this.lines,t),1),!this.lines.length&&this.doc.cm){var r=this.doc.cm.curOp;(r.maybeHiddenMarkers||(r.maybeHiddenMarkers=[])).push(this)}},li(hn);function sr(t,r,a,o,c){if(o&&o.shared)return Gp(t,r,a,o,c);if(t.cm&&!t.cm.curOp)return Se(t.cm,sr)(t,r,a,o,c);var d=new hn(t,c),g=k(r,a);if(o&&It(o,d,!1),g>0||g==0&&d.clearWhenEmpty!==!1)return d;if(d.replacedWith&&(d.collapsed=!0,d.widgetNode=C("span",[d.replacedWith],"CodeMirror-widget"),o.handleMouseEvents||d.widgetNode.setAttribute("cm-ignore-events","true"),o.insertLeft&&(d.widgetNode.insertLeft=!0)),d.collapsed){if(Jl(t,r.line,r,a,d)||r.line!=a.line&&Jl(t,a.line,r,a,d))throw new Error("Inserting collapsed marker partially overlapping an existing one");Wd()}d.addToHistory&&jc(t,{from:r,to:a,origin:"markText"},t.sel,NaN);var v=r.line,x=t.cm,_;if(t.iter(v,a.line+1,function(N){x&&d.collapsed&&!x.options.lineWrapping&&_i(N)==x.display.maxLine&&(_=!0),d.collapsed&&v!=r.line&&Ge(N,0),zd(N,new Is(d,v==r.line?r.ch:null,v==a.line?a.ch:null),t.cm&&t.cm.curOp),++v}),d.collapsed&&t.iter(r.line,a.line+1,function(N){on(t,N)&&Ge(N,0)}),d.clearOnEnter&&Ct(d,"beforeCursorEnter",function(){return d.clear()}),d.readOnly&&(Rd(),(t.history.done.length||t.history.undone.length)&&t.clearHistory()),d.collapsed&&(d.id=++lu,d.atomic=!0),x){if(_&&(x.curOp.updateMaxLine=!0),d.collapsed)je(x,r.line,a.line+1);else if(d.className||d.startStyle||d.endStyle||d.css||d.attributes||d.title)for(var M=r.line;M<=a.line;M++)an(x,M,"text");d.atomic&&Zc(x.doc),ke(x,"markerAdded",x,d)}return d}var Kr=function(t,r){this.markers=t,this.primary=r;for(var a=0;a<t.length;++a)t[a].parent=this};Kr.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();ke(this,"clear")}},Kr.prototype.find=function(t,r){return this.primary.find(t,r)},li(Kr);function Gp(t,r,a,o,c){o=It(o),o.shared=!1;var d=[sr(t,r,a,o,c)],g=d[0],v=o.widgetNode;return fn(t,function(x){v&&(o.widgetNode=v.cloneNode(!0)),d.push(sr(x,vt(x,r),vt(x,a),o,c));for(var _=0;_<x.linked.length;++_)if(x.linked[_].isParent)return;g=kt(d)}),new Kr(d,g)}function cu(t){return t.findMarks(J(t.first,0),t.clipPos(J(t.lastLine())),function(r){return r.parent})}function qp(t,r){for(var a=0;a<r.length;a++){var o=r[a],c=o.find(),d=t.clipPos(c.from),g=t.clipPos(c.to);if(k(d,g)){var v=sr(t,d,g,o.primary,o.primary.type);o.markers.push(v),v.parent=o}}}function Zp(t){for(var r=function(o){var c=t[o],d=[c.primary.doc];fn(c.primary.doc,function(x){return d.push(x)});for(var g=0;g<c.markers.length;g++){var v=c.markers[g];mt(d,v.doc)==-1&&(v.parent=null,c.markers.splice(g--,1))}},a=0;a<t.length;a++)r(a)}var Jp=0,Ve=function(t,r,a,o,c){if(!(this instanceof Ve))return new Ve(t,r,a,o,c);a==null&&(a=0),Vr.call(this,[new jr([new Kn("",null)])]),this.first=a,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=a;var d=J(a,0);this.sel=cn(d),this.history=new qs(null),this.id=++Jp,this.modeOption=r,this.lineSep=o,this.direction=c=="rtl"?"rtl":"ltr",this.extend=!1,typeof t=="string"&&(t=this.splitLines(t)),Ca(this,{from:d,to:d,text:t}),Re(this,cn(d),Wt)};Ve.prototype=Ae(Vr.prototype,{constructor:Ve,iter:function(t,r,a){a?this.iterN(t-this.first,r-t,a):this.iterN(this.first,this.first+this.size,t)},insert:function(t,r){for(var a=0,o=0;o<r.length;++o)a+=r[o].height;this.insertInner(t-this.first,r,a)},remove:function(t,r){this.removeInner(t-this.first,r)},getValue:function(t){var r=Tr(this,this.first,this.first+this.size);return t===!1?r:r.join(t||this.lineSeparator())},setValue:Ce(function(t){var r=J(this.first,0),a=this.first+this.size-1;nr(this,{from:r,to:J(a,wt(this,a).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Er(this.cm,0,0),Re(this,cn(r),Wt)}),replaceRange:function(t,r,a,o){r=vt(this,r),a=a?vt(this,a):r,rr(this,t,r,a,o)},getRange:function(t,r,a){var o=Ti(this,vt(this,t),vt(this,r));return a===!1?o:a===""?o.join(""):o.join(a||this.lineSeparator())},getLine:function(t){var r=this.getLineHandle(t);return r&&r.text},getLineHandle:function(t){if(_n(this,t))return wt(this,t)},getLineNumber:function(t){return Zt(t)},getLineHandleVisualStart:function(t){return typeof t=="number"&&(t=wt(this,t)),_i(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return vt(this,t)},getCursor:function(t){var r=this.sel.primary(),a;return t==null||t=="head"?a=r.head:t=="anchor"?a=r.anchor:t=="end"||t=="to"||t===!1?a=r.to():a=r.from(),a},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ce(function(t,r,a){Xc(this,vt(this,typeof t=="number"?J(t,r||0):t),null,a)}),setSelection:Ce(function(t,r,a){Xc(this,vt(this,t),vt(this,r||t),a)}),extendSelection:Ce(function(t,r,a){Js(this,vt(this,t),r&&vt(this,r),a)}),extendSelections:Ce(function(t,r){Kc(this,oi(this,t),r)}),extendSelectionsBy:Ce(function(t,r){var a=Pt(this.sel.ranges,t);Kc(this,oi(this,a),r)}),setSelections:Ce(function(t,r,a){if(t.length){for(var o=[],c=0;c<t.length;c++)o[c]=new Jt(vt(this,t[c].anchor),vt(this,t[c].head||t[c].anchor));r==null&&(r=Math.min(t.length-1,this.sel.primIndex)),Re(this,ki(this.cm,o,r),a)}}),addSelection:Ce(function(t,r,a){var o=this.sel.ranges.slice(0);o.push(new Jt(vt(this,t),vt(this,r||t))),Re(this,ki(this.cm,o,o.length-1),a)}),getSelection:function(t){for(var r=this.sel.ranges,a,o=0;o<r.length;o++){var c=Ti(this,r[o].from(),r[o].to());a=a?a.concat(c):c}return t===!1?a:a.join(t||this.lineSeparator())},getSelections:function(t){for(var r=[],a=this.sel.ranges,o=0;o<a.length;o++){var c=Ti(this,a[o].from(),a[o].to());t!==!1&&(c=c.join(t||this.lineSeparator())),r[o]=c}return r},replaceSelection:function(t,r,a){for(var o=[],c=0;c<this.sel.ranges.length;c++)o[c]=t;this.replaceSelections(o,r,a||"+input")},replaceSelections:Ce(function(t,r,a){for(var o=[],c=this.sel,d=0;d<c.ranges.length;d++){var g=c.ranges[d];o[d]={from:g.from(),to:g.to(),text:this.splitLines(t[d]),origin:a}}for(var v=r&&r!="end"&&Hp(this,o,r),x=o.length-1;x>=0;x--)nr(this,o[x]);v?Gc(this,v):this.cm&&Qn(this.cm)}),undo:Ce(function(){eo(this,"undo")}),redo:Ce(function(){eo(this,"redo")}),undoSelection:Ce(function(){eo(this,"undo",!0)}),redoSelection:Ce(function(){eo(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,r=0,a=0,o=0;o<t.done.length;o++)t.done[o].ranges||++r;for(var c=0;c<t.undone.length;c++)t.undone[c].ranges||++a;return{undo:r,redo:a}},clearHistory:function(){var t=this;this.history=new qs(this.history),fn(this,function(r){return r.history=t.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:er(this.history.done),undone:er(this.history.undone)}},setHistory:function(t){var r=this.history=new qs(this.history);r.done=er(t.done.slice(0),null,!0),r.undone=er(t.undone.slice(0),null,!0)},setGutterMarker:Ce(function(t,r,a){return $r(this,t,"gutter",function(o){var c=o.gutterMarkers||(o.gutterMarkers={});return c[r]=a,!a&&yi(c)&&(o.gutterMarkers=null),!0})}),clearGutter:Ce(function(t){var r=this;this.iter(function(a){a.gutterMarkers&&a.gutterMarkers[t]&&$r(r,a,"gutter",function(){return a.gutterMarkers[t]=null,yi(a.gutterMarkers)&&(a.gutterMarkers=null),!0})})}),lineInfo:function(t){var r;if(typeof t=="number"){if(!_n(this,t)||(r=t,t=wt(this,t),!t))return null}else if(r=Zt(t),r==null)return null;return{line:r,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:Ce(function(t,r,a){return $r(this,t,r=="gutter"?"gutter":"class",function(o){var c=r=="text"?"textClass":r=="background"?"bgClass":r=="gutter"?"gutterClass":"wrapClass";if(!o[c])o[c]=a;else{if(it(a).test(o[c]))return!1;o[c]+=" "+a}return!0})}),removeLineClass:Ce(function(t,r,a){return $r(this,t,r=="gutter"?"gutter":"class",function(o){var c=r=="text"?"textClass":r=="background"?"bgClass":r=="gutter"?"gutterClass":"wrapClass",d=o[c];if(d)if(a==null)o[c]=null;else{var g=d.match(it(a));if(!g)return!1;var v=g.index+g[0].length;o[c]=d.slice(0,g.index)+(!g.index||v==d.length?"":" ")+d.slice(v)||null}else return!1;return!0})}),addLineWidget:Ce(function(t,r,a){return Xp(this,t,r,a)}),removeLineWidget:function(t){t.clear()},markText:function(t,r,a){return sr(this,vt(this,t),vt(this,r),a,a&&a.type||"range")},setBookmark:function(t,r){var a={replacedWith:r&&(r.nodeType==null?r.widget:r),insertLeft:r&&r.insertLeft,clearWhenEmpty:!1,shared:r&&r.shared,handleMouseEvents:r&&r.handleMouseEvents};return t=vt(this,t),sr(this,t,t,a,"bookmark")},findMarksAt:function(t){t=vt(this,t);var r=[],a=wt(this,t.line).markedSpans;if(a)for(var o=0;o<a.length;++o){var c=a[o];(c.from==null||c.from<=t.ch)&&(c.to==null||c.to>=t.ch)&&r.push(c.marker.parent||c.marker)}return r},findMarks:function(t,r,a){t=vt(this,t),r=vt(this,r);var o=[],c=t.line;return this.iter(t.line,r.line+1,function(d){var g=d.markedSpans;if(g)for(var v=0;v<g.length;v++){var x=g[v];!(x.to!=null&&c==t.line&&t.ch>=x.to||x.from==null&&c!=t.line||x.from!=null&&c==r.line&&x.from>=r.ch)&&(!a||a(x.marker))&&o.push(x.marker.parent||x.marker)}++c}),o},getAllMarks:function(){var t=[];return this.iter(function(r){var a=r.markedSpans;if(a)for(var o=0;o<a.length;++o)a[o].from!=null&&t.push(a[o].marker)}),t},posFromIndex:function(t){var r,a=this.first,o=this.lineSeparator().length;return this.iter(function(c){var d=c.text.length+o;if(d>t)return r=t,!0;t-=d,++a}),vt(this,J(a,r))},indexFromPos:function(t){t=vt(this,t);var r=t.ch;if(t.line<this.first||t.ch<0)return 0;var a=this.lineSeparator().length;return this.iter(this.first,t.line,function(o){r+=o.text.length+a}),r},copy:function(t){var r=new Ve(Tr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return r.scrollTop=this.scrollTop,r.scrollLeft=this.scrollLeft,r.sel=this.sel,r.extend=!1,t&&(r.history.undoDepth=this.history.undoDepth,r.setHistory(this.getHistory())),r},linkedDoc:function(t){t||(t={});var r=this.first,a=this.first+this.size;t.from!=null&&t.from>r&&(r=t.from),t.to!=null&&t.to<a&&(a=t.to);var o=new Ve(Tr(this,r,a),t.mode||this.modeOption,r,this.lineSep,this.direction);return t.sharedHist&&(o.history=this.history),(this.linked||(this.linked=[])).push({doc:o,sharedHist:t.sharedHist}),o.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],qp(o,cu(this)),o},unlinkDoc:function(t){if(t instanceof se&&(t=t.doc),this.linked)for(var r=0;r<this.linked.length;++r){var a=this.linked[r];if(a.doc==t){this.linked.splice(r,1),t.unlinkDoc(this),Zp(cu(this));break}}if(t.history==this.history){var o=[t.id];fn(t,function(c){return o.push(c.id)},!0),t.history=new qs(null),t.history.done=er(this.history.done,o),t.history.undone=er(this.history.undone,o)}},iterLinkedDocs:function(t){fn(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):wr(t)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Ce(function(t){t!="rtl"&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(r){return r.order=null}),this.cm&&zp(this.cm))})}),Ve.prototype.eachLine=Ve.prototype.iter;var uu=0;function Qp(t){var r=this;if(fu(r),!(ue(r,t)||ji(r.display,t))){z(t),p&&(uu=+new Date);var a=Sn(r,t,!0),o=t.dataTransfer.files;if(!(!a||r.isReadOnly()))if(o&&o.length&&window.FileReader&&window.File)for(var c=o.length,d=Array(c),g=0,v=function(){++g==c&&Se(r,function(){a=vt(r.doc,a);var E={from:a,to:a,text:r.doc.splitLines(d.filter(function(B){return B!=null}).join(r.doc.lineSeparator())),origin:"paste"};nr(r.doc,E),Gc(r.doc,cn(vt(r.doc,a),vt(r.doc,un(E))))})()},x=function(E,B){if(r.options.allowDropFileTypes&&mt(r.options.allowDropFileTypes,E.type)==-1){v();return}var V=new FileReader;V.onerror=function(){return v()},V.onload=function(){var nt=V.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(nt)){v();return}d[B]=nt,v()},V.readAsText(E)},_=0;_<o.length;_++)x(o[_],_);else{if(r.state.draggingText&&r.doc.sel.contains(a)>-1){r.state.draggingText(t),setTimeout(function(){return r.display.input.focus()},20);return}try{var M=t.dataTransfer.getData("Text");if(M){var N;if(r.state.draggingText&&!r.state.draggingText.copy&&(N=r.listSelections()),Qs(r.doc,cn(a,a)),N)for(var W=0;W<N.length;++W)rr(r.doc,"",N[W].anchor,N[W].head,"drag");r.replaceSelection(M,"around","paste"),r.display.input.focus()}}catch{}}}}function tg(t,r){if(p&&(!t.state.draggingText||+new Date-uu<100)){_t(r);return}if(!(ue(t,r)||ji(t.display,r))&&(r.dataTransfer.setData("Text",t.getSelection()),r.dataTransfer.effectAllowed="copyMove",r.dataTransfer.setDragImage&&!O)){var a=I("img",null,null,"position: fixed; left: 0; top: 0;");a.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",T&&(a.width=a.height=1,t.display.wrapper.appendChild(a),a._top=a.offsetTop),r.dataTransfer.setDragImage(a,0,0),T&&a.parentNode.removeChild(a)}}function eg(t,r){var a=Sn(t,r);if(a){var o=document.createDocumentFragment();ha(t,a,o),t.display.dragCursor||(t.display.dragCursor=I("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),R(t.display.dragCursor,o)}}function fu(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function hu(t){if(document.getElementsByClassName){for(var r=document.getElementsByClassName("CodeMirror"),a=[],o=0;o<r.length;o++){var c=r[o].CodeMirror;c&&a.push(c)}a.length&&a[0].operation(function(){for(var d=0;d<a.length;d++)t(a[d])})}}var du=!1;function ig(){du||(ng(),du=!0)}function ng(){var t;Ct(window,"resize",function(){t==null&&(t=setTimeout(function(){t=null,hu(rg)},100))}),Ct(window,"blur",function(){return hu(Jn)})}function rg(t){var r=t.display;r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.scrollbarsClipped=!1,t.setSize()}for(var dn={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Xr=0;Xr<10;Xr++)dn[Xr+48]=dn[Xr+96]=String(Xr);for(var io=65;io<=90;io++)dn[io]=String.fromCharCode(io);for(var Gr=1;Gr<=12;Gr++)dn[Gr+111]=dn[Gr+63235]="F"+Gr;var Yi={};Yi.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Yi.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Yi.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Yi.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Yi.default=G?Yi.macDefault:Yi.pcDefault;function sg(t){var r=t.split(/-(?!$)/);t=r[r.length-1];for(var a,o,c,d,g=0;g<r.length-1;g++){var v=r[g];if(/^(cmd|meta|m)$/i.test(v))d=!0;else if(/^a(lt)?$/i.test(v))a=!0;else if(/^(c|ctrl|control)$/i.test(v))o=!0;else if(/^s(hift)?$/i.test(v))c=!0;else throw new Error("Unrecognized modifier name: "+v)}return a&&(t="Alt-"+t),o&&(t="Ctrl-"+t),d&&(t="Cmd-"+t),c&&(t="Shift-"+t),t}function og(t){var r={};for(var a in t)if(t.hasOwnProperty(a)){var o=t[a];if(/^(name|fallthrough|(de|at)tach)$/.test(a))continue;if(o=="..."){delete t[a];continue}for(var c=Pt(a.split(" "),sg),d=0;d<c.length;d++){var g=void 0,v=void 0;d==c.length-1?(v=c.join(" "),g=o):(v=c.slice(0,d+1).join(" "),g="...");var x=r[v];if(!x)r[v]=g;else if(x!=g)throw new Error("Inconsistent bindings for "+v)}delete t[a]}for(var _ in r)t[_]=r[_];return t}function or(t,r,a,o){r=no(r);var c=r.call?r.call(t,o):r[t];if(c===!1)return"nothing";if(c==="...")return"multi";if(c!=null&&a(c))return"handled";if(r.fallthrough){if(Object.prototype.toString.call(r.fallthrough)!="[object Array]")return or(t,r.fallthrough,a,o);for(var d=0;d<r.fallthrough.length;d++){var g=or(t,r.fallthrough[d],a,o);if(g)return g}}}function pu(t){var r=typeof t=="string"?t:dn[t.keyCode];return r=="Ctrl"||r=="Alt"||r=="Shift"||r=="Mod"}function gu(t,r,a){var o=t;return r.altKey&&o!="Alt"&&(t="Alt-"+t),(q?r.metaKey:r.ctrlKey)&&o!="Ctrl"&&(t="Ctrl-"+t),(q?r.ctrlKey:r.metaKey)&&o!="Mod"&&(t="Cmd-"+t),!a&&r.shiftKey&&o!="Shift"&&(t="Shift-"+t),t}function mu(t,r){if(T&&t.keyCode==34&&t.char)return!1;var a=dn[t.keyCode];return a==null||t.altGraphKey?!1:(t.keyCode==3&&t.code&&(a=t.code),gu(a,t,r))}function no(t){return typeof t=="string"?Yi[t]:t}function ar(t,r){for(var a=t.doc.sel.ranges,o=[],c=0;c<a.length;c++){for(var d=r(a[c]);o.length&&k(d.from,kt(o).to)<=0;){var g=o.pop();if(k(g.from,d.from)<0){d.from=g.from;break}}o.push(d)}qe(t,function(){for(var v=o.length-1;v>=0;v--)rr(t.doc,"",o[v].from,o[v].to,"+delete");Qn(t)})}function Na(t,r,a){var o=Hi(t.text,r+a,a);return o<0||o>t.text.length?null:o}function Da(t,r,a){var o=Na(t,r.ch,a);return o==null?null:new J(r.line,o,a<0?"after":"before")}function Pa(t,r,a,o,c){if(t){r.doc.direction=="rtl"&&(c=-c);var d=Yt(a,r.doc.direction);if(d){var g=c<0?kt(d):d[0],v=c<0==(g.level==1),x=v?"after":"before",_;if(g.level>0||r.doc.direction=="rtl"){var M=Gn(r,a);_=c<0?a.text.length-1:0;var N=Di(r,M,_).top;_=F(function(W){return Di(r,M,W).top==N},c<0==(g.level==1)?g.from:g.to-1,_),x=="before"&&(_=Na(a,_,1))}else _=c<0?g.to:g.from;return new J(o,_,x)}}return new J(o,c<0?a.text.length:0,c<0?"before":"after")}function ag(t,r,a,o){var c=Yt(r,t.doc.direction);if(!c)return Da(r,a,o);a.ch>=r.text.length?(a.ch=r.text.length,a.sticky="before"):a.ch<=0&&(a.ch=0,a.sticky="after");var d=pt(c,a.ch,a.sticky),g=c[d];if(t.doc.direction=="ltr"&&g.level%2==0&&(o>0?g.to>a.ch:g.from<a.ch))return Da(r,a,o);var v=function(ct,dt){return Na(r,ct instanceof J?ct.ch:ct,dt)},x,_=function(ct){return t.options.lineWrapping?(x=x||Gn(t,r),_c(t,r,x,ct)):{begin:0,end:r.text.length}},M=_(a.sticky=="before"?v(a,-1):a.ch);if(t.doc.direction=="rtl"||g.level==1){var N=g.level==1==o<0,W=v(a,N?1:-1);if(W!=null&&(N?W<=g.to&&W<=M.end:W>=g.from&&W>=M.begin)){var E=N?"before":"after";return new J(a.line,W,E)}}var B=function(ct,dt,ut){for(var bt=function(ne,Te){return Te?new J(a.line,v(ne,1),"before"):new J(a.line,ne,"after")};ct>=0&&ct<c.length;ct+=dt){var Nt=c[ct],Mt=dt>0==(Nt.level!=1),Bt=Mt?ut.begin:v(ut.end,-1);if(Nt.from<=Bt&&Bt<Nt.to||(Bt=Mt?Nt.from:v(Nt.to,-1),ut.begin<=Bt&&Bt<ut.end))return bt(Bt,Mt)}},V=B(d+o,o,M);if(V)return V;var nt=o>0?M.end:v(M.begin,-1);return nt!=null&&!(o>0&&nt==r.text.length)&&(V=B(o>0?0:c.length-1,o,_(nt)),V)?V:null}var qr={selectAll:tu,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),Wt)},killLine:function(t){return ar(t,function(r){if(r.empty()){var a=wt(t.doc,r.head.line).text.length;return r.head.ch==a&&r.head.line<t.lastLine()?{from:r.head,to:J(r.head.line+1,0)}:{from:r.head,to:J(r.head.line,a)}}else return{from:r.from(),to:r.to()}})},deleteLine:function(t){return ar(t,function(r){return{from:J(r.from().line,0),to:vt(t.doc,J(r.to().line+1,0))}})},delLineLeft:function(t){return ar(t,function(r){return{from:J(r.from().line,0),to:r.from()}})},delWrappedLineLeft:function(t){return ar(t,function(r){var a=t.charCoords(r.head,"div").top+5,o=t.coordsChar({left:0,top:a},"div");return{from:o,to:r.from()}})},delWrappedLineRight:function(t){return ar(t,function(r){var a=t.charCoords(r.head,"div").top+5,o=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:a},"div");return{from:r.from(),to:o}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(J(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(J(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(r){return vu(t,r.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(r){return yu(t,r.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(r){return lg(t,r.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(r){var a=t.cursorCoords(r.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:a},"div")},$t)},goLineLeft:function(t){return t.extendSelectionsBy(function(r){var a=t.cursorCoords(r.head,"div").top+5;return t.coordsChar({left:0,top:a},"div")},$t)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(r){var a=t.cursorCoords(r.head,"div").top+5,o=t.coordsChar({left:0,top:a},"div");return o.ch<t.getLine(o.line).search(/\S/)?yu(t,r.head):o},$t)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("	")},insertSoftTab:function(t){for(var r=[],a=t.listSelections(),o=t.options.tabSize,c=0;c<a.length;c++){var d=a[c].from(),g=zt(t.getLine(d.line),d.ch,o);r.push(Vt(o-g%o))}t.replaceSelections(r)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return qe(t,function(){for(var r=t.listSelections(),a=[],o=0;o<r.length;o++)if(r[o].empty()){var c=r[o].head,d=wt(t.doc,c.line).text;if(d){if(c.ch==d.length&&(c=new J(c.line,c.ch-1)),c.ch>0)c=new J(c.line,c.ch+1),t.replaceRange(d.charAt(c.ch-1)+d.charAt(c.ch-2),J(c.line,c.ch-2),c,"+transpose");else if(c.line>t.doc.first){var g=wt(t.doc,c.line-1).text;g&&(c=new J(c.line,1),t.replaceRange(d.charAt(0)+t.doc.lineSeparator()+g.charAt(g.length-1),J(c.line-1,g.length-1),c,"+transpose"))}}a.push(new Jt(c,c))}t.setSelections(a)})},newlineAndIndent:function(t){return qe(t,function(){for(var r=t.listSelections(),a=r.length-1;a>=0;a--)t.replaceRange(t.doc.lineSeparator(),r[a].anchor,r[a].head,"+input");r=t.listSelections();for(var o=0;o<r.length;o++)t.indentLine(r[o].from().line,null,!0);Qn(t)})},openLine:function(t){return t.replaceSelection(`
`,"start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function vu(t,r){var a=wt(t.doc,r),o=_i(a);return o!=a&&(r=Zt(o)),Pa(!0,t,o,r,1)}function lg(t,r){var a=wt(t.doc,r),o=Vd(a);return o!=a&&(r=Zt(o)),Pa(!0,t,a,r,-1)}function yu(t,r){var a=vu(t,r.line),o=wt(t.doc,a.line),c=Yt(o,t.doc.direction);if(!c||c[0].level==0){var d=Math.max(a.ch,o.text.search(/\S/)),g=r.line==a.line&&r.ch<=d&&r.ch;return J(a.line,g?0:d,a.sticky)}return a}function ro(t,r,a){if(typeof r=="string"&&(r=qr[r],!r))return!1;t.display.input.ensurePolled();var o=t.display.shift,c=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),a&&(t.display.shift=!1),c=r(t)!=Ft}finally{t.display.shift=o,t.state.suppressEdits=!1}return c}function cg(t,r,a){for(var o=0;o<t.state.keyMaps.length;o++){var c=or(r,t.state.keyMaps[o],a,t);if(c)return c}return t.options.extraKeys&&or(r,t.options.extraKeys,a,t)||or(r,t.options.keyMap,a,t)}var ug=new Et;function Zr(t,r,a,o){var c=t.state.keySeq;if(c){if(pu(r))return"handled";if(/\'$/.test(r)?t.state.keySeq=null:ug.set(50,function(){t.state.keySeq==c&&(t.state.keySeq=null,t.display.input.reset())}),bu(t,c+" "+r,a,o))return!0}return bu(t,r,a,o)}function bu(t,r,a,o){var c=cg(t,r,o);return c=="multi"&&(t.state.keySeq=r),c=="handled"&&ke(t,"keyHandled",t,r,a),(c=="handled"||c=="multi")&&(z(a),da(t)),!!c}function xu(t,r){var a=mu(r,!0);return a?r.shiftKey&&!t.state.keySeq?Zr(t,"Shift-"+a,r,function(o){return ro(t,o,!0)})||Zr(t,a,r,function(o){if(typeof o=="string"?/^go[A-Z]/.test(o):o.motion)return ro(t,o)}):Zr(t,a,r,function(o){return ro(t,o)}):!1}function fg(t,r,a){return Zr(t,"'"+a+"'",r,function(o){return ro(t,o,!0)})}var Oa=null;function _u(t){var r=this;if(!(t.target&&t.target!=r.display.input.getField())&&(r.curOp.focus=jt(),!ue(r,t))){p&&m<11&&t.keyCode==27&&(t.returnValue=!1);var a=t.keyCode;r.display.shift=a==16||t.shiftKey;var o=xu(r,t);T&&(Oa=o?a:null,!o&&a==88&&!Os&&(G?t.metaKey:t.ctrlKey)&&r.replaceSelection("",null,"cut")),l&&!G&&!o&&a==46&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),a==18&&!/\bCodeMirror-crosshair\b/.test(r.display.lineDiv.className)&&hg(r)}}function hg(t){var r=t.display.lineDiv;$(r,"CodeMirror-crosshair");function a(o){(o.keyCode==18||!o.altKey)&&(tt(r,"CodeMirror-crosshair"),Ee(document,"keyup",a),Ee(document,"mouseover",a))}Ct(document,"keyup",a),Ct(document,"mouseover",a)}function wu(t){t.keyCode==16&&(this.doc.sel.shift=!1),ue(this,t)}function ku(t){var r=this;if(!(t.target&&t.target!=r.display.input.getField())&&!(ji(r.display,t)||ue(r,t)||t.ctrlKey&&!t.altKey||G&&t.metaKey)){var a=t.keyCode,o=t.charCode;if(T&&a==Oa){Oa=null,z(t);return}if(!(T&&(!t.which||t.which<10)&&xu(r,t))){var c=String.fromCharCode(o??a);c!="\b"&&(fg(r,t,c)||r.display.input.onKeyPress(t))}}}var dg=400,Aa=function(t,r,a){this.time=t,this.pos=r,this.button=a};Aa.prototype.compare=function(t,r,a){return this.time+dg>t&&k(r,this.pos)==0&&a==this.button};var Jr,Qr;function pg(t,r){var a=+new Date;return Qr&&Qr.compare(a,t,r)?(Jr=Qr=null,"triple"):Jr&&Jr.compare(a,t,r)?(Qr=new Aa(a,t,r),Jr=null,"double"):(Jr=new Aa(a,t,r),Qr=null,"single")}function Su(t){var r=this,a=r.display;if(!(ue(r,t)||a.activeTouch&&a.input.supportsTouch())){if(a.input.ensurePolled(),a.shift=t.shiftKey,ji(a,t)){b||(a.scroller.draggable=!1,setTimeout(function(){return a.scroller.draggable=!0},100));return}if(!Ia(r,t)){var o=Sn(r,t),c=te(t),d=o?pg(o,c):"single";window.focus(),c==1&&r.state.selectingText&&r.state.selectingText(t),!(o&&gg(r,c,o,d,t))&&(c==1?o?vg(r,o,d,t):Kt(t)==a.scroller&&z(t):c==2?(o&&Js(r.doc,o),setTimeout(function(){return a.input.focus()},20)):c==3&&(ht?r.display.input.onContextMenu(t):pa(r)))}}}function gg(t,r,a,o,c){var d="Click";return o=="double"?d="Double"+d:o=="triple"&&(d="Triple"+d),d=(r==1?"Left":r==2?"Middle":"Right")+d,Zr(t,gu(d,c),c,function(g){if(typeof g=="string"&&(g=qr[g]),!g)return!1;var v=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),v=g(t,a)!=Ft}finally{t.state.suppressEdits=!1}return v})}function mg(t,r,a){var o=t.getOption("configureMouse"),c=o?o(t,r,a):{};if(c.unit==null){var d=K?a.shiftKey&&a.metaKey:a.altKey;c.unit=d?"rectangle":r=="single"?"char":r=="double"?"word":"line"}return(c.extend==null||t.doc.extend)&&(c.extend=t.doc.extend||a.shiftKey),c.addNew==null&&(c.addNew=G?a.metaKey:a.ctrlKey),c.moveOnDrag==null&&(c.moveOnDrag=!(G?a.altKey:a.ctrlKey)),c}function vg(t,r,a,o){p?setTimeout(Tt(Cc,t),0):t.curOp.focus=jt();var c=mg(t,a,o),d=t.doc.sel,g;t.options.dragDrop&&ci&&!t.isReadOnly()&&a=="single"&&(g=d.contains(r))>-1&&(k((g=d.ranges[g]).from(),r)<0||r.xRel>0)&&(k(g.to(),r)>0||r.xRel<0)?yg(t,o,r,c):bg(t,o,r,c)}function yg(t,r,a,o){var c=t.display,d=!1,g=Se(t,function(_){b&&(c.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:pa(t)),Ee(c.wrapper.ownerDocument,"mouseup",g),Ee(c.wrapper.ownerDocument,"mousemove",v),Ee(c.scroller,"dragstart",x),Ee(c.scroller,"drop",g),d||(z(_),o.addNew||Js(t.doc,a,null,null,o.extend),b&&!O||p&&m==9?setTimeout(function(){c.wrapper.ownerDocument.body.focus({preventScroll:!0}),c.input.focus()},20):c.input.focus())}),v=function(_){d=d||Math.abs(r.clientX-_.clientX)+Math.abs(r.clientY-_.clientY)>=10},x=function(){return d=!0};b&&(c.scroller.draggable=!0),t.state.draggingText=g,g.copy=!o.moveOnDrag,Ct(c.wrapper.ownerDocument,"mouseup",g),Ct(c.wrapper.ownerDocument,"mousemove",v),Ct(c.scroller,"dragstart",x),Ct(c.scroller,"drop",g),t.state.delayingBlurEvent=!0,setTimeout(function(){return c.input.focus()},20),c.scroller.dragDrop&&c.scroller.dragDrop()}function Cu(t,r,a){if(a=="char")return new Jt(r,r);if(a=="word")return t.findWordAt(r);if(a=="line")return new Jt(J(r.line,0),vt(t.doc,J(r.line+1,0)));var o=a(t,r);return new Jt(o.from,o.to)}function bg(t,r,a,o){p&&pa(t);var c=t.display,d=t.doc;z(r);var g,v,x=d.sel,_=x.ranges;if(o.addNew&&!o.extend?(v=d.sel.contains(a),v>-1?g=_[v]:g=new Jt(a,a)):(g=d.sel.primary(),v=d.sel.primIndex),o.unit=="rectangle")o.addNew||(g=new Jt(a,a)),a=Sn(t,r,!0,!0),v=-1;else{var M=Cu(t,a,o.unit);o.extend?g=Ma(g,M.anchor,M.head,o.extend):g=M}o.addNew?v==-1?(v=_.length,Re(d,ki(t,_.concat([g]),v),{scroll:!1,origin:"*mouse"})):_.length>1&&_[v].empty()&&o.unit=="char"&&!o.extend?(Re(d,ki(t,_.slice(0,v).concat(_.slice(v+1)),0),{scroll:!1,origin:"*mouse"}),x=d.sel):La(d,v,g,ii):(v=0,Re(d,new ai([g],0),ii),x=d.sel);var N=a;function W(ut){if(k(N,ut)!=0)if(N=ut,o.unit=="rectangle"){for(var bt=[],Nt=t.options.tabSize,Mt=zt(wt(d,a.line).text,a.ch,Nt),Bt=zt(wt(d,ut.line).text,ut.ch,Nt),ne=Math.min(Mt,Bt),Te=Math.max(Mt,Bt),ce=Math.min(a.line,ut.line),Ze=Math.min(t.lastLine(),Math.max(a.line,ut.line));ce<=Ze;ce++){var Ye=wt(d,ce).text,ve=j(Ye,ne,Nt);ne==Te?bt.push(new Jt(J(ce,ve),J(ce,ve))):Ye.length>ve&&bt.push(new Jt(J(ce,ve),J(ce,j(Ye,Te,Nt))))}bt.length||bt.push(new Jt(a,a)),Re(d,ki(t,x.ranges.slice(0,v).concat(bt),v),{origin:"*mouse",scroll:!1}),t.scrollIntoView(ut)}else{var Ke=g,De=Cu(t,ut,o.unit),we=Ke.anchor,ye;k(De.anchor,we)>0?(ye=De.head,we=Ot(Ke.from(),De.anchor)):(ye=De.anchor,we=et(Ke.to(),De.head));var he=x.ranges.slice(0);he[v]=xg(t,new Jt(vt(d,we),ye)),Re(d,ki(t,he,v),ii)}}var E=c.wrapper.getBoundingClientRect(),B=0;function V(ut){var bt=++B,Nt=Sn(t,ut,!0,o.unit=="rectangle");if(Nt)if(k(Nt,N)!=0){t.curOp.focus=jt(),W(Nt);var Mt=Ys(c,d);(Nt.line>=Mt.to||Nt.line<Mt.from)&&setTimeout(Se(t,function(){B==bt&&V(ut)}),150)}else{var Bt=ut.clientY<E.top?-20:ut.clientY>E.bottom?20:0;Bt&&setTimeout(Se(t,function(){B==bt&&(c.scroller.scrollTop+=Bt,V(ut))}),50)}}function nt(ut){t.state.selectingText=!1,B=1/0,ut&&(z(ut),c.input.focus()),Ee(c.wrapper.ownerDocument,"mousemove",ct),Ee(c.wrapper.ownerDocument,"mouseup",dt),d.history.lastSelOrigin=null}var ct=Se(t,function(ut){ut.buttons===0||!te(ut)?nt(ut):V(ut)}),dt=Se(t,nt);t.state.selectingText=dt,Ct(c.wrapper.ownerDocument,"mousemove",ct),Ct(c.wrapper.ownerDocument,"mouseup",dt)}function xg(t,r){var a=r.anchor,o=r.head,c=wt(t.doc,a.line);if(k(a,o)==0&&a.sticky==o.sticky)return r;var d=Yt(c);if(!d)return r;var g=pt(d,a.ch,a.sticky),v=d[g];if(v.from!=a.ch&&v.to!=a.ch)return r;var x=g+(v.from==a.ch==(v.level!=1)?0:1);if(x==0||x==d.length)return r;var _;if(o.line!=a.line)_=(o.line-a.line)*(t.doc.direction=="ltr"?1:-1)>0;else{var M=pt(d,o.ch,o.sticky),N=M-g||(o.ch-a.ch)*(v.level==1?-1:1);M==x-1||M==x?_=N<0:_=N>0}var W=d[x+(_?-1:0)],E=_==(W.level==1),B=E?W.from:W.to,V=E?"after":"before";return a.ch==B&&a.sticky==V?r:new Jt(new J(a.line,B,V),o)}function Tu(t,r,a,o){var c,d;if(r.touches)c=r.touches[0].clientX,d=r.touches[0].clientY;else try{c=r.clientX,d=r.clientY}catch{return!1}if(c>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;o&&z(r);var g=t.display,v=g.lineDiv.getBoundingClientRect();if(d>v.bottom||!xe(t,a))return yt(r);d-=v.top-g.viewOffset;for(var x=0;x<t.display.gutterSpecs.length;++x){var _=g.gutters.childNodes[x];if(_&&_.getBoundingClientRect().right>=c){var M=Mi(t.doc,d),N=t.display.gutterSpecs[x];return Dt(t,a,t,M,N.className,r),yt(r)}}}function Ia(t,r){return Tu(t,r,"gutterClick",!0)}function Mu(t,r){ji(t.display,r)||_g(t,r)||ue(t,r,"contextmenu")||ht||t.display.input.onContextMenu(r)}function _g(t,r){return xe(t,"gutterContextMenu")?Tu(t,r,"gutterContextMenu",!1):!1}function Lu(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ar(t)}var lr={toString:function(){return"CodeMirror.Init"}},Nu={},so={};function wg(t){var r=t.optionHandlers;function a(o,c,d,g){t.defaults[o]=c,d&&(r[o]=g?function(v,x,_){_!=lr&&d(v,x,_)}:d)}t.defineOption=a,t.Init=lr,a("value","",function(o,c){return o.setValue(c)},!0),a("mode",null,function(o,c){o.doc.modeOption=c,Sa(o)},!0),a("indentUnit",2,Sa,!0),a("indentWithTabs",!1),a("smartIndent",!0),a("tabSize",4,function(o){Br(o),Ar(o),je(o)},!0),a("lineSeparator",null,function(o,c){if(o.doc.lineSep=c,!!c){var d=[],g=o.doc.first;o.doc.iter(function(x){for(var _=0;;){var M=x.text.indexOf(c,_);if(M==-1)break;_=M+c.length,d.push(J(g,M))}g++});for(var v=d.length-1;v>=0;v--)rr(o.doc,c,d[v],J(d[v].line,d[v].ch+c.length))}}),a("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(o,c,d){o.state.specialChars=new RegExp(c.source+(c.test("	")?"":"|	"),"g"),d!=lr&&o.refresh()}),a("specialCharPlaceholder",Zd,function(o){return o.refresh()},!0),a("electricChars",!0),a("inputStyle",X?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),a("spellcheck",!1,function(o,c){return o.getInputField().spellcheck=c},!0),a("autocorrect",!1,function(o,c){return o.getInputField().autocorrect=c},!0),a("autocapitalize",!1,function(o,c){return o.getInputField().autocapitalize=c},!0),a("rtlMoveVisually",!Y),a("wholeLineUpdateBefore",!0),a("theme","default",function(o){Lu(o),zr(o)},!0),a("keyMap","default",function(o,c,d){var g=no(c),v=d!=lr&&no(d);v&&v.detach&&v.detach(o,g),g.attach&&g.attach(o,v||null)}),a("extraKeys",null),a("configureMouse",null),a("lineWrapping",!1,Sg,!0),a("gutters",[],function(o,c){o.display.gutterSpecs=wa(c,o.options.lineNumbers),zr(o)},!0),a("fixedGutter",!0,function(o,c){o.display.gutters.style.left=c?ua(o.display)+"px":"0",o.refresh()},!0),a("coverGutterNextToScrollbar",!1,function(o){return tr(o)},!0),a("scrollbarStyle","native",function(o){Pc(o),tr(o),o.display.scrollbars.setScrollTop(o.doc.scrollTop),o.display.scrollbars.setScrollLeft(o.doc.scrollLeft)},!0),a("lineNumbers",!1,function(o,c){o.display.gutterSpecs=wa(o.options.gutters,c),zr(o)},!0),a("firstLineNumber",1,zr,!0),a("lineNumberFormatter",function(o){return o},zr,!0),a("showCursorWhenSelecting",!1,Ir,!0),a("resetSelectionOnContextMenu",!0),a("lineWiseCopyCut",!0),a("pasteLinesPerSelection",!0),a("selectionsMayTouch",!1),a("readOnly",!1,function(o,c){c=="nocursor"&&(Jn(o),o.display.input.blur()),o.display.input.readOnlyChanged(c)}),a("screenReaderLabel",null,function(o,c){c=c===""?null:c,o.display.input.screenReaderLabelChanged(c)}),a("disableInput",!1,function(o,c){c||o.display.input.reset()},!0),a("dragDrop",!0,kg),a("allowDropFileTypes",null),a("cursorBlinkRate",530),a("cursorScrollMargin",0),a("cursorHeight",1,Ir,!0),a("singleCursorHeightPerLine",!0,Ir,!0),a("workTime",100),a("workDelay",100),a("flattenSpans",!0,Br,!0),a("addModeClass",!1,Br,!0),a("pollInterval",100),a("undoDepth",200,function(o,c){return o.doc.history.undoDepth=c}),a("historyEventDelay",1250),a("viewportMargin",10,function(o){return o.refresh()},!0),a("maxHighlightLength",1e4,Br,!0),a("moveInputWithCursor",!0,function(o,c){c||o.display.input.resetPosition()}),a("tabindex",null,function(o,c){return o.display.input.getField().tabIndex=c||""}),a("autofocus",null),a("direction","ltr",function(o,c){return o.doc.setDirection(c)},!0),a("phrases",null)}function kg(t,r,a){var o=a&&a!=lr;if(!r!=!o){var c=t.display.dragFunctions,d=r?Ct:Ee;d(t.display.scroller,"dragstart",c.start),d(t.display.scroller,"dragenter",c.enter),d(t.display.scroller,"dragover",c.over),d(t.display.scroller,"dragleave",c.leave),d(t.display.scroller,"drop",c.drop)}}function Sg(t){t.options.lineWrapping?($(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(tt(t.display.wrapper,"CodeMirror-wrap"),ta(t)),fa(t),je(t),Ar(t),setTimeout(function(){return tr(t)},100)}function se(t,r){var a=this;if(!(this instanceof se))return new se(t,r);this.options=r=r?It(r):{},It(Nu,r,!1);var o=r.value;typeof o=="string"?o=new Ve(o,r.mode,null,r.lineSeparator,r.direction):r.mode&&(o.modeOption=r.mode),this.doc=o;var c=new se.inputStyles[r.inputStyle](this),d=this.display=new Rp(t,o,c,r);d.wrapper.CodeMirror=this,Lu(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Pc(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Et,keySeq:null,specialChars:null},r.autofocus&&!X&&d.input.focus(),p&&m<11&&setTimeout(function(){return a.display.input.reset(!0)},20),Cg(this),ig(),Ln(this),this.curOp.forceUpdate=!0,Bc(this,o),r.autofocus&&!X||this.hasFocus()?setTimeout(function(){a.hasFocus()&&!a.state.focused&&ga(a)},20):Jn(this);for(var g in so)so.hasOwnProperty(g)&&so[g](this,r[g],lr);Ic(this),r.finishInit&&r.finishInit(this);for(var v=0;v<Ea.length;++v)Ea[v](this);Nn(this),b&&r.lineWrapping&&getComputedStyle(d.lineDiv).textRendering=="optimizelegibility"&&(d.lineDiv.style.textRendering="auto")}se.defaults=Nu,se.optionHandlers=so;function Cg(t){var r=t.display;Ct(r.scroller,"mousedown",Se(t,Su)),p&&m<11?Ct(r.scroller,"dblclick",Se(t,function(x){if(!ue(t,x)){var _=Sn(t,x);if(!(!_||Ia(t,x)||ji(t.display,x))){z(x);var M=t.findWordAt(_);Js(t.doc,M.anchor,M.head)}}})):Ct(r.scroller,"dblclick",function(x){return ue(t,x)||z(x)}),Ct(r.scroller,"contextmenu",function(x){return Mu(t,x)}),Ct(r.input.getField(),"contextmenu",function(x){r.scroller.contains(x.target)||Mu(t,x)});var a,o={end:0};function c(){r.activeTouch&&(a=setTimeout(function(){return r.activeTouch=null},1e3),o=r.activeTouch,o.end=+new Date)}function d(x){if(x.touches.length!=1)return!1;var _=x.touches[0];return _.radiusX<=1&&_.radiusY<=1}function g(x,_){if(_.left==null)return!0;var M=_.left-x.left,N=_.top-x.top;return M*M+N*N>20*20}Ct(r.scroller,"touchstart",function(x){if(!ue(t,x)&&!d(x)&&!Ia(t,x)){r.input.ensurePolled(),clearTimeout(a);var _=+new Date;r.activeTouch={start:_,moved:!1,prev:_-o.end<=300?o:null},x.touches.length==1&&(r.activeTouch.left=x.touches[0].pageX,r.activeTouch.top=x.touches[0].pageY)}}),Ct(r.scroller,"touchmove",function(){r.activeTouch&&(r.activeTouch.moved=!0)}),Ct(r.scroller,"touchend",function(x){var _=r.activeTouch;if(_&&!ji(r,x)&&_.left!=null&&!_.moved&&new Date-_.start<300){var M=t.coordsChar(r.activeTouch,"page"),N;!_.prev||g(_,_.prev)?N=new Jt(M,M):!_.prev.prev||g(_,_.prev.prev)?N=t.findWordAt(M):N=new Jt(J(M.line,0),vt(t.doc,J(M.line+1,0))),t.setSelection(N.anchor,N.head),t.focus(),z(x)}c()}),Ct(r.scroller,"touchcancel",c),Ct(r.scroller,"scroll",function(){r.scroller.clientHeight&&(Fr(t,r.scroller.scrollTop),Tn(t,r.scroller.scrollLeft,!0),Dt(t,"scroll",t))}),Ct(r.scroller,"mousewheel",function(x){return Rc(t,x)}),Ct(r.scroller,"DOMMouseScroll",function(x){return Rc(t,x)}),Ct(r.wrapper,"scroll",function(){return r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),r.dragFunctions={enter:function(x){ue(t,x)||_t(x)},over:function(x){ue(t,x)||(eg(t,x),_t(x))},start:function(x){return tg(t,x)},drop:Se(t,Qp),leave:function(x){ue(t,x)||fu(t)}};var v=r.input.getField();Ct(v,"keyup",function(x){return wu.call(t,x)}),Ct(v,"keydown",Se(t,_u)),Ct(v,"keypress",Se(t,ku)),Ct(v,"focus",function(x){return ga(t,x)}),Ct(v,"blur",function(x){return Jn(t,x)})}var Ea=[];se.defineInitHook=function(t){return Ea.push(t)};function ts(t,r,a,o){var c=t.doc,d;a==null&&(a="add"),a=="smart"&&(c.mode.indent?d=Lr(t,r).state:a="prev");var g=t.options.tabSize,v=wt(c,r),x=zt(v.text,null,g);v.stateAfter&&(v.stateAfter=null);var _=v.text.match(/^\s*/)[0],M;if(!o&&!/\S/.test(v.text))M=0,a="not";else if(a=="smart"&&(M=c.mode.indent(d,v.text.slice(_.length),v.text),M==Ft||M>150)){if(!o)return;a="prev"}a=="prev"?r>c.first?M=zt(wt(c,r-1).text,null,g):M=0:a=="add"?M=x+t.options.indentUnit:a=="subtract"?M=x-t.options.indentUnit:typeof a=="number"&&(M=x+a),M=Math.max(0,M);var N="",W=0;if(t.options.indentWithTabs)for(var E=Math.floor(M/g);E;--E)W+=g,N+="	";if(W<M&&(N+=Vt(M-W)),N!=_)return rr(c,N,J(r,0),J(r,_.length),"+input"),v.stateAfter=null,!0;for(var B=0;B<c.sel.ranges.length;B++){var V=c.sel.ranges[B];if(V.head.line==r&&V.head.ch<_.length){var nt=J(r,_.length);La(c,B,new Jt(nt,nt));break}}}var Si=null;function oo(t){Si=t}function Fa(t,r,a,o,c){var d=t.doc;t.display.shift=!1,o||(o=d.sel);var g=+new Date-200,v=c=="paste"||t.state.pasteIncoming>g,x=wr(r),_=null;if(v&&o.ranges.length>1)if(Si&&Si.text.join(`
`)==r){if(o.ranges.length%Si.text.length==0){_=[];for(var M=0;M<Si.text.length;M++)_.push(d.splitLines(Si.text[M]))}}else x.length==o.ranges.length&&t.options.pasteLinesPerSelection&&(_=Pt(x,function(ct){return[ct]}));for(var N=t.curOp.updateInput,W=o.ranges.length-1;W>=0;W--){var E=o.ranges[W],B=E.from(),V=E.to();E.empty()&&(a&&a>0?B=J(B.line,B.ch-a):t.state.overwrite&&!v?V=J(V.line,Math.min(wt(d,V.line).text.length,V.ch+kt(x).length)):v&&Si&&Si.lineWise&&Si.text.join(`
`)==x.join(`
`)&&(B=V=J(B.line,0)));var nt={from:B,to:V,text:_?_[W%_.length]:x,origin:c||(v?"paste":t.state.cutIncoming>g?"cut":"+input")};nr(t.doc,nt),ke(t,"inputRead",t,nt)}r&&!v&&Pu(t,r),Qn(t),t.curOp.updateInput<2&&(t.curOp.updateInput=N),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Du(t,r){var a=t.clipboardData&&t.clipboardData.getData("Text");if(a)return t.preventDefault(),!r.isReadOnly()&&!r.options.disableInput&&qe(r,function(){return Fa(r,a,0,null,"paste")}),!0}function Pu(t,r){if(!(!t.options.electricChars||!t.options.smartIndent))for(var a=t.doc.sel,o=a.ranges.length-1;o>=0;o--){var c=a.ranges[o];if(!(c.head.ch>100||o&&a.ranges[o-1].head.line==c.head.line)){var d=t.getModeAt(c.head),g=!1;if(d.electricChars){for(var v=0;v<d.electricChars.length;v++)if(r.indexOf(d.electricChars.charAt(v))>-1){g=ts(t,c.head.line,"smart");break}}else d.electricInput&&d.electricInput.test(wt(t.doc,c.head.line).text.slice(0,c.head.ch))&&(g=ts(t,c.head.line,"smart"));g&&ke(t,"electricInput",t,c.head.line)}}}function Ou(t){for(var r=[],a=[],o=0;o<t.doc.sel.ranges.length;o++){var c=t.doc.sel.ranges[o].head.line,d={anchor:J(c,0),head:J(c+1,0)};a.push(d),r.push(t.getRange(d.anchor,d.head))}return{text:r,ranges:a}}function Au(t,r,a,o){t.setAttribute("autocorrect",a?"":"off"),t.setAttribute("autocapitalize",o?"":"off"),t.setAttribute("spellcheck",!!r)}function Iu(){var t=I("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),r=I("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return b?t.style.width="1000px":t.setAttribute("wrap","off"),A&&(t.style.border="1px solid black"),Au(t),r}function Tg(t){var r=t.optionHandlers,a=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(o,c){var d=this.options,g=d[o];d[o]==c&&o!="mode"||(d[o]=c,r.hasOwnProperty(o)&&Se(this,r[o])(this,c,g),Dt(this,"optionChange",this,o))},getOption:function(o){return this.options[o]},getDoc:function(){return this.doc},addKeyMap:function(o,c){this.state.keyMaps[c?"push":"unshift"](no(o))},removeKeyMap:function(o){for(var c=this.state.keyMaps,d=0;d<c.length;++d)if(c[d]==o||c[d].name==o)return c.splice(d,1),!0},addOverlay:He(function(o,c){var d=o.token?o:t.getMode(this.options,o);if(d.startState)throw new Error("Overlays may not be stateful.");Lt(this.state.overlays,{mode:d,modeSpec:o,opaque:c&&c.opaque,priority:c&&c.priority||0},function(g){return g.priority}),this.state.modeGen++,je(this)}),removeOverlay:He(function(o){for(var c=this.state.overlays,d=0;d<c.length;++d){var g=c[d].modeSpec;if(g==o||typeof o=="string"&&g.name==o){c.splice(d,1),this.state.modeGen++,je(this);return}}}),indentLine:He(function(o,c,d){typeof c!="string"&&typeof c!="number"&&(c==null?c=this.options.smartIndent?"smart":"prev":c=c?"add":"subtract"),_n(this.doc,o)&&ts(this,o,c,d)}),indentSelection:He(function(o){for(var c=this.doc.sel.ranges,d=-1,g=0;g<c.length;g++){var v=c[g];if(v.empty())v.head.line>d&&(ts(this,v.head.line,o,!0),d=v.head.line,g==this.doc.sel.primIndex&&Qn(this));else{var x=v.from(),_=v.to(),M=Math.max(d,x.line);d=Math.min(this.lastLine(),_.line-(_.ch?0:1))+1;for(var N=M;N<d;++N)ts(this,N,o);var W=this.doc.sel.ranges;x.ch==0&&c.length==W.length&&W[g].from().ch>0&&La(this.doc,g,new Jt(x,W[g].to()),Wt)}}}),getTokenAt:function(o,c){return $l(this,o,c)},getLineTokens:function(o,c){return $l(this,J(o),c,!0)},getTokenTypeAt:function(o){o=vt(this.doc,o);var c=zl(this,wt(this.doc,o.line)),d=0,g=(c.length-1)/2,v=o.ch,x;if(v==0)x=c[2];else for(;;){var _=d+g>>1;if((_?c[_*2-1]:0)>=v)g=_;else if(c[_*2+1]<v)d=_+1;else{x=c[_*2+2];break}}var M=x?x.indexOf("overlay "):-1;return M<0?x:M==0?null:x.slice(0,M-1)},getModeAt:function(o){var c=this.doc.mode;return c.innerMode?t.innerMode(c,this.getTokenAt(o).state).mode:c},getHelper:function(o,c){return this.getHelpers(o,c)[0]},getHelpers:function(o,c){var d=[];if(!a.hasOwnProperty(c))return d;var g=a[c],v=this.getModeAt(o);if(typeof v[c]=="string")g[v[c]]&&d.push(g[v[c]]);else if(v[c])for(var x=0;x<v[c].length;x++){var _=g[v[c][x]];_&&d.push(_)}else v.helperType&&g[v.helperType]?d.push(g[v.helperType]):g[v.name]&&d.push(g[v.name]);for(var M=0;M<g._global.length;M++){var N=g._global[M];N.pred(v,this)&&mt(d,N.val)==-1&&d.push(N.val)}return d},getStateAfter:function(o,c){var d=this.doc;return o=Xt(d,o??d.first+d.size-1),Lr(this,o+1,c).state},cursorCoords:function(o,c){var d,g=this.doc.sel.primary();return o==null?d=g.head:typeof o=="object"?d=vt(this.doc,o):d=o?g.from():g.to(),wi(this,d,c||"page")},charCoords:function(o,c){return Us(this,vt(this.doc,o),c||"page")},coordsChar:function(o,c){return o=yc(this,o,c||"page"),aa(this,o.left,o.top)},lineAtHeight:function(o,c){return o=yc(this,{top:o,left:0},c||"page").top,Mi(this.doc,o+this.display.viewOffset)},heightAtLine:function(o,c,d){var g=!1,v;if(typeof o=="number"){var x=this.doc.first+this.doc.size-1;o<this.doc.first?o=this.doc.first:o>x&&(o=x,g=!0),v=wt(this.doc,o)}else v=o;return Bs(this,v,{top:0,left:0},c||"page",d||g).top+(g?this.doc.height-$i(v):0)},defaultTextHeight:function(){return qn(this.display)},defaultCharWidth:function(){return Zn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(o,c,d,g,v){var x=this.display;o=wi(this,vt(this.doc,o));var _=o.bottom,M=o.left;if(c.style.position="absolute",c.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(c),x.sizer.appendChild(c),g=="over")_=o.top;else if(g=="above"||g=="near"){var N=Math.max(x.wrapper.clientHeight,this.doc.height),W=Math.max(x.sizer.clientWidth,x.lineSpace.clientWidth);(g=="above"||o.bottom+c.offsetHeight>N)&&o.top>c.offsetHeight?_=o.top-c.offsetHeight:o.bottom+c.offsetHeight<=N&&(_=o.bottom),M+c.offsetWidth>W&&(M=W-c.offsetWidth)}c.style.top=_+"px",c.style.left=c.style.right="",v=="right"?(M=x.sizer.clientWidth-c.offsetWidth,c.style.right="0px"):(v=="left"?M=0:v=="middle"&&(M=(x.sizer.clientWidth-c.offsetWidth)/2),c.style.left=M+"px"),d&&kp(this,{left:M,top:_,right:M+c.offsetWidth,bottom:_+c.offsetHeight})},triggerOnKeyDown:He(_u),triggerOnKeyPress:He(ku),triggerOnKeyUp:wu,triggerOnMouseDown:He(Su),execCommand:function(o){if(qr.hasOwnProperty(o))return qr[o].call(null,this)},triggerElectric:He(function(o){Pu(this,o)}),findPosH:function(o,c,d,g){var v=1;c<0&&(v=-1,c=-c);for(var x=vt(this.doc,o),_=0;_<c&&(x=Ra(this.doc,x,v,d,g),!x.hitSide);++_);return x},moveH:He(function(o,c){var d=this;this.extendSelectionsBy(function(g){return d.display.shift||d.doc.extend||g.empty()?Ra(d.doc,g.head,o,c,d.options.rtlMoveVisually):o<0?g.from():g.to()},$t)}),deleteH:He(function(o,c){var d=this.doc.sel,g=this.doc;d.somethingSelected()?g.replaceSelection("",null,"+delete"):ar(this,function(v){var x=Ra(g,v.head,o,c,!1);return o<0?{from:x,to:v.head}:{from:v.head,to:x}})}),findPosV:function(o,c,d,g){var v=1,x=g;c<0&&(v=-1,c=-c);for(var _=vt(this.doc,o),M=0;M<c;++M){var N=wi(this,_,"div");if(x==null?x=N.left:N.left=x,_=Eu(this,N,v,d),_.hitSide)break}return _},moveV:He(function(o,c){var d=this,g=this.doc,v=[],x=!this.display.shift&&!g.extend&&g.sel.somethingSelected();if(g.extendSelectionsBy(function(M){if(x)return o<0?M.from():M.to();var N=wi(d,M.head,"div");M.goalColumn!=null&&(N.left=M.goalColumn),v.push(N.left);var W=Eu(d,N,o,c);return c=="page"&&M==g.sel.primary()&&va(d,Us(d,W,"div").top-N.top),W},$t),v.length)for(var _=0;_<g.sel.ranges.length;_++)g.sel.ranges[_].goalColumn=v[_]}),findWordAt:function(o){var c=this.doc,d=wt(c,o.line).text,g=o.ch,v=o.ch;if(d){var x=this.getHelper(o,"wordChars");(o.sticky=="before"||v==d.length)&&g?--g:++v;for(var _=d.charAt(g),M=$e(_,x)?function(N){return $e(N,x)}:/\s/.test(_)?function(N){return/\s/.test(N)}:function(N){return!/\s/.test(N)&&!$e(N)};g>0&&M(d.charAt(g-1));)--g;for(;v<d.length&&M(d.charAt(v));)++v}return new Jt(J(o.line,g),J(o.line,v))},toggleOverwrite:function(o){o!=null&&o==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?$(this.display.cursorDiv,"CodeMirror-overwrite"):tt(this.display.cursorDiv,"CodeMirror-overwrite"),Dt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==jt()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:He(function(o,c){Er(this,o,c)}),getScrollInfo:function(){var o=this.display.scroller;return{left:o.scrollLeft,top:o.scrollTop,height:o.scrollHeight-Ni(this)-this.display.barHeight,width:o.scrollWidth-Ni(this)-this.display.barWidth,clientHeight:na(this),clientWidth:wn(this)}},scrollIntoView:He(function(o,c){o==null?(o={from:this.doc.sel.primary().head,to:null},c==null&&(c=this.options.cursorScrollMargin)):typeof o=="number"?o={from:J(o,0),to:null}:o.from==null&&(o={from:o,to:null}),o.to||(o.to=o.from),o.margin=c||0,o.from.line!=null?Sp(this,o):Mc(this,o.from,o.to,o.margin)}),setSize:He(function(o,c){var d=this,g=function(x){return typeof x=="number"||/^\d+$/.test(String(x))?x+"px":x};o!=null&&(this.display.wrapper.style.width=g(o)),c!=null&&(this.display.wrapper.style.height=g(c)),this.options.lineWrapping&&gc(this);var v=this.display.viewFrom;this.doc.iter(v,this.display.viewTo,function(x){if(x.widgets){for(var _=0;_<x.widgets.length;_++)if(x.widgets[_].noHScroll){an(d,v,"widget");break}}++v}),this.curOp.forceUpdate=!0,Dt(this,"refresh",this)}),operation:function(o){return qe(this,o)},startOperation:function(){return Ln(this)},endOperation:function(){return Nn(this)},refresh:He(function(){var o=this.display.cachedTextHeight;je(this),this.curOp.forceUpdate=!0,Ar(this),Er(this,this.doc.scrollLeft,this.doc.scrollTop),xa(this.display),(o==null||Math.abs(o-qn(this.display))>.5||this.options.lineWrapping)&&fa(this),Dt(this,"refresh",this)}),swapDoc:He(function(o){var c=this.doc;return c.cm=null,this.state.selectingText&&this.state.selectingText(),Bc(this,o),Ar(this),this.display.input.reset(),Er(this,o.scrollLeft,o.scrollTop),this.curOp.forceScroll=!0,ke(this,"swapDoc",this,c),c}),phrase:function(o){var c=this.options.phrases;return c&&Object.prototype.hasOwnProperty.call(c,o)?c[o]:o},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},li(t),t.registerHelper=function(o,c,d){a.hasOwnProperty(o)||(a[o]=t[o]={_global:[]}),a[o][c]=d},t.registerGlobalHelper=function(o,c,d,g){t.registerHelper(o,c,g),a[o]._global.push({pred:d,val:g})}}function Ra(t,r,a,o,c){var d=r,g=a,v=wt(t,r.line),x=c&&t.direction=="rtl"?-a:a;function _(){var dt=r.line+x;return dt<t.first||dt>=t.first+t.size?!1:(r=new J(dt,r.ch,r.sticky),v=wt(t,dt))}function M(dt){var ut;if(o=="codepoint"){var bt=v.text.charCodeAt(r.ch+(a>0?0:-1));if(isNaN(bt))ut=null;else{var Nt=a>0?bt>=55296&&bt<56320:bt>=56320&&bt<57343;ut=new J(r.line,Math.max(0,Math.min(v.text.length,r.ch+a*(Nt?2:1))),-a)}}else c?ut=ag(t.cm,v,r,a):ut=Da(v,r,a);if(ut==null)if(!dt&&_())r=Pa(c,t.cm,v,r.line,x);else return!1;else r=ut;return!0}if(o=="char"||o=="codepoint")M();else if(o=="column")M(!0);else if(o=="word"||o=="group")for(var N=null,W=o=="group",E=t.cm&&t.cm.getHelper(r,"wordChars"),B=!0;!(a<0&&!M(!B));B=!1){var V=v.text.charAt(r.ch)||`
`,nt=$e(V,E)?"w":W&&V==`
`?"n":!W||/\s/.test(V)?null:"p";if(W&&!B&&!nt&&(nt="s"),N&&N!=nt){a<0&&(a=1,M(),r.sticky="after");break}if(nt&&(N=nt),a>0&&!M(!B))break}var ct=to(t,r,d,g,!0);return D(d,ct)&&(ct.hitSide=!0),ct}function Eu(t,r,a,o){var c=t.doc,d=r.left,g;if(o=="page"){var v=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),x=Math.max(v-.5*qn(t.display),3);g=(a>0?r.bottom:r.top)+a*x}else o=="line"&&(g=a>0?r.bottom+3:r.top-3);for(var _;_=aa(t,d,g),!!_.outside;){if(a<0?g<=0:g>=c.height){_.hitSide=!0;break}g+=a*5}return _}var ee=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Et,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};ee.prototype.init=function(t){var r=this,a=this,o=a.cm,c=a.div=t.lineDiv;c.contentEditable=!0,Au(c,o.options.spellcheck,o.options.autocorrect,o.options.autocapitalize);function d(v){for(var x=v.target;x;x=x.parentNode){if(x==c)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(x.className))break}return!1}Ct(c,"paste",function(v){!d(v)||ue(o,v)||Du(v,o)||m<=11&&setTimeout(Se(o,function(){return r.updateFromDOM()}),20)}),Ct(c,"compositionstart",function(v){r.composing={data:v.data,done:!1}}),Ct(c,"compositionupdate",function(v){r.composing||(r.composing={data:v.data,done:!1})}),Ct(c,"compositionend",function(v){r.composing&&(v.data!=r.composing.data&&r.readFromDOMSoon(),r.composing.done=!0)}),Ct(c,"touchstart",function(){return a.forceCompositionEnd()}),Ct(c,"input",function(){r.composing||r.readFromDOMSoon()});function g(v){if(!(!d(v)||ue(o,v))){if(o.somethingSelected())oo({lineWise:!1,text:o.getSelections()}),v.type=="cut"&&o.replaceSelection("",null,"cut");else if(o.options.lineWiseCopyCut){var x=Ou(o);oo({lineWise:!0,text:x.text}),v.type=="cut"&&o.operation(function(){o.setSelections(x.ranges,0,Wt),o.replaceSelection("",null,"cut")})}else return;if(v.clipboardData){v.clipboardData.clearData();var _=Si.text.join(`
`);if(v.clipboardData.setData("Text",_),v.clipboardData.getData("Text")==_){v.preventDefault();return}}var M=Iu(),N=M.firstChild;o.display.lineSpace.insertBefore(M,o.display.lineSpace.firstChild),N.value=Si.text.join(`
`);var W=jt();lt(N),setTimeout(function(){o.display.lineSpace.removeChild(M),W.focus(),W==c&&a.showPrimarySelection()},50)}}Ct(c,"copy",g),Ct(c,"cut",g)},ee.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},ee.prototype.prepareSelection=function(){var t=Sc(this.cm,!1);return t.focus=jt()==this.div,t},ee.prototype.showSelection=function(t,r){!t||!this.cm.display.view.length||((t.focus||r)&&this.showPrimarySelection(),this.showMultipleSelections(t))},ee.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},ee.prototype.showPrimarySelection=function(){var t=this.getSelection(),r=this.cm,a=r.doc.sel.primary(),o=a.from(),c=a.to();if(r.display.viewTo==r.display.viewFrom||o.line>=r.display.viewTo||c.line<r.display.viewFrom){t.removeAllRanges();return}var d=ao(r,t.anchorNode,t.anchorOffset),g=ao(r,t.focusNode,t.focusOffset);if(!(d&&!d.bad&&g&&!g.bad&&k(Ot(d,g),o)==0&&k(et(d,g),c)==0)){var v=r.display.view,x=o.line>=r.display.viewFrom&&Fu(r,o)||{node:v[0].measure.map[2],offset:0},_=c.line<r.display.viewTo&&Fu(r,c);if(!_){var M=v[v.length-1].measure,N=M.maps?M.maps[M.maps.length-1]:M.map;_={node:N[N.length-1],offset:N[N.length-2]-N[N.length-3]}}if(!x||!_){t.removeAllRanges();return}var W=t.rangeCount&&t.getRangeAt(0),E;try{E=ft(x.node,x.offset,_.offset,_.node)}catch{}E&&(!l&&r.state.focused?(t.collapse(x.node,x.offset),E.collapsed||(t.removeAllRanges(),t.addRange(E))):(t.removeAllRanges(),t.addRange(E)),W&&t.anchorNode==null?t.addRange(W):l&&this.startGracePeriod()),this.rememberSelection()}},ee.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},ee.prototype.showMultipleSelections=function(t){R(this.cm.display.cursorDiv,t.cursors),R(this.cm.display.selectionDiv,t.selection)},ee.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},ee.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var r=t.getRangeAt(0).commonAncestorContainer;return Rt(this.div,r)},ee.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||jt()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},ee.prototype.blur=function(){this.div.blur()},ee.prototype.getField=function(){return this.div},ee.prototype.supportsTouch=function(){return!0},ee.prototype.receivedFocus=function(){var t=this,r=this;this.selectionInEditor()?setTimeout(function(){return t.pollSelection()},20):qe(this.cm,function(){return r.cm.curOp.selectionChanged=!0});function a(){r.cm.state.focused&&(r.pollSelection(),r.polling.set(r.cm.options.pollInterval,a))}this.polling.set(this.cm.options.pollInterval,a)},ee.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},ee.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var t=this.getSelection(),r=this.cm;if(H&&S&&this.cm.display.gutterSpecs.length&&Mg(t.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var a=ao(r,t.anchorNode,t.anchorOffset),o=ao(r,t.focusNode,t.focusOffset);a&&o&&qe(r,function(){Re(r.doc,cn(a,o),Wt),(a.bad||o.bad)&&(r.curOp.selectionChanged=!0)})}}},ee.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t=this.cm,r=t.display,a=t.doc.sel.primary(),o=a.from(),c=a.to();if(o.ch==0&&o.line>t.firstLine()&&(o=J(o.line-1,wt(t.doc,o.line-1).length)),c.ch==wt(t.doc,c.line).text.length&&c.line<t.lastLine()&&(c=J(c.line+1,0)),o.line<r.viewFrom||c.line>r.viewTo-1)return!1;var d,g,v;o.line==r.viewFrom||(d=Cn(t,o.line))==0?(g=Zt(r.view[0].line),v=r.view[0].node):(g=Zt(r.view[d].line),v=r.view[d-1].node.nextSibling);var x=Cn(t,c.line),_,M;if(x==r.view.length-1?(_=r.viewTo-1,M=r.lineDiv.lastChild):(_=Zt(r.view[x+1].line)-1,M=r.view[x+1].node.previousSibling),!v)return!1;for(var N=t.doc.splitLines(Lg(t,v,M,g,_)),W=Ti(t.doc,J(g,0),J(_,wt(t.doc,_).text.length));N.length>1&&W.length>1;)if(kt(N)==kt(W))N.pop(),W.pop(),_--;else if(N[0]==W[0])N.shift(),W.shift(),g++;else break;for(var E=0,B=0,V=N[0],nt=W[0],ct=Math.min(V.length,nt.length);E<ct&&V.charCodeAt(E)==nt.charCodeAt(E);)++E;for(var dt=kt(N),ut=kt(W),bt=Math.min(dt.length-(N.length==1?E:0),ut.length-(W.length==1?E:0));B<bt&&dt.charCodeAt(dt.length-B-1)==ut.charCodeAt(ut.length-B-1);)++B;if(N.length==1&&W.length==1&&g==o.line)for(;E&&E>o.ch&&dt.charCodeAt(dt.length-B-1)==ut.charCodeAt(ut.length-B-1);)E--,B++;N[N.length-1]=dt.slice(0,dt.length-B).replace(/^\u200b+/,""),N[0]=N[0].slice(E).replace(/\u200b+$/,"");var Nt=J(g,E),Mt=J(_,W.length?kt(W).length-B:0);if(N.length>1||N[0]||k(Nt,Mt))return rr(t.doc,N,Nt,Mt,"+input"),!0},ee.prototype.ensurePolled=function(){this.forceCompositionEnd()},ee.prototype.reset=function(){this.forceCompositionEnd()},ee.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},ee.prototype.readFromDOMSoon=function(){var t=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing)if(t.composing.done)t.composing=null;else return;t.updateFromDOM()},80))},ee.prototype.updateFromDOM=function(){var t=this;(this.cm.isReadOnly()||!this.pollContent())&&qe(this.cm,function(){return je(t.cm)})},ee.prototype.setUneditable=function(t){t.contentEditable="false"},ee.prototype.onKeyPress=function(t){t.charCode==0||this.composing||(t.preventDefault(),this.cm.isReadOnly()||Se(this.cm,Fa)(this.cm,String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),0))},ee.prototype.readOnlyChanged=function(t){this.div.contentEditable=String(t!="nocursor")},ee.prototype.onContextMenu=function(){},ee.prototype.resetPosition=function(){},ee.prototype.needsContentAttribute=!0;function Fu(t,r){var a=ra(t,r.line);if(!a||a.hidden)return null;var o=wt(t.doc,r.line),c=uc(a,o,r.line),d=Yt(o,t.doc.direction),g="left";if(d){var v=pt(d,r.ch);g=v%2?"right":"left"}var x=dc(c.map,r.ch,g);return x.offset=x.collapse=="right"?x.end:x.start,x}function Mg(t){for(var r=t;r;r=r.parentNode)if(/CodeMirror-gutter-wrapper/.test(r.className))return!0;return!1}function cr(t,r){return r&&(t.bad=!0),t}function Lg(t,r,a,o,c){var d="",g=!1,v=t.doc.lineSeparator(),x=!1;function _(E){return function(B){return B.id==E}}function M(){g&&(d+=v,x&&(d+=v),g=x=!1)}function N(E){E&&(M(),d+=E)}function W(E){if(E.nodeType==1){var B=E.getAttribute("cm-text");if(B){N(B);return}var V=E.getAttribute("cm-marker"),nt;if(V){var ct=t.findMarks(J(o,0),J(c+1,0),_(+V));ct.length&&(nt=ct[0].find(0))&&N(Ti(t.doc,nt.from,nt.to).join(v));return}if(E.getAttribute("contenteditable")=="false")return;var dt=/^(pre|div|p|li|table|br)$/i.test(E.nodeName);if(!/^br$/i.test(E.nodeName)&&E.textContent.length==0)return;dt&&M();for(var ut=0;ut<E.childNodes.length;ut++)W(E.childNodes[ut]);/^(pre|p)$/i.test(E.nodeName)&&(x=!0),dt&&(g=!0)}else E.nodeType==3&&N(E.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;W(r),r!=a;)r=r.nextSibling,x=!1;return d}function ao(t,r,a){var o;if(r==t.display.lineDiv){if(o=t.display.lineDiv.childNodes[a],!o)return cr(t.clipPos(J(t.display.viewTo-1)),!0);r=null,a=0}else for(o=r;;o=o.parentNode){if(!o||o==t.display.lineDiv)return null;if(o.parentNode&&o.parentNode==t.display.lineDiv)break}for(var c=0;c<t.display.view.length;c++){var d=t.display.view[c];if(d.node==o)return Ng(d,r,a)}}function Ng(t,r,a){var o=t.text.firstChild,c=!1;if(!r||!Rt(o,r))return cr(J(Zt(t.line),0),!0);if(r==o&&(c=!0,r=o.childNodes[a],a=0,!r)){var d=t.rest?kt(t.rest):t.line;return cr(J(Zt(d),d.text.length),c)}var g=r.nodeType==3?r:null,v=r;for(!g&&r.childNodes.length==1&&r.firstChild.nodeType==3&&(g=r.firstChild,a&&(a=g.nodeValue.length));v.parentNode!=o;)v=v.parentNode;var x=t.measure,_=x.maps;function M(nt,ct,dt){for(var ut=-1;ut<(_?_.length:0);ut++)for(var bt=ut<0?x.map:_[ut],Nt=0;Nt<bt.length;Nt+=3){var Mt=bt[Nt+2];if(Mt==nt||Mt==ct){var Bt=Zt(ut<0?t.line:t.rest[ut]),ne=bt[Nt]+dt;return(dt<0||Mt!=nt)&&(ne=bt[Nt+(dt?1:0)]),J(Bt,ne)}}}var N=M(g,v,a);if(N)return cr(N,c);for(var W=v.nextSibling,E=g?g.nodeValue.length-a:0;W;W=W.nextSibling){if(N=M(W,W.firstChild,0),N)return cr(J(N.line,N.ch-E),c);E+=W.textContent.length}for(var B=v.previousSibling,V=a;B;B=B.previousSibling){if(N=M(B,B.firstChild,-1),N)return cr(J(N.line,N.ch+V),c);V+=B.textContent.length}}var pe=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new Et,this.hasSelection=!1,this.composing=null};pe.prototype.init=function(t){var r=this,a=this,o=this.cm;this.createField(t);var c=this.textarea;t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),A&&(c.style.width="0px"),Ct(c,"input",function(){p&&m>=9&&r.hasSelection&&(r.hasSelection=null),a.poll()}),Ct(c,"paste",function(g){ue(o,g)||Du(g,o)||(o.state.pasteIncoming=+new Date,a.fastPoll())});function d(g){if(!ue(o,g)){if(o.somethingSelected())oo({lineWise:!1,text:o.getSelections()});else if(o.options.lineWiseCopyCut){var v=Ou(o);oo({lineWise:!0,text:v.text}),g.type=="cut"?o.setSelections(v.ranges,null,Wt):(a.prevInput="",c.value=v.text.join(`
`),lt(c))}else return;g.type=="cut"&&(o.state.cutIncoming=+new Date)}}Ct(c,"cut",d),Ct(c,"copy",d),Ct(t.scroller,"paste",function(g){if(!(ji(t,g)||ue(o,g))){if(!c.dispatchEvent){o.state.pasteIncoming=+new Date,a.focus();return}var v=new Event("paste");v.clipboardData=g.clipboardData,c.dispatchEvent(v)}}),Ct(t.lineSpace,"selectstart",function(g){ji(t,g)||z(g)}),Ct(c,"compositionstart",function(){var g=o.getCursor("from");a.composing&&a.composing.range.clear(),a.composing={start:g,range:o.markText(g,o.getCursor("to"),{className:"CodeMirror-composing"})}}),Ct(c,"compositionend",function(){a.composing&&(a.poll(),a.composing.range.clear(),a.composing=null)})},pe.prototype.createField=function(t){this.wrapper=Iu(),this.textarea=this.wrapper.firstChild},pe.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},pe.prototype.prepareSelection=function(){var t=this.cm,r=t.display,a=t.doc,o=Sc(t);if(t.options.moveInputWithCursor){var c=wi(t,a.sel.primary().head,"div"),d=r.wrapper.getBoundingClientRect(),g=r.lineDiv.getBoundingClientRect();o.teTop=Math.max(0,Math.min(r.wrapper.clientHeight-10,c.top+g.top-d.top)),o.teLeft=Math.max(0,Math.min(r.wrapper.clientWidth-10,c.left+g.left-d.left))}return o},pe.prototype.showSelection=function(t){var r=this.cm,a=r.display;R(a.cursorDiv,t.cursors),R(a.selectionDiv,t.selection),t.teTop!=null&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},pe.prototype.reset=function(t){if(!(this.contextMenuPending||this.composing)){var r=this.cm;if(r.somethingSelected()){this.prevInput="";var a=r.getSelection();this.textarea.value=a,r.state.focused&&lt(this.textarea),p&&m>=9&&(this.hasSelection=a)}else t||(this.prevInput=this.textarea.value="",p&&m>=9&&(this.hasSelection=null))}},pe.prototype.getField=function(){return this.textarea},pe.prototype.supportsTouch=function(){return!1},pe.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!X||jt()!=this.textarea))try{this.textarea.focus()}catch{}},pe.prototype.blur=function(){this.textarea.blur()},pe.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},pe.prototype.receivedFocus=function(){this.slowPoll()},pe.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},pe.prototype.fastPoll=function(){var t=!1,r=this;r.pollingFast=!0;function a(){var o=r.poll();!o&&!t?(t=!0,r.polling.set(60,a)):(r.pollingFast=!1,r.slowPoll())}r.polling.set(20,a)},pe.prototype.poll=function(){var t=this,r=this.cm,a=this.textarea,o=this.prevInput;if(this.contextMenuPending||!r.state.focused||Ps(a)&&!o&&!this.composing||r.isReadOnly()||r.options.disableInput||r.state.keySeq)return!1;var c=a.value;if(c==o&&!r.somethingSelected())return!1;if(p&&m>=9&&this.hasSelection===c||G&&/[\uf700-\uf7ff]/.test(c))return r.display.input.reset(),!1;if(r.doc.sel==r.display.selForContextMenu){var d=c.charCodeAt(0);if(d==8203&&!o&&(o="​"),d==8666)return this.reset(),this.cm.execCommand("undo")}for(var g=0,v=Math.min(o.length,c.length);g<v&&o.charCodeAt(g)==c.charCodeAt(g);)++g;return qe(r,function(){Fa(r,c.slice(g),o.length-g,null,t.composing?"*compose":null),c.length>1e3||c.indexOf(`
`)>-1?a.value=t.prevInput="":t.prevInput=c,t.composing&&(t.composing.range.clear(),t.composing.range=r.markText(t.composing.start,r.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},pe.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},pe.prototype.onKeyPress=function(){p&&m>=9&&(this.hasSelection=null),this.fastPoll()},pe.prototype.onContextMenu=function(t){var r=this,a=r.cm,o=a.display,c=r.textarea;r.contextMenuPending&&r.contextMenuPending();var d=Sn(a,t),g=o.scroller.scrollTop;if(!d||T)return;var v=a.options.resetSelectionOnContextMenu;v&&a.doc.sel.contains(d)==-1&&Se(a,Re)(a.doc,cn(d),Wt);var x=c.style.cssText,_=r.wrapper.style.cssText,M=r.wrapper.offsetParent.getBoundingClientRect();r.wrapper.style.cssText="position: static",c.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(t.clientY-M.top-5)+"px; left: "+(t.clientX-M.left-5)+`px;
      z-index: 1000; background: `+(p?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var N;b&&(N=window.scrollY),o.input.focus(),b&&window.scrollTo(null,N),o.input.reset(),a.somethingSelected()||(c.value=r.prevInput=" "),r.contextMenuPending=E,o.selForContextMenu=a.doc.sel,clearTimeout(o.detectingSelectAll);function W(){if(c.selectionStart!=null){var V=a.somethingSelected(),nt="​"+(V?c.value:"");c.value="⇚",c.value=nt,r.prevInput=V?"":"​",c.selectionStart=1,c.selectionEnd=nt.length,o.selForContextMenu=a.doc.sel}}function E(){if(r.contextMenuPending==E&&(r.contextMenuPending=!1,r.wrapper.style.cssText=_,c.style.cssText=x,p&&m<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=g),c.selectionStart!=null)){(!p||p&&m<9)&&W();var V=0,nt=function(){o.selForContextMenu==a.doc.sel&&c.selectionStart==0&&c.selectionEnd>0&&r.prevInput=="​"?Se(a,tu)(a):V++<10?o.detectingSelectAll=setTimeout(nt,500):(o.selForContextMenu=null,o.input.reset())};o.detectingSelectAll=setTimeout(nt,200)}}if(p&&m>=9&&W(),ht){_t(t);var B=function(){Ee(window,"mouseup",B),setTimeout(E,20)};Ct(window,"mouseup",B)}else setTimeout(E,50)},pe.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled=t=="nocursor",this.textarea.readOnly=!!t},pe.prototype.setUneditable=function(){},pe.prototype.needsContentAttribute=!1;function Dg(t,r){if(r=r?It(r):{},r.value=t.value,!r.tabindex&&t.tabIndex&&(r.tabindex=t.tabIndex),!r.placeholder&&t.placeholder&&(r.placeholder=t.placeholder),r.autofocus==null){var a=jt();r.autofocus=a==t||t.getAttribute("autofocus")!=null&&a==document.body}function o(){t.value=v.getValue()}var c;if(t.form&&(Ct(t.form,"submit",o),!r.leaveSubmitMethodAlone)){var d=t.form;c=d.submit;try{var g=d.submit=function(){o(),d.submit=c,d.submit(),d.submit=g}}catch{}}r.finishInit=function(x){x.save=o,x.getTextArea=function(){return t},x.toTextArea=function(){x.toTextArea=isNaN,o(),t.parentNode.removeChild(x.getWrapperElement()),t.style.display="",t.form&&(Ee(t.form,"submit",o),!r.leaveSubmitMethodAlone&&typeof t.form.submit=="function"&&(t.form.submit=c))}},t.style.display="none";var v=se(function(x){return t.parentNode.insertBefore(x,t.nextSibling)},r);return v}function Pg(t){t.off=Ee,t.on=Ct,t.wheelEventPixels=Wp,t.Doc=Ve,t.splitLines=wr,t.countColumn=zt,t.findColumn=j,t.isWordChar=vi,t.Pass=Ft,t.signal=Dt,t.Line=Kn,t.changeEnd=un,t.scrollbarModel=Dc,t.Pos=J,t.cmpPos=k,t.modes=fi,t.mimeModes=ri,t.resolveMode=jn,t.getMode=Vn,t.modeExtensions=bi,t.extendMode=xi,t.copyState=si,t.startState=Cr,t.innerMode=Sr,t.commands=qr,t.keyMap=Yi,t.keyName=mu,t.isModifierKey=pu,t.lookupKey=or,t.normalizeKeyMap=og,t.StringStream=fe,t.SharedTextMarker=Kr,t.TextMarker=hn,t.LineWidget=Yr,t.e_preventDefault=z,t.e_stopPropagation=ot,t.e_stop=_t,t.addClass=$,t.contains=Rt,t.rmClass=tt,t.keyNames=dn}wg(se),Tg(se);var Og="iter insert remove copy getEditor constructor".split(" ");for(var lo in Ve.prototype)Ve.prototype.hasOwnProperty(lo)&&mt(Og,lo)<0&&(se.prototype[lo]=function(t){return function(){return t.apply(this.doc,arguments)}}(Ve.prototype[lo]));return li(Ve),se.inputStyles={textarea:pe,contenteditable:ee},se.defineMode=function(t){!se.defaults.mode&&t!="null"&&(se.defaults.mode=t),As.apply(this,arguments)},se.defineMIME=Bi,se.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),se.defineMIME("text/plain","null"),se.defineExtension=function(t,r){se.prototype[t]=r},se.defineDocExtension=function(t,r){Ve.prototype[t]=r},se.fromTextArea=Dg,Pg(se),se.version="5.65.2",se})}(To)),To.exports}var sm=Rh();const Ls=nm(sm);var Gu={exports:{}},qu;function om(){return qu||(qu=1,function(n,e){(function(i){i(Rh())})(function(i){i.defineMode("javascript",function(s,l){var u=s.indentUnit,f=l.statementIndent,h=l.jsonld,p=l.json||h,m=l.trackScope!==!1,b=l.typescript,w=l.wordCharacters||/[\w$\xa1-\uffff]/,S=function(){function k(Fe){return{type:Fe,style:"keyword"}}var D=k("keyword a"),U=k("keyword b"),et=k("keyword c"),Ot=k("keyword d"),Xt=k("operator"),vt={type:"atom",style:"atom"};return{if:k("if"),while:D,with:D,else:U,do:U,try:U,finally:U,return:Ot,break:Ot,continue:Ot,new:k("new"),delete:et,void:et,throw:et,debugger:k("debugger"),var:k("var"),const:k("var"),let:k("var"),function:k("function"),catch:k("catch"),for:k("for"),switch:k("switch"),case:k("case"),default:k("default"),in:Xt,typeof:Xt,instanceof:Xt,true:vt,false:vt,null:vt,undefined:vt,NaN:vt,Infinity:vt,this:k("this"),class:k("class"),super:k("atom"),yield:et,export:k("export"),import:k("import"),extends:et,await:et}}(),T=/[+\-*&%=<>!?|~^@]/,O=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function L(k){for(var D=!1,U,et=!1;(U=k.next())!=null;){if(!D){if(U=="/"&&!et)return;U=="["?et=!0:et&&U=="]"&&(et=!1)}D=!D&&U=="\\"}}var P,A;function H(k,D,U){return P=k,A=U,D}function X(k,D){var U=k.next();if(U=='"'||U=="'")return D.tokenize=G(U),D.tokenize(k,D);if(U=="."&&k.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return H("number","number");if(U=="."&&k.match(".."))return H("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(U))return H(U);if(U=="="&&k.eat(">"))return H("=>","operator");if(U=="0"&&k.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return H("number","number");if(/\d/.test(U))return k.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),H("number","number");if(U=="/")return k.eat("*")?(D.tokenize=K,K(k,D)):k.eat("/")?(k.skipToEnd(),H("comment","comment")):J(k,D,1)?(L(k),k.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),H("regexp","string-2")):(k.eat("="),H("operator","operator",k.current()));if(U=="`")return D.tokenize=Y,Y(k,D);if(U=="#"&&k.peek()=="!")return k.skipToEnd(),H("meta","meta");if(U=="#"&&k.eatWhile(w))return H("variable","property");if(U=="<"&&k.match("!--")||U=="-"&&k.match("->")&&!/\S/.test(k.string.slice(0,k.start)))return k.skipToEnd(),H("comment","comment");if(T.test(U))return(U!=">"||!D.lexical||D.lexical.type!=">")&&(k.eat("=")?(U=="!"||U=="=")&&k.eat("="):/[<>*+\-|&?]/.test(U)&&(k.eat(U),U==">"&&k.eat(U))),U=="?"&&k.eat(".")?H("."):H("operator","operator",k.current());if(w.test(U)){k.eatWhile(w);var et=k.current();if(D.lastType!="."){if(S.propertyIsEnumerable(et)){var Ot=S[et];return H(Ot.type,Ot.style,et)}if(et=="async"&&k.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return H("async","keyword",et)}return H("variable","variable",et)}}function G(k){return function(D,U){var et=!1,Ot;if(h&&D.peek()=="@"&&D.match(O))return U.tokenize=X,H("jsonld-keyword","meta");for(;(Ot=D.next())!=null&&!(Ot==k&&!et);)et=!et&&Ot=="\\";return et||(U.tokenize=X),H("string","string")}}function K(k,D){for(var U=!1,et;et=k.next();){if(et=="/"&&U){D.tokenize=X;break}U=et=="*"}return H("comment","comment")}function Y(k,D){for(var U=!1,et;(et=k.next())!=null;){if(!U&&(et=="`"||et=="$"&&k.eat("{"))){D.tokenize=X;break}U=!U&&et=="\\"}return H("quasi","string-2",k.current())}var Q="([{}])";function q(k,D){D.fatArrowAt&&(D.fatArrowAt=null);var U=k.string.indexOf("=>",k.start);if(!(U<0)){if(b){var et=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(k.string.slice(k.start,U));et&&(U=et.index)}for(var Ot=0,Xt=!1,vt=U-1;vt>=0;--vt){var Fe=k.string.charAt(vt),oi=Q.indexOf(Fe);if(oi>=0&&oi<3){if(!Ot){++vt;break}if(--Ot==0){Fe=="("&&(Xt=!0);break}}else if(oi>=3&&oi<6)++Ot;else if(w.test(Fe))Xt=!0;else if(/["'\/`]/.test(Fe))for(;;--vt){if(vt==0)return;var Yn=k.string.charAt(vt-1);if(Yn==Fe&&k.string.charAt(vt-2)!="\\"){vt--;break}}else if(Xt&&!Ot){++vt;break}}Xt&&!Ot&&(D.fatArrowAt=vt)}}var ht={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function it(k,D,U,et,Ot,Xt){this.indented=k,this.column=D,this.type=U,this.prev=Ot,this.info=Xt,et!=null&&(this.align=et)}function tt(k,D){if(!m)return!1;for(var U=k.localVars;U;U=U.next)if(U.name==D)return!0;for(var et=k.context;et;et=et.prev)for(var U=et.vars;U;U=U.next)if(U.name==D)return!0}function st(k,D,U,et,Ot){var Xt=k.cc;for(R.state=k,R.stream=Ot,R.marked=null,R.cc=Xt,R.style=D,k.lexical.hasOwnProperty("align")||(k.lexical.align=!0);;){var vt=Xt.length?Xt.pop():p?$t:Wt;if(vt(U,et)){for(;Xt.length&&Xt[Xt.length-1].lex;)Xt.pop()();return R.marked?R.marked:U=="variable"&&tt(k,et)?"variable-2":D}}}var R={state:null,column:null,marked:null,cc:null};function I(){for(var k=arguments.length-1;k>=0;k--)R.cc.push(arguments[k])}function C(){return I.apply(null,arguments),!0}function ft(k,D){for(var U=D;U;U=U.next)if(U.name==k)return!0;return!1}function Rt(k){var D=R.state;if(R.marked="def",!!m){if(D.context){if(D.lexical.info=="var"&&D.context&&D.context.block){var U=jt(k,D.context);if(U!=null){D.context=U;return}}else if(!ft(k,D.localVars)){D.localVars=new lt(k,D.localVars);return}}l.globalVars&&!ft(k,D.globalVars)&&(D.globalVars=new lt(k,D.globalVars))}}function jt(k,D){if(D)if(D.block){var U=jt(k,D.prev);return U?U==D.prev?D:new gt(U,D.vars,!0):null}else return ft(k,D.vars)?D:new gt(D.prev,new lt(k,D.vars),!1);else return null}function $(k){return k=="public"||k=="private"||k=="protected"||k=="abstract"||k=="readonly"}function gt(k,D,U){this.prev=k,this.vars=D,this.block=U}function lt(k,D){this.name=k,this.next=D}var Tt=new lt("this",new lt("arguments",null));function It(){R.state.context=new gt(R.state.context,R.state.localVars,!1),R.state.localVars=Tt}function zt(){R.state.context=new gt(R.state.context,R.state.localVars,!0),R.state.localVars=null}It.lex=zt.lex=!0;function Et(){R.state.localVars=R.state.context.vars,R.state.context=R.state.context.prev}Et.lex=!0;function mt(k,D){var U=function(){var et=R.state,Ot=et.indented;if(et.lexical.type=="stat")Ot=et.lexical.indented;else for(var Xt=et.lexical;Xt&&Xt.type==")"&&Xt.align;Xt=Xt.prev)Ot=Xt.indented;et.lexical=new it(Ot,R.stream.column(),k,null,et.lexical,D)};return U.lex=!0,U}function St(){var k=R.state;k.lexical.prev&&(k.lexical.type==")"&&(k.indented=k.lexical.indented),k.lexical=k.lexical.prev)}St.lex=!0;function Ft(k){function D(U){return U==k?C():k==";"||U=="}"||U==")"||U=="]"?I():C(D)}return D}function Wt(k,D){return k=="var"?C(mt("vardef",D),ci,Ft(";"),St):k=="keyword a"?C(mt("form"),xt,Wt,St):k=="keyword b"?C(mt("form"),Wt,St):k=="keyword d"?R.stream.match(/^\s*$/,!1)?C():C(mt("stat"),kt,Ft(";"),St):k=="debugger"?C(Ft(";")):k=="{"?C(mt("}"),zt,Yt,St,Et):k==";"?C():k=="if"?(R.state.lexical.info=="else"&&R.state.cc[R.state.cc.length-1]==St&&R.state.cc.pop()(),C(mt("form"),xt,Wt,St,Ps)):k=="function"?C(fi):k=="for"?C(mt("form"),zt,Os,Wt,Et,St):k=="class"||b&&D=="interface"?(R.marked="keyword",C(mt("form",k=="class"?k:D),Vn,St)):k=="variable"?b&&D=="declare"?(R.marked="keyword",C(Wt)):b&&(D=="module"||D=="enum"||D=="type")&&R.stream.match(/^\s*\w/,!1)?(R.marked="keyword",D=="enum"?C(Mi):D=="type"?C(As,Ft("operator"),Dt,Ft(";")):C(mt("form"),_e,Ft("{"),mt("}"),Yt,St,St)):b&&D=="namespace"?(R.marked="keyword",C(mt("form"),$t,Wt,St)):b&&D=="abstract"?(R.marked="keyword",C(Wt)):C(mt("stat"),Wi):k=="switch"?C(mt("form"),xt,Ft("{"),mt("}","switch"),zt,Yt,St,St,Et):k=="case"?C($t,Ft(":")):k=="default"?C(Ft(":")):k=="catch"?C(mt("form"),It,ii,Wt,St,Et):k=="export"?C(mt("stat"),Sr,St):k=="import"?C(mt("stat"),fe,St):k=="async"?C(Wt):D=="@"?C($t,Wt):I(mt("stat"),$t,Ft(";"),St)}function ii(k){if(k=="(")return C(Bi,Ft(")"))}function $t(k,D){return Vt(k,D,!1)}function j(k,D){return Vt(k,D,!0)}function xt(k){return k!="("?I():C(mt(")"),kt,Ft(")"),St)}function Vt(k,D,U){if(R.state.fatArrowAt==R.stream.start){var et=U?vi:nn;if(k=="(")return C(It,mt(")"),pt(Bi,")"),St,Ft("=>"),et,Et);if(k=="variable")return I(It,_e,Ft("=>"),et,Et)}var Ot=U?Lt:Pt;return ht.hasOwnProperty(k)?C(Ot):k=="function"?C(fi,Ot):k=="class"||b&&D=="interface"?(R.marked="keyword",C(mt("form"),jn,St)):k=="keyword c"||k=="async"?C(U?j:$t):k=="("?C(mt(")"),kt,Ft(")"),St,Ot):k=="operator"||k=="spread"?C(U?j:$t):k=="["?C(mt("]"),Zt,St,Ot):k=="{"?re(F,"}",null,Ot):k=="quasi"?I(me,Ot):k=="new"?C($e(U)):C()}function kt(k){return k.match(/[;\}\)\],]/)?I():I($t)}function Pt(k,D){return k==","?C(kt):Lt(k,D,!1)}function Lt(k,D,U){var et=U==!1?Pt:Lt,Ot=U==!1?$t:j;if(k=="=>")return C(It,U?vi:nn,Et);if(k=="operator")return/\+\+|--/.test(D)||b&&D=="!"?C(et):b&&D=="<"&&R.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?C(mt(">"),pt(Dt,">"),St,et):D=="?"?C($t,Ft(":"),Ot):C(Ot);if(k=="quasi")return I(me,et);if(k!=";"){if(k=="(")return re(j,")","call",et);if(k==".")return C(Hi,et);if(k=="[")return C(mt("]"),kt,Ft("]"),St,et);if(b&&D=="as")return R.marked="keyword",C(Dt,et);if(k=="regexp")return R.state.lastType=R.marked="operator",R.stream.backUp(R.stream.pos-R.stream.start-1),C(Ot)}}function me(k,D){return k!="quasi"?I():D.slice(D.length-2)!="${"?C(me):C(kt,Ae)}function Ae(k){if(k=="}")return R.marked="string-2",R.state.tokenize=Y,C(me)}function nn(k){return q(R.stream,R.state),I(k=="{"?Wt:$t)}function vi(k){return q(R.stream,R.state),I(k=="{"?Wt:j)}function $e(k){return function(D){return D=="."?C(k?Ri:yi):D=="variable"&&b?C(_t,k?Lt:Pt):I(k?j:$t)}}function yi(k,D){if(D=="target")return R.marked="keyword",C(Pt)}function Ri(k,D){if(D=="target")return R.marked="keyword",C(Lt)}function Wi(k){return k==":"?C(St,Wt):I(Pt,Ft(";"),St)}function Hi(k){if(k=="variable")return R.marked="property",C()}function F(k,D){if(k=="async")return R.marked="property",C(F);if(k=="variable"||R.style=="keyword"){if(R.marked="property",D=="get"||D=="set")return C(Z);var U;return b&&R.state.fatArrowAt==R.stream.start&&(U=R.stream.match(/^\s*:\s*/,!1))&&(R.state.fatArrowAt=R.stream.pos+U[0].length),C(at)}else{if(k=="number"||k=="string")return R.marked=h?"property":R.style+" property",C(at);if(k=="jsonld-keyword")return C(at);if(b&&$(D))return R.marked="keyword",C(F);if(k=="[")return C($t,Ie,Ft("]"),at);if(k=="spread")return C(j,at);if(D=="*")return R.marked="keyword",C(F);if(k==":")return I(at)}}function Z(k){return k!="variable"?I(at):(R.marked="property",C(fi))}function at(k){if(k==":")return C(j);if(k=="(")return I(fi)}function pt(k,D,U){function et(Ot,Xt){if(U?U.indexOf(Ot)>-1:Ot==","){var vt=R.state.lexical;return vt.info=="call"&&(vt.pos=(vt.pos||0)+1),C(function(Fe,oi){return Fe==D||oi==D?I():I(k)},et)}return Ot==D||Xt==D?C():U&&U.indexOf(";")>-1?I(k):C(Ft(D))}return function(Ot,Xt){return Ot==D||Xt==D?C():I(k,et)}}function re(k,D,U){for(var et=3;et<arguments.length;et++)R.cc.push(arguments[et]);return C(mt(D,U),pt(k,D),St)}function Yt(k){return k=="}"?C():I(Wt,Yt)}function Ie(k,D){if(b){if(k==":")return C(Dt);if(D=="?")return C(Ie)}}function Ct(k,D){if(b&&(k==":"||D=="in"))return C(Dt)}function rn(k){if(b&&k==":")return R.stream.match(/^\s*\w+\s+is\b/,!1)?C($t,Ee,Dt):C(Dt)}function Ee(k,D){if(D=="is")return R.marked="keyword",C()}function Dt(k,D){if(D=="keyof"||D=="typeof"||D=="infer"||D=="readonly")return R.marked="keyword",C(D=="typeof"?j:Dt);if(k=="variable"||D=="void")return R.marked="type",C(yt);if(D=="|"||D=="&")return C(Dt);if(k=="string"||k=="number"||k=="atom")return C(yt);if(k=="[")return C(mt("]"),pt(Dt,"]",","),St,yt);if(k=="{")return C(mt("}"),zi,St,yt);if(k=="(")return C(pt(ot,")"),ue,yt);if(k=="<")return C(pt(Dt,">"),Dt);if(k=="quasi")return I(li,yt)}function ue(k){if(k=="=>")return C(Dt)}function zi(k){return k.match(/[\}\)\]]/)?C():k==","||k==";"?C(zi):I(xe,zi)}function xe(k,D){if(k=="variable"||R.style=="keyword")return R.marked="property",C(xe);if(D=="?"||k=="number"||k=="string")return C(xe);if(k==":")return C(Dt);if(k=="[")return C(Ft("variable"),Ct,Ft("]"),xe);if(k=="(")return I(ri,xe);if(!k.match(/[;\}\)\],]/))return C()}function li(k,D){return k!="quasi"?I():D.slice(D.length-2)!="${"?C(li):C(Dt,z)}function z(k){if(k=="}")return R.marked="string-2",R.state.tokenize=Y,C(li)}function ot(k,D){return k=="variable"&&R.stream.match(/^\s*[?:]/,!1)||D=="?"?C(ot):k==":"?C(Dt):k=="spread"?C(ot):I(Dt)}function yt(k,D){if(D=="<")return C(mt(">"),pt(Dt,">"),St,yt);if(D=="|"||k=="."||D=="&")return C(Dt);if(k=="[")return C(Dt,Ft("]"),yt);if(D=="extends"||D=="implements")return R.marked="keyword",C(Dt);if(D=="?")return C(Dt,Ft(":"),Dt)}function _t(k,D){if(D=="<")return C(mt(">"),pt(Dt,">"),St,yt)}function Kt(){return I(Dt,te)}function te(k,D){if(D=="=")return C(Dt)}function ci(k,D){return D=="enum"?(R.marked="keyword",C(Mi)):I(_e,Ie,ni,wr)}function _e(k,D){if(b&&$(D))return R.marked="keyword",C(_e);if(k=="variable")return Rt(D),C();if(k=="spread")return C(_e);if(k=="[")return re(Ne,"]");if(k=="{")return re(ui,"}")}function ui(k,D){return k=="variable"&&!R.stream.match(/^\s*:/,!1)?(Rt(D),C(ni)):(k=="variable"&&(R.marked="property"),k=="spread"?C(_e):k=="}"?I():k=="["?C($t,Ft("]"),Ft(":"),ui):C(Ft(":"),_e,ni))}function Ne(){return I(_e,ni)}function ni(k,D){if(D=="=")return C(j)}function wr(k){if(k==",")return C(ci)}function Ps(k,D){if(k=="keyword b"&&D=="else")return C(mt("form","else"),Wt,St)}function Os(k,D){if(D=="await")return C(Os);if(k=="(")return C(mt(")"),kr,St)}function kr(k){return k=="var"?C(ci,sn):k=="variable"?C(sn):I(sn)}function sn(k,D){return k==")"?C():k==";"?C(sn):D=="in"||D=="of"?(R.marked="keyword",C($t,sn)):I($t,sn)}function fi(k,D){if(D=="*")return R.marked="keyword",C(fi);if(k=="variable")return Rt(D),C(fi);if(k=="(")return C(It,mt(")"),pt(Bi,")"),St,rn,Wt,Et);if(b&&D=="<")return C(mt(">"),pt(Kt,">"),St,fi)}function ri(k,D){if(D=="*")return R.marked="keyword",C(ri);if(k=="variable")return Rt(D),C(ri);if(k=="(")return C(It,mt(")"),pt(Bi,")"),St,rn,Et);if(b&&D=="<")return C(mt(">"),pt(Kt,">"),St,ri)}function As(k,D){if(k=="keyword"||k=="variable")return R.marked="type",C(As);if(D=="<")return C(mt(">"),pt(Kt,">"),St)}function Bi(k,D){return D=="@"&&C($t,Bi),k=="spread"?C(Bi):b&&$(D)?(R.marked="keyword",C(Bi)):b&&k=="this"?C(Ie,ni):I(_e,Ie,ni)}function jn(k,D){return k=="variable"?Vn(k,D):bi(k,D)}function Vn(k,D){if(k=="variable")return Rt(D),C(bi)}function bi(k,D){if(D=="<")return C(mt(">"),pt(Kt,">"),St,bi);if(D=="extends"||D=="implements"||b&&k==",")return D=="implements"&&(R.marked="keyword"),C(b?Dt:$t,bi);if(k=="{")return C(mt("}"),xi,St)}function xi(k,D){if(k=="async"||k=="variable"&&(D=="static"||D=="get"||D=="set"||b&&$(D))&&R.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return R.marked="keyword",C(xi);if(k=="variable"||R.style=="keyword")return R.marked="property",C(si,xi);if(k=="number"||k=="string")return C(si,xi);if(k=="[")return C($t,Ie,Ft("]"),si,xi);if(D=="*")return R.marked="keyword",C(xi);if(b&&k=="(")return I(ri,xi);if(k==";"||k==",")return C(xi);if(k=="}")return C();if(D=="@")return C($t,xi)}function si(k,D){if(D=="!"||D=="?")return C(si);if(k==":")return C(Dt,ni);if(D=="=")return C(j);var U=R.state.lexical.prev,et=U&&U.info=="interface";return I(et?ri:fi)}function Sr(k,D){return D=="*"?(R.marked="keyword",C(Ge,Ft(";"))):D=="default"?(R.marked="keyword",C($t,Ft(";"))):k=="{"?C(pt(Cr,"}"),Ge,Ft(";")):I(Wt)}function Cr(k,D){if(D=="as")return R.marked="keyword",C(Ft("variable"));if(k=="variable")return I(j,Cr)}function fe(k){return k=="string"?C():k=="("?I($t):k=="."?I(Pt):I(wt,Ti,Ge)}function wt(k,D){return k=="{"?re(wt,"}"):(k=="variable"&&Rt(D),D=="*"&&(R.marked="keyword"),C(Tr))}function Ti(k){if(k==",")return C(wt,Ti)}function Tr(k,D){if(D=="as")return R.marked="keyword",C(wt)}function Ge(k,D){if(D=="from")return R.marked="keyword",C($t)}function Zt(k){return k=="]"?C():I(pt(j,"]"))}function Mi(){return I(mt("form"),_e,Ft("{"),mt("}"),pt(_n,"}"),St,St)}function _n(){return I(_e,ni)}function Mr(k,D){return k.lastType=="operator"||k.lastType==","||T.test(D.charAt(0))||/[,.]/.test(D.charAt(0))}function J(k,D,U){return D.tokenize==X&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(D.lastType)||D.lastType=="quasi"&&/\{\s*$/.test(k.string.slice(0,k.pos-(U||0)))}return{startState:function(k){var D={tokenize:X,lastType:"sof",cc:[],lexical:new it((k||0)-u,0,"block",!1),localVars:l.localVars,context:l.localVars&&new gt(null,null,!1),indented:k||0};return l.globalVars&&typeof l.globalVars=="object"&&(D.globalVars=l.globalVars),D},token:function(k,D){if(k.sol()&&(D.lexical.hasOwnProperty("align")||(D.lexical.align=!1),D.indented=k.indentation(),q(k,D)),D.tokenize!=K&&k.eatSpace())return null;var U=D.tokenize(k,D);return P=="comment"?U:(D.lastType=P=="operator"&&(A=="++"||A=="--")?"incdec":P,st(D,U,P,A,k))},indent:function(k,D){if(k.tokenize==K||k.tokenize==Y)return i.Pass;if(k.tokenize!=X)return 0;var U=D&&D.charAt(0),et=k.lexical,Ot;if(!/^\s*else\b/.test(D))for(var Xt=k.cc.length-1;Xt>=0;--Xt){var vt=k.cc[Xt];if(vt==St)et=et.prev;else if(vt!=Ps&&vt!=Et)break}for(;(et.type=="stat"||et.type=="form")&&(U=="}"||(Ot=k.cc[k.cc.length-1])&&(Ot==Pt||Ot==Lt)&&!/^[,\.=+\-*:?[\(]/.test(D));)et=et.prev;f&&et.type==")"&&et.prev.type=="stat"&&(et=et.prev);var Fe=et.type,oi=U==Fe;return Fe=="vardef"?et.indented+(k.lastType=="operator"||k.lastType==","?et.info.length+1:0):Fe=="form"&&U=="{"?et.indented:Fe=="form"?et.indented+u:Fe=="stat"?et.indented+(Mr(k,D)?f||u:0):et.info=="switch"&&!oi&&l.doubleIndentSwitch!=!1?et.indented+(/^(?:case|default)\b/.test(D)?u:2*u):et.align?et.column+(oi?0:1):et.indented+(oi?0:u)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:p?null:"/*",blockCommentEnd:p?null:"*/",blockCommentContinue:p?null:" * ",lineComment:p?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:p?"json":"javascript",jsonldMode:h,jsonMode:p,expressionAllowed:J,skipExpression:function(k){st(k,"atom","atom","true",new i.StringStream("",2,null))}}}),i.registerHelper("wordChars","javascript",/[\w$]/),i.defineMIME("text/javascript","javascript"),i.defineMIME("text/ecmascript","javascript"),i.defineMIME("application/javascript","javascript"),i.defineMIME("application/x-javascript","javascript"),i.defineMIME("application/ecmascript","javascript"),i.defineMIME("application/json",{name:"javascript",json:!0}),i.defineMIME("application/x-json",{name:"javascript",json:!0}),i.defineMIME("application/manifest+json",{name:"javascript",json:!0}),i.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),i.defineMIME("text/typescript",{name:"javascript",typescript:!0}),i.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),Gu.exports}om();const am=[{label:"1 Minute",value:60},{label:"5 Minutes",value:300},{label:"15 Minutes",value:900},{label:"30 Minutes",value:1800},{label:"1 Hour",value:3600},{label:"3 Hours",value:10800},{label:"6 Hours",value:21600},{label:"12 Hours",value:43200},{label:"1 Day",value:86400},{label:"1 Week",value:604800}],lm=({isDarkMode:n})=>{const[e,i]=rt([]),[s,l]=rt(null),[u,f]=rt(!0),[h,p]=rt(null),m=ei(null),b=ei(null),[w,S]=rt(!1),[T,O]=rt(""),[L,P]=rt(""),[A,H]=rt(!1),[X,G]=rt(null),K=async()=>{try{const $=await At.getTaskList();i($),p(null)}catch($){console.error("Tasks yüklenemedi:",$),p("Failed to load tasks")}finally{f(!1)}},Y=async $=>{try{if(s&&L!==s.script&&!window.confirm("You have unsaved changes. Do you want to discard them?"))return;const gt=await At.getTaskDetail($);l(gt),P(gt.script||""),O(""),S(!1),H(!1)}catch(gt){console.error("Task detayı alınamadı:",gt)}},Q=async($,gt)=>{try{await At.updateTask($,{enabled:gt}),l(lt=>({...lt,enabled:gt,script:L})),i(e.map(lt=>lt.id===$?{...lt,enabled:gt}:lt))}catch(lt){console.error("Task enable/disable edilemedi:",lt),l(Tt=>({...Tt,enabled:!gt,script:L}))}},q=async($,gt)=>{try{const lt=parseInt(gt);await At.updateTask($,{frequency:lt}),l(Tt=>({...Tt,frequency:lt,script:L})),i(e.map(Tt=>Tt.id===$?{...Tt,frequency:lt}:Tt))}catch(lt){console.error("Frequency güncellenemedi:",lt)}},ht=async($,gt)=>{try{await At.updateTask($,{logs:gt}),l(lt=>({...lt,logs:gt,script:L})),i(e.map(lt=>lt.id===$?{...lt,logs:gt}:lt))}catch(lt){console.error("Log ayarı güncellenemedi:",lt),l(Tt=>({...Tt,logs:!gt,script:L}))}};qt(()=>{(async()=>{await Promise.all([K(),jt()])})();const gt=setInterval(jt,3e3);return()=>clearInterval(gt)},[]),qt(()=>{if(s&&m.current){b.current&&b.current.toTextArea(),b.current=Ls.fromTextArea(m.current,{mode:"haxe",theme:n?"monokai":"default",lineNumbers:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0,readOnly:!1,autofocus:!0}),P(s.script||""),b.current.setValue(s.script||"");const $=gt=>{const lt=gt.getValue();P(lt)};return b.current.on("change",$),()=>{b.current&&(b.current.off("change",$),b.current.toTextArea(),b.current=null)}}},[s,n]);const it=$=>$?new Date($).toLocaleString():"Never",tt=async()=>{try{const $=L;l(gt=>({...gt,output:""})),await At.executeScriptStream($,gt=>{l(lt=>({...lt,output:lt.output?lt.output+gt:gt,script:L}))})}catch($){console.error("Script çalıştırılamadı:",$),l(gt=>({...gt,output:`Error: ${$.message}`,script:L}))}},st=async()=>{try{await At.updateTask(s.id,{script:L}),l($=>({...$,script:L,output:"Task saved successfully!"})),i(e.map($=>$.id===s.id?{...$,script:L}:$))}catch($){console.error("Script kaydedilemedi:",$);let gt=$.message;gt.includes("rulescript:")&&(gt=gt.split(`
`)[0].replace("rulescript:","Line ").replace("Unexpected token:","Syntax error:")),l(lt=>({...lt,output:`Error saving task: ${gt}`}))}},R=()=>{O(s.name),S(!0)},I=async()=>{try{await At.updateTask(s.id,{name:T}),l($=>({...$,name:T,script:L})),i(e.map($=>$.id===s.id?{...$,name:T}:$)),S(!1)}catch($){console.error("İsim güncellenemedi:",$)}},C=async()=>{try{const $=await At.createTask("New Task");i([...e,$]),l($)}catch($){console.error("Task oluşturulamadı:",$)}},ft=async($,gt)=>{if(gt.stopPropagation(),!!window.confirm("Are you sure you want to delete this task?"))try{(await At.deleteTask($)).success&&(i(Tt=>Tt.filter(It=>It.id!==$)),(s==null?void 0:s.id)===$&&(l(null),P(""),b.current&&b.current.setValue("")))}catch(lt){console.error("Task silinemedi:",lt),alert("Failed to delete task: "+lt.message)}},Rt=async()=>{if(s)try{H(!0),l($=>({...$,logContent:"",output:$.output})),await At.streamTaskLog(s.id,$=>{l(gt=>({...gt,logContent:(gt.logContent||"")+$}))})}catch($){console.error("Loglar alınamadı:",$),l(gt=>({...gt,logContent:`Error loading logs: ${$.message}`}))}},jt=async()=>{try{const $=await At.getTaskStatus(),gt=$.find(lt=>lt.status===1);if(G(gt||null),i(lt=>lt.map(Tt=>{const It=$.find(zt=>zt.id===Tt.id);return It?{...Tt,lastRun:It.lastRun,status:It.status}:Tt})),s){const lt=$.find(Tt=>Tt.id===s.id);lt&&l(Tt=>({...Tt,lastRun:lt.lastRun,status:lt.status,script:L}))}}catch($){console.error("Task status alınamadı:",$),G(null)}};return y("div",{className:`scheduler ${n?"dark":""}`,children:[y("div",{className:"task-list",children:[y("div",{className:"task-list-header",children:[y("h2",{children:"Tasks"}),y("div",{className:"task-list-actions",children:[y("button",{className:"create-task icon",onClick:C,title:"Create New Task",children:"+"}),y("button",{onClick:K,className:"refresh-button icon",title:"Refresh Tasks",children:"🔄"})]})]}),u?y("div",{className:"loading",children:"Loading tasks..."}):h?y("div",{className:"error",children:h}):y("div",{className:"task-items",children:e.map($=>y("div",{className:`task-item ${(s==null?void 0:s.id)===$.id?"selected":""} ${(X==null?void 0:X.id)===$.id?"running":""}`,onClick:()=>Y($.id),children:[y("div",{className:"task-item-header",children:[y("span",{className:"task-name",children:$.name}),y("div",{className:"task-item-actions",children:[y("label",{className:"task-enabled-toggle",onClick:gt=>gt.stopPropagation(),children:[y("input",{type:"checkbox",checked:$.enabled,onChange:gt=>{gt.stopPropagation(),Q($.id,!$.enabled)}}),y("span",{className:"checkmark"})]}),y("button",{className:"delete-task",onClick:gt=>ft($.id,gt),title:"Delete Task",children:"×"})]})]}),y("div",{className:"task-item-footer",children:y("span",{className:"task-last-run",children:["Last Run: ",it($.lastRun)]})})]},$.id))})]}),y("div",{className:"task-detail",children:s?y(Le,{children:[y("div",{className:"task-header",children:w?y("div",{className:"name-edit",children:[y("input",{type:"text",value:T,onChange:$=>O($.target.value),onKeyDown:$=>{$.key==="Enter"&&I(),$.key==="Escape"&&S(!1)},autoFocus:!0}),y("button",{className:"name-save",onClick:I,children:"✓"}),y("button",{className:"name-cancel",onClick:()=>S(!1),children:"✕"})]}):y("h2",{onClick:R,children:s.name})}),y("div",{className:"script-section",children:[y("div",{className:"script-header",children:[y("h3",{children:"Script"}),y("div",{className:"script-actions",children:[y("button",{className:"script-button try",onClick:tt,children:"Try"}),y("button",{className:"script-button save",onClick:st,children:"Save"}),y("button",{className:"script-button logs",onClick:Rt,children:"Logs"})]})]}),y("div",{className:"editor-container",children:y("textarea",{ref:m})}),s.output&&y("div",{className:"script-output",children:[y("div",{className:"output-header",children:[y("h3",{children:"Output"}),y("button",{className:"close-output",onClick:()=>l($=>({...$,output:null})),children:"×"})]}),y("pre",{className:"output-content",children:s.output})]}),A&&s.logContent&&y("div",{className:"script-output logs",children:[y("div",{className:"output-header",children:[y("h3",{children:"Logs"}),y("button",{className:"close-output",onClick:()=>{H(!1),l($=>({...$,logContent:null}))},children:"×"})]}),y("pre",{className:"output-content",children:s.logContent})]})]}),y("div",{className:"detail-section",children:[y("div",{className:"detail-row",children:[y("span",{children:"Status:"}),y("span",{className:`status-${s.status}`,children:s.enabled?"Enabled":"Disabled"})]}),y("div",{className:"detail-row",children:[y("span",{children:"Created:"}),y("span",{children:it(s.createdAt)})]}),y("div",{className:"detail-row",children:[y("span",{children:"Last Run:"}),y("span",{children:it(s.lastRun)})]}),y("div",{className:"detail-row",children:[y("span",{children:"Frequency:"}),y("select",{className:"frequency-select",value:s.frequency,onChange:$=>q(s.id,$.target.value),children:am.map($=>y("option",{value:$.value,children:$.label},$.value))})]}),y("div",{className:"detail-row",children:[y("span",{children:"Success/Failed:"}),y("span",{children:[s.success,"/",s.failed]})]}),y("div",{className:"detail-row",children:[y("span",{children:"Save Logs:"}),y("label",{className:"task-logs-toggle",children:[y("input",{type:"checkbox",checked:s.logs,onChange:()=>ht(s.id,!s.logs)}),y("span",{className:"checkmark"})]})]})]})]}):y("div",{className:"no-selection",children:"Select a task to view details"})})]})},Zu={tr:{run:"▶ Execute",placeholder:"// Write your HScript code here",executedCode:"Çalıştırılan kod:",result:"Sonuç:"},en:{run:"▶ Run",placeholder:"// Write your HScript code here",executedCode:"Executed code:",result:"Result:"}},cm=({isDarkMode:n,language:e="en"})=>{const[i,s]=rt('sceKernelSendNotificationRequest("Hello World");'),[l,u]=rt(""),f=ei(null),h=ei(null),p=Zu[e]||Zu.en;return qt(()=>{if(!h.current&&f.current){const b=document.createElement("textarea");f.current.appendChild(b),h.current=Ls.fromTextArea(b,{value:i,mode:"haxe",theme:n?"monokai":"default",lineNumbers:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0,placeholder:p.placeholder}),h.current.on("change",w=>{s(w.getValue())}),h.current.setValue(i)}return()=>{h.current&&(h.current.toTextArea(),h.current=null)}},[]),qt(()=>{h.current&&h.current.setOption("theme",n?"monokai":"default")},[n]),y("div",{className:`script-editor ${n?"dark":""}`,children:y("div",{className:"script-content",children:[y("div",{className:"editor-container",ref:f}),y("div",{className:"script-output",children:[y("div",{className:"output-toolbar",children:y("button",{className:"run-btn",onClick:async()=>{u("");try{await At.executeScriptStream(i,b=>{u(w=>w+b)})}catch(b){u("Error: "+b.message)}},children:p.run})}),y("div",{className:"output-content",children:y("pre",{children:typeof l=="string"?l:JSON.stringify(l,null,2)})})]})]})})};function Wh(n,e){for(var i in e)n[i]=e[i];return n}function il(n,e){for(var i in n)if(i!=="__source"&&!(i in e))return!0;for(var s in e)if(s!=="__source"&&n[s]!==e[s])return!0;return!1}function Hh(n,e){var i=e(),s=rt({t:{__:i,u:e}}),l=s[0].t,u=s[1];return Ms(function(){l.__=i,l.u=e,Ba(l)&&u({t:l})},[n,i,e]),qt(function(){return Ba(l)&&u({t:l}),n(function(){Ba(l)&&u({t:l})})},[n]),i}function Ba(n){var e,i,s=n.u,l=n.__;try{var u=s();return!((e=l)===(i=u)&&(e!==0||1/e==1/i)||e!=e&&i!=i)}catch{return!0}}function zh(n){n()}function Bh(n){return n}function Uh(){return[!1,zh]}var $h=Ms;function nl(n,e){this.props=n,this.context=e}function um(n,e){function i(l){var u=this.props.ref,f=u==l.ref;return!f&&u&&(u.call?u(null):u.current=null),e?!e(this.props,l)||!f:il(this.props,l)}function s(l){return this.shouldComponentUpdate=i,tn(n,l)}return s.displayName="Memo("+(n.displayName||n.name)+")",s.prototype.isReactComponent=!0,s.__f=!0,s}(nl.prototype=new Ei).isPureReactComponent=!0,nl.prototype.shouldComponentUpdate=function(n,e){return il(this.props,n)||il(this.state,e)};var Ju=Ut.__b;Ut.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),Ju&&Ju(n)};var fm=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function wl(n){function e(i){var s=Wh({},i);return delete s.ref,n(s,i.ref||null)}return e.$$typeof=fm,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(n.displayName||n.name)+")",e}var Qu=function(n,e){return n==null?null:Qi(Qi(n).map(e))},hm={map:Qu,forEach:Qu,count:function(n){return n?Qi(n).length:0},only:function(n){var e=Qi(n);if(e.length!==1)throw"Children.only";return e[0]},toArray:Qi},dm=Ut.__e;Ut.__e=function(n,e,i,s){if(n.then){for(var l,u=e;u=u.__;)if((l=u.__c)&&l.__c)return e.__e==null&&(e.__e=i.__e,e.__k=i.__k),l.__c(n,e)}dm(n,e,i,s)};var tf=Ut.unmount;function jh(n,e,i){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),n.__c.__H=null),(n=Wh({},n)).__c!=null&&(n.__c.__P===i&&(n.__c.__P=e),n.__c=null),n.__k=n.__k&&n.__k.map(function(s){return jh(s,e,i)})),n}function Vh(n,e,i){return n&&i&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(s){return Vh(s,e,i)}),n.__c&&n.__c.__P===e&&(n.__e&&i.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=i)),n}function Mo(){this.__u=0,this.o=null,this.__b=null}function Yh(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function pm(n){var e,i,s;function l(u){if(e||(e=n()).then(function(f){i=f.default||f},function(f){s=f}),s)throw s;if(!i)throw e;return tn(i,u)}return l.displayName="Lazy",l.__f=!0,l}function os(){this.i=null,this.l=null}Ut.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&32&n.__u&&(n.type=null),tf&&tf(n)},(Mo.prototype=new Ei).__c=function(n,e){var i=e.__c,s=this;s.o==null&&(s.o=[]),s.o.push(i);var l=Yh(s.__v),u=!1,f=function(){u||(u=!0,i.__R=null,l?l(h):h())};i.__R=f;var h=function(){if(!--s.__u){if(s.state.__a){var p=s.state.__a;s.__v.__k[0]=Vh(p,p.__c.__P,p.__c.__O)}var m;for(s.setState({__a:s.__b=null});m=s.o.pop();)m.forceUpdate()}};s.__u++||32&e.__u||s.setState({__a:s.__b=s.__v.__k[0]}),n.then(f,f)},Mo.prototype.componentWillUnmount=function(){this.o=[]},Mo.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var i=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=jh(this.__b,i,s.__O=s.__P)}this.__b=null}var l=e.__a&&tn(Le,null,n.fallback);return l&&(l.__u&=-33),[tn(Le,null,e.__a?null:n.children),l]};var ef=function(n,e,i){if(++i[1]===i[0]&&n.l.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.l.size))for(i=n.i;i;){for(;i.length>3;)i.pop()();if(i[1]<i[0])break;n.i=i=i[2]}};function gm(n){return this.getChildContext=function(){return n.context},n.children}function mm(n){var e=this,i=n.h;e.componentWillUnmount=function(){Bn(null,e.v),e.v=null,e.h=null},e.h&&e.h!==i&&e.componentWillUnmount(),e.v||(e.h=i,e.v={nodeType:1,parentNode:i,childNodes:[],contains:function(){return!0},appendChild:function(s){this.childNodes.push(s),e.h.appendChild(s)},insertBefore:function(s,l){this.childNodes.push(s),e.h.insertBefore(s,l)},removeChild:function(s){this.childNodes.splice(this.childNodes.indexOf(s)>>>1,1),e.h.removeChild(s)}}),Bn(tn(gm,{context:e.context},n.__v),e.v)}function vm(n,e){var i=tn(mm,{__v:n,h:e});return i.containerInfo=e,i}(os.prototype=new Ei).__a=function(n){var e=this,i=Yh(e.__v),s=e.l.get(n);return s[0]++,function(l){var u=function(){e.props.revealOrder?(s.push(l),ef(e,n,s)):l()};i?i(u):u()}},os.prototype.render=function(n){this.i=null,this.l=new Map;var e=Qi(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var i=e.length;i--;)this.l.set(e[i],this.i=[1,0,this.i]);return n.children},os.prototype.componentDidUpdate=os.prototype.componentDidMount=function(){var n=this;this.l.forEach(function(e,i){ef(n,i,e)})};var Kh=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,ym=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,bm=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,xm=/[A-Z0-9]/g,_m=typeof document<"u",wm=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(n)};function km(n,e,i){return e.__k==null&&(e.textContent=""),Bn(n,e),typeof i=="function"&&i(),n?n.__c:null}function Sm(n,e,i){return Lh(n,e),typeof i=="function"&&i(),n?n.__c:null}Ei.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(Ei.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var nf=Ut.event;function Cm(){}function Tm(){return this.cancelBubble}function Mm(){return this.defaultPrevented}Ut.event=function(n){return nf&&(n=nf(n)),n.persist=Cm,n.isPropagationStopped=Tm,n.isDefaultPrevented=Mm,n.nativeEvent=n};var kl,Lm={enumerable:!1,configurable:!0,get:function(){return this.class}},rf=Ut.vnode;Ut.vnode=function(n){typeof n.type=="string"&&function(e){var i=e.props,s=e.type,l={},u=s.indexOf("-")===-1;for(var f in i){var h=i[f];if(!(f==="value"&&"defaultValue"in i&&h==null||_m&&f==="children"&&s==="noscript"||f==="class"||f==="className")){var p=f.toLowerCase();f==="defaultValue"&&"value"in i&&i.value==null?f="value":f==="download"&&h===!0?h="":p==="translate"&&h==="no"?h=!1:p[0]==="o"&&p[1]==="n"?p==="ondoubleclick"?f="ondblclick":p!=="onchange"||s!=="input"&&s!=="textarea"||wm(i.type)?p==="onfocus"?f="onfocusin":p==="onblur"?f="onfocusout":bm.test(f)&&(f=p):p=f="oninput":u&&ym.test(f)?f=f.replace(xm,"-$&").toLowerCase():h===null&&(h=void 0),p==="oninput"&&l[f=p]&&(f="oninputCapture"),l[f]=h}}s=="select"&&l.multiple&&Array.isArray(l.value)&&(l.value=Qi(i.children).forEach(function(m){m.props.selected=l.value.indexOf(m.props.value)!=-1})),s=="select"&&l.defaultValue!=null&&(l.value=Qi(i.children).forEach(function(m){m.props.selected=l.multiple?l.defaultValue.indexOf(m.props.value)!=-1:l.defaultValue==m.props.value})),i.class&&!i.className?(l.class=i.class,Object.defineProperty(l,"className",Lm)):(i.className&&!i.class||i.class&&i.className)&&(l.class=l.className=i.className),e.props=l}(n),n.$$typeof=Kh,rf&&rf(n)};var sf=Ut.__r;Ut.__r=function(n){sf&&sf(n),kl=n.__c};var of=Ut.diffed;Ut.diffed=function(n){of&&of(n);var e=n.props,i=n.__e;i!=null&&n.type==="textarea"&&"value"in e&&e.value!==i.value&&(i.value=e.value==null?"":e.value),kl=null};var Nm={ReactCurrentDispatcher:{current:{readContext:function(n){return kl.__n[n.__c].props.value},useCallback:Ph,useContext:Oh,useDebugValue:Ah,useDeferredValue:Bh,useEffect:qt,useId:Ih,useImperativeHandle:Dh,useInsertionEffect:$h,useLayoutEffect:Ms,useMemo:$o,useReducer:xl,useRef:ei,useState:rt,useSyncExternalStore:Hh,useTransition:Uh}}};function Dm(n){return tn.bind(null,n)}function jo(n){return!!n&&n.$$typeof===Kh}function Pm(n){return jo(n)&&n.type===Le}function Om(n){return!!n&&!!n.displayName&&(typeof n.displayName=="string"||n.displayName instanceof String)&&n.displayName.startsWith("Memo(")}function Am(n){return jo(n)?Bg.apply(null,arguments):n}function Im(n){return!!n.__k&&(Bn(null,n),!0)}function Em(n){return n&&(n.base||n.nodeType===1&&n)||null}var Fm=function(n,e){return n(e)},Rm=function(n,e){return n(e)},Wm=Le,Hm=jo,Xh={useState:rt,useId:Ih,useReducer:xl,useEffect:qt,useLayoutEffect:Ms,useInsertionEffect:$h,useTransition:Uh,useDeferredValue:Bh,useSyncExternalStore:Hh,startTransition:zh,useRef:ei,useImperativeHandle:Dh,useMemo:$o,useCallback:Ph,useContext:Oh,useDebugValue:Ah,version:"18.3.1",Children:hm,render:km,hydrate:Sm,unmountComponentAtNode:Im,createPortal:vm,createElement:tn,createContext:Ug,createFactory:Dm,cloneElement:Am,createRef:Fg,Fragment:Le,isValidElement:jo,isElement:Hm,isFragment:Pm,isMemo:Om,findDOMNode:Em,Component:Ei,PureComponent:nl,memo:um,forwardRef:wl,flushSync:Rm,unstable_batchedUpdates:Fm,StrictMode:Wm,Suspense:Mo,SuspenseList:os,lazy:pm,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Nm};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ns(n){return n+.5|0}const vn=(n,e,i)=>Math.max(Math.min(n,i),e);function as(n){return vn(Ns(n*2.55),0,255)}function yn(n){return vn(Ns(n*255),0,255)}function Zi(n){return vn(Ns(n/2.55)/100,0,1)}function af(n){return vn(Ns(n*100),0,100)}const hi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},rl=[..."0123456789ABCDEF"],zm=n=>rl[n&15],Bm=n=>rl[(n&240)>>4]+rl[n&15],uo=n=>(n&240)>>4===(n&15),Um=n=>uo(n.r)&&uo(n.g)&&uo(n.b)&&uo(n.a);function $m(n){var e=n.length,i;return n[0]==="#"&&(e===4||e===5?i={r:255&hi[n[1]]*17,g:255&hi[n[2]]*17,b:255&hi[n[3]]*17,a:e===5?hi[n[4]]*17:255}:(e===7||e===9)&&(i={r:hi[n[1]]<<4|hi[n[2]],g:hi[n[3]]<<4|hi[n[4]],b:hi[n[5]]<<4|hi[n[6]],a:e===9?hi[n[7]]<<4|hi[n[8]]:255})),i}const jm=(n,e)=>n<255?e(n):"";function Vm(n){var e=Um(n)?zm:Bm;return n?"#"+e(n.r)+e(n.g)+e(n.b)+jm(n.a,e):void 0}const Ym=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Gh(n,e,i){const s=e*Math.min(i,1-i),l=(u,f=(u+n/30)%12)=>i-s*Math.max(Math.min(f-3,9-f,1),-1);return[l(0),l(8),l(4)]}function Km(n,e,i){const s=(l,u=(l+n/60)%6)=>i-i*e*Math.max(Math.min(u,4-u,1),0);return[s(5),s(3),s(1)]}function Xm(n,e,i){const s=Gh(n,1,.5);let l;for(e+i>1&&(l=1/(e+i),e*=l,i*=l),l=0;l<3;l++)s[l]*=1-e-i,s[l]+=e;return s}function Gm(n,e,i,s,l){return n===l?(e-i)/s+(e<i?6:0):e===l?(i-n)/s+2:(n-e)/s+4}function Sl(n){const i=n.r/255,s=n.g/255,l=n.b/255,u=Math.max(i,s,l),f=Math.min(i,s,l),h=(u+f)/2;let p,m,b;return u!==f&&(b=u-f,m=h>.5?b/(2-u-f):b/(u+f),p=Gm(i,s,l,b,u),p=p*60+.5),[p|0,m||0,h]}function Cl(n,e,i,s){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,i,s)).map(yn)}function Tl(n,e,i){return Cl(Gh,n,e,i)}function qm(n,e,i){return Cl(Xm,n,e,i)}function Zm(n,e,i){return Cl(Km,n,e,i)}function qh(n){return(n%360+360)%360}function Jm(n){const e=Ym.exec(n);let i=255,s;if(!e)return;e[5]!==s&&(i=e[6]?as(+e[5]):yn(+e[5]));const l=qh(+e[2]),u=+e[3]/100,f=+e[4]/100;return e[1]==="hwb"?s=qm(l,u,f):e[1]==="hsv"?s=Zm(l,u,f):s=Tl(l,u,f),{r:s[0],g:s[1],b:s[2],a:i}}function Qm(n,e){var i=Sl(n);i[0]=qh(i[0]+e),i=Tl(i),n.r=i[0],n.g=i[1],n.b=i[2]}function tv(n){if(!n)return;const e=Sl(n),i=e[0],s=af(e[1]),l=af(e[2]);return n.a<255?`hsla(${i}, ${s}%, ${l}%, ${Zi(n.a)})`:`hsl(${i}, ${s}%, ${l}%)`}const lf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},cf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function ev(){const n={},e=Object.keys(cf),i=Object.keys(lf);let s,l,u,f,h;for(s=0;s<e.length;s++){for(f=h=e[s],l=0;l<i.length;l++)u=i[l],h=h.replace(u,lf[u]);u=parseInt(cf[f],16),n[h]=[u>>16&255,u>>8&255,u&255]}return n}let fo;function iv(n){fo||(fo=ev(),fo.transparent=[0,0,0,0]);const e=fo[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const nv=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rv(n){const e=nv.exec(n);let i=255,s,l,u;if(e){if(e[7]!==s){const f=+e[7];i=e[8]?as(f):vn(f*255,0,255)}return s=+e[1],l=+e[3],u=+e[5],s=255&(e[2]?as(s):vn(s,0,255)),l=255&(e[4]?as(l):vn(l,0,255)),u=255&(e[6]?as(u):vn(u,0,255)),{r:s,g:l,b:u,a:i}}}function sv(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Zi(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const Ua=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,dr=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function ov(n,e,i){const s=dr(Zi(n.r)),l=dr(Zi(n.g)),u=dr(Zi(n.b));return{r:yn(Ua(s+i*(dr(Zi(e.r))-s))),g:yn(Ua(l+i*(dr(Zi(e.g))-l))),b:yn(Ua(u+i*(dr(Zi(e.b))-u))),a:n.a+i*(e.a-n.a)}}function ho(n,e,i){if(n){let s=Sl(n);s[e]=Math.max(0,Math.min(s[e]+s[e]*i,e===0?360:1)),s=Tl(s),n.r=s[0],n.g=s[1],n.b=s[2]}}function Zh(n,e){return n&&Object.assign(e||{},n)}function uf(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=yn(n[3]))):(e=Zh(n,{r:0,g:0,b:0,a:1}),e.a=yn(e.a)),e}function av(n){return n.charAt(0)==="r"?rv(n):Jm(n)}class xs{constructor(e){if(e instanceof xs)return e;const i=typeof e;let s;i==="object"?s=uf(e):i==="string"&&(s=$m(e)||iv(e)||av(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=Zh(this._rgb);return e&&(e.a=Zi(e.a)),e}set rgb(e){this._rgb=uf(e)}rgbString(){return this._valid?sv(this._rgb):void 0}hexString(){return this._valid?Vm(this._rgb):void 0}hslString(){return this._valid?tv(this._rgb):void 0}mix(e,i){if(e){const s=this.rgb,l=e.rgb;let u;const f=i===u?.5:i,h=2*f-1,p=s.a-l.a,m=((h*p===-1?h:(h+p)/(1+h*p))+1)/2;u=1-m,s.r=255&m*s.r+u*l.r+.5,s.g=255&m*s.g+u*l.g+.5,s.b=255&m*s.b+u*l.b+.5,s.a=f*s.a+(1-f)*l.a,this.rgb=s}return this}interpolate(e,i){return e&&(this._rgb=ov(this._rgb,e._rgb,i)),this}clone(){return new xs(this.rgb)}alpha(e){return this._rgb.a=yn(e),this}clearer(e){const i=this._rgb;return i.a*=1-e,this}greyscale(){const e=this._rgb,i=Ns(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=i,this}opaquer(e){const i=this._rgb;return i.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ho(this._rgb,2,e),this}darken(e){return ho(this._rgb,2,-e),this}saturate(e){return ho(this._rgb,1,e),this}desaturate(e){return ho(this._rgb,1,-e),this}rotate(e){return Qm(this._rgb,e),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Xi(){}const lv=(()=>{let n=0;return()=>n++})();function ge(n){return n==null}function Pe(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Qt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function gi(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Oi(n,e){return gi(n)?n:e}function Gt(n,e){return typeof n>"u"?e:n}const cv=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function ae(n,e,i){if(n&&typeof n.call=="function")return n.apply(i,e)}function ie(n,e,i,s){let l,u,f;if(Pe(n))for(u=n.length,l=0;l<u;l++)e.call(i,n[l],l);else if(Qt(n))for(f=Object.keys(n),u=f.length,l=0;l<u;l++)e.call(i,n[f[l]],f[l])}function Io(n,e){let i,s,l,u;if(!n||!e||n.length!==e.length)return!1;for(i=0,s=n.length;i<s;++i)if(l=n[i],u=e[i],l.datasetIndex!==u.datasetIndex||l.index!==u.index)return!1;return!0}function Eo(n){if(Pe(n))return n.map(Eo);if(Qt(n)){const e=Object.create(null),i=Object.keys(n),s=i.length;let l=0;for(;l<s;++l)e[i[l]]=Eo(n[i[l]]);return e}return n}function Jh(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function uv(n,e,i,s){if(!Jh(n))return;const l=e[n],u=i[n];Qt(l)&&Qt(u)?_s(l,u,s):e[n]=Eo(u)}function _s(n,e,i){const s=Pe(e)?e:[e],l=s.length;if(!Qt(n))return n;i=i||{};const u=i.merger||uv;let f;for(let h=0;h<l;++h){if(f=s[h],!Qt(f))continue;const p=Object.keys(f);for(let m=0,b=p.length;m<b;++m)u(p[m],n,f,i)}return n}function ds(n,e){return _s(n,e,{merger:fv})}function fv(n,e,i){if(!Jh(n))return;const s=e[n],l=i[n];Qt(s)&&Qt(l)?ds(s,l):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Eo(l))}const ff={"":n=>n,x:n=>n.x,y:n=>n.y};function hv(n){const e=n.split("."),i=[];let s="";for(const l of e)s+=l,s.endsWith("\\")?s=s.slice(0,-1)+".":(i.push(s),s="");return i}function dv(n){const e=hv(n);return i=>{for(const s of e){if(s==="")break;i=i&&i[s]}return i}}function Fo(n,e){return(ff[e]||(ff[e]=dv(e)))(n)}function Ml(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Ro=n=>typeof n<"u",xn=n=>typeof n=="function",hf=(n,e)=>{if(n.size!==e.size)return!1;for(const i of n)if(!e.has(i))return!1;return!0};function pv(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const Oe=Math.PI,Fi=2*Oe,gv=Fi+Oe,Wo=Number.POSITIVE_INFINITY,mv=Oe/180,Ci=Oe/2,On=Oe/4,df=Oe*2/3,sl=Math.log10,vr=Math.sign;function ps(n,e,i){return Math.abs(n-e)<i}function pf(n){const e=Math.round(n);n=ps(n,e,n/1e3)?e:n;const i=Math.pow(10,Math.floor(sl(n))),s=n/i;return(s<=1?1:s<=2?2:s<=5?5:10)*i}function vv(n){const e=[],i=Math.sqrt(n);let s;for(s=1;s<i;s++)n%s===0&&(e.push(s),e.push(n/s));return i===(i|0)&&e.push(i),e.sort((l,u)=>l-u).pop(),e}function ws(n){return!isNaN(parseFloat(n))&&isFinite(n)}function yv(n,e){const i=Math.round(n);return i-e<=n&&i+e>=n}function bv(n,e,i){let s,l,u;for(s=0,l=n.length;s<l;s++)u=n[s][i],isNaN(u)||(e.min=Math.min(e.min,u),e.max=Math.max(e.max,u))}function Wn(n){return n*(Oe/180)}function xv(n){return n*(180/Oe)}function gf(n){if(!gi(n))return;let e=1,i=0;for(;Math.round(n*e)/e!==n;)e*=10,i++;return i}function _v(n,e){const i=e.x-n.x,s=e.y-n.y,l=Math.sqrt(i*i+s*s);let u=Math.atan2(s,i);return u<-.5*Oe&&(u+=Fi),{angle:u,distance:l}}function ol(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function wv(n,e){return(n-e+gv)%Fi-Oe}function mn(n){return(n%Fi+Fi)%Fi}function Qh(n,e,i,s){const l=mn(n),u=mn(e),f=mn(i),h=mn(u-l),p=mn(f-l),m=mn(l-u),b=mn(l-f);return l===u||l===f||s&&u===f||h>p&&m<b}function di(n,e,i){return Math.max(e,Math.min(i,n))}function kv(n){return di(n,-32768,32767)}function ls(n,e,i,s=1e-6){return n>=Math.min(e,i)-s&&n<=Math.max(e,i)+s}function Ll(n,e,i){i=i||(f=>n[f]<e);let s=n.length-1,l=0,u;for(;s-l>1;)u=l+s>>1,i(u)?l=u:s=u;return{lo:l,hi:s}}const Hn=(n,e,i,s)=>Ll(n,i,s?l=>{const u=n[l][e];return u<i||u===i&&n[l+1][e]===i}:l=>n[l][e]<i),Sv=(n,e,i)=>Ll(n,i,s=>n[s][e]>=i);function Cv(n,e,i){let s=0,l=n.length;for(;s<l&&n[s]<e;)s++;for(;l>s&&n[l-1]>i;)l--;return s>0||l<n.length?n.slice(s,l):n}const td=["push","pop","shift","splice","unshift"];function Tv(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),td.forEach(i=>{const s="_onData"+Ml(i),l=n[i];Object.defineProperty(n,i,{configurable:!0,enumerable:!1,value(...u){const f=l.apply(this,u);return n._chartjs.listeners.forEach(h=>{typeof h[s]=="function"&&h[s](...u)}),f}})})}function mf(n,e){const i=n._chartjs;if(!i)return;const s=i.listeners,l=s.indexOf(e);l!==-1&&s.splice(l,1),!(s.length>0)&&(td.forEach(u=>{delete n[u]}),delete n._chartjs)}function Mv(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const ed=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function id(n,e){let i=[],s=!1;return function(...l){i=l,s||(s=!0,ed.call(window,()=>{s=!1,n.apply(e,i)}))}}function Lv(n,e){let i;return function(...s){return e?(clearTimeout(i),i=setTimeout(n,e,s)):n.apply(this,s),e}}const Nl=n=>n==="start"?"left":n==="end"?"right":"center",Be=(n,e,i)=>n==="start"?e:n==="end"?i:(e+i)/2,Nv=(n,e,i,s)=>n===(s?"left":"right")?i:n==="center"?(e+i)/2:e;function Dv(n,e,i){const s=e.length;let l=0,u=s;if(n._sorted){const{iScale:f,_parsed:h}=n,p=f.axis,{min:m,max:b,minDefined:w,maxDefined:S}=f.getUserBounds();w&&(l=di(Math.min(Hn(h,p,m).lo,i?s:Hn(e,p,f.getPixelForValue(m)).lo),0,s-1)),S?u=di(Math.max(Hn(h,f.axis,b,!0).hi+1,i?0:Hn(e,p,f.getPixelForValue(b),!0).hi+1),l,s)-l:u=s-l}return{start:l,count:u}}function Pv(n){const{xScale:e,yScale:i,_scaleRanges:s}=n,l={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!s)return n._scaleRanges=l,!0;const u=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==i.min||s.ymax!==i.max;return Object.assign(s,l),u}const po=n=>n===0||n===1,vf=(n,e,i)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Fi/i)),yf=(n,e,i)=>Math.pow(2,-10*n)*Math.sin((n-e)*Fi/i)+1,gs={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Ci)+1,easeOutSine:n=>Math.sin(n*Ci),easeInOutSine:n=>-.5*(Math.cos(Oe*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>po(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>po(n)?n:vf(n,.075,.3),easeOutElastic:n=>po(n)?n:yf(n,.075,.3),easeInOutElastic(n){return po(n)?n:n<.5?.5*vf(n*2,.1125,.45):.5+.5*yf(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-gs.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?gs.easeInBounce(n*2)*.5:gs.easeOutBounce(n*2-1)*.5+.5};function Dl(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function bf(n){return Dl(n)?n:new xs(n)}function $a(n){return Dl(n)?n:new xs(n).saturate(.5).darken(.1).hexString()}const Ov=["x","y","borderWidth","radius","tension"],Av=["color","borderColor","backgroundColor"];function Iv(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:Av},numbers:{type:"number",properties:Ov}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Ev(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const xf=new Map;function Fv(n,e){e=e||{};const i=n+JSON.stringify(e);let s=xf.get(i);return s||(s=new Intl.NumberFormat(n,e),xf.set(i,s)),s}function nd(n,e,i){return Fv(e,i).format(n)}const rd={values(n){return Pe(n)?n:""+n},numeric(n,e,i){if(n===0)return"0";const s=this.chart.options.locale;let l,u=n;if(i.length>1){const m=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(m<1e-4||m>1e15)&&(l="scientific"),u=Rv(n,i)}const f=sl(Math.abs(u)),h=isNaN(f)?1:Math.max(Math.min(-1*Math.floor(f),20),0),p={notation:l,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(p,this.options.ticks.format),nd(n,s,p)},logarithmic(n,e,i){if(n===0)return"0";const s=i[e].significand||n/Math.pow(10,Math.floor(sl(n)));return[1,2,3,5,10,15].includes(s)||e>.8*i.length?rd.numeric.call(this,n,e,i):""}};function Rv(n,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(i)>=1&&n!==Math.floor(n)&&(i=n-Math.floor(n)),i}var sd={formatters:rd};function Wv(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,i)=>i.lineWidth,tickColor:(e,i)=>i.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:sd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Un=Object.create(null),al=Object.create(null);function ms(n,e){if(!e)return n;const i=e.split(".");for(let s=0,l=i.length;s<l;++s){const u=i[s];n=n[u]||(n[u]=Object.create(null))}return n}function ja(n,e,i){return typeof e=="string"?_s(ms(n,e),i):_s(ms(n,""),e)}class Hv{constructor(e,i){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,l)=>$a(l.backgroundColor),this.hoverBorderColor=(s,l)=>$a(l.borderColor),this.hoverColor=(s,l)=>$a(l.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(i)}set(e,i){return ja(this,e,i)}get(e){return ms(this,e)}describe(e,i){return ja(al,e,i)}override(e,i){return ja(Un,e,i)}route(e,i,s,l){const u=ms(this,e),f=ms(this,s),h="_"+i;Object.defineProperties(u,{[h]:{value:u[i],writable:!0},[i]:{enumerable:!0,get(){const p=this[h],m=f[l];return Qt(p)?Object.assign({},m,p):Gt(p,m)},set(p){this[h]=p}}})}apply(e){e.forEach(i=>i(this))}}var be=new Hv({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Iv,Ev,Wv]);function zv(n){return!n||ge(n.size)||ge(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function _f(n,e,i,s,l){let u=e[l];return u||(u=e[l]=n.measureText(l).width,i.push(l)),u>s&&(s=u),s}function An(n,e,i){const s=n.currentDevicePixelRatio,l=i!==0?Math.max(i/2,.5):0;return Math.round((e-l)*s)/s+l}function wf(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function ll(n,e,i,s){od(n,e,i,s,null)}function od(n,e,i,s,l){let u,f,h,p,m,b,w,S;const T=e.pointStyle,O=e.rotation,L=e.radius;let P=(O||0)*mv;if(T&&typeof T=="object"&&(u=T.toString(),u==="[object HTMLImageElement]"||u==="[object HTMLCanvasElement]")){n.save(),n.translate(i,s),n.rotate(P),n.drawImage(T,-T.width/2,-T.height/2,T.width,T.height),n.restore();return}if(!(isNaN(L)||L<=0)){switch(n.beginPath(),T){default:l?n.ellipse(i,s,l/2,L,0,0,Fi):n.arc(i,s,L,0,Fi),n.closePath();break;case"triangle":b=l?l/2:L,n.moveTo(i+Math.sin(P)*b,s-Math.cos(P)*L),P+=df,n.lineTo(i+Math.sin(P)*b,s-Math.cos(P)*L),P+=df,n.lineTo(i+Math.sin(P)*b,s-Math.cos(P)*L),n.closePath();break;case"rectRounded":m=L*.516,p=L-m,f=Math.cos(P+On)*p,w=Math.cos(P+On)*(l?l/2-m:p),h=Math.sin(P+On)*p,S=Math.sin(P+On)*(l?l/2-m:p),n.arc(i-w,s-h,m,P-Oe,P-Ci),n.arc(i+S,s-f,m,P-Ci,P),n.arc(i+w,s+h,m,P,P+Ci),n.arc(i-S,s+f,m,P+Ci,P+Oe),n.closePath();break;case"rect":if(!O){p=Math.SQRT1_2*L,b=l?l/2:p,n.rect(i-b,s-p,2*b,2*p);break}P+=On;case"rectRot":w=Math.cos(P)*(l?l/2:L),f=Math.cos(P)*L,h=Math.sin(P)*L,S=Math.sin(P)*(l?l/2:L),n.moveTo(i-w,s-h),n.lineTo(i+S,s-f),n.lineTo(i+w,s+h),n.lineTo(i-S,s+f),n.closePath();break;case"crossRot":P+=On;case"cross":w=Math.cos(P)*(l?l/2:L),f=Math.cos(P)*L,h=Math.sin(P)*L,S=Math.sin(P)*(l?l/2:L),n.moveTo(i-w,s-h),n.lineTo(i+w,s+h),n.moveTo(i+S,s-f),n.lineTo(i-S,s+f);break;case"star":w=Math.cos(P)*(l?l/2:L),f=Math.cos(P)*L,h=Math.sin(P)*L,S=Math.sin(P)*(l?l/2:L),n.moveTo(i-w,s-h),n.lineTo(i+w,s+h),n.moveTo(i+S,s-f),n.lineTo(i-S,s+f),P+=On,w=Math.cos(P)*(l?l/2:L),f=Math.cos(P)*L,h=Math.sin(P)*L,S=Math.sin(P)*(l?l/2:L),n.moveTo(i-w,s-h),n.lineTo(i+w,s+h),n.moveTo(i+S,s-f),n.lineTo(i-S,s+f);break;case"line":f=l?l/2:Math.cos(P)*L,h=Math.sin(P)*L,n.moveTo(i-f,s-h),n.lineTo(i+f,s+h);break;case"dash":n.moveTo(i,s),n.lineTo(i+Math.cos(P)*(l?l/2:L),s+Math.sin(P)*L);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function ks(n,e,i){return i=i||.5,!e||n&&n.x>e.left-i&&n.x<e.right+i&&n.y>e.top-i&&n.y<e.bottom+i}function Pl(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Ol(n){n.restore()}function Bv(n,e,i,s,l){if(!e)return n.lineTo(i.x,i.y);if(l==="middle"){const u=(e.x+i.x)/2;n.lineTo(u,e.y),n.lineTo(u,i.y)}else l==="after"!=!!s?n.lineTo(e.x,i.y):n.lineTo(i.x,e.y);n.lineTo(i.x,i.y)}function Uv(n,e,i,s){if(!e)return n.lineTo(i.x,i.y);n.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?i.cp2x:i.cp1x,s?i.cp2y:i.cp1y,i.x,i.y)}function $v(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),ge(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function jv(n,e,i,s,l){if(l.strikethrough||l.underline){const u=n.measureText(s),f=e-u.actualBoundingBoxLeft,h=e+u.actualBoundingBoxRight,p=i-u.actualBoundingBoxAscent,m=i+u.actualBoundingBoxDescent,b=l.strikethrough?(p+m)/2:m;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=l.decorationWidth||2,n.moveTo(f,b),n.lineTo(h,b),n.stroke()}}function Vv(n,e){const i=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=i}function Ss(n,e,i,s,l,u={}){const f=Pe(e)?e:[e],h=u.strokeWidth>0&&u.strokeColor!=="";let p,m;for(n.save(),n.font=l.string,$v(n,u),p=0;p<f.length;++p)m=f[p],u.backdrop&&Vv(n,u.backdrop),h&&(u.strokeColor&&(n.strokeStyle=u.strokeColor),ge(u.strokeWidth)||(n.lineWidth=u.strokeWidth),n.strokeText(m,i,s,u.maxWidth)),n.fillText(m,i,s,u.maxWidth),jv(n,i,s,m,u),s+=Number(l.lineHeight);n.restore()}function cl(n,e){const{x:i,y:s,w:l,h:u,radius:f}=e;n.arc(i+f.topLeft,s+f.topLeft,f.topLeft,1.5*Oe,Oe,!0),n.lineTo(i,s+u-f.bottomLeft),n.arc(i+f.bottomLeft,s+u-f.bottomLeft,f.bottomLeft,Oe,Ci,!0),n.lineTo(i+l-f.bottomRight,s+u),n.arc(i+l-f.bottomRight,s+u-f.bottomRight,f.bottomRight,Ci,0,!0),n.lineTo(i+l,s+f.topRight),n.arc(i+l-f.topRight,s+f.topRight,f.topRight,0,-Ci,!0),n.lineTo(i+f.topLeft,s)}const Yv=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Kv=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Xv(n,e){const i=(""+n).match(Yv);if(!i||i[1]==="normal")return e*1.2;switch(n=+i[2],i[3]){case"px":return n;case"%":n/=100;break}return e*n}const Gv=n=>+n||0;function ad(n,e){const i={},s=Qt(e),l=s?Object.keys(e):e,u=Qt(n)?s?f=>Gt(n[f],n[e[f]]):f=>n[f]:()=>n;for(const f of l)i[f]=Gv(u(f));return i}function qv(n){return ad(n,{top:"y",right:"x",bottom:"y",left:"x"})}function vs(n){return ad(n,["topLeft","topRight","bottomLeft","bottomRight"])}function mi(n){const e=qv(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ue(n,e){n=n||{},e=e||be.font;let i=Gt(n.size,e.size);typeof i=="string"&&(i=parseInt(i,10));let s=Gt(n.style,e.style);s&&!(""+s).match(Kv)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const l={family:Gt(n.family,e.family),lineHeight:Xv(Gt(n.lineHeight,e.lineHeight),i),size:i,style:s,weight:Gt(n.weight,e.weight),string:""};return l.string=zv(l),l}function go(n,e,i,s){let l,u,f;for(l=0,u=n.length;l<u;++l)if(f=n[l],f!==void 0&&f!==void 0)return f}function Zv(n,e,i){const{min:s,max:l}=n,u=cv(e,(l-s)/2),f=(h,p)=>i&&h===0?0:h+p;return{min:f(s,-Math.abs(u)),max:f(l,u)}}function $n(n,e){return Object.assign(Object.create(n),e)}function Al(n,e=[""],i,s,l=()=>n[0]){const u=i||n;typeof s>"u"&&(s=fd("_fallback",n));const f={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:u,_fallback:s,_getTarget:l,override:h=>Al([h,...n],e,u,s)};return new Proxy(f,{deleteProperty(h,p){return delete h[p],delete h._keys,delete n[0][p],!0},get(h,p){return cd(h,p,()=>sy(p,e,n,h))},getOwnPropertyDescriptor(h,p){return Reflect.getOwnPropertyDescriptor(h._scopes[0],p)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(h,p){return Sf(h).includes(p)},ownKeys(h){return Sf(h)},set(h,p,m){const b=h._storage||(h._storage=l());return h[p]=b[p]=m,delete h._keys,!0}})}function yr(n,e,i,s){const l={_cacheable:!1,_proxy:n,_context:e,_subProxy:i,_stack:new Set,_descriptors:ld(n,s),setContext:u=>yr(n,u,i,s),override:u=>yr(n.override(u),e,i,s)};return new Proxy(l,{deleteProperty(u,f){return delete u[f],delete n[f],!0},get(u,f,h){return cd(u,f,()=>Qv(u,f,h))},getOwnPropertyDescriptor(u,f){return u._descriptors.allKeys?Reflect.has(n,f)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,f)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(u,f){return Reflect.has(n,f)},ownKeys(){return Reflect.ownKeys(n)},set(u,f,h){return n[f]=h,delete u[f],!0}})}function ld(n,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:s=e.indexable,_allKeys:l=e.allKeys}=n;return{allKeys:l,scriptable:i,indexable:s,isScriptable:xn(i)?i:()=>i,isIndexable:xn(s)?s:()=>s}}const Jv=(n,e)=>n?n+Ml(e):e,Il=(n,e)=>Qt(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function cd(n,e,i){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const s=i();return n[e]=s,s}function Qv(n,e,i){const{_proxy:s,_context:l,_subProxy:u,_descriptors:f}=n;let h=s[e];return xn(h)&&f.isScriptable(e)&&(h=ty(e,h,n,i)),Pe(h)&&h.length&&(h=ey(e,h,n,f.isIndexable)),Il(e,h)&&(h=yr(h,l,u&&u[e],f)),h}function ty(n,e,i,s){const{_proxy:l,_context:u,_subProxy:f,_stack:h}=i;if(h.has(n))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+n);h.add(n);let p=e(u,f||s);return h.delete(n),Il(n,p)&&(p=El(l._scopes,l,n,p)),p}function ey(n,e,i,s){const{_proxy:l,_context:u,_subProxy:f,_descriptors:h}=i;if(typeof u.index<"u"&&s(n))return e[u.index%e.length];if(Qt(e[0])){const p=e,m=l._scopes.filter(b=>b!==p);e=[];for(const b of p){const w=El(m,l,n,b);e.push(yr(w,u,f&&f[n],h))}}return e}function ud(n,e,i){return xn(n)?n(e,i):n}const iy=(n,e)=>n===!0?e:typeof n=="string"?Fo(e,n):void 0;function ny(n,e,i,s,l){for(const u of e){const f=iy(i,u);if(f){n.add(f);const h=ud(f._fallback,i,l);if(typeof h<"u"&&h!==i&&h!==s)return h}else if(f===!1&&typeof s<"u"&&i!==s)return null}return!1}function El(n,e,i,s){const l=e._rootScopes,u=ud(e._fallback,i,s),f=[...n,...l],h=new Set;h.add(s);let p=kf(h,f,i,u||i,s);return p===null||typeof u<"u"&&u!==i&&(p=kf(h,f,u,p,s),p===null)?!1:Al(Array.from(h),[""],l,u,()=>ry(e,i,s))}function kf(n,e,i,s,l){for(;i;)i=ny(n,e,i,s,l);return i}function ry(n,e,i){const s=n._getTarget();e in s||(s[e]={});const l=s[e];return Pe(l)&&Qt(i)?i:l||{}}function sy(n,e,i,s){let l;for(const u of e)if(l=fd(Jv(u,n),i),typeof l<"u")return Il(n,l)?El(i,s,n,l):l}function fd(n,e){for(const i of e){if(!i)continue;const s=i[n];if(typeof s<"u")return s}}function Sf(n){let e=n._keys;return e||(e=n._keys=oy(n._scopes)),e}function oy(n){const e=new Set;for(const i of n)for(const s of Object.keys(i).filter(l=>!l.startsWith("_")))e.add(s);return Array.from(e)}const ay=Number.EPSILON||1e-14,br=(n,e)=>e<n.length&&!n[e].skip&&n[e],hd=n=>n==="x"?"y":"x";function ly(n,e,i,s){const l=n.skip?e:n,u=e,f=i.skip?e:i,h=ol(u,l),p=ol(f,u);let m=h/(h+p),b=p/(h+p);m=isNaN(m)?0:m,b=isNaN(b)?0:b;const w=s*m,S=s*b;return{previous:{x:u.x-w*(f.x-l.x),y:u.y-w*(f.y-l.y)},next:{x:u.x+S*(f.x-l.x),y:u.y+S*(f.y-l.y)}}}function cy(n,e,i){const s=n.length;let l,u,f,h,p,m=br(n,0);for(let b=0;b<s-1;++b)if(p=m,m=br(n,b+1),!(!p||!m)){if(ps(e[b],0,ay)){i[b]=i[b+1]=0;continue}l=i[b]/e[b],u=i[b+1]/e[b],h=Math.pow(l,2)+Math.pow(u,2),!(h<=9)&&(f=3/Math.sqrt(h),i[b]=l*f*e[b],i[b+1]=u*f*e[b])}}function uy(n,e,i="x"){const s=hd(i),l=n.length;let u,f,h,p=br(n,0);for(let m=0;m<l;++m){if(f=h,h=p,p=br(n,m+1),!h)continue;const b=h[i],w=h[s];f&&(u=(b-f[i])/3,h[`cp1${i}`]=b-u,h[`cp1${s}`]=w-u*e[m]),p&&(u=(p[i]-b)/3,h[`cp2${i}`]=b+u,h[`cp2${s}`]=w+u*e[m])}}function fy(n,e="x"){const i=hd(e),s=n.length,l=Array(s).fill(0),u=Array(s);let f,h,p,m=br(n,0);for(f=0;f<s;++f)if(h=p,p=m,m=br(n,f+1),!!p){if(m){const b=m[e]-p[e];l[f]=b!==0?(m[i]-p[i])/b:0}u[f]=h?m?vr(l[f-1])!==vr(l[f])?0:(l[f-1]+l[f])/2:l[f-1]:l[f]}cy(n,l,u),uy(n,u,e)}function mo(n,e,i){return Math.max(Math.min(n,i),e)}function hy(n,e){let i,s,l,u,f,h=ks(n[0],e);for(i=0,s=n.length;i<s;++i)f=u,u=h,h=i<s-1&&ks(n[i+1],e),u&&(l=n[i],f&&(l.cp1x=mo(l.cp1x,e.left,e.right),l.cp1y=mo(l.cp1y,e.top,e.bottom)),h&&(l.cp2x=mo(l.cp2x,e.left,e.right),l.cp2y=mo(l.cp2y,e.top,e.bottom)))}function dy(n,e,i,s,l){let u,f,h,p;if(e.spanGaps&&(n=n.filter(m=>!m.skip)),e.cubicInterpolationMode==="monotone")fy(n,l);else{let m=s?n[n.length-1]:n[0];for(u=0,f=n.length;u<f;++u)h=n[u],p=ly(m,h,n[Math.min(u+1,f-(s?0:1))%f],e.tension),h.cp1x=p.previous.x,h.cp1y=p.previous.y,h.cp2x=p.next.x,h.cp2y=p.next.y,m=h}e.capBezierPoints&&hy(n,i)}function Fl(){return typeof window<"u"&&typeof document<"u"}function Rl(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ho(n,e,i){let s;return typeof n=="string"?(s=parseInt(n,10),n.indexOf("%")!==-1&&(s=s/100*e.parentNode[i])):s=n,s}const Vo=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function py(n,e){return Vo(n).getPropertyValue(e)}const gy=["top","right","bottom","left"];function zn(n,e,i){const s={};i=i?"-"+i:"";for(let l=0;l<4;l++){const u=gy[l];s[u]=parseFloat(n[e+"-"+u+i])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const my=(n,e,i)=>(n>0||e>0)&&(!i||!i.shadowRoot);function vy(n,e){const i=n.touches,s=i&&i.length?i[0]:n,{offsetX:l,offsetY:u}=s;let f=!1,h,p;if(my(l,u,n.target))h=l,p=u;else{const m=e.getBoundingClientRect();h=s.clientX-m.left,p=s.clientY-m.top,f=!0}return{x:h,y:p,box:f}}function En(n,e){if("native"in n)return n;const{canvas:i,currentDevicePixelRatio:s}=e,l=Vo(i),u=l.boxSizing==="border-box",f=zn(l,"padding"),h=zn(l,"border","width"),{x:p,y:m,box:b}=vy(n,i),w=f.left+(b&&h.left),S=f.top+(b&&h.top);let{width:T,height:O}=e;return u&&(T-=f.width+h.width,O-=f.height+h.height),{x:Math.round((p-w)/T*i.width/s),y:Math.round((m-S)/O*i.height/s)}}function yy(n,e,i){let s,l;if(e===void 0||i===void 0){const u=n&&Rl(n);if(!u)e=n.clientWidth,i=n.clientHeight;else{const f=u.getBoundingClientRect(),h=Vo(u),p=zn(h,"border","width"),m=zn(h,"padding");e=f.width-m.width-p.width,i=f.height-m.height-p.height,s=Ho(h.maxWidth,u,"clientWidth"),l=Ho(h.maxHeight,u,"clientHeight")}}return{width:e,height:i,maxWidth:s||Wo,maxHeight:l||Wo}}const vo=n=>Math.round(n*10)/10;function by(n,e,i,s){const l=Vo(n),u=zn(l,"margin"),f=Ho(l.maxWidth,n,"clientWidth")||Wo,h=Ho(l.maxHeight,n,"clientHeight")||Wo,p=yy(n,e,i);let{width:m,height:b}=p;if(l.boxSizing==="content-box"){const S=zn(l,"border","width"),T=zn(l,"padding");m-=T.width+S.width,b-=T.height+S.height}return m=Math.max(0,m-u.width),b=Math.max(0,s?m/s:b-u.height),m=vo(Math.min(m,f,p.maxWidth)),b=vo(Math.min(b,h,p.maxHeight)),m&&!b&&(b=vo(m/2)),(e!==void 0||i!==void 0)&&s&&p.height&&b>p.height&&(b=p.height,m=vo(Math.floor(b*s))),{width:m,height:b}}function Cf(n,e,i){const s=e||1,l=Math.floor(n.height*s),u=Math.floor(n.width*s);n.height=Math.floor(n.height),n.width=Math.floor(n.width);const f=n.canvas;return f.style&&(i||!f.style.height&&!f.style.width)&&(f.style.height=`${n.height}px`,f.style.width=`${n.width}px`),n.currentDevicePixelRatio!==s||f.height!==l||f.width!==u?(n.currentDevicePixelRatio=s,f.height=l,f.width=u,n.ctx.setTransform(s,0,0,s,0,0),!0):!1}const xy=function(){let n=!1;try{const e={get passive(){return n=!0,!1}};Fl()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function Tf(n,e){const i=py(n,e),s=i&&i.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Fn(n,e,i,s){return{x:n.x+i*(e.x-n.x),y:n.y+i*(e.y-n.y)}}function _y(n,e,i,s){return{x:n.x+i*(e.x-n.x),y:s==="middle"?i<.5?n.y:e.y:s==="after"?i<1?n.y:e.y:i>0?e.y:n.y}}function wy(n,e,i,s){const l={x:n.cp2x,y:n.cp2y},u={x:e.cp1x,y:e.cp1y},f=Fn(n,l,i),h=Fn(l,u,i),p=Fn(u,e,i),m=Fn(f,h,i),b=Fn(h,p,i);return Fn(m,b,i)}const ky=function(n,e){return{x(i){return n+n+e-i},setWidth(i){e=i},textAlign(i){return i==="center"?i:i==="right"?"left":"right"},xPlus(i,s){return i-s},leftForLtr(i,s){return i-s}}},Sy=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function pr(n,e,i){return n?ky(e,i):Sy()}function dd(n,e){let i,s;(e==="ltr"||e==="rtl")&&(i=n.canvas.style,s=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),n.prevTextDirection=s)}function pd(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function gd(n){return n==="angle"?{between:Qh,compare:wv,normalize:mn}:{between:ls,compare:(e,i)=>e-i,normalize:e=>e}}function Mf({start:n,end:e,count:i,loop:s,style:l}){return{start:n%i,end:e%i,loop:s&&(e-n+1)%i===0,style:l}}function Cy(n,e,i){const{property:s,start:l,end:u}=i,{between:f,normalize:h}=gd(s),p=e.length;let{start:m,end:b,loop:w}=n,S,T;if(w){for(m+=p,b+=p,S=0,T=p;S<T&&f(h(e[m%p][s]),l,u);++S)m--,b--;m%=p,b%=p}return b<m&&(b+=p),{start:m,end:b,loop:w,style:n.style}}function Ty(n,e,i){if(!i)return[n];const{property:s,start:l,end:u}=i,f=e.length,{compare:h,between:p,normalize:m}=gd(s),{start:b,end:w,loop:S,style:T}=Cy(n,e,i),O=[];let L=!1,P=null,A,H,X;const G=()=>p(l,X,A)&&h(l,X)!==0,K=()=>h(u,A)===0||p(u,X,A),Y=()=>L||G(),Q=()=>!L||K();for(let q=b,ht=b;q<=w;++q)H=e[q%f],!H.skip&&(A=m(H[s]),A!==X&&(L=p(A,l,u),P===null&&Y()&&(P=h(A,l)===0?q:ht),P!==null&&Q()&&(O.push(Mf({start:P,end:q,loop:S,count:f,style:T})),P=null),ht=q,X=A));return P!==null&&O.push(Mf({start:P,end:w,loop:S,count:f,style:T})),O}function My(n,e){const i=[],s=n.segments;for(let l=0;l<s.length;l++){const u=Ty(s[l],n.points,e);u.length&&i.push(...u)}return i}function Ly(n,e,i,s){let l=0,u=e-1;if(i&&!s)for(;l<e&&!n[l].skip;)l++;for(;l<e&&n[l].skip;)l++;for(l%=e,i&&(u+=l);u>l&&n[u%e].skip;)u--;return u%=e,{start:l,end:u}}function Ny(n,e,i,s){const l=n.length,u=[];let f=e,h=n[e],p;for(p=e+1;p<=i;++p){const m=n[p%l];m.skip||m.stop?h.skip||(s=!1,u.push({start:e%l,end:(p-1)%l,loop:s}),e=f=m.stop?p:null):(f=p,h.skip&&(e=p)),h=m}return f!==null&&u.push({start:e%l,end:f%l,loop:s}),u}function Dy(n,e){const i=n.points,s=n.options.spanGaps,l=i.length;if(!l)return[];const u=!!n._loop,{start:f,end:h}=Ly(i,l,u,s);if(s===!0)return Lf(n,[{start:f,end:h,loop:u}],i,e);const p=h<f?h+l:h,m=!!n._fullLoop&&f===0&&h===l-1;return Lf(n,Ny(i,f,p,m),i,e)}function Lf(n,e,i,s){return!s||!s.setContext||!i?e:Py(n,e,i,s)}function Py(n,e,i,s){const l=n._chart.getContext(),u=Nf(n.options),{_datasetIndex:f,options:{spanGaps:h}}=n,p=i.length,m=[];let b=u,w=e[0].start,S=w;function T(O,L,P,A){const H=h?-1:1;if(O!==L){for(O+=p;i[O%p].skip;)O-=H;for(;i[L%p].skip;)L+=H;O%p!==L%p&&(m.push({start:O%p,end:L%p,loop:P,style:A}),b=A,w=L%p)}}for(const O of e){w=h?w:O.start;let L=i[w%p],P;for(S=w+1;S<=O.end;S++){const A=i[S%p];P=Nf(s.setContext($n(l,{type:"segment",p0:L,p1:A,p0DataIndex:(S-1)%p,p1DataIndex:S%p,datasetIndex:f}))),Oy(P,b)&&T(w,S-1,O.loop,b),L=A,b=P}w<S-1&&T(w,S-1,O.loop,b)}return m}function Nf(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Oy(n,e){if(!e)return!1;const i=[],s=function(l,u){return Dl(u)?(i.includes(u)||i.push(u),i.indexOf(u)):u};return JSON.stringify(n,s)!==JSON.stringify(e,s)}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class Ay{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,i,s,l){const u=i.listeners[l],f=i.duration;u.forEach(h=>h({chart:e,initial:i.initial,numSteps:f,currentStep:Math.min(s-i.start,f)}))}_refresh(){this._request||(this._running=!0,this._request=ed.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let i=0;this._charts.forEach((s,l)=>{if(!s.running||!s.items.length)return;const u=s.items;let f=u.length-1,h=!1,p;for(;f>=0;--f)p=u[f],p._active?(p._total>s.duration&&(s.duration=p._total),p.tick(e),h=!0):(u[f]=u[u.length-1],u.pop());h&&(l.draw(),this._notify(l,s,e,"progress")),u.length||(s.running=!1,this._notify(l,s,e,"complete"),s.initial=!1),i+=u.length}),this._lastDate=e,i===0&&(this._running=!1)}_getAnims(e){const i=this._charts;let s=i.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(e,s)),s}listen(e,i,s){this._getAnims(e).listeners[i].push(s)}add(e,i){!i||!i.length||this._getAnims(e).items.push(...i)}has(e){return this._getAnims(e).items.length>0}start(e){const i=this._charts.get(e);i&&(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((s,l)=>Math.max(s,l._duration),0),this._refresh())}running(e){if(!this._running)return!1;const i=this._charts.get(e);return!(!i||!i.running||!i.items.length)}stop(e){const i=this._charts.get(e);if(!i||!i.items.length)return;const s=i.items;let l=s.length-1;for(;l>=0;--l)s[l].cancel();i.items=[],this._notify(e,i,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Gi=new Ay;const Df="transparent",Iy={boolean(n,e,i){return i>.5?e:n},color(n,e,i){const s=bf(n||Df),l=s.valid&&bf(e||Df);return l&&l.valid?l.mix(s,i).hexString():e},number(n,e,i){return n+(e-n)*i}};class Ey{constructor(e,i,s,l){const u=i[s];l=go([e.to,l,u,e.from]);const f=go([e.from,u,l]);this._active=!0,this._fn=e.fn||Iy[e.type||typeof f],this._easing=gs[e.easing]||gs.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=i,this._prop=s,this._from=f,this._to=l,this._promises=void 0}active(){return this._active}update(e,i,s){if(this._active){this._notify(!1);const l=this._target[this._prop],u=s-this._start,f=this._duration-u;this._start=s,this._duration=Math.floor(Math.max(f,e.duration)),this._total+=u,this._loop=!!e.loop,this._to=go([e.to,i,l,e.from]),this._from=go([e.from,l,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const i=e-this._start,s=this._duration,l=this._prop,u=this._from,f=this._loop,h=this._to;let p;if(this._active=u!==h&&(f||i<s),!this._active){this._target[l]=h,this._notify(!0);return}if(i<0){this._target[l]=u;return}p=i/s%2,p=f&&p>1?2-p:p,p=this._easing(Math.min(1,Math.max(0,p))),this._target[l]=this._fn(u,h,p)}wait(){const e=this._promises||(this._promises=[]);return new Promise((i,s)=>{e.push({res:i,rej:s})})}_notify(e){const i=e?"res":"rej",s=this._promises||[];for(let l=0;l<s.length;l++)s[l][i]()}}class md{constructor(e,i){this._chart=e,this._properties=new Map,this.configure(i)}configure(e){if(!Qt(e))return;const i=Object.keys(be.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(l=>{const u=e[l];if(!Qt(u))return;const f={};for(const h of i)f[h]=u[h];(Pe(u.properties)&&u.properties||[l]).forEach(h=>{(h===l||!s.has(h))&&s.set(h,f)})})}_animateOptions(e,i){const s=i.options,l=Ry(e,s);if(!l)return[];const u=this._createAnimations(l,s);return s.$shared&&Fy(e.options.$animations,s).then(()=>{e.options=s},()=>{}),u}_createAnimations(e,i){const s=this._properties,l=[],u=e.$animations||(e.$animations={}),f=Object.keys(i),h=Date.now();let p;for(p=f.length-1;p>=0;--p){const m=f[p];if(m.charAt(0)==="$")continue;if(m==="options"){l.push(...this._animateOptions(e,i));continue}const b=i[m];let w=u[m];const S=s.get(m);if(w)if(S&&w.active()){w.update(S,b,h);continue}else w.cancel();if(!S||!S.duration){e[m]=b;continue}u[m]=w=new Ey(S,e,m,b),l.push(w)}return l}update(e,i){if(this._properties.size===0){Object.assign(e,i);return}const s=this._createAnimations(e,i);if(s.length)return Gi.add(this._chart,s),!0}}function Fy(n,e){const i=[],s=Object.keys(e);for(let l=0;l<s.length;l++){const u=n[s[l]];u&&u.active()&&i.push(u.wait())}return Promise.all(i)}function Ry(n,e){if(!e)return;let i=n.options;if(!i){n.options=e;return}return i.$shared&&(n.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i}function Pf(n,e){const i=n&&n.options||{},s=i.reverse,l=i.min===void 0?e:0,u=i.max===void 0?e:0;return{start:s?u:l,end:s?l:u}}function Wy(n,e,i){if(i===!1)return!1;const s=Pf(n,i),l=Pf(e,i);return{top:l.end,right:s.end,bottom:l.start,left:s.start}}function Hy(n){let e,i,s,l;return Qt(n)?(e=n.top,i=n.right,s=n.bottom,l=n.left):e=i=s=l=n,{top:e,right:i,bottom:s,left:l,disabled:n===!1}}function vd(n,e){const i=[],s=n._getSortedDatasetMetas(e);let l,u;for(l=0,u=s.length;l<u;++l)i.push(s[l].index);return i}function Of(n,e,i,s={}){const l=n.keys,u=s.mode==="single";let f,h,p,m;if(e===null)return;let b=!1;for(f=0,h=l.length;f<h;++f){if(p=+l[f],p===i){if(b=!0,s.all)continue;break}m=n.values[p],gi(m)&&(u||e===0||vr(e)===vr(m))&&(e+=m)}return!b&&!s.all?0:e}function zy(n,e){const{iScale:i,vScale:s}=e,l=i.axis==="x"?"x":"y",u=s.axis==="x"?"x":"y",f=Object.keys(n),h=new Array(f.length);let p,m,b;for(p=0,m=f.length;p<m;++p)b=f[p],h[p]={[l]:b,[u]:n[b]};return h}function Va(n,e){const i=n&&n.options.stacked;return i||i===void 0&&e.stack!==void 0}function By(n,e,i){return`${n.id}.${e.id}.${i.stack||i.type}`}function Uy(n){const{min:e,max:i,minDefined:s,maxDefined:l}=n.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:l?i:Number.POSITIVE_INFINITY}}function $y(n,e,i){const s=n[e]||(n[e]={});return s[i]||(s[i]={})}function Af(n,e,i,s){for(const l of e.getMatchingVisibleMetas(s).reverse()){const u=n[l.index];if(i&&u>0||!i&&u<0)return l.index}return null}function If(n,e){const{chart:i,_cachedMeta:s}=n,l=i._stacks||(i._stacks={}),{iScale:u,vScale:f,index:h}=s,p=u.axis,m=f.axis,b=By(u,f,s),w=e.length;let S;for(let T=0;T<w;++T){const O=e[T],{[p]:L,[m]:P}=O,A=O._stacks||(O._stacks={});S=A[m]=$y(l,b,L),S[h]=P,S._top=Af(S,f,!0,s.type),S._bottom=Af(S,f,!1,s.type);const H=S._visualValues||(S._visualValues={});H[h]=P}}function Ya(n,e){const i=n.scales;return Object.keys(i).filter(s=>i[s].axis===e).shift()}function jy(n,e){return $n(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Vy(n,e,i){return $n(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}function es(n,e){const i=n.controller.index,s=n.vScale&&n.vScale.axis;if(s){e=e||n._parsed;for(const l of e){const u=l._stacks;if(!u||u[s]===void 0||u[s][i]===void 0)return;delete u[s][i],u[s]._visualValues!==void 0&&u[s]._visualValues[i]!==void 0&&delete u[s]._visualValues[i]}}}const Ka=n=>n==="reset"||n==="none",Ef=(n,e)=>e?n:Object.assign({},n),Yy=(n,e,i)=>n&&!e.hidden&&e._stacked&&{keys:vd(i,!0),values:null};class ys{constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Va(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&es(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,i=this._cachedMeta,s=this.getDataset(),l=(w,S,T,O)=>w==="x"?S:w==="r"?O:T,u=i.xAxisID=Gt(s.xAxisID,Ya(e,"x")),f=i.yAxisID=Gt(s.yAxisID,Ya(e,"y")),h=i.rAxisID=Gt(s.rAxisID,Ya(e,"r")),p=i.indexAxis,m=i.iAxisID=l(p,u,f,h),b=i.vAxisID=l(p,f,u,h);i.xScale=this.getScaleForId(u),i.yScale=this.getScaleForId(f),i.rScale=this.getScaleForId(h),i.iScale=this.getScaleForId(m),i.vScale=this.getScaleForId(b)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&mf(this._data,this),e._stacked&&es(e)}_dataCheck(){const e=this.getDataset(),i=e.data||(e.data=[]),s=this._data;if(Qt(i)){const l=this._cachedMeta;this._data=zy(i,l)}else if(s!==i){if(s){mf(s,this);const l=this._cachedMeta;es(l),l._parsed=[]}i&&Object.isExtensible(i)&&Tv(i,this),this._syncList=[],this._data=i}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const i=this._cachedMeta,s=this.getDataset();let l=!1;this._dataCheck();const u=i._stacked;i._stacked=Va(i.vScale,i),i.stack!==s.stack&&(l=!0,es(i),i.stack=s.stack),this._resyncElements(e),(l||u!==i._stacked)&&(If(this,i._parsed),i._stacked=Va(i.vScale,i))}configure(){const e=this.chart.config,i=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){const{_cachedMeta:s,_data:l}=this,{iScale:u,_stacked:f}=s,h=u.axis;let p=e===0&&i===l.length?!0:s._sorted,m=e>0&&s._parsed[e-1],b,w,S;if(this._parsing===!1)s._parsed=l,s._sorted=!0,S=l;else{Pe(l[e])?S=this.parseArrayData(s,l,e,i):Qt(l[e])?S=this.parseObjectData(s,l,e,i):S=this.parsePrimitiveData(s,l,e,i);const T=()=>w[h]===null||m&&w[h]<m[h];for(b=0;b<i;++b)s._parsed[b+e]=w=S[b],p&&(T()&&(p=!1),m=w);s._sorted=p}f&&If(this,S)}parsePrimitiveData(e,i,s,l){const{iScale:u,vScale:f}=e,h=u.axis,p=f.axis,m=u.getLabels(),b=u===f,w=new Array(l);let S,T,O;for(S=0,T=l;S<T;++S)O=S+s,w[S]={[h]:b||u.parse(m[O],O),[p]:f.parse(i[O],O)};return w}parseArrayData(e,i,s,l){const{xScale:u,yScale:f}=e,h=new Array(l);let p,m,b,w;for(p=0,m=l;p<m;++p)b=p+s,w=i[b],h[p]={x:u.parse(w[0],b),y:f.parse(w[1],b)};return h}parseObjectData(e,i,s,l){const{xScale:u,yScale:f}=e,{xAxisKey:h="x",yAxisKey:p="y"}=this._parsing,m=new Array(l);let b,w,S,T;for(b=0,w=l;b<w;++b)S=b+s,T=i[S],m[b]={x:u.parse(Fo(T,h),S),y:f.parse(Fo(T,p),S)};return m}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,s){const l=this.chart,u=this._cachedMeta,f=i[e.axis],h={keys:vd(l,!0),values:i._stacks[e.axis]._visualValues};return Of(h,f,u.index,{mode:s})}updateRangeFromParsed(e,i,s,l){const u=s[i.axis];let f=u===null?NaN:u;const h=l&&s._stacks[i.axis];l&&h&&(l.values=h,f=Of(l,u,this._cachedMeta.index)),e.min=Math.min(e.min,f),e.max=Math.max(e.max,f)}getMinMax(e,i){const s=this._cachedMeta,l=s._parsed,u=s._sorted&&e===s.iScale,f=l.length,h=this._getOtherScale(e),p=Yy(i,s,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:b,max:w}=Uy(h);let S,T;function O(){T=l[S];const L=T[h.axis];return!gi(T[e.axis])||b>L||w<L}for(S=0;S<f&&!(!O()&&(this.updateRangeFromParsed(m,e,T,p),u));++S);if(u){for(S=f-1;S>=0;--S)if(!O()){this.updateRangeFromParsed(m,e,T,p);break}}return m}getAllParsedValues(e){const i=this._cachedMeta._parsed,s=[];let l,u,f;for(l=0,u=i.length;l<u;++l)f=i[l][e.axis],gi(f)&&s.push(f);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const i=this._cachedMeta,s=i.iScale,l=i.vScale,u=this.getParsed(e);return{label:s?""+s.getLabelForValue(u[s.axis]):"",value:l?""+l.getLabelForValue(u[l.axis]):""}}_update(e){const i=this._cachedMeta;this.update(e||"default"),i._clip=Hy(Gt(this.options.clip,Wy(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,i=this.chart,s=this._cachedMeta,l=s.data||[],u=i.chartArea,f=[],h=this._drawStart||0,p=this._drawCount||l.length-h,m=this.options.drawActiveElementsOnTop;let b;for(s.dataset&&s.dataset.draw(e,u,h,p),b=h;b<h+p;++b){const w=l[b];w.hidden||(w.active&&m?f.push(w):w.draw(e,u))}for(b=0;b<f.length;++b)f[b].draw(e,u)}getStyle(e,i){const s=i?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,i,s){const l=this.getDataset();let u;if(e>=0&&e<this._cachedMeta.data.length){const f=this._cachedMeta.data[e];u=f.$context||(f.$context=Vy(this.getContext(),e,f)),u.parsed=this.getParsed(e),u.raw=l.data[e],u.index=u.dataIndex=e}else u=this.$context||(this.$context=jy(this.chart.getContext(),this.index)),u.dataset=l,u.index=u.datasetIndex=this.index;return u.active=!!i,u.mode=s,u}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",s){const l=i==="active",u=this._cachedDataOpts,f=e+"-"+i,h=u[f],p=this.enableOptionSharing&&Ro(s);if(h)return Ef(h,p);const m=this.chart.config,b=m.datasetElementScopeKeys(this._type,e),w=l?[`${e}Hover`,"hover",e,""]:[e,""],S=m.getOptionScopes(this.getDataset(),b),T=Object.keys(be.elements[e]),O=()=>this.getContext(s,l,i),L=m.resolveNamedOptions(S,T,O,w);return L.$shared&&(L.$shared=p,u[f]=Object.freeze(Ef(L,p))),L}_resolveAnimations(e,i,s){const l=this.chart,u=this._cachedDataOpts,f=`animation-${i}`,h=u[f];if(h)return h;let p;if(l.options.animation!==!1){const b=this.chart.config,w=b.datasetAnimationScopeKeys(this._type,i),S=b.getOptionScopes(this.getDataset(),w);p=b.createResolver(S,this.getContext(e,s,i))}const m=new md(l,p&&p.animations);return p&&p._cacheable&&(u[f]=Object.freeze(m)),m}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||Ka(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){const s=this.resolveDataElementOptions(e,i),l=this._sharedOptions,u=this.getSharedOptions(s),f=this.includeOptions(i,u)||u!==l;return this.updateSharedOptions(u,i,s),{sharedOptions:u,includeOptions:f}}updateElement(e,i,s,l){Ka(l)?Object.assign(e,s):this._resolveAnimations(i,l).update(e,s)}updateSharedOptions(e,i,s){e&&!Ka(i)&&this._resolveAnimations(void 0,i).update(e,s)}_setStyle(e,i,s,l){e.active=l;const u=this.getStyle(i,l);this._resolveAnimations(i,s,l).update(e,{options:!l&&this.getSharedOptions(u)||u})}removeHoverStyle(e,i,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,i,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const i=this._data,s=this._cachedMeta.data;for(const[h,p,m]of this._syncList)this[h](p,m);this._syncList=[];const l=s.length,u=i.length,f=Math.min(u,l);f&&this.parse(0,f),u>l?this._insertElements(l,u-l,e):u<l&&this._removeElements(u,l-u)}_insertElements(e,i,s=!0){const l=this._cachedMeta,u=l.data,f=e+i;let h;const p=m=>{for(m.length+=i,h=m.length-1;h>=f;h--)m[h]=m[h-i]};for(p(u),h=e;h<f;++h)u[h]=new this.dataElementType;this._parsing&&p(l._parsed),this.parse(e,i),s&&this.updateElements(u,e,i,"reset")}updateElements(e,i,s,l){}_removeElements(e,i){const s=this._cachedMeta;if(this._parsing){const l=s._parsed.splice(e,i);s._stacked&&es(s,l)}s.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[i,s,l]=e;this[i](s,l)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ht(ys,"defaults",{}),Ht(ys,"datasetElementType",null),Ht(ys,"dataElementType",null);class Lo extends ys{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const i=this._cachedMeta,{dataset:s,data:l=[],_dataset:u}=i,f=this.chart._animationsDisabled;let{start:h,count:p}=Dv(i,l,f);this._drawStart=h,this._drawCount=p,Pv(i)&&(h=0,p=l.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!u._decimated,s.points=l;const m=this.resolveDatasetElementOptions(e);this.options.showLine||(m.borderWidth=0),m.segment=this.options.segment,this.updateElement(s,void 0,{animated:!f,options:m},e),this.updateElements(l,h,p,e)}updateElements(e,i,s,l){const u=l==="reset",{iScale:f,vScale:h,_stacked:p,_dataset:m}=this._cachedMeta,{sharedOptions:b,includeOptions:w}=this._getSharedOptions(i,l),S=f.axis,T=h.axis,{spanGaps:O,segment:L}=this.options,P=ws(O)?O:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||u||l==="none",H=i+s,X=e.length;let G=i>0&&this.getParsed(i-1);for(let K=0;K<X;++K){const Y=e[K],Q=A?Y:{};if(K<i||K>=H){Q.skip=!0;continue}const q=this.getParsed(K),ht=ge(q[T]),it=Q[S]=f.getPixelForValue(q[S],K),tt=Q[T]=u||ht?h.getBasePixel():h.getPixelForValue(p?this.applyStack(h,q,p):q[T],K);Q.skip=isNaN(it)||isNaN(tt)||ht,Q.stop=K>0&&Math.abs(q[S]-G[S])>P,L&&(Q.parsed=q,Q.raw=m.data[K]),w&&(Q.options=b||this.resolveDataElementOptions(K,Y.active?"active":l)),A||this.updateElement(Y,K,Q,l),G=q}}getMaxOverflow(){const e=this._cachedMeta,i=e.dataset,s=i.options&&i.options.borderWidth||0,l=e.data||[];if(!l.length)return s;const u=l[0].size(this.resolveDataElementOptions(0)),f=l[l.length-1].size(this.resolveDataElementOptions(l.length-1));return Math.max(s,u,f)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ht(Lo,"id","line"),Ht(Lo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ht(Lo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function In(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Wl{constructor(e){Ht(this,"options");this.options=e||{}}static override(e){Object.assign(Wl.prototype,e)}init(){}formats(){return In()}parse(){return In()}format(){return In()}add(){return In()}diff(){return In()}startOf(){return In()}endOf(){return In()}}var Ky={_date:Wl};function Xy(n,e,i,s){const{controller:l,data:u,_sorted:f}=n,h=l._cachedMeta.iScale;if(h&&e===h.axis&&e!=="r"&&f&&u.length){const p=h._reversePixels?Sv:Hn;if(s){if(l._sharedOptions){const m=u[0],b=typeof m.getRange=="function"&&m.getRange(e);if(b){const w=p(u,e,i-b),S=p(u,e,i+b);return{lo:w.lo,hi:S.hi}}}}else return p(u,e,i)}return{lo:0,hi:u.length-1}}function Ds(n,e,i,s,l){const u=n.getSortedVisibleDatasetMetas(),f=i[e];for(let h=0,p=u.length;h<p;++h){const{index:m,data:b}=u[h],{lo:w,hi:S}=Xy(u[h],e,f,l);for(let T=w;T<=S;++T){const O=b[T];O.skip||s(O,m,T)}}}function Gy(n){const e=n.indexOf("x")!==-1,i=n.indexOf("y")!==-1;return function(s,l){const u=e?Math.abs(s.x-l.x):0,f=i?Math.abs(s.y-l.y):0;return Math.sqrt(Math.pow(u,2)+Math.pow(f,2))}}function Xa(n,e,i,s,l){const u=[];return!l&&!n.isPointInArea(e)||Ds(n,i,e,function(h,p,m){!l&&!ks(h,n.chartArea,0)||h.inRange(e.x,e.y,s)&&u.push({element:h,datasetIndex:p,index:m})},!0),u}function qy(n,e,i,s){let l=[];function u(f,h,p){const{startAngle:m,endAngle:b}=f.getProps(["startAngle","endAngle"],s),{angle:w}=_v(f,{x:e.x,y:e.y});Qh(w,m,b)&&l.push({element:f,datasetIndex:h,index:p})}return Ds(n,i,e,u),l}function Zy(n,e,i,s,l,u){let f=[];const h=Gy(i);let p=Number.POSITIVE_INFINITY;function m(b,w,S){const T=b.inRange(e.x,e.y,l);if(s&&!T)return;const O=b.getCenterPoint(l);if(!(!!u||n.isPointInArea(O))&&!T)return;const P=h(e,O);P<p?(f=[{element:b,datasetIndex:w,index:S}],p=P):P===p&&f.push({element:b,datasetIndex:w,index:S})}return Ds(n,i,e,m),f}function Ga(n,e,i,s,l,u){return!u&&!n.isPointInArea(e)?[]:i==="r"&&!s?qy(n,e,i,l):Zy(n,e,i,s,l,u)}function Ff(n,e,i,s,l){const u=[],f=i==="x"?"inXRange":"inYRange";let h=!1;return Ds(n,i,e,(p,m,b)=>{p[f]&&p[f](e[i],l)&&(u.push({element:p,datasetIndex:m,index:b}),h=h||p.inRange(e.x,e.y,l))}),s&&!h?[]:u}var Jy={evaluateInteractionItems:Ds,modes:{index(n,e,i,s){const l=En(e,n),u=i.axis||"x",f=i.includeInvisible||!1,h=i.intersect?Xa(n,l,u,s,f):Ga(n,l,u,!1,s,f),p=[];return h.length?(n.getSortedVisibleDatasetMetas().forEach(m=>{const b=h[0].index,w=m.data[b];w&&!w.skip&&p.push({element:w,datasetIndex:m.index,index:b})}),p):[]},dataset(n,e,i,s){const l=En(e,n),u=i.axis||"xy",f=i.includeInvisible||!1;let h=i.intersect?Xa(n,l,u,s,f):Ga(n,l,u,!1,s,f);if(h.length>0){const p=h[0].datasetIndex,m=n.getDatasetMeta(p).data;h=[];for(let b=0;b<m.length;++b)h.push({element:m[b],datasetIndex:p,index:b})}return h},point(n,e,i,s){const l=En(e,n),u=i.axis||"xy",f=i.includeInvisible||!1;return Xa(n,l,u,s,f)},nearest(n,e,i,s){const l=En(e,n),u=i.axis||"xy",f=i.includeInvisible||!1;return Ga(n,l,u,i.intersect,s,f)},x(n,e,i,s){const l=En(e,n);return Ff(n,l,"x",i.intersect,s)},y(n,e,i,s){const l=En(e,n);return Ff(n,l,"y",i.intersect,s)}}};const yd=["left","top","right","bottom"];function is(n,e){return n.filter(i=>i.pos===e)}function Rf(n,e){return n.filter(i=>yd.indexOf(i.pos)===-1&&i.box.axis===e)}function ns(n,e){return n.sort((i,s)=>{const l=e?s:i,u=e?i:s;return l.weight===u.weight?l.index-u.index:l.weight-u.weight})}function Qy(n){const e=[];let i,s,l,u,f,h;for(i=0,s=(n||[]).length;i<s;++i)l=n[i],{position:u,options:{stack:f,stackWeight:h=1}}=l,e.push({index:i,box:l,pos:u,horizontal:l.isHorizontal(),weight:l.weight,stack:f&&u+f,stackWeight:h});return e}function t0(n){const e={};for(const i of n){const{stack:s,pos:l,stackWeight:u}=i;if(!s||!yd.includes(l))continue;const f=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});f.count++,f.weight+=u}return e}function e0(n,e){const i=t0(n),{vBoxMaxWidth:s,hBoxMaxHeight:l}=e;let u,f,h;for(u=0,f=n.length;u<f;++u){h=n[u];const{fullSize:p}=h.box,m=i[h.stack],b=m&&h.stackWeight/m.weight;h.horizontal?(h.width=b?b*s:p&&e.availableWidth,h.height=l):(h.width=s,h.height=b?b*l:p&&e.availableHeight)}return i}function i0(n){const e=Qy(n),i=ns(e.filter(m=>m.box.fullSize),!0),s=ns(is(e,"left"),!0),l=ns(is(e,"right")),u=ns(is(e,"top"),!0),f=ns(is(e,"bottom")),h=Rf(e,"x"),p=Rf(e,"y");return{fullSize:i,leftAndTop:s.concat(u),rightAndBottom:l.concat(p).concat(f).concat(h),chartArea:is(e,"chartArea"),vertical:s.concat(l).concat(p),horizontal:u.concat(f).concat(h)}}function Wf(n,e,i,s){return Math.max(n[i],e[i])+Math.max(n[s],e[s])}function bd(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function n0(n,e,i,s){const{pos:l,box:u}=i,f=n.maxPadding;if(!Qt(l)){i.size&&(n[l]-=i.size);const w=s[i.stack]||{size:0,count:1};w.size=Math.max(w.size,i.horizontal?u.height:u.width),i.size=w.size/w.count,n[l]+=i.size}u.getPadding&&bd(f,u.getPadding());const h=Math.max(0,e.outerWidth-Wf(f,n,"left","right")),p=Math.max(0,e.outerHeight-Wf(f,n,"top","bottom")),m=h!==n.w,b=p!==n.h;return n.w=h,n.h=p,i.horizontal?{same:m,other:b}:{same:b,other:m}}function r0(n){const e=n.maxPadding;function i(s){const l=Math.max(e[s]-n[s],0);return n[s]+=l,l}n.y+=i("top"),n.x+=i("left"),i("right"),i("bottom")}function s0(n,e){const i=e.maxPadding;function s(l){const u={left:0,top:0,right:0,bottom:0};return l.forEach(f=>{u[f]=Math.max(e[f],i[f])}),u}return s(n?["left","right"]:["top","bottom"])}function cs(n,e,i,s){const l=[];let u,f,h,p,m,b;for(u=0,f=n.length,m=0;u<f;++u){h=n[u],p=h.box,p.update(h.width||e.w,h.height||e.h,s0(h.horizontal,e));const{same:w,other:S}=n0(e,i,h,s);m|=w&&l.length,b=b||S,p.fullSize||l.push(h)}return m&&cs(l,e,i,s)||b}function yo(n,e,i,s,l){n.top=i,n.left=e,n.right=e+s,n.bottom=i+l,n.width=s,n.height=l}function Hf(n,e,i,s){const l=i.padding;let{x:u,y:f}=e;for(const h of n){const p=h.box,m=s[h.stack]||{count:1,placed:0,weight:1},b=h.stackWeight/m.weight||1;if(h.horizontal){const w=e.w*b,S=m.size||p.height;Ro(m.start)&&(f=m.start),p.fullSize?yo(p,l.left,f,i.outerWidth-l.right-l.left,S):yo(p,e.left+m.placed,f,w,S),m.start=f,m.placed+=w,f=p.bottom}else{const w=e.h*b,S=m.size||p.width;Ro(m.start)&&(u=m.start),p.fullSize?yo(p,u,l.top,S,i.outerHeight-l.bottom-l.top):yo(p,u,e.top+m.placed,S,w),m.start=u,m.placed+=w,u=p.right}}e.x=u,e.y=f}var pi={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(i){e.draw(i)}}]},n.boxes.push(e)},removeBox(n,e){const i=n.boxes?n.boxes.indexOf(e):-1;i!==-1&&n.boxes.splice(i,1)},configure(n,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(n,e,i,s){if(!n)return;const l=mi(n.options.layout.padding),u=Math.max(e-l.width,0),f=Math.max(i-l.height,0),h=i0(n.boxes),p=h.vertical,m=h.horizontal;ie(n.boxes,L=>{typeof L.beforeLayout=="function"&&L.beforeLayout()});const b=p.reduce((L,P)=>P.box.options&&P.box.options.display===!1?L:L+1,0)||1,w=Object.freeze({outerWidth:e,outerHeight:i,padding:l,availableWidth:u,availableHeight:f,vBoxMaxWidth:u/2/b,hBoxMaxHeight:f/2}),S=Object.assign({},l);bd(S,mi(s));const T=Object.assign({maxPadding:S,w:u,h:f,x:l.left,y:l.top},l),O=e0(p.concat(m),w);cs(h.fullSize,T,w,O),cs(p,T,w,O),cs(m,T,w,O)&&cs(p,T,w,O),r0(T),Hf(h.leftAndTop,T,w,O),T.x+=T.w,T.y+=T.h,Hf(h.rightAndBottom,T,w,O),n.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},ie(h.chartArea,L=>{const P=L.box;Object.assign(P,n.chartArea),P.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class xd{acquireContext(e,i){}releaseContext(e){return!1}addEventListener(e,i,s){}removeEventListener(e,i,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,i,s,l){return i=Math.max(0,i||e.width),s=s||e.height,{width:i,height:Math.max(0,l?Math.floor(i/l):s)}}isAttached(e){return!0}updateConfig(e){}}class o0 extends xd{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const No="$chartjs",a0={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},zf=n=>n===null||n==="";function l0(n,e){const i=n.style,s=n.getAttribute("height"),l=n.getAttribute("width");if(n[No]={initial:{height:s,width:l,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",zf(l)){const u=Tf(n,"width");u!==void 0&&(n.width=u)}if(zf(s))if(n.style.height==="")n.height=n.width/(e||2);else{const u=Tf(n,"height");u!==void 0&&(n.height=u)}return n}const _d=xy?{passive:!0}:!1;function c0(n,e,i){n&&n.addEventListener(e,i,_d)}function u0(n,e,i){n&&n.canvas&&n.canvas.removeEventListener(e,i,_d)}function f0(n,e){const i=a0[n.type]||n.type,{x:s,y:l}=En(n,e);return{type:i,chart:e,native:n,x:s!==void 0?s:null,y:l!==void 0?l:null}}function zo(n,e){for(const i of n)if(i===e||i.contains(e))return!0}function h0(n,e,i){const s=n.canvas,l=new MutationObserver(u=>{let f=!1;for(const h of u)f=f||zo(h.addedNodes,s),f=f&&!zo(h.removedNodes,s);f&&i()});return l.observe(document,{childList:!0,subtree:!0}),l}function d0(n,e,i){const s=n.canvas,l=new MutationObserver(u=>{let f=!1;for(const h of u)f=f||zo(h.removedNodes,s),f=f&&!zo(h.addedNodes,s);f&&i()});return l.observe(document,{childList:!0,subtree:!0}),l}const Cs=new Map;let Bf=0;function wd(){const n=window.devicePixelRatio;n!==Bf&&(Bf=n,Cs.forEach((e,i)=>{i.currentDevicePixelRatio!==n&&e()}))}function p0(n,e){Cs.size||window.addEventListener("resize",wd),Cs.set(n,e)}function g0(n){Cs.delete(n),Cs.size||window.removeEventListener("resize",wd)}function m0(n,e,i){const s=n.canvas,l=s&&Rl(s);if(!l)return;const u=id((h,p)=>{const m=l.clientWidth;i(h,p),m<l.clientWidth&&i()},window),f=new ResizeObserver(h=>{const p=h[0],m=p.contentRect.width,b=p.contentRect.height;m===0&&b===0||u(m,b)});return f.observe(l),p0(n,u),f}function qa(n,e,i){i&&i.disconnect(),e==="resize"&&g0(n)}function v0(n,e,i){const s=n.canvas,l=id(u=>{n.ctx!==null&&i(f0(u,n))},n);return c0(s,e,l),l}class y0 extends xd{acquireContext(e,i){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(l0(e,i),s):null}releaseContext(e){const i=e.canvas;if(!i[No])return!1;const s=i[No].initial;["height","width"].forEach(u=>{const f=s[u];ge(f)?i.removeAttribute(u):i.setAttribute(u,f)});const l=s.style||{};return Object.keys(l).forEach(u=>{i.style[u]=l[u]}),i.width=i.width,delete i[No],!0}addEventListener(e,i,s){this.removeEventListener(e,i);const l=e.$proxies||(e.$proxies={}),f={attach:h0,detach:d0,resize:m0}[i]||v0;l[i]=f(e,i,s)}removeEventListener(e,i){const s=e.$proxies||(e.$proxies={}),l=s[i];if(!l)return;({attach:qa,detach:qa,resize:qa}[i]||u0)(e,i,l),s[i]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,i,s,l){return by(e,i,s,l)}isAttached(e){const i=e&&Rl(e);return!!(i&&i.isConnected)}}function b0(n){return!Fl()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?o0:y0}class en{constructor(){Ht(this,"x");Ht(this,"y");Ht(this,"active",!1);Ht(this,"options");Ht(this,"$animations")}tooltipPosition(e){const{x:i,y:s}=this.getProps(["x","y"],e);return{x:i,y:s}}hasValue(){return ws(this.x)&&ws(this.y)}getProps(e,i){const s=this.$animations;if(!i||!s)return this;const l={};return e.forEach(u=>{l[u]=s[u]&&s[u].active()?s[u]._to:this[u]}),l}}Ht(en,"defaults",{}),Ht(en,"defaultRoutes");function x0(n,e){const i=n.options.ticks,s=_0(n),l=Math.min(i.maxTicksLimit||s,s),u=i.major.enabled?k0(e):[],f=u.length,h=u[0],p=u[f-1],m=[];if(f>l)return S0(e,m,u,f/l),m;const b=w0(u,e,l);if(f>0){let w,S;const T=f>1?Math.round((p-h)/(f-1)):null;for(bo(e,m,b,ge(T)?0:h-T,h),w=0,S=f-1;w<S;w++)bo(e,m,b,u[w],u[w+1]);return bo(e,m,b,p,ge(T)?e.length:p+T),m}return bo(e,m,b),m}function _0(n){const e=n.options.offset,i=n._tickSize(),s=n._length/i+(e?0:1),l=n._maxLength/i;return Math.floor(Math.min(s,l))}function w0(n,e,i){const s=C0(n),l=e.length/i;if(!s)return Math.max(l,1);const u=vv(s);for(let f=0,h=u.length-1;f<h;f++){const p=u[f];if(p>l)return p}return Math.max(l,1)}function k0(n){const e=[];let i,s;for(i=0,s=n.length;i<s;i++)n[i].major&&e.push(i);return e}function S0(n,e,i,s){let l=0,u=i[0],f;for(s=Math.ceil(s),f=0;f<n.length;f++)f===u&&(e.push(n[f]),l++,u=i[l*s])}function bo(n,e,i,s,l){const u=Gt(s,0),f=Math.min(Gt(l,n.length),n.length);let h=0,p,m,b;for(i=Math.ceil(i),l&&(p=l-s,i=p/Math.floor(p/i)),b=u;b<0;)h++,b=Math.round(u+h*i);for(m=Math.max(u,0);m<f;m++)m===b&&(e.push(n[m]),h++,b=Math.round(u+h*i))}function C0(n){const e=n.length;let i,s;if(e<2)return!1;for(s=n[0],i=1;i<e;++i)if(n[i]-n[i-1]!==s)return!1;return s}const T0=n=>n==="left"?"right":n==="right"?"left":n,Uf=(n,e,i)=>e==="top"||e==="left"?n[e]+i:n[e]-i,$f=(n,e)=>Math.min(e||n,n);function jf(n,e){const i=[],s=n.length/e,l=n.length;let u=0;for(;u<l;u+=s)i.push(n[Math.floor(u)]);return i}function M0(n,e,i){const s=n.ticks.length,l=Math.min(e,s-1),u=n._startPixel,f=n._endPixel,h=1e-6;let p=n.getPixelForTick(l),m;if(!(i&&(s===1?m=Math.max(p-u,f-p):e===0?m=(n.getPixelForTick(1)-p)/2:m=(p-n.getPixelForTick(l-1))/2,p+=l<e?m:-m,p<u-h||p>f+h)))return p}function L0(n,e){ie(n,i=>{const s=i.gc,l=s.length/2;let u;if(l>e){for(u=0;u<l;++u)delete i.data[s[u]];s.splice(0,l)}})}function rs(n){return n.drawTicks?n.tickLength:0}function Vf(n,e){if(!n.display)return 0;const i=Ue(n.font,e),s=mi(n.padding);return(Pe(n.text)?n.text.length:1)*i.lineHeight+s.height}function N0(n,e){return $n(n,{scale:e,type:"scale"})}function D0(n,e,i){return $n(n,{tick:i,index:e,type:"tick"})}function P0(n,e,i){let s=Nl(n);return(i&&e!=="right"||!i&&e==="right")&&(s=T0(s)),s}function O0(n,e,i,s){const{top:l,left:u,bottom:f,right:h,chart:p}=n,{chartArea:m,scales:b}=p;let w=0,S,T,O;const L=f-l,P=h-u;if(n.isHorizontal()){if(T=Be(s,u,h),Qt(i)){const A=Object.keys(i)[0],H=i[A];O=b[A].getPixelForValue(H)+L-e}else i==="center"?O=(m.bottom+m.top)/2+L-e:O=Uf(n,i,e);S=h-u}else{if(Qt(i)){const A=Object.keys(i)[0],H=i[A];T=b[A].getPixelForValue(H)-P+e}else i==="center"?T=(m.left+m.right)/2-P+e:T=Uf(n,i,e);O=Be(s,f,l),w=i==="left"?-Ci:Ci}return{titleX:T,titleY:O,maxWidth:S,rotation:w}}class _r extends en{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,i){return e}getUserBounds(){let{_userMin:e,_userMax:i,_suggestedMin:s,_suggestedMax:l}=this;return e=Oi(e,Number.POSITIVE_INFINITY),i=Oi(i,Number.NEGATIVE_INFINITY),s=Oi(s,Number.POSITIVE_INFINITY),l=Oi(l,Number.NEGATIVE_INFINITY),{min:Oi(e,s),max:Oi(i,l),minDefined:gi(e),maxDefined:gi(i)}}getMinMax(e){let{min:i,max:s,minDefined:l,maxDefined:u}=this.getUserBounds(),f;if(l&&u)return{min:i,max:s};const h=this.getMatchingVisibleMetas();for(let p=0,m=h.length;p<m;++p)f=h[p].controller.getMinMax(this,e),l||(i=Math.min(i,f.min)),u||(s=Math.max(s,f.max));return i=u&&i>s?s:i,s=l&&i>s?i:s,{min:Oi(i,Oi(s,i)),max:Oi(s,Oi(i,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ae(this.options.beforeUpdate,[this])}update(e,i,s){const{beginAtZero:l,grace:u,ticks:f}=this.options,h=f.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=i,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Zv(this,u,l),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const p=h<this.ticks.length;this._convertTicksToLabels(p?jf(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),f.display&&(f.autoSkip||f.source==="auto")&&(this.ticks=x0(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),p&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,i,s;this.isHorizontal()?(i=this.left,s=this.right):(i=this.top,s=this.bottom,e=!e),this._startPixel=i,this._endPixel=s,this._reversePixels=e,this._length=s-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ae(this.options.afterUpdate,[this])}beforeSetDimensions(){ae(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ae(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ae(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ae(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const i=this.options.ticks;let s,l,u;for(s=0,l=e.length;s<l;s++)u=e[s],u.label=ae(i.callback,[u.value,s,e],this)}afterTickToLabelConversion(){ae(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ae(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,i=e.ticks,s=$f(this.ticks.length,e.ticks.maxTicksLimit),l=i.minRotation||0,u=i.maxRotation;let f=l,h,p,m;if(!this._isVisible()||!i.display||l>=u||s<=1||!this.isHorizontal()){this.labelRotation=l;return}const b=this._getLabelSizes(),w=b.widest.width,S=b.highest.height,T=di(this.chart.width-w,0,this.maxWidth);h=e.offset?this.maxWidth/s:T/(s-1),w+6>h&&(h=T/(s-(e.offset?.5:1)),p=this.maxHeight-rs(e.grid)-i.padding-Vf(e.title,this.chart.options.font),m=Math.sqrt(w*w+S*S),f=xv(Math.min(Math.asin(di((b.highest.height+6)/h,-1,1)),Math.asin(di(p/m,-1,1))-Math.asin(di(S/m,-1,1)))),f=Math.max(l,Math.min(u,f))),this.labelRotation=f}afterCalculateLabelRotation(){ae(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ae(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:i,options:{ticks:s,title:l,grid:u}}=this,f=this._isVisible(),h=this.isHorizontal();if(f){const p=Vf(l,i.options.font);if(h?(e.width=this.maxWidth,e.height=rs(u)+p):(e.height=this.maxHeight,e.width=rs(u)+p),s.display&&this.ticks.length){const{first:m,last:b,widest:w,highest:S}=this._getLabelSizes(),T=s.padding*2,O=Wn(this.labelRotation),L=Math.cos(O),P=Math.sin(O);if(h){const A=s.mirror?0:P*w.width+L*S.height;e.height=Math.min(this.maxHeight,e.height+A+T)}else{const A=s.mirror?0:L*w.width+P*S.height;e.width=Math.min(this.maxWidth,e.width+A+T)}this._calculatePadding(m,b,P,L)}}this._handleMargins(),h?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,i,s,l){const{ticks:{align:u,padding:f},position:h}=this.options,p=this.labelRotation!==0,m=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const b=this.getPixelForTick(0)-this.left,w=this.right-this.getPixelForTick(this.ticks.length-1);let S=0,T=0;p?m?(S=l*e.width,T=s*i.height):(S=s*e.height,T=l*i.width):u==="start"?T=i.width:u==="end"?S=e.width:u!=="inner"&&(S=e.width/2,T=i.width/2),this.paddingLeft=Math.max((S-b+f)*this.width/(this.width-b),0),this.paddingRight=Math.max((T-w+f)*this.width/(this.width-w),0)}else{let b=i.height/2,w=e.height/2;u==="start"?(b=0,w=e.height):u==="end"&&(b=i.height,w=0),this.paddingTop=b+f,this.paddingBottom=w+f}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ae(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:i}=this.options;return i==="top"||i==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let i,s;for(i=0,s=e.length;i<s;i++)ge(e[i].label)&&(e.splice(i,1),s--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const i=this.options.ticks.sampleSize;let s=this.ticks;i<s.length&&(s=jf(s,i)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,i,s){const{ctx:l,_longestTextCache:u}=this,f=[],h=[],p=Math.floor(i/$f(i,s));let m=0,b=0,w,S,T,O,L,P,A,H,X,G,K;for(w=0;w<i;w+=p){if(O=e[w].label,L=this._resolveTickFontOptions(w),l.font=P=L.string,A=u[P]=u[P]||{data:{},gc:[]},H=L.lineHeight,X=G=0,!ge(O)&&!Pe(O))X=_f(l,A.data,A.gc,X,O),G=H;else if(Pe(O))for(S=0,T=O.length;S<T;++S)K=O[S],!ge(K)&&!Pe(K)&&(X=_f(l,A.data,A.gc,X,K),G+=H);f.push(X),h.push(G),m=Math.max(X,m),b=Math.max(G,b)}L0(u,i);const Y=f.indexOf(m),Q=h.indexOf(b),q=ht=>({width:f[ht]||0,height:h[ht]||0});return{first:q(0),last:q(i-1),widest:q(Y),highest:q(Q),widths:f,heights:h}}getLabelForValue(e){return e}getPixelForValue(e,i){return NaN}getValueForPixel(e){}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const i=this._startPixel+e*this._length;return kv(this._alignToPixels?An(this.chart,i,0):i)}getDecimalForPixel(e){const i=(e-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:i}=this;return e<0&&i<0?i:e>0&&i>0?e:0}getContext(e){const i=this.ticks||[];if(e>=0&&e<i.length){const s=i[e];return s.$context||(s.$context=D0(this.getContext(),e,s))}return this.$context||(this.$context=N0(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,i=Wn(this.labelRotation),s=Math.abs(Math.cos(i)),l=Math.abs(Math.sin(i)),u=this._getLabelSizes(),f=e.autoSkipPadding||0,h=u?u.widest.width+f:0,p=u?u.highest.height+f:0;return this.isHorizontal()?p*s>h*l?h/s:p/l:p*l<h*s?p/s:h/l}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const i=this.axis,s=this.chart,l=this.options,{grid:u,position:f,border:h}=l,p=u.offset,m=this.isHorizontal(),w=this.ticks.length+(p?1:0),S=rs(u),T=[],O=h.setContext(this.getContext()),L=O.display?O.width:0,P=L/2,A=function(ft){return An(s,ft,L)};let H,X,G,K,Y,Q,q,ht,it,tt,st,R;if(f==="top")H=A(this.bottom),Q=this.bottom-S,ht=H-P,tt=A(e.top)+P,R=e.bottom;else if(f==="bottom")H=A(this.top),tt=e.top,R=A(e.bottom)-P,Q=H+P,ht=this.top+S;else if(f==="left")H=A(this.right),Y=this.right-S,q=H-P,it=A(e.left)+P,st=e.right;else if(f==="right")H=A(this.left),it=e.left,st=A(e.right)-P,Y=H+P,q=this.left+S;else if(i==="x"){if(f==="center")H=A((e.top+e.bottom)/2+.5);else if(Qt(f)){const ft=Object.keys(f)[0],Rt=f[ft];H=A(this.chart.scales[ft].getPixelForValue(Rt))}tt=e.top,R=e.bottom,Q=H+P,ht=Q+S}else if(i==="y"){if(f==="center")H=A((e.left+e.right)/2);else if(Qt(f)){const ft=Object.keys(f)[0],Rt=f[ft];H=A(this.chart.scales[ft].getPixelForValue(Rt))}Y=H-P,q=Y-S,it=e.left,st=e.right}const I=Gt(l.ticks.maxTicksLimit,w),C=Math.max(1,Math.ceil(w/I));for(X=0;X<w;X+=C){const ft=this.getContext(X),Rt=u.setContext(ft),jt=h.setContext(ft),$=Rt.lineWidth,gt=Rt.color,lt=jt.dash||[],Tt=jt.dashOffset,It=Rt.tickWidth,zt=Rt.tickColor,Et=Rt.tickBorderDash||[],mt=Rt.tickBorderDashOffset;G=M0(this,X,p),G!==void 0&&(K=An(s,G,$),m?Y=q=it=st=K:Q=ht=tt=R=K,T.push({tx1:Y,ty1:Q,tx2:q,ty2:ht,x1:it,y1:tt,x2:st,y2:R,width:$,color:gt,borderDash:lt,borderDashOffset:Tt,tickWidth:It,tickColor:zt,tickBorderDash:Et,tickBorderDashOffset:mt}))}return this._ticksLength=w,this._borderValue=H,T}_computeLabelItems(e){const i=this.axis,s=this.options,{position:l,ticks:u}=s,f=this.isHorizontal(),h=this.ticks,{align:p,crossAlign:m,padding:b,mirror:w}=u,S=rs(s.grid),T=S+b,O=w?-b:T,L=-Wn(this.labelRotation),P=[];let A,H,X,G,K,Y,Q,q,ht,it,tt,st,R="middle";if(l==="top")Y=this.bottom-O,Q=this._getXAxisLabelAlignment();else if(l==="bottom")Y=this.top+O,Q=this._getXAxisLabelAlignment();else if(l==="left"){const C=this._getYAxisLabelAlignment(S);Q=C.textAlign,K=C.x}else if(l==="right"){const C=this._getYAxisLabelAlignment(S);Q=C.textAlign,K=C.x}else if(i==="x"){if(l==="center")Y=(e.top+e.bottom)/2+T;else if(Qt(l)){const C=Object.keys(l)[0],ft=l[C];Y=this.chart.scales[C].getPixelForValue(ft)+T}Q=this._getXAxisLabelAlignment()}else if(i==="y"){if(l==="center")K=(e.left+e.right)/2-T;else if(Qt(l)){const C=Object.keys(l)[0],ft=l[C];K=this.chart.scales[C].getPixelForValue(ft)}Q=this._getYAxisLabelAlignment(S).textAlign}i==="y"&&(p==="start"?R="top":p==="end"&&(R="bottom"));const I=this._getLabelSizes();for(A=0,H=h.length;A<H;++A){X=h[A],G=X.label;const C=u.setContext(this.getContext(A));q=this.getPixelForTick(A)+u.labelOffset,ht=this._resolveTickFontOptions(A),it=ht.lineHeight,tt=Pe(G)?G.length:1;const ft=tt/2,Rt=C.color,jt=C.textStrokeColor,$=C.textStrokeWidth;let gt=Q;f?(K=q,Q==="inner"&&(A===H-1?gt=this.options.reverse?"left":"right":A===0?gt=this.options.reverse?"right":"left":gt="center"),l==="top"?m==="near"||L!==0?st=-tt*it+it/2:m==="center"?st=-I.highest.height/2-ft*it+it:st=-I.highest.height+it/2:m==="near"||L!==0?st=it/2:m==="center"?st=I.highest.height/2-ft*it:st=I.highest.height-tt*it,w&&(st*=-1),L!==0&&!C.showLabelBackdrop&&(K+=it/2*Math.sin(L))):(Y=q,st=(1-tt)*it/2);let lt;if(C.showLabelBackdrop){const Tt=mi(C.backdropPadding),It=I.heights[A],zt=I.widths[A];let Et=st-Tt.top,mt=0-Tt.left;switch(R){case"middle":Et-=It/2;break;case"bottom":Et-=It;break}switch(Q){case"center":mt-=zt/2;break;case"right":mt-=zt;break;case"inner":A===H-1?mt-=zt:A>0&&(mt-=zt/2);break}lt={left:mt,top:Et,width:zt+Tt.width,height:It+Tt.height,color:C.backdropColor}}P.push({label:G,font:ht,textOffset:st,options:{rotation:L,color:Rt,strokeColor:jt,strokeWidth:$,textAlign:gt,textBaseline:R,translation:[K,Y],backdrop:lt}})}return P}_getXAxisLabelAlignment(){const{position:e,ticks:i}=this.options;if(-Wn(this.labelRotation))return e==="top"?"left":"right";let l="center";return i.align==="start"?l="left":i.align==="end"?l="right":i.align==="inner"&&(l="inner"),l}_getYAxisLabelAlignment(e){const{position:i,ticks:{crossAlign:s,mirror:l,padding:u}}=this.options,f=this._getLabelSizes(),h=e+u,p=f.widest.width;let m,b;return i==="left"?l?(b=this.right+u,s==="near"?m="left":s==="center"?(m="center",b+=p/2):(m="right",b+=p)):(b=this.right-h,s==="near"?m="right":s==="center"?(m="center",b-=p/2):(m="left",b=this.left)):i==="right"?l?(b=this.left+u,s==="near"?m="right":s==="center"?(m="center",b-=p/2):(m="left",b-=p)):(b=this.left+h,s==="near"?m="left":s==="center"?(m="center",b+=p/2):(m="right",b=this.right)):m="right",{textAlign:m,x:b}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,i=this.options.position;if(i==="left"||i==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(i==="top"||i==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:i},left:s,top:l,width:u,height:f}=this;i&&(e.save(),e.fillStyle=i,e.fillRect(s,l,u,f),e.restore())}getLineWidthForValue(e){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const l=this.ticks.findIndex(u=>u.value===e);return l>=0?i.setContext(this.getContext(l)).lineWidth:0}drawGrid(e){const i=this.options.grid,s=this.ctx,l=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let u,f;const h=(p,m,b)=>{!b.width||!b.color||(s.save(),s.lineWidth=b.width,s.strokeStyle=b.color,s.setLineDash(b.borderDash||[]),s.lineDashOffset=b.borderDashOffset,s.beginPath(),s.moveTo(p.x,p.y),s.lineTo(m.x,m.y),s.stroke(),s.restore())};if(i.display)for(u=0,f=l.length;u<f;++u){const p=l[u];i.drawOnChartArea&&h({x:p.x1,y:p.y1},{x:p.x2,y:p.y2},p),i.drawTicks&&h({x:p.tx1,y:p.ty1},{x:p.tx2,y:p.ty2},{color:p.tickColor,width:p.tickWidth,borderDash:p.tickBorderDash,borderDashOffset:p.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:i,options:{border:s,grid:l}}=this,u=s.setContext(this.getContext()),f=s.display?u.width:0;if(!f)return;const h=l.setContext(this.getContext(0)).lineWidth,p=this._borderValue;let m,b,w,S;this.isHorizontal()?(m=An(e,this.left,f)-f/2,b=An(e,this.right,h)+h/2,w=S=p):(w=An(e,this.top,f)-f/2,S=An(e,this.bottom,h)+h/2,m=b=p),i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.beginPath(),i.moveTo(m,w),i.lineTo(b,S),i.stroke(),i.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,l=this._computeLabelArea();l&&Pl(s,l);const u=this.getLabelItems(e);for(const f of u){const h=f.options,p=f.font,m=f.label,b=f.textOffset;Ss(s,m,0,b,p,h)}l&&Ol(s)}drawTitle(){const{ctx:e,options:{position:i,title:s,reverse:l}}=this;if(!s.display)return;const u=Ue(s.font),f=mi(s.padding),h=s.align;let p=u.lineHeight/2;i==="bottom"||i==="center"||Qt(i)?(p+=f.bottom,Pe(s.text)&&(p+=u.lineHeight*(s.text.length-1))):p+=f.top;const{titleX:m,titleY:b,maxWidth:w,rotation:S}=O0(this,p,i,h);Ss(e,s.text,0,0,u,{color:s.color,maxWidth:w,rotation:S,textAlign:P0(h,i,l),textBaseline:"middle",translation:[m,b]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,i=e.ticks&&e.ticks.z||0,s=Gt(e.grid&&e.grid.z,-1),l=Gt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==_r.prototype.draw?[{z:i,draw:u=>{this.draw(u)}}]:[{z:s,draw:u=>{this.drawBackground(),this.drawGrid(u),this.drawTitle()}},{z:l,draw:()=>{this.drawBorder()}},{z:i,draw:u=>{this.drawLabels(u)}}]}getMatchingVisibleMetas(e){const i=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",l=[];let u,f;for(u=0,f=i.length;u<f;++u){const h=i[u];h[s]===this.id&&(!e||h.type===e)&&l.push(h)}return l}_resolveTickFontOptions(e){const i=this.options.ticks.setContext(this.getContext(e));return Ue(i.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class xo{constructor(e,i,s){this.type=e,this.scope=i,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const i=Object.getPrototypeOf(e);let s;E0(i)&&(s=this.register(i));const l=this.items,u=e.id,f=this.scope+"."+u;if(!u)throw new Error("class does not have id: "+e);return u in l||(l[u]=e,A0(e,f,s),this.override&&be.override(e.id,e.overrides)),f}get(e){return this.items[e]}unregister(e){const i=this.items,s=e.id,l=this.scope;s in i&&delete i[s],l&&s in be[l]&&(delete be[l][s],this.override&&delete Un[s])}}function A0(n,e,i){const s=_s(Object.create(null),[i?be.get(i):{},be.get(e),n.defaults]);be.set(e,s),n.defaultRoutes&&I0(e,n.defaultRoutes),n.descriptors&&be.describe(e,n.descriptors)}function I0(n,e){Object.keys(e).forEach(i=>{const s=i.split("."),l=s.pop(),u=[n].concat(s).join("."),f=e[i].split("."),h=f.pop(),p=f.join(".");be.route(u,l,p,h)})}function E0(n){return"id"in n&&"defaults"in n}class F0{constructor(){this.controllers=new xo(ys,"datasets",!0),this.elements=new xo(en,"elements"),this.plugins=new xo(Object,"plugins"),this.scales=new xo(_r,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,i,s){[...i].forEach(l=>{const u=s||this._getRegistryForType(l);s||u.isForType(l)||u===this.plugins&&l.id?this._exec(e,u,l):ie(l,f=>{const h=s||this._getRegistryForType(f);this._exec(e,h,f)})})}_exec(e,i,s){const l=Ml(e);ae(s["before"+l],[],s),i[e](s),ae(s["after"+l],[],s)}_getRegistryForType(e){for(let i=0;i<this._typedRegistries.length;i++){const s=this._typedRegistries[i];if(s.isForType(e))return s}return this.plugins}_get(e,i,s){const l=i.get(e);if(l===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return l}}var Ii=new F0;class R0{constructor(){this._init=[]}notify(e,i,s,l){i==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const u=l?this._descriptors(e).filter(l):this._descriptors(e),f=this._notify(u,e,i,s);return i==="afterDestroy"&&(this._notify(u,e,"stop"),this._notify(this._init,e,"uninstall")),f}_notify(e,i,s,l){l=l||{};for(const u of e){const f=u.plugin,h=f[s],p=[i,l,u.options];if(ae(h,p,f)===!1&&l.cancelable)return!1}return!0}invalidate(){ge(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),i}_createDescriptors(e,i){const s=e&&e.config,l=Gt(s.options&&s.options.plugins,{}),u=W0(s);return l===!1&&!i?[]:z0(e,u,l,i)}_notifyStateChanges(e){const i=this._oldCache||[],s=this._cache,l=(u,f)=>u.filter(h=>!f.some(p=>h.plugin.id===p.plugin.id));this._notify(l(i,s),e,"stop"),this._notify(l(s,i),e,"start")}}function W0(n){const e={},i=[],s=Object.keys(Ii.plugins.items);for(let u=0;u<s.length;u++)i.push(Ii.getPlugin(s[u]));const l=n.plugins||[];for(let u=0;u<l.length;u++){const f=l[u];i.indexOf(f)===-1&&(i.push(f),e[f.id]=!0)}return{plugins:i,localIds:e}}function H0(n,e){return!e&&n===!1?null:n===!0?{}:n}function z0(n,{plugins:e,localIds:i},s,l){const u=[],f=n.getContext();for(const h of e){const p=h.id,m=H0(s[p],l);m!==null&&u.push({plugin:h,options:B0(n.config,{plugin:h,local:i[p]},m,f)})}return u}function B0(n,{plugin:e,local:i},s,l){const u=n.pluginScopeKeys(e),f=n.getOptionScopes(s,u);return i&&e.defaults&&f.push(e.defaults),n.createResolver(f,l,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ul(n,e){const i=be.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function U0(n,e){let i=n;return n==="_index_"?i=e:n==="_value_"&&(i=e==="x"?"y":"x"),i}function $0(n,e){return n===e?"_index_":"_value_"}function Yf(n){if(n==="x"||n==="y"||n==="r")return n}function j0(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function fl(n,...e){if(Yf(n))return n;for(const i of e){const s=i.axis||j0(i.position)||n.length>1&&Yf(n[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Kf(n,e,i){if(i[e+"AxisID"]===n)return{axis:e}}function V0(n,e){if(e.data&&e.data.datasets){const i=e.data.datasets.filter(s=>s.xAxisID===n||s.yAxisID===n);if(i.length)return Kf(n,"x",i[0])||Kf(n,"y",i[0])}return{}}function Y0(n,e){const i=Un[n.type]||{scales:{}},s=e.scales||{},l=ul(n.type,e),u=Object.create(null);return Object.keys(s).forEach(f=>{const h=s[f];if(!Qt(h))return console.error(`Invalid scale configuration for scale: ${f}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${f}`);const p=fl(f,h,V0(f,n),be.scales[h.type]),m=$0(p,l),b=i.scales||{};u[f]=ds(Object.create(null),[{axis:p},h,b[p],b[m]])}),n.data.datasets.forEach(f=>{const h=f.type||n.type,p=f.indexAxis||ul(h,e),b=(Un[h]||{}).scales||{};Object.keys(b).forEach(w=>{const S=U0(w,p),T=f[S+"AxisID"]||S;u[T]=u[T]||Object.create(null),ds(u[T],[{axis:S},s[T],b[w]])})}),Object.keys(u).forEach(f=>{const h=u[f];ds(h,[be.scales[h.type],be.scale])}),u}function kd(n){const e=n.options||(n.options={});e.plugins=Gt(e.plugins,{}),e.scales=Y0(n,e)}function Sd(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function K0(n){return n=n||{},n.data=Sd(n.data),kd(n),n}const Xf=new Map,Cd=new Set;function _o(n,e){let i=Xf.get(n);return i||(i=e(),Xf.set(n,i),Cd.add(i)),i}const ss=(n,e,i)=>{const s=Fo(e,i);s!==void 0&&n.add(s)};class X0{constructor(e){this._config=K0(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Sd(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),kd(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return _o(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,i){return _o(`${e}.transition.${i}`,()=>[[`datasets.${e}.transitions.${i}`,`transitions.${i}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,i){return _o(`${e}-${i}`,()=>[[`datasets.${e}.elements.${i}`,`datasets.${e}`,`elements.${i}`,""]])}pluginScopeKeys(e){const i=e.id,s=this.type;return _o(`${s}-plugin-${i}`,()=>[[`plugins.${i}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,i){const s=this._scopeCache;let l=s.get(e);return(!l||i)&&(l=new Map,s.set(e,l)),l}getOptionScopes(e,i,s){const{options:l,type:u}=this,f=this._cachedScopes(e,s),h=f.get(i);if(h)return h;const p=new Set;i.forEach(b=>{e&&(p.add(e),b.forEach(w=>ss(p,e,w))),b.forEach(w=>ss(p,l,w)),b.forEach(w=>ss(p,Un[u]||{},w)),b.forEach(w=>ss(p,be,w)),b.forEach(w=>ss(p,al,w))});const m=Array.from(p);return m.length===0&&m.push(Object.create(null)),Cd.has(i)&&f.set(i,m),m}chartOptionScopes(){const{options:e,type:i}=this;return[e,Un[i]||{},be.datasets[i]||{},{type:i},be,al]}resolveNamedOptions(e,i,s,l=[""]){const u={$shared:!0},{resolver:f,subPrefixes:h}=Gf(this._resolverCache,e,l);let p=f;if(q0(f,i)){u.$shared=!1,s=xn(s)?s():s;const m=this.createResolver(e,s,h);p=yr(f,s,m)}for(const m of i)u[m]=p[m];return u}createResolver(e,i,s=[""],l){const{resolver:u}=Gf(this._resolverCache,e,s);return Qt(i)?yr(u,i,void 0,l):u}}function Gf(n,e,i){let s=n.get(e);s||(s=new Map,n.set(e,s));const l=i.join();let u=s.get(l);return u||(u={resolver:Al(e,i),subPrefixes:i.filter(h=>!h.toLowerCase().includes("hover"))},s.set(l,u)),u}const G0=n=>Qt(n)&&Object.getOwnPropertyNames(n).some(e=>xn(n[e]));function q0(n,e){const{isScriptable:i,isIndexable:s}=ld(n);for(const l of e){const u=i(l),f=s(l),h=(f||u)&&n[l];if(u&&(xn(h)||G0(h))||f&&Pe(h))return!0}return!1}var Z0="4.4.7";const J0=["top","bottom","left","right","chartArea"];function qf(n,e){return n==="top"||n==="bottom"||J0.indexOf(n)===-1&&e==="x"}function Zf(n,e){return function(i,s){return i[n]===s[n]?i[e]-s[e]:i[n]-s[n]}}function Jf(n){const e=n.chart,i=e.options.animation;e.notifyPlugins("afterRender"),ae(i&&i.onComplete,[n],e)}function Q0(n){const e=n.chart,i=e.options.animation;ae(i&&i.onProgress,[n],e)}function Td(n){return Fl()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const Do={},Qf=n=>{const e=Td(n);return Object.values(Do).filter(i=>i.canvas===e).pop()};function tb(n,e,i){const s=Object.keys(n);for(const l of s){const u=+l;if(u>=e){const f=n[l];delete n[l],(i>0||u>e)&&(n[u+i]=f)}}}function eb(n,e,i,s){return!i||n.type==="mouseout"?null:s?e:n}function wo(n,e,i){return n.options.clip?n[i]:e[i]}function ib(n,e){const{xScale:i,yScale:s}=n;return i&&s?{left:wo(i,e,"left"),right:wo(i,e,"right"),top:wo(s,e,"top"),bottom:wo(s,e,"bottom")}:e}var gn;let Yo=(gn=class{static register(...e){Ii.add(...e),th()}static unregister(...e){Ii.remove(...e),th()}constructor(e,i){const s=this.config=new X0(i),l=Td(e),u=Qf(l);if(u)throw new Error("Canvas is already in use. Chart with ID '"+u.id+"' must be destroyed before the canvas with ID '"+u.canvas.id+"' can be reused.");const f=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||b0(l)),this.platform.updateConfig(s);const h=this.platform.acquireContext(l,f.aspectRatio),p=h&&h.canvas,m=p&&p.height,b=p&&p.width;if(this.id=lv(),this.ctx=h,this.canvas=p,this.width=b,this.height=m,this._options=f,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new R0,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Lv(w=>this.update(w),f.resizeDelay||0),this._dataChanges=[],Do[this.id]=this,!h||!p){console.error("Failed to create chart: can't acquire context from the given item");return}Gi.listen(this,"complete",Jf),Gi.listen(this,"progress",Q0),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:i},width:s,height:l,_aspectRatio:u}=this;return ge(e)?i&&u?u:l?s/l:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ii}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Cf(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return wf(this.canvas,this.ctx),this}stop(){return Gi.stop(this),this}resize(e,i){Gi.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){const s=this.options,l=this.canvas,u=s.maintainAspectRatio&&this.aspectRatio,f=this.platform.getMaximumSize(l,e,i,u),h=s.devicePixelRatio||this.platform.getDevicePixelRatio(),p=this.width?"resize":"attach";this.width=f.width,this.height=f.height,this._aspectRatio=this.aspectRatio,Cf(this,h,!0)&&(this.notifyPlugins("resize",{size:f}),ae(s.onResize,[this,f],this),this.attached&&this._doResize(p)&&this.render())}ensureScalesHaveIDs(){const i=this.options.scales||{};ie(i,(s,l)=>{s.id=l})}buildOrUpdateScales(){const e=this.options,i=e.scales,s=this.scales,l=Object.keys(s).reduce((f,h)=>(f[h]=!1,f),{});let u=[];i&&(u=u.concat(Object.keys(i).map(f=>{const h=i[f],p=fl(f,h),m=p==="r",b=p==="x";return{options:h,dposition:m?"chartArea":b?"bottom":"left",dtype:m?"radialLinear":b?"category":"linear"}}))),ie(u,f=>{const h=f.options,p=h.id,m=fl(p,h),b=Gt(h.type,f.dtype);(h.position===void 0||qf(h.position,m)!==qf(f.dposition))&&(h.position=f.dposition),l[p]=!0;let w=null;if(p in s&&s[p].type===b)w=s[p];else{const S=Ii.getScale(b);w=new S({id:p,type:b,ctx:this.ctx,chart:this}),s[w.id]=w}w.init(h,e)}),ie(l,(f,h)=>{f||delete s[h]}),ie(s,f=>{pi.configure(this,f,f.options),pi.addBox(this,f)})}_updateMetasets(){const e=this._metasets,i=this.data.datasets.length,s=e.length;if(e.sort((l,u)=>l.index-u.index),s>i){for(let l=i;l<s;++l)this._destroyDatasetMeta(l);e.splice(i,s-i)}this._sortedMetasets=e.slice(0).sort(Zf("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((s,l)=>{i.filter(u=>u===s._dataset).length===0&&this._destroyDatasetMeta(l)})}buildOrUpdateControllers(){const e=[],i=this.data.datasets;let s,l;for(this._removeUnreferencedMetasets(),s=0,l=i.length;s<l;s++){const u=i[s];let f=this.getDatasetMeta(s);const h=u.type||this.config.type;if(f.type&&f.type!==h&&(this._destroyDatasetMeta(s),f=this.getDatasetMeta(s)),f.type=h,f.indexAxis=u.indexAxis||ul(h,this.options),f.order=u.order||0,f.index=s,f.label=""+u.label,f.visible=this.isDatasetVisible(s),f.controller)f.controller.updateIndex(s),f.controller.linkScales();else{const p=Ii.getController(h),{datasetElementType:m,dataElementType:b}=be.datasets[h];Object.assign(p,{dataElementType:Ii.getElement(b),datasetElementType:m&&Ii.getElement(m)}),f.controller=new p(this,s),e.push(f.controller)}}return this._updateMetasets(),e}_resetElements(){ie(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const i=this.config;i.update();const s=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),l=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const u=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let f=0;for(let m=0,b=this.data.datasets.length;m<b;m++){const{controller:w}=this.getDatasetMeta(m),S=!l&&u.indexOf(w)===-1;w.buildOrUpdateElements(S),f=Math.max(+w.getMaxOverflow(),f)}f=this._minPadding=s.layout.autoPadding?f:0,this._updateLayout(f),l||ie(u,m=>{m.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Zf("z","_idx"));const{_active:h,_lastEvent:p}=this;p?this._eventHandler(p,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){ie(this.scales,e=>{pi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,i=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!hf(i,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,i=this._getUniformDataChanges()||[];for(const{method:s,start:l,count:u}of i){const f=s==="_removeElements"?-u:u;tb(e,l,f)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const i=this.data.datasets.length,s=u=>new Set(e.filter(f=>f[0]===u).map((f,h)=>h+","+f.splice(1).join(","))),l=s(0);for(let u=1;u<i;u++)if(!hf(l,s(u)))return;return Array.from(l).map(u=>u.split(",")).map(u=>({method:u[1],start:+u[2],count:+u[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;pi.update(this,this.width,this.height,e);const i=this.chartArea,s=i.width<=0||i.height<=0;this._layers=[],ie(this.boxes,l=>{s&&l.position==="chartArea"||(l.configure&&l.configure(),this._layers.push(...l._layers()))},this),this._layers.forEach((l,u)=>{l._idx=u}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let i=0,s=this.data.datasets.length;i<s;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,s=this.data.datasets.length;i<s;++i)this._updateDataset(i,xn(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){const s=this.getDatasetMeta(e),l={meta:s,index:e,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",l)!==!1&&(s.controller._update(i),l.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",l))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Gi.has(this)?this.attached&&!Gi.running(this)&&Gi.start(this):(this.draw(),Jf({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:l}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,l)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const i=this._sortedMetasets,s=[];let l,u;for(l=0,u=i.length;l<u;++l){const f=i[l];(!e||f.visible)&&s.push(f)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const i=this.ctx,s=e._clip,l=!s.disabled,u=ib(e,this.chartArea),f={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",f)!==!1&&(l&&Pl(i,{left:s.left===!1?0:u.left-s.left,right:s.right===!1?this.width:u.right+s.right,top:s.top===!1?0:u.top-s.top,bottom:s.bottom===!1?this.height:u.bottom+s.bottom}),e.controller.draw(),l&&Ol(i),f.cancelable=!1,this.notifyPlugins("afterDatasetDraw",f))}isPointInArea(e){return ks(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,s,l){const u=Jy.modes[i];return typeof u=="function"?u(this,e,s,l):[]}getDatasetMeta(e){const i=this.data.datasets[e],s=this._metasets;let l=s.filter(u=>u&&u._dataset===i).pop();return l||(l={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},s.push(l)),l}getContext(){return this.$context||(this.$context=$n(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const i=this.data.datasets[e];if(!i)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!i.hidden}setDatasetVisibility(e,i){const s=this.getDatasetMeta(e);s.hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,s){const l=s?"show":"hide",u=this.getDatasetMeta(e),f=u.controller._resolveAnimations(void 0,l);Ro(i)?(u.data[i].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),f.update(u,{visible:s}),this.update(h=>h.datasetIndex===e?l:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){const i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),Gi.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),wf(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete Do[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,i=this.platform,s=(u,f)=>{i.addEventListener(this,u,f),e[u]=f},l=(u,f,h)=>{u.offsetX=f,u.offsetY=h,this._eventHandler(u)};ie(this.options.events,u=>s(u,l))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,i=this.platform,s=(p,m)=>{i.addEventListener(this,p,m),e[p]=m},l=(p,m)=>{e[p]&&(i.removeEventListener(this,p,m),delete e[p])},u=(p,m)=>{this.canvas&&this.resize(p,m)};let f;const h=()=>{l("attach",h),this.attached=!0,this.resize(),s("resize",u),s("detach",f)};f=()=>{this.attached=!1,l("resize",u),this._stop(),this._resize(0,0),s("attach",h)},i.isAttached(this.canvas)?h():f()}unbindEvents(){ie(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},ie(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,s){const l=s?"set":"remove";let u,f,h,p;for(i==="dataset"&&(u=this.getDatasetMeta(e[0].datasetIndex),u.controller["_"+l+"DatasetHoverStyle"]()),h=0,p=e.length;h<p;++h){f=e[h];const m=f&&this.getDatasetMeta(f.datasetIndex).controller;m&&m[l+"HoverStyle"](f.element,f.datasetIndex,f.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const i=this._active||[],s=e.map(({datasetIndex:u,index:f})=>{const h=this.getDatasetMeta(u);if(!h)throw new Error("No dataset found at index "+u);return{datasetIndex:u,element:h.data[f],index:f}});!Io(s,i)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,i))}notifyPlugins(e,i,s){return this._plugins.notify(this,e,i,s)}isPluginEnabled(e){return this._plugins._cache.filter(i=>i.plugin.id===e).length===1}_updateHoverStyles(e,i,s){const l=this.options.hover,u=(p,m)=>p.filter(b=>!m.some(w=>b.datasetIndex===w.datasetIndex&&b.index===w.index)),f=u(i,e),h=s?e:u(e,i);f.length&&this.updateHoverStyle(f,l.mode,!1),h.length&&l.mode&&this.updateHoverStyle(h,l.mode,!0)}_eventHandler(e,i){const s={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},l=f=>(f.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,l)===!1)return;const u=this._handleEvent(e,i,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,l),(u||s.changed)&&this.render(),this}_handleEvent(e,i,s){const{_active:l=[],options:u}=this,f=i,h=this._getActiveElements(e,l,s,f),p=pv(e),m=eb(e,this._lastEvent,s,p);s&&(this._lastEvent=null,ae(u.onHover,[e,h,this],this),p&&ae(u.onClick,[e,h,this],this));const b=!Io(h,l);return(b||i)&&(this._active=h,this._updateHoverStyles(h,l,i)),this._lastEvent=m,b}_getActiveElements(e,i,s,l){if(e.type==="mouseout")return[];if(!s)return i;const u=this.options.hover;return this.getElementsAtEventForMode(e,u.mode,u,l)}},Ht(gn,"defaults",be),Ht(gn,"instances",Do),Ht(gn,"overrides",Un),Ht(gn,"registry",Ii),Ht(gn,"version",Z0),Ht(gn,"getChart",Qf),gn);function th(){return ie(Yo.instances,n=>n._plugins.invalidate())}function Md(n,e,i=e){n.lineCap=Gt(i.borderCapStyle,e.borderCapStyle),n.setLineDash(Gt(i.borderDash,e.borderDash)),n.lineDashOffset=Gt(i.borderDashOffset,e.borderDashOffset),n.lineJoin=Gt(i.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Gt(i.borderWidth,e.borderWidth),n.strokeStyle=Gt(i.borderColor,e.borderColor)}function nb(n,e,i){n.lineTo(i.x,i.y)}function rb(n){return n.stepped?Bv:n.tension||n.cubicInterpolationMode==="monotone"?Uv:nb}function Ld(n,e,i={}){const s=n.length,{start:l=0,end:u=s-1}=i,{start:f,end:h}=e,p=Math.max(l,f),m=Math.min(u,h),b=l<f&&u<f||l>h&&u>h;return{count:s,start:p,loop:e.loop,ilen:m<p&&!b?s+m-p:m-p}}function sb(n,e,i,s){const{points:l,options:u}=e,{count:f,start:h,loop:p,ilen:m}=Ld(l,i,s),b=rb(u);let{move:w=!0,reverse:S}=s||{},T,O,L;for(T=0;T<=m;++T)O=l[(h+(S?m-T:T))%f],!O.skip&&(w?(n.moveTo(O.x,O.y),w=!1):b(n,L,O,S,u.stepped),L=O);return p&&(O=l[(h+(S?m:0))%f],b(n,L,O,S,u.stepped)),!!p}function ob(n,e,i,s){const l=e.points,{count:u,start:f,ilen:h}=Ld(l,i,s),{move:p=!0,reverse:m}=s||{};let b=0,w=0,S,T,O,L,P,A;const H=G=>(f+(m?h-G:G))%u,X=()=>{L!==P&&(n.lineTo(b,P),n.lineTo(b,L),n.lineTo(b,A))};for(p&&(T=l[H(0)],n.moveTo(T.x,T.y)),S=0;S<=h;++S){if(T=l[H(S)],T.skip)continue;const G=T.x,K=T.y,Y=G|0;Y===O?(K<L?L=K:K>P&&(P=K),b=(w*b+G)/++w):(X(),n.lineTo(G,K),O=Y,w=0,L=P=K),A=K}X()}function hl(n){const e=n.options,i=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!i?ob:sb}function ab(n){return n.stepped?_y:n.tension||n.cubicInterpolationMode==="monotone"?wy:Fn}function lb(n,e,i,s){let l=e._path;l||(l=e._path=new Path2D,e.path(l,i,s)&&l.closePath()),Md(n,e.options),n.stroke(l)}function cb(n,e,i,s){const{segments:l,options:u}=e,f=hl(e);for(const h of l)Md(n,u,h.style),n.beginPath(),f(n,e,h,{start:i,end:i+s-1})&&n.closePath(),n.stroke()}const ub=typeof Path2D=="function";function fb(n,e,i,s){ub&&!e.options.segment?lb(n,e,i,s):cb(n,e,i,s)}class us extends en{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const l=s.spanGaps?this._loop:this._fullLoop;dy(this._points,s,e,l,i),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Dy(this,this.options.segment))}first(){const e=this.segments,i=this.points;return e.length&&i[e[0].start]}last(){const e=this.segments,i=this.points,s=e.length;return s&&i[e[s-1].end]}interpolate(e,i){const s=this.options,l=e[i],u=this.points,f=My(this,{property:i,start:l,end:l});if(!f.length)return;const h=[],p=ab(s);let m,b;for(m=0,b=f.length;m<b;++m){const{start:w,end:S}=f[m],T=u[w],O=u[S];if(T===O){h.push(T);continue}const L=Math.abs((l-T[i])/(O[i]-T[i])),P=p(T,O,L,s.stepped);P[i]=e[i],h.push(P)}return h.length===1?h[0]:h}pathSegment(e,i,s){return hl(this)(e,this,i,s)}path(e,i,s){const l=this.segments,u=hl(this);let f=this._loop;i=i||0,s=s||this.points.length-i;for(const h of l)f&=u(e,this,h,{start:i,end:i+s-1});return!!f}draw(e,i,s,l){const u=this.options||{};(this.points||[]).length&&u.borderWidth&&(e.save(),fb(e,this,s,l),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ht(us,"id","line"),Ht(us,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ht(us,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ht(us,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function eh(n,e,i,s){const l=n.options,{[i]:u}=n.getProps([i],s);return Math.abs(e-u)<l.radius+l.hitRadius}class Po extends en{constructor(i){super();Ht(this,"parsed");Ht(this,"skip");Ht(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,i&&Object.assign(this,i)}inRange(i,s,l){const u=this.options,{x:f,y:h}=this.getProps(["x","y"],l);return Math.pow(i-f,2)+Math.pow(s-h,2)<Math.pow(u.hitRadius+u.radius,2)}inXRange(i,s){return eh(this,i,"x",s)}inYRange(i,s){return eh(this,i,"y",s)}getCenterPoint(i){const{x:s,y:l}=this.getProps(["x","y"],i);return{x:s,y:l}}size(i){i=i||this.options||{};let s=i.radius||0;s=Math.max(s,s&&i.hoverRadius||0);const l=s&&i.borderWidth||0;return(s+l)*2}draw(i,s){const l=this.options;this.skip||l.radius<.1||!ks(this,s,this.size(l)/2)||(i.strokeStyle=l.borderColor,i.lineWidth=l.borderWidth,i.fillStyle=l.backgroundColor,ll(i,l,this.x,this.y))}getRange(){const i=this.options||{};return i.radius+i.hitRadius}}Ht(Po,"id","point"),Ht(Po,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ht(Po,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const ih=(n,e)=>{let{boxHeight:i=e,boxWidth:s=e}=n;return n.usePointStyle&&(i=Math.min(i,e),s=n.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:i,itemHeight:Math.max(e,i)}},hb=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class nh extends en{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i,s){this.maxWidth=e,this.maxHeight=i,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let i=ae(e.generateLabels,[this.chart],this)||[];e.filter&&(i=i.filter(s=>e.filter(s,this.chart.data))),e.sort&&(i=i.sort((s,l)=>e.sort(s,l,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:e,ctx:i}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,l=Ue(s.font),u=l.size,f=this._computeTitleHeight(),{boxWidth:h,itemHeight:p}=ih(s,u);let m,b;i.font=l.string,this.isHorizontal()?(m=this.maxWidth,b=this._fitRows(f,u,h,p)+10):(b=this.maxHeight,m=this._fitCols(f,l,h,p)+10),this.width=Math.min(m,e.maxWidth||this.maxWidth),this.height=Math.min(b,e.maxHeight||this.maxHeight)}_fitRows(e,i,s,l){const{ctx:u,maxWidth:f,options:{labels:{padding:h}}}=this,p=this.legendHitBoxes=[],m=this.lineWidths=[0],b=l+h;let w=e;u.textAlign="left",u.textBaseline="middle";let S=-1,T=-b;return this.legendItems.forEach((O,L)=>{const P=s+i/2+u.measureText(O.text).width;(L===0||m[m.length-1]+P+2*h>f)&&(w+=b,m[m.length-(L>0?0:1)]=0,T+=b,S++),p[L]={left:0,top:T,row:S,width:P,height:l},m[m.length-1]+=P+h}),w}_fitCols(e,i,s,l){const{ctx:u,maxHeight:f,options:{labels:{padding:h}}}=this,p=this.legendHitBoxes=[],m=this.columnSizes=[],b=f-e;let w=h,S=0,T=0,O=0,L=0;return this.legendItems.forEach((P,A)=>{const{itemWidth:H,itemHeight:X}=db(s,i,u,P,l);A>0&&T+X+2*h>b&&(w+=S+h,m.push({width:S,height:T}),O+=S+h,L++,S=T=0),p[A]={left:O,top:T,col:L,width:H,height:X},S=Math.max(S,H),T+=X+h}),w+=S,m.push({width:S,height:T}),w}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:s,labels:{padding:l},rtl:u}}=this,f=pr(u,this.left,this.width);if(this.isHorizontal()){let h=0,p=Be(s,this.left+l,this.right-this.lineWidths[h]);for(const m of i)h!==m.row&&(h=m.row,p=Be(s,this.left+l,this.right-this.lineWidths[h])),m.top+=this.top+e+l,m.left=f.leftForLtr(f.x(p),m.width),p+=m.width+l}else{let h=0,p=Be(s,this.top+e+l,this.bottom-this.columnSizes[h].height);for(const m of i)m.col!==h&&(h=m.col,p=Be(s,this.top+e+l,this.bottom-this.columnSizes[h].height)),m.top=p,m.left+=this.left+l,m.left=f.leftForLtr(f.x(m.left),m.width),p+=m.height+l}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Pl(e,this),this._draw(),Ol(e)}}_draw(){const{options:e,columnSizes:i,lineWidths:s,ctx:l}=this,{align:u,labels:f}=e,h=be.color,p=pr(e.rtl,this.left,this.width),m=Ue(f.font),{padding:b}=f,w=m.size,S=w/2;let T;this.drawTitle(),l.textAlign=p.textAlign("left"),l.textBaseline="middle",l.lineWidth=.5,l.font=m.string;const{boxWidth:O,boxHeight:L,itemHeight:P}=ih(f,w),A=function(Y,Q,q){if(isNaN(O)||O<=0||isNaN(L)||L<0)return;l.save();const ht=Gt(q.lineWidth,1);if(l.fillStyle=Gt(q.fillStyle,h),l.lineCap=Gt(q.lineCap,"butt"),l.lineDashOffset=Gt(q.lineDashOffset,0),l.lineJoin=Gt(q.lineJoin,"miter"),l.lineWidth=ht,l.strokeStyle=Gt(q.strokeStyle,h),l.setLineDash(Gt(q.lineDash,[])),f.usePointStyle){const it={radius:L*Math.SQRT2/2,pointStyle:q.pointStyle,rotation:q.rotation,borderWidth:ht},tt=p.xPlus(Y,O/2),st=Q+S;od(l,it,tt,st,f.pointStyleWidth&&O)}else{const it=Q+Math.max((w-L)/2,0),tt=p.leftForLtr(Y,O),st=vs(q.borderRadius);l.beginPath(),Object.values(st).some(R=>R!==0)?cl(l,{x:tt,y:it,w:O,h:L,radius:st}):l.rect(tt,it,O,L),l.fill(),ht!==0&&l.stroke()}l.restore()},H=function(Y,Q,q){Ss(l,q.text,Y,Q+P/2,m,{strikethrough:q.hidden,textAlign:p.textAlign(q.textAlign)})},X=this.isHorizontal(),G=this._computeTitleHeight();X?T={x:Be(u,this.left+b,this.right-s[0]),y:this.top+b+G,line:0}:T={x:this.left+b,y:Be(u,this.top+G+b,this.bottom-i[0].height),line:0},dd(this.ctx,e.textDirection);const K=P+b;this.legendItems.forEach((Y,Q)=>{l.strokeStyle=Y.fontColor,l.fillStyle=Y.fontColor;const q=l.measureText(Y.text).width,ht=p.textAlign(Y.textAlign||(Y.textAlign=f.textAlign)),it=O+S+q;let tt=T.x,st=T.y;p.setWidth(this.width),X?Q>0&&tt+it+b>this.right&&(st=T.y+=K,T.line++,tt=T.x=Be(u,this.left+b,this.right-s[T.line])):Q>0&&st+K>this.bottom&&(tt=T.x=tt+i[T.line].width+b,T.line++,st=T.y=Be(u,this.top+G+b,this.bottom-i[T.line].height));const R=p.x(tt);if(A(R,st,Y),tt=Nv(ht,tt+O+S,X?tt+it:this.right,e.rtl),H(p.x(tt),st,Y),X)T.x+=it+b;else if(typeof Y.text!="string"){const I=m.lineHeight;T.y+=Nd(Y,I)+b}else T.y+=K}),pd(this.ctx,e.textDirection)}drawTitle(){const e=this.options,i=e.title,s=Ue(i.font),l=mi(i.padding);if(!i.display)return;const u=pr(e.rtl,this.left,this.width),f=this.ctx,h=i.position,p=s.size/2,m=l.top+p;let b,w=this.left,S=this.width;if(this.isHorizontal())S=Math.max(...this.lineWidths),b=this.top+m,w=Be(e.align,w,this.right-S);else{const O=this.columnSizes.reduce((L,P)=>Math.max(L,P.height),0);b=m+Be(e.align,this.top,this.bottom-O-e.labels.padding-this._computeTitleHeight())}const T=Be(h,w,w+S);f.textAlign=u.textAlign(Nl(h)),f.textBaseline="middle",f.strokeStyle=i.color,f.fillStyle=i.color,f.font=s.string,Ss(f,i.text,T,b,s)}_computeTitleHeight(){const e=this.options.title,i=Ue(e.font),s=mi(e.padding);return e.display?i.lineHeight+s.height:0}_getLegendItemAt(e,i){let s,l,u;if(ls(e,this.left,this.right)&&ls(i,this.top,this.bottom)){for(u=this.legendHitBoxes,s=0;s<u.length;++s)if(l=u[s],ls(e,l.left,l.left+l.width)&&ls(i,l.top,l.top+l.height))return this.legendItems[s]}return null}handleEvent(e){const i=this.options;if(!mb(e.type,i))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const l=this._hoveredItem,u=hb(l,s);l&&!u&&ae(i.onLeave,[e,l,this],this),this._hoveredItem=s,s&&!u&&ae(i.onHover,[e,s,this],this)}else s&&ae(i.onClick,[e,s,this],this)}}function db(n,e,i,s,l){const u=pb(s,n,e,i),f=gb(l,s,e.lineHeight);return{itemWidth:u,itemHeight:f}}function pb(n,e,i,s){let l=n.text;return l&&typeof l!="string"&&(l=l.reduce((u,f)=>u.length>f.length?u:f)),e+i.size/2+s.measureText(l).width}function gb(n,e,i){let s=n;return typeof e.text!="string"&&(s=Nd(e,i)),s}function Nd(n,e){const i=n.text?n.text.length:0;return e*i}function mb(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var vb={id:"legend",_element:nh,start(n,e,i){const s=n.legend=new nh({ctx:n.ctx,options:i,chart:n});pi.configure(n,s,i),pi.addBox(n,s)},stop(n){pi.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,i){const s=n.legend;pi.configure(n,s,i),s.options=i},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,i){const s=e.datasetIndex,l=i.chart;l.isDatasetVisible(s)?(l.hide(s),e.hidden=!0):(l.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:i,pointStyle:s,textAlign:l,color:u,useBorderRadius:f,borderRadius:h}}=n.legend.options;return n._getSortedDatasetMetas().map(p=>{const m=p.controller.getStyle(i?0:void 0),b=mi(m.borderWidth);return{text:e[p.index].label,fillStyle:m.backgroundColor,fontColor:u,hidden:!p.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(b.width+b.height)/4,strokeStyle:m.borderColor,pointStyle:s||m.pointStyle,rotation:m.rotation,textAlign:l||m.textAlign,borderRadius:f&&(h||m.borderRadius),datasetIndex:p.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class Dd extends en{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,i){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=i;const l=Pe(s.text)?s.text.length:1;this._padding=mi(s.padding);const u=l*Ue(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=u:this.width=u}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:i,left:s,bottom:l,right:u,options:f}=this,h=f.align;let p=0,m,b,w;return this.isHorizontal()?(b=Be(h,s,u),w=i+e,m=u-s):(f.position==="left"?(b=s+e,w=Be(h,l,i),p=Oe*-.5):(b=u-e,w=Be(h,i,l),p=Oe*.5),m=l-i),{titleX:b,titleY:w,maxWidth:m,rotation:p}}draw(){const e=this.ctx,i=this.options;if(!i.display)return;const s=Ue(i.font),u=s.lineHeight/2+this._padding.top,{titleX:f,titleY:h,maxWidth:p,rotation:m}=this._drawArgs(u);Ss(e,i.text,0,0,s,{color:i.color,maxWidth:p,rotation:m,textAlign:Nl(i.align),textBaseline:"middle",translation:[f,h]})}}function yb(n,e){const i=new Dd({ctx:n.ctx,options:e,chart:n});pi.configure(n,i,e),pi.addBox(n,i),n.titleBlock=i}var bb={id:"title",_element:Dd,start(n,e,i){yb(n,i)},stop(n){const e=n.titleBlock;pi.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,i){const s=n.titleBlock;pi.configure(n,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const fs={average(n){if(!n.length)return!1;let e,i,s=new Set,l=0,u=0;for(e=0,i=n.length;e<i;++e){const h=n[e].element;if(h&&h.hasValue()){const p=h.tooltipPosition();s.add(p.x),l+=p.y,++u}}return u===0||s.size===0?!1:{x:[...s].reduce((h,p)=>h+p)/s.size,y:l/u}},nearest(n,e){if(!n.length)return!1;let i=e.x,s=e.y,l=Number.POSITIVE_INFINITY,u,f,h;for(u=0,f=n.length;u<f;++u){const p=n[u].element;if(p&&p.hasValue()){const m=p.getCenterPoint(),b=ol(e,m);b<l&&(l=b,h=p)}}if(h){const p=h.tooltipPosition();i=p.x,s=p.y}return{x:i,y:s}}};function Ai(n,e){return e&&(Pe(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function qi(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function xb(n,e){const{element:i,datasetIndex:s,index:l}=e,u=n.getDatasetMeta(s).controller,{label:f,value:h}=u.getLabelAndValue(l);return{chart:n,label:f,parsed:u.getParsed(l),raw:n.data.datasets[s].data[l],formattedValue:h,dataset:u.getDataset(),dataIndex:l,datasetIndex:s,element:i}}function rh(n,e){const i=n.chart.ctx,{body:s,footer:l,title:u}=n,{boxWidth:f,boxHeight:h}=e,p=Ue(e.bodyFont),m=Ue(e.titleFont),b=Ue(e.footerFont),w=u.length,S=l.length,T=s.length,O=mi(e.padding);let L=O.height,P=0,A=s.reduce((G,K)=>G+K.before.length+K.lines.length+K.after.length,0);if(A+=n.beforeBody.length+n.afterBody.length,w&&(L+=w*m.lineHeight+(w-1)*e.titleSpacing+e.titleMarginBottom),A){const G=e.displayColors?Math.max(h,p.lineHeight):p.lineHeight;L+=T*G+(A-T)*p.lineHeight+(A-1)*e.bodySpacing}S&&(L+=e.footerMarginTop+S*b.lineHeight+(S-1)*e.footerSpacing);let H=0;const X=function(G){P=Math.max(P,i.measureText(G).width+H)};return i.save(),i.font=m.string,ie(n.title,X),i.font=p.string,ie(n.beforeBody.concat(n.afterBody),X),H=e.displayColors?f+2+e.boxPadding:0,ie(s,G=>{ie(G.before,X),ie(G.lines,X),ie(G.after,X)}),H=0,i.font=b.string,ie(n.footer,X),i.restore(),P+=O.width,{width:P,height:L}}function _b(n,e){const{y:i,height:s}=e;return i<s/2?"top":i>n.height-s/2?"bottom":"center"}function wb(n,e,i,s){const{x:l,width:u}=s,f=i.caretSize+i.caretPadding;if(n==="left"&&l+u+f>e.width||n==="right"&&l-u-f<0)return!0}function kb(n,e,i,s){const{x:l,width:u}=i,{width:f,chartArea:{left:h,right:p}}=n;let m="center";return s==="center"?m=l<=(h+p)/2?"left":"right":l<=u/2?m="left":l>=f-u/2&&(m="right"),wb(m,n,e,i)&&(m="center"),m}function sh(n,e,i){const s=i.yAlign||e.yAlign||_b(n,i);return{xAlign:i.xAlign||e.xAlign||kb(n,e,i,s),yAlign:s}}function Sb(n,e){let{x:i,width:s}=n;return e==="right"?i-=s:e==="center"&&(i-=s/2),i}function Cb(n,e,i){let{y:s,height:l}=n;return e==="top"?s+=i:e==="bottom"?s-=l+i:s-=l/2,s}function oh(n,e,i,s){const{caretSize:l,caretPadding:u,cornerRadius:f}=n,{xAlign:h,yAlign:p}=i,m=l+u,{topLeft:b,topRight:w,bottomLeft:S,bottomRight:T}=vs(f);let O=Sb(e,h);const L=Cb(e,p,m);return p==="center"?h==="left"?O+=m:h==="right"&&(O-=m):h==="left"?O-=Math.max(b,S)+l:h==="right"&&(O+=Math.max(w,T)+l),{x:di(O,0,s.width-e.width),y:di(L,0,s.height-e.height)}}function ko(n,e,i){const s=mi(i.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-s.right:n.x+s.left}function ah(n){return Ai([],qi(n))}function Tb(n,e,i){return $n(n,{tooltip:e,tooltipItems:i,type:"tooltip"})}function lh(n,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?n.override(i):n}const Pd={beforeTitle:Xi,title(n){if(n.length>0){const e=n[0],i=e.chart.data.labels,s=i?i.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return i[e.dataIndex]}return""},afterTitle:Xi,beforeBody:Xi,beforeLabel:Xi,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const i=n.formattedValue;return ge(i)||(e+=i),e},labelColor(n){const i=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const i=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:Xi,afterBody:Xi,beforeFooter:Xi,footer:Xi,afterFooter:Xi};function Je(n,e,i,s){const l=n[e].call(i,s);return typeof l>"u"?Pd[e].call(i,s):l}class dl extends en{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const i=this.chart,s=this.options.setContext(this.getContext()),l=s.enabled&&i.options.animation&&s.animations,u=new md(this.chart,l);return l._cacheable&&(this._cachedAnimations=Object.freeze(u)),u}getContext(){return this.$context||(this.$context=Tb(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){const{callbacks:s}=i,l=Je(s,"beforeTitle",this,e),u=Je(s,"title",this,e),f=Je(s,"afterTitle",this,e);let h=[];return h=Ai(h,qi(l)),h=Ai(h,qi(u)),h=Ai(h,qi(f)),h}getBeforeBody(e,i){return ah(Je(i.callbacks,"beforeBody",this,e))}getBody(e,i){const{callbacks:s}=i,l=[];return ie(e,u=>{const f={before:[],lines:[],after:[]},h=lh(s,u);Ai(f.before,qi(Je(h,"beforeLabel",this,u))),Ai(f.lines,Je(h,"label",this,u)),Ai(f.after,qi(Je(h,"afterLabel",this,u))),l.push(f)}),l}getAfterBody(e,i){return ah(Je(i.callbacks,"afterBody",this,e))}getFooter(e,i){const{callbacks:s}=i,l=Je(s,"beforeFooter",this,e),u=Je(s,"footer",this,e),f=Je(s,"afterFooter",this,e);let h=[];return h=Ai(h,qi(l)),h=Ai(h,qi(u)),h=Ai(h,qi(f)),h}_createItems(e){const i=this._active,s=this.chart.data,l=[],u=[],f=[];let h=[],p,m;for(p=0,m=i.length;p<m;++p)h.push(xb(this.chart,i[p]));return e.filter&&(h=h.filter((b,w,S)=>e.filter(b,w,S,s))),e.itemSort&&(h=h.sort((b,w)=>e.itemSort(b,w,s))),ie(h,b=>{const w=lh(e.callbacks,b);l.push(Je(w,"labelColor",this,b)),u.push(Je(w,"labelPointStyle",this,b)),f.push(Je(w,"labelTextColor",this,b))}),this.labelColors=l,this.labelPointStyles=u,this.labelTextColors=f,this.dataPoints=h,h}update(e,i){const s=this.options.setContext(this.getContext()),l=this._active;let u,f=[];if(!l.length)this.opacity!==0&&(u={opacity:0});else{const h=fs[s.position].call(this,l,this._eventPosition);f=this._createItems(s),this.title=this.getTitle(f,s),this.beforeBody=this.getBeforeBody(f,s),this.body=this.getBody(f,s),this.afterBody=this.getAfterBody(f,s),this.footer=this.getFooter(f,s);const p=this._size=rh(this,s),m=Object.assign({},h,p),b=sh(this.chart,s,m),w=oh(s,m,b,this.chart);this.xAlign=b.xAlign,this.yAlign=b.yAlign,u={opacity:1,x:w.x,y:w.y,width:p.width,height:p.height,caretX:h.x,caretY:h.y}}this._tooltipItems=f,this.$context=void 0,u&&this._resolveAnimations().update(this,u),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,s,l){const u=this.getCaretPosition(e,s,l);i.lineTo(u.x1,u.y1),i.lineTo(u.x2,u.y2),i.lineTo(u.x3,u.y3)}getCaretPosition(e,i,s){const{xAlign:l,yAlign:u}=this,{caretSize:f,cornerRadius:h}=s,{topLeft:p,topRight:m,bottomLeft:b,bottomRight:w}=vs(h),{x:S,y:T}=e,{width:O,height:L}=i;let P,A,H,X,G,K;return u==="center"?(G=T+L/2,l==="left"?(P=S,A=P-f,X=G+f,K=G-f):(P=S+O,A=P+f,X=G-f,K=G+f),H=P):(l==="left"?A=S+Math.max(p,b)+f:l==="right"?A=S+O-Math.max(m,w)-f:A=this.caretX,u==="top"?(X=T,G=X-f,P=A-f,H=A+f):(X=T+L,G=X+f,P=A+f,H=A-f),K=X),{x1:P,x2:A,x3:H,y1:X,y2:G,y3:K}}drawTitle(e,i,s){const l=this.title,u=l.length;let f,h,p;if(u){const m=pr(s.rtl,this.x,this.width);for(e.x=ko(this,s.titleAlign,s),i.textAlign=m.textAlign(s.titleAlign),i.textBaseline="middle",f=Ue(s.titleFont),h=s.titleSpacing,i.fillStyle=s.titleColor,i.font=f.string,p=0;p<u;++p)i.fillText(l[p],m.x(e.x),e.y+f.lineHeight/2),e.y+=f.lineHeight+h,p+1===u&&(e.y+=s.titleMarginBottom-h)}}_drawColorBox(e,i,s,l,u){const f=this.labelColors[s],h=this.labelPointStyles[s],{boxHeight:p,boxWidth:m}=u,b=Ue(u.bodyFont),w=ko(this,"left",u),S=l.x(w),T=p<b.lineHeight?(b.lineHeight-p)/2:0,O=i.y+T;if(u.usePointStyle){const L={radius:Math.min(m,p)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},P=l.leftForLtr(S,m)+m/2,A=O+p/2;e.strokeStyle=u.multiKeyBackground,e.fillStyle=u.multiKeyBackground,ll(e,L,P,A),e.strokeStyle=f.borderColor,e.fillStyle=f.backgroundColor,ll(e,L,P,A)}else{e.lineWidth=Qt(f.borderWidth)?Math.max(...Object.values(f.borderWidth)):f.borderWidth||1,e.strokeStyle=f.borderColor,e.setLineDash(f.borderDash||[]),e.lineDashOffset=f.borderDashOffset||0;const L=l.leftForLtr(S,m),P=l.leftForLtr(l.xPlus(S,1),m-2),A=vs(f.borderRadius);Object.values(A).some(H=>H!==0)?(e.beginPath(),e.fillStyle=u.multiKeyBackground,cl(e,{x:L,y:O,w:m,h:p,radius:A}),e.fill(),e.stroke(),e.fillStyle=f.backgroundColor,e.beginPath(),cl(e,{x:P,y:O+1,w:m-2,h:p-2,radius:A}),e.fill()):(e.fillStyle=u.multiKeyBackground,e.fillRect(L,O,m,p),e.strokeRect(L,O,m,p),e.fillStyle=f.backgroundColor,e.fillRect(P,O+1,m-2,p-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,i,s){const{body:l}=this,{bodySpacing:u,bodyAlign:f,displayColors:h,boxHeight:p,boxWidth:m,boxPadding:b}=s,w=Ue(s.bodyFont);let S=w.lineHeight,T=0;const O=pr(s.rtl,this.x,this.width),L=function(q){i.fillText(q,O.x(e.x+T),e.y+S/2),e.y+=S+u},P=O.textAlign(f);let A,H,X,G,K,Y,Q;for(i.textAlign=f,i.textBaseline="middle",i.font=w.string,e.x=ko(this,P,s),i.fillStyle=s.bodyColor,ie(this.beforeBody,L),T=h&&P!=="right"?f==="center"?m/2+b:m+2+b:0,G=0,Y=l.length;G<Y;++G){for(A=l[G],H=this.labelTextColors[G],i.fillStyle=H,ie(A.before,L),X=A.lines,h&&X.length&&(this._drawColorBox(i,e,G,O,s),S=Math.max(w.lineHeight,p)),K=0,Q=X.length;K<Q;++K)L(X[K]),S=w.lineHeight;ie(A.after,L)}T=0,S=w.lineHeight,ie(this.afterBody,L),e.y-=u}drawFooter(e,i,s){const l=this.footer,u=l.length;let f,h;if(u){const p=pr(s.rtl,this.x,this.width);for(e.x=ko(this,s.footerAlign,s),e.y+=s.footerMarginTop,i.textAlign=p.textAlign(s.footerAlign),i.textBaseline="middle",f=Ue(s.footerFont),i.fillStyle=s.footerColor,i.font=f.string,h=0;h<u;++h)i.fillText(l[h],p.x(e.x),e.y+f.lineHeight/2),e.y+=f.lineHeight+s.footerSpacing}}drawBackground(e,i,s,l){const{xAlign:u,yAlign:f}=this,{x:h,y:p}=e,{width:m,height:b}=s,{topLeft:w,topRight:S,bottomLeft:T,bottomRight:O}=vs(l.cornerRadius);i.fillStyle=l.backgroundColor,i.strokeStyle=l.borderColor,i.lineWidth=l.borderWidth,i.beginPath(),i.moveTo(h+w,p),f==="top"&&this.drawCaret(e,i,s,l),i.lineTo(h+m-S,p),i.quadraticCurveTo(h+m,p,h+m,p+S),f==="center"&&u==="right"&&this.drawCaret(e,i,s,l),i.lineTo(h+m,p+b-O),i.quadraticCurveTo(h+m,p+b,h+m-O,p+b),f==="bottom"&&this.drawCaret(e,i,s,l),i.lineTo(h+T,p+b),i.quadraticCurveTo(h,p+b,h,p+b-T),f==="center"&&u==="left"&&this.drawCaret(e,i,s,l),i.lineTo(h,p+w),i.quadraticCurveTo(h,p,h+w,p),i.closePath(),i.fill(),l.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){const i=this.chart,s=this.$animations,l=s&&s.x,u=s&&s.y;if(l||u){const f=fs[e.position].call(this,this._active,this._eventPosition);if(!f)return;const h=this._size=rh(this,e),p=Object.assign({},f,this._size),m=sh(i,e,p),b=oh(e,p,m,i);(l._to!==b.x||u._to!==b.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=h.width,this.height=h.height,this.caretX=f.x,this.caretY=f.y,this._resolveAnimations().update(this,b))}}_willRender(){return!!this.opacity}draw(e){const i=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(i);const l={width:this.width,height:this.height},u={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const f=mi(i.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&h&&(e.save(),e.globalAlpha=s,this.drawBackground(u,e,l,i),dd(e,i.textDirection),u.y+=f.top,this.drawTitle(u,e,i),this.drawBody(u,e,i),this.drawFooter(u,e,i),pd(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){const s=this._active,l=e.map(({datasetIndex:h,index:p})=>{const m=this.chart.getDatasetMeta(h);if(!m)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:m.data[p],index:p}}),u=!Io(s,l),f=this._positionChanged(l,i);(u||f)&&(this._active=l,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,s=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const l=this.options,u=this._active||[],f=this._getActiveElements(e,u,i,s),h=this._positionChanged(f,e),p=i||!Io(f,u)||h;return p&&(this._active=f,(l.enabled||l.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),p}_getActiveElements(e,i,s,l){const u=this.options;if(e.type==="mouseout")return[];if(!l)return i.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const f=this.chart.getElementsAtEventForMode(e,u.mode,u,s);return u.reverse&&f.reverse(),f}_positionChanged(e,i){const{caretX:s,caretY:l,options:u}=this,f=fs[u.position].call(this,e,i);return f!==!1&&(s!==f.x||l!==f.y)}}Ht(dl,"positioners",fs);var Mb={id:"tooltip",_element:dl,positioners:fs,afterInit(n,e,i){i&&(n.tooltip=new dl({chart:n,options:i}))},beforeUpdate(n,e,i){n.tooltip&&n.tooltip.initialize(i)},reset(n,e,i){n.tooltip&&n.tooltip.initialize(i)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const i={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",i)}},afterEvent(n,e){if(n.tooltip){const i=e.replay;n.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Pd},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Lb=(n,e,i,s)=>(typeof e=="string"?(i=n.push(e)-1,s.unshift({index:i,label:e})):isNaN(e)&&(i=null),i);function Nb(n,e,i,s){const l=n.indexOf(e);if(l===-1)return Lb(n,e,i,s);const u=n.lastIndexOf(e);return l!==u?i:l}const Db=(n,e)=>n===null?null:di(Math.round(n),0,e);function ch(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class pl extends _r{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const i=this._addedLabels;if(i.length){const s=this.getLabels();for(const{index:l,label:u}of i)s[l]===u&&s.splice(l,1);this._addedLabels=[]}super.init(e)}parse(e,i){if(ge(e))return null;const s=this.getLabels();return i=isFinite(i)&&s[i]===e?i:Nb(s,e,Gt(i,e),this._addedLabels),Db(i,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:l}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),i||(l=this.getLabels().length-1)),this.min=s,this.max=l}buildTicks(){const e=this.min,i=this.max,s=this.options.offset,l=[];let u=this.getLabels();u=e===0&&i===u.length-1?u:u.slice(e,i+1),this._valueRange=Math.max(u.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let f=e;f<=i;f++)l.push({value:f});return l}getLabelForValue(e){return ch.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ht(pl,"id","category"),Ht(pl,"defaults",{ticks:{callback:ch}});function Pb(n,e){const i=[],{bounds:l,step:u,min:f,max:h,precision:p,count:m,maxTicks:b,maxDigits:w,includeBounds:S}=n,T=u||1,O=b-1,{min:L,max:P}=e,A=!ge(f),H=!ge(h),X=!ge(m),G=(P-L)/(w+1);let K=pf((P-L)/O/T)*T,Y,Q,q,ht;if(K<1e-14&&!A&&!H)return[{value:L},{value:P}];ht=Math.ceil(P/K)-Math.floor(L/K),ht>O&&(K=pf(ht*K/O/T)*T),ge(p)||(Y=Math.pow(10,p),K=Math.ceil(K*Y)/Y),l==="ticks"?(Q=Math.floor(L/K)*K,q=Math.ceil(P/K)*K):(Q=L,q=P),A&&H&&u&&yv((h-f)/u,K/1e3)?(ht=Math.round(Math.min((h-f)/K,b)),K=(h-f)/ht,Q=f,q=h):X?(Q=A?f:Q,q=H?h:q,ht=m-1,K=(q-Q)/ht):(ht=(q-Q)/K,ps(ht,Math.round(ht),K/1e3)?ht=Math.round(ht):ht=Math.ceil(ht));const it=Math.max(gf(K),gf(Q));Y=Math.pow(10,ge(p)?it:p),Q=Math.round(Q*Y)/Y,q=Math.round(q*Y)/Y;let tt=0;for(A&&(S&&Q!==f?(i.push({value:f}),Q<f&&tt++,ps(Math.round((Q+tt*K)*Y)/Y,f,uh(f,G,n))&&tt++):Q<f&&tt++);tt<ht;++tt){const st=Math.round((Q+tt*K)*Y)/Y;if(H&&st>h)break;i.push({value:st})}return H&&S&&q!==h?i.length&&ps(i[i.length-1].value,h,uh(h,G,n))?i[i.length-1].value=h:i.push({value:h}):(!H||q===h)&&i.push({value:q}),i}function uh(n,e,{horizontal:i,minRotation:s}){const l=Wn(s),u=(i?Math.sin(l):Math.cos(l))||.001,f=.75*e*(""+n).length;return Math.min(e/u,f)}class Ob extends _r{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,i){return ge(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:i,maxDefined:s}=this.getUserBounds();let{min:l,max:u}=this;const f=p=>l=i?l:p,h=p=>u=s?u:p;if(e){const p=vr(l),m=vr(u);p<0&&m<0?h(0):p>0&&m>0&&f(0)}if(l===u){let p=u===0?1:Math.abs(u*.05);h(u+p),e||f(l-p)}this.min=l,this.max=u}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:i,stepSize:s}=e,l;return s?(l=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,l>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${l} ticks. Limiting to 1000.`),l=1e3)):(l=this.computeTickLimit(),i=i||11),i&&(l=Math.min(i,l)),l}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,i=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const l={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:i.includeBounds!==!1},u=this._range||this,f=Pb(l,u);return e.bounds==="ticks"&&bv(f,this,"value"),e.reverse?(f.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),f}configure(){const e=this.ticks;let i=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const l=(s-i)/Math.max(e.length-1,1)/2;i-=l,s+=l}this._startValue=i,this._endValue=s,this._valueRange=s-i}getLabelForValue(e){return nd(e,this.chart.options.locale,this.options.ticks.format)}}class gl extends Ob{determineDataLimits(){const{min:e,max:i}=this.getMinMax(!0);this.min=gi(e)?e:0,this.max=gi(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),i=e?this.width:this.height,s=Wn(this.options.ticks.minRotation),l=(e?Math.sin(s):Math.cos(s))||.001,u=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,u.lineHeight/l))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ht(gl,"id","linear"),Ht(gl,"defaults",{ticks:{callback:sd.formatters.numeric}});const Ko={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ti=Object.keys(Ko);function fh(n,e){return n-e}function hh(n,e){if(ge(e))return null;const i=n._adapter,{parser:s,round:l,isoWeekday:u}=n._parseOpts;let f=e;return typeof s=="function"&&(f=s(f)),gi(f)||(f=typeof s=="string"?i.parse(f,s):i.parse(f)),f===null?null:(l&&(f=l==="week"&&(ws(u)||u===!0)?i.startOf(f,"isoWeek",u):i.startOf(f,l)),+f)}function dh(n,e,i,s){const l=ti.length;for(let u=ti.indexOf(n);u<l-1;++u){const f=Ko[ti[u]],h=f.steps?f.steps:Number.MAX_SAFE_INTEGER;if(f.common&&Math.ceil((i-e)/(h*f.size))<=s)return ti[u]}return ti[l-1]}function Ab(n,e,i,s,l){for(let u=ti.length-1;u>=ti.indexOf(i);u--){const f=ti[u];if(Ko[f].common&&n._adapter.diff(l,s,f)>=e-1)return f}return ti[i?ti.indexOf(i):0]}function Ib(n){for(let e=ti.indexOf(n)+1,i=ti.length;e<i;++e)if(Ko[ti[e]].common)return ti[e]}function ph(n,e,i){if(!i)n[e]=!0;else if(i.length){const{lo:s,hi:l}=Ll(i,e),u=i[s]>=e?i[s]:i[l];n[u]=!0}}function Eb(n,e,i,s){const l=n._adapter,u=+l.startOf(e[0].value,s),f=e[e.length-1].value;let h,p;for(h=u;h<=f;h=+l.add(h,1,s))p=i[h],p>=0&&(e[p].major=!0);return e}function gh(n,e,i){const s=[],l={},u=e.length;let f,h;for(f=0;f<u;++f)h=e[f],l[h]=f,s.push({value:h,major:!1});return u===0||!i?s:Eb(n,s,l,i)}class Bo extends _r{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){const s=e.time||(e.time={}),l=this._adapter=new Ky._date(e.adapters.date);l.init(i),ds(s.displayFormats,l.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return e===void 0?null:hh(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,i=this._adapter,s=e.time.unit||"day";let{min:l,max:u,minDefined:f,maxDefined:h}=this.getUserBounds();function p(m){!f&&!isNaN(m.min)&&(l=Math.min(l,m.min)),!h&&!isNaN(m.max)&&(u=Math.max(u,m.max))}(!f||!h)&&(p(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&p(this.getMinMax(!1))),l=gi(l)&&!isNaN(l)?l:+i.startOf(Date.now(),s),u=gi(u)&&!isNaN(u)?u:+i.endOf(Date.now(),s)+1,this.min=Math.min(l,u-1),this.max=Math.max(l+1,u)}_getLabelBounds(){const e=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],s=e[e.length-1]),{min:i,max:s}}buildTicks(){const e=this.options,i=e.time,s=e.ticks,l=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&l.length&&(this.min=this._userMin||l[0],this.max=this._userMax||l[l.length-1]);const u=this.min,f=this.max,h=Cv(l,u,f);return this._unit=i.unit||(s.autoSkip?dh(i.minUnit,this.min,this.max,this._getLabelCapacity(u)):Ab(this,h.length,i.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Ib(this._unit),this.initOffsets(l),e.reverse&&h.reverse(),gh(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let i=0,s=0,l,u;this.options.offset&&e.length&&(l=this.getDecimalForValue(e[0]),e.length===1?i=1-l:i=(this.getDecimalForValue(e[1])-l)/2,u=this.getDecimalForValue(e[e.length-1]),e.length===1?s=u:s=(u-this.getDecimalForValue(e[e.length-2]))/2);const f=e.length<3?.5:.25;i=di(i,0,f),s=di(s,0,f),this._offsets={start:i,end:s,factor:1/(i+1+s)}}_generate(){const e=this._adapter,i=this.min,s=this.max,l=this.options,u=l.time,f=u.unit||dh(u.minUnit,i,s,this._getLabelCapacity(i)),h=Gt(l.ticks.stepSize,1),p=f==="week"?u.isoWeekday:!1,m=ws(p)||p===!0,b={};let w=i,S,T;if(m&&(w=+e.startOf(w,"isoWeek",p)),w=+e.startOf(w,m?"day":f),e.diff(s,i,f)>1e5*h)throw new Error(i+" and "+s+" are too far apart with stepSize of "+h+" "+f);const O=l.ticks.source==="data"&&this.getDataTimestamps();for(S=w,T=0;S<s;S=+e.add(S,h,f),T++)ph(b,S,O);return(S===s||l.bounds==="ticks"||T===1)&&ph(b,S,O),Object.keys(b).sort(fh).map(L=>+L)}getLabelForValue(e){const i=this._adapter,s=this.options.time;return s.tooltipFormat?i.format(e,s.tooltipFormat):i.format(e,s.displayFormats.datetime)}format(e,i){const l=this.options.time.displayFormats,u=this._unit,f=i||l[u];return this._adapter.format(e,f)}_tickFormatFunction(e,i,s,l){const u=this.options,f=u.ticks.callback;if(f)return ae(f,[e,i,s],this);const h=u.time.displayFormats,p=this._unit,m=this._majorUnit,b=p&&h[p],w=m&&h[m],S=s[i],T=m&&w&&S&&S.major;return this._adapter.format(e,l||(T?w:b))}generateTickLabels(e){let i,s,l;for(i=0,s=e.length;i<s;++i)l=e[i],l.label=this._tickFormatFunction(l.value,i,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const i=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+s)*i.factor)}getValueForPixel(e){const i=this._offsets,s=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const i=this.options.ticks,s=this.ctx.measureText(e).width,l=Wn(this.isHorizontal()?i.maxRotation:i.minRotation),u=Math.cos(l),f=Math.sin(l),h=this._resolveTickFontOptions(0).size;return{w:s*u+h*f,h:s*f+h*u}}_getLabelCapacity(e){const i=this.options.time,s=i.displayFormats,l=s[i.unit]||s.millisecond,u=this._tickFormatFunction(e,0,gh(this,[e],this._majorUnit),l),f=this._getLabelSize(u),h=Math.floor(this.isHorizontal()?this.width/f.w:this.height/f.h)-1;return h>0?h:1}getDataTimestamps(){let e=this._cache.data||[],i,s;if(e.length)return e;const l=this.getMatchingVisibleMetas();if(this._normalized&&l.length)return this._cache.data=l[0].controller.getAllParsedValues(this);for(i=0,s=l.length;i<s;++i)e=e.concat(l[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let i,s;if(e.length)return e;const l=this.getLabels();for(i=0,s=l.length;i<s;++i)e.push(hh(this,l[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Mv(e.sort(fh))}}Ht(Bo,"id","time"),Ht(Bo,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function So(n,e,i){let s=0,l=n.length-1,u,f,h,p;i?(e>=n[s].pos&&e<=n[l].pos&&({lo:s,hi:l}=Hn(n,"pos",e)),{pos:u,time:h}=n[s],{pos:f,time:p}=n[l]):(e>=n[s].time&&e<=n[l].time&&({lo:s,hi:l}=Hn(n,"time",e)),{time:u,pos:h}=n[s],{time:f,pos:p}=n[l]);const m=f-u;return m?h+(p-h)*(e-u)/m:h}class mh extends Bo{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(e);this._minPos=So(i,this.min),this._tableRange=So(i,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:i,max:s}=this,l=[],u=[];let f,h,p,m,b;for(f=0,h=e.length;f<h;++f)m=e[f],m>=i&&m<=s&&l.push(m);if(l.length<2)return[{time:i,pos:0},{time:s,pos:1}];for(f=0,h=l.length;f<h;++f)b=l[f+1],p=l[f-1],m=l[f],Math.round((b+p)/2)!==m&&u.push({time:m,pos:f/(h-1)});return u}_generate(){const e=this.min,i=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(i)||s.length===1)&&s.push(i),s.sort((l,u)=>l-u)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const i=this.getDataTimestamps(),s=this.getLabelTimestamps();return i.length&&s.length?e=this.normalize(i.concat(s)):e=i.length?i:s,e=this._cache.all=e,e}getDecimalForValue(e){return(So(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const i=this._offsets,s=this.getDecimalForPixel(e)/i.factor-i.end;return So(this._table,s*this._tableRange+this._minPos,!0)}}Ht(mh,"id","timeseries"),Ht(mh,"defaults",Bo.defaults);const Od="label";function vh(n,e){typeof n=="function"?n(e):n&&(n.current=e)}function Fb(n,e){const i=n.options;i&&e&&Object.assign(i,e)}function Ad(n,e){n.labels=e}function Id(n,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Od;const s=[];n.datasets=e.map(l=>{const u=n.datasets.find(f=>f[i]===l[i]);return!u||!l.data||s.includes(u)?{...l}:(s.push(u),Object.assign(u,l),u)})}function Rb(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Od;const i={labels:[],datasets:[]};return Ad(i,n.labels),Id(i,n.datasets,e),i}function Wb(n,e){const{height:i=150,width:s=300,redraw:l=!1,datasetIdKey:u,type:f,data:h,options:p,plugins:m=[],fallbackContent:b,updateMode:w,...S}=n,T=ei(null),O=ei(null),L=()=>{T.current&&(O.current=new Yo(T.current,{type:f,data:Rb(h,u),options:p&&{...p},plugins:m}),vh(e,O.current))},P=()=>{vh(e,null),O.current&&(O.current.destroy(),O.current=null)};return qt(()=>{!l&&O.current&&p&&Fb(O.current,p)},[l,p]),qt(()=>{!l&&O.current&&Ad(O.current.config.data,h.labels)},[l,h.labels]),qt(()=>{!l&&O.current&&h.datasets&&Id(O.current.config.data,h.datasets,u)},[l,h.datasets]),qt(()=>{O.current&&(l?(P(),setTimeout(L)):O.current.update(w))},[l,p,h.labels,h.datasets,w]),qt(()=>{O.current&&(P(),setTimeout(L))},[f]),qt(()=>(L(),()=>P()),[]),Xh.createElement("canvas",{ref:T,role:"img",height:i,width:s,...S},b)}const Hb=wl(Wb);function zb(n,e){return Yo.register(e),wl((i,s)=>Xh.createElement(Hb,{...i,ref:s,type:n}))}const Bb=zb("line",Lo);Yo.register(pl,gl,Po,us,bb,Mb,vb);const Ub=({isDarkMode:n})=>{const[e,i]=rt([]),[s,l]=rt(!0),[u,f]=rt(null),h=async()=>{try{const S=await At.getSystemStats();i(S),f(null)}catch(S){console.error("Stats yüklenemedi:",S),f("Failed to load statistics")}finally{l(!1)}};qt(()=>{h();const S=setInterval(h,6e4);return()=>clearInterval(S)},[]);const p=S=>{const T=S.filter(P=>P.titleID),O=S.filter(P=>!P.titleID),L=P=>({frequency:P.reduce((A,H)=>A+H.frequency,0)/(P.length||1)/1e6,temperature:P.reduce((A,H)=>A+H.temperature,0)/(P.length||1),socTemp:P.reduce((A,H)=>A+H.socSensorTemperature,0)/(P.length||1)});return{game:L(T),idle:L(O)}},m={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{color:n?"#fff":"#666"}},tooltip:{mode:"index",intersect:!1}},scales:{y:{type:"linear",display:!0,position:"left",grid:{color:n?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:n?"#fff":"#666"}},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},ticks:{color:n?"#fff":"#666"}},x:{grid:{color:n?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:n?"#fff":"#666"}}}},b={labels:e.map(S=>new Date(S.timestamp).toLocaleTimeString()),datasets:[{label:"CPU Frequency (MHz)",data:e.map(S=>S.frequency/1e6),borderColor:"#3498db",backgroundColor:"rgba(52, 152, 219, 0.5)",yAxisID:"y"},{label:"CPU Temperature (°C)",data:e.map(S=>S.temperature),borderColor:"#e74c3c",backgroundColor:"rgba(231, 76, 60, 0.5)",yAxisID:"y1"},{label:"SoC Temperature (°C)",data:e.map(S=>S.socSensorTemperature),borderColor:"#f1c40f",backgroundColor:"rgba(241, 196, 15, 0.5)",yAxisID:"y1"}]},w=p(e);return y("div",{className:`statistics ${n?"dark":""}`,children:s?y("div",{className:"statistics-loading",children:"Loading statistics..."}):u?y("div",{className:"statistics-error",children:u}):y("div",{className:"statistics-content",children:[y("div",{className:"chart-container",children:y(Bb,{options:m,data:b})}),y("div",{className:"stats-averages",children:[y("div",{className:"averages-group",children:[y("h3",{children:"System Idle Averages"}),y("div",{className:"averages-grid",children:[y("div",{className:"average-item",children:[y("span",{children:"CPU Frequency"}),y("strong",{children:[w.idle.frequency.toFixed(0)," MHz"]})]}),y("div",{className:"average-item",children:[y("span",{children:"CPU Temperature"}),y("strong",{children:[w.idle.temperature.toFixed(1),"°C"]})]}),y("div",{className:"average-item",children:[y("span",{children:"SoC Temperature"}),y("strong",{children:[w.idle.socTemp.toFixed(1),"°C"]})]})]})]}),y("div",{className:"averages-group",children:[y("h3",{children:"Gaming Averages"}),y("div",{className:"averages-grid",children:[y("div",{className:"average-item",children:[y("span",{children:"CPU Frequency"}),y("strong",{children:[w.game.frequency.toFixed(0)," MHz"]})]}),y("div",{className:"average-item",children:[y("span",{children:"CPU Temperature"}),y("strong",{children:[w.game.temperature.toFixed(1),"°C"]})]}),y("div",{className:"average-item",children:[y("span",{children:"SoC Temperature"}),y("strong",{children:[w.game.socTemp.toFixed(1),"°C"]})]})]})]})]})]})})};class Oo{static getConfig(e){return this.windows[e]}static getDesktopItems(){return[...Object.values(this.windows).map((e,i)=>({id:i+1,name:e.title,type:e.id,app:e.id,icon:e.icon})),{id:Object.values(this.windows).length+1,name:"GitHub",type:"link",app:"link",icon:"🐙",url:"https://github.com/barisyild/airpsx"}]}static getComponent(e){var i;return(i=this.windows[e])==null?void 0:i.component}}Ht(Oo,"windows",{fileManager:{id:"fileManager",title:"File Manager",icon:"📁",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,component:Qg},processList:{id:"processList",title:"Process List",icon:"📊",defaultWidth:700,defaultHeight:500,minWidth:300,minHeight:200,component:em},scriptEditor:{id:"scriptEditor",title:"Script Editor",icon:"📝",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,component:cm},systemInfo:{id:"systemInfo",title:"System Info",icon:"🖥️",defaultWidth:600,defaultHeight:400,minWidth:300,minHeight:200,component:Fh},statistics:{id:"statistics",title:"Statistics",icon:"📈",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,component:Ub},applications:{id:"applications",title:"Applications",icon:"🎮",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,component:Zg},profiles:{id:"profiles",title:"Profiles",icon:"👤",defaultWidth:700,defaultHeight:500,minWidth:300,minHeight:200,component:im},scheduler:{id:"scheduler",title:"Scheduler",icon:"⏰",defaultWidth:900,defaultHeight:700,minWidth:500,minHeight:400,component:lm},mediaGallery:{id:"mediaGallery",title:"Media Gallery",icon:"🖼️",defaultWidth:900,defaultHeight:700,minWidth:400,minHeight:300,component:tm}});const $b=({onAccept:n,isDarkMode:e})=>y("div",{className:`disclaimer-overlay ${e?"dark":""}`,children:y("div",{className:"disclaimer-modal",children:[y("h2",{children:"Disclaimer"}),y("div",{className:"disclaimer-content",children:["This software operates based on the data provided by users and the actions performed. Unexpected actions by users, improper use, or unforeseen circumstances may cause the console to behave unexpectedly or become bricked.",y("br",{}),y("br",{}),"The developer cannot be held responsible for any data loss, service interruptions, or other adverse outcomes that may occur during the use of the software.",y("br",{})," By using this software, you agree to this disclaimer of liability. We would like to explicitly state that this software does not support piracy and cannot be used for such purposes. The use of the software for illegal activities is strictly prohibited, and the developer accepts no responsibility for such misuse.",y("br",{}),y("br",{}),"In certain cases, improper use of this software may render your hardware inoperable ('bricked'). The developer is not liable for such outcomes."]}),y("div",{className:"disclaimer-actions",children:y("button",{onClick:n,children:"I Accept"})})]})}),jb=()=>{const[n]=rt(Oo.getDesktopItems()),[e,i]=rt([]),[s,l]=rt(null),[u,f]=rt({show:!1,x:0,y:0,item:null}),[h,p]=rt(()=>{const j=localStorage.getItem("theme");return j?j==="dark":!0}),[m,b]=rt([]),[w,S]=rt(null),[T,O]=rt(!0);rt("tr");const[L,P]=rt({id:null,time:0,clickCount:0}),[A,H]=rt(new Set),[X,G]=rt(-1),[K,Y]=rt(!1),[Q,q]=rt(()=>document.cookie.includes("disclaimerAccepted=true")),[ht,it]=rt({uploading:!1,progress:0,error:null,success:!1}),[tt,st]=rt(!1),[R,I]=rt(""),[C,ft]=rt({loading:!1,error:null,success:!1}),Rt=ei(null),jt=ei(null);qt(()=>{localStorage.setItem("theme",h?"dark":"light")},[h]);const $=async()=>{try{const j=await At.getStorageInfo();b(j),S(null)}catch(j){console.error("Storage bilgisi alınamadı:",j),S("Failed to load storage information")}finally{O(!1)}};qt(()=>{$();const j=setInterval($,3e4);return()=>clearInterval(j)},[]);const gt=j=>j.includes("USB")?"💽":j.includes("Disc")?"💿":"💾",lt=(j,xt,Vt)=>{let{x:kt,y:Pt}=j;const{width:Lt,height:me}=xt,Ae={width:Math.min(Lt,Vt.width),height:Math.min(me,Vt.height)};return kt=Math.max(0,Math.min(kt,Vt.width-Ae.width)),Pt=Math.max(0,Math.min(Pt,Vt.height-Ae.height)),{position:{x:kt,y:Pt},size:Ae}},Tt=j=>{const xt=Oo.getConfig(j);if(!xt)return;if(e.some(Pt=>Pt.app===j)){const Pt=e.find(Lt=>Lt.app===j);Pt.minimized&&i(e.map(Lt=>Lt.id===Pt.id?{...Lt,minimized:!1}:Lt)),l(Pt.id);return}const Vt=document.querySelector(".desktop-content");if(Vt==null?void 0:Vt.getBoundingClientRect()){const Pt={id:Date.now(),app:j,title:xt.title,icon:xt.icon,position:{x:50+e.length*20,y:50+e.length*20},size:{width:xt.defaultWidth,height:xt.defaultHeight},minSize:{width:xt.minWidth,height:xt.minHeight},minimized:!1};i([...e,Pt]),l(Pt.id)}},It=j=>{i(e.filter(xt=>xt.id!==j)),s===j&&l(null)},zt=()=>{f({...u,show:!1})},Et=j=>{i(e.map(xt=>xt.id===j?{...xt,minimized:!0}:xt))},mt=j=>{if(j.preventDefault(),j.target.closest(".storage-panel")||j.target.closest(".window"))return;const xt=j.target,Vt=xt.classList.contains("desktop-icons"),kt=xt.closest(".desktop-item");if(!Vt&&!kt)return;const Pt=kt?n.find(Lt=>Lt.name===kt.querySelector(".desktop-item-name").textContent):null;f({show:!0,x:j.pageX,y:j.pageY,item:Pt,isBackground:!kt})};qt(()=>()=>{Rt.current&&clearTimeout(Rt.current)},[]),qt(()=>{const j=xt=>{if(document.activeElement.tagName==="INPUT"||document.activeElement.tagName==="TEXTAREA")return;if(e.find(Lt=>Lt.id===s&&!Lt.minimized)){const Lt=document.querySelector(`[data-window-id="${s}"]`);if(!(Lt!=null&&Lt.contains(document.activeElement))&&xt.key==="Tab"){xt.preventDefault();const me=Lt.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');me.length>0&&me[0].focus()}return}if(!n.length)return;const kt=Math.floor((window.innerHeight-60)/120),Pt=Math.floor(X/kt);switch(xt.key){case"ArrowUp":if(xt.preventDefault(),X>-1){const Lt=X-1;Lt>=0&&(G(Lt),H(new Set([n[Lt].id])))}else G(0),H(new Set([n[0].id]));break;case"ArrowDown":if(xt.preventDefault(),X<n.length-1){const Lt=X+1;G(Lt),H(new Set([n[Lt].id]))}break;case"ArrowLeft":if(xt.preventDefault(),Pt>0){const Lt=X-kt;Lt>=0&&(G(Lt),H(new Set([n[Lt].id])))}break;case"ArrowRight":if(xt.preventDefault(),Pt<Math.ceil(n.length/kt)-1){const Lt=X+kt;Lt<n.length&&(G(Lt),H(new Set([n[Lt].id])))}break;case"Enter":if(xt.preventDefault(),X>-1&&!e.some(Lt=>Lt.app===n[X].app)){const Lt=n[X];Lt.app==="systemInfo"?Y(!0):Tt(Lt.app)}break;case"Escape":G(-1),H(new Set);break}};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[X,n,e,s]);const St=(j,xt)=>{const Vt=n.findIndex(Pt=>Pt.id===xt.id);if(G(Vt),xt.type==="link"){window.open(xt.url,"_blank");return}if(xt.app==="systemInfo"){Y(!0);return}const kt=Date.now();L.id===xt.id&&kt-L.time<500&&L.clickCount===1?(Tt(xt.app),P({id:null,time:0,clickCount:0})):(P({id:xt.id,time:kt,clickCount:1}),H(new Set([xt.id])))},Ft=()=>{const j=new Date;j.setFullYear(j.getFullYear()+1),document.cookie=`disclaimerAccepted=true; expires=${j.toUTCString()}; path=/`,q(!0)},Wt=j=>{j&&j.name.toLowerCase().endsWith(".pkg")?(it({uploading:!0,progress:0,error:null,success:!1}),At.uploadPkg(j,xt=>{it(Vt=>({...Vt,progress:xt}))}).then(xt=>{it({uploading:!1,progress:100,error:null,success:!0}),setTimeout(()=>{it({uploading:!1,progress:0,error:null,success:!1})},3e3)}).catch(xt=>{it({uploading:!1,progress:0,error:xt.message||`An error occurred during installation
`,success:!1})})):it({uploading:!1,progress:0,error:"Please select a valid .pkg file",success:!1})},ii=async()=>{if(!R.trim()){ft({loading:!1,error:"Please enter a valid URL",success:!1});return}ft({loading:!0,error:null,success:!1});try{await At.installPackageFromUrl(R),ft({loading:!1,error:null,success:!0}),setTimeout(()=>{st(!1),I(""),ft({loading:!1,error:null,success:!1})},2e3)}catch(j){ft({loading:!1,error:j.message||"Failed to install package from URL",success:!1})}},$t=j=>{const xt=j.target.files[0];xt&&Wt(xt),j.target.value=""};return y("div",{className:`desktop ${h?"dark":""}`,onClick:j=>{(j.target.classList.contains("desktop-content")||j.target.classList.contains("desktop-icons"))&&H(new Set),f({...u,show:!1})},onContextMenu:mt,children:[!Q&&y($b,{onAccept:Ft,isDarkMode:h}),y("div",{className:"desktop-content",children:[y("div",{className:"desktop-icons",children:n.map((j,xt)=>y("div",{className:`desktop-item ${A.has(j.id)?"selected":""}`,onClick:Vt=>St(Vt,j),tabIndex:0,children:[y("div",{className:"desktop-item-icon icon",children:j.icon}),y("div",{className:"desktop-item-name",children:j.name})]},j.id))}),y("div",{className:`storage-panel ${h?"dark":""}`,children:[y("div",{className:"storage-header",children:["Storage",y("button",{className:"refresh-button icon",onClick:$,disabled:T,children:"🔄"})]}),T?y("div",{className:"storage-loading",children:"Loading storage info..."}):w?y("div",{className:"storage-error",children:w}):m.map((j,xt)=>y("div",{className:"storage-item",children:[y("div",{className:"storage-icon icon",children:gt(j.name)}),y("div",{className:"storage-info",children:[y("div",{className:"storage-name",children:j.name}),y("div",{className:"storage-usage",children:[y("div",{className:"storage-bar",children:y("div",{className:"storage-bar-fill",style:{width:`${j.used/j.total*100}%`}})}),y("div",{className:"storage-text",children:[At.formatBytes(j.used)," /"," ",At.formatBytes(j.total)]})]})]})]},j.path)),y("div",{className:"storage-dropzone",onClick:()=>{var j;return(j=jt.current)==null?void 0:j.click()},onDragOver:j=>{j.preventDefault(),j.stopPropagation(),j.currentTarget.classList.add("drag-over")},onDragLeave:j=>{j.preventDefault(),j.stopPropagation(),j.currentTarget.classList.remove("drag-over")},onDrop:j=>{j.preventDefault(),j.stopPropagation(),j.currentTarget.classList.remove("drag-over");const Vt=Array.from(j.dataTransfer.files).find(kt=>kt.name.toLowerCase().endsWith(".pkg"));Vt?Wt(Vt):it({uploading:!1,progress:0,error:"Please drag a valid .pkg file",success:!1})},children:[y("input",{type:"file",ref:jt,style:{display:"none"},accept:".pkg",onChange:$t}),y("div",{className:"dropzone-content",children:ht.uploading?y("div",{className:"pkg-upload-progress",children:[y("div",{className:"progress-bar-container",children:y("div",{className:"progress-bar-fill",style:{width:`${ht.progress}%`}})}),y("div",{className:"progress-text",children:["Uploading: %",ht.progress.toFixed(1)]})]}):ht.error?y("div",{className:"pkg-upload-error",children:[y("div",{className:"dropzone-icon icon",children:"❌"}),y("div",{className:"dropzone-text",children:ht.error})]}):ht.success?y("div",{className:"pkg-upload-success",children:[y("div",{className:"dropzone-icon icon",children:"✅"}),y("div",{className:"dropzone-text",children:"PKG file successfully uploaded!"})]}):y(Le,{children:[y("div",{className:"dropzone-icon icon",children:"📦"}),y("div",{className:"dropzone-text",children:"PKG Installer - Drag PKG file here"}),y("button",{className:"url-install-button",onClick:j=>{j.stopPropagation(),st(!0)},children:"Install from URL"})]})})]})]}),y(qg,{isDarkMode:h}),y(Fh,{isDarkMode:h,showPanel:K,onClose:()=>Y(!1)}),e.map(j=>{const xt=Oo.getComponent(j.app);return y(Xg,{window:j,isActive:s===j.id,isDarkMode:h,onClose:()=>It(j.id),onFocus:()=>l(j.id),onDragStart:zt,onMinimize:()=>Et(j.id),children:xt&&y(xt,{isDarkMode:h,contextMenu:u,setContextMenu:f})},j.id)})]}),y(Gg,{windows:e,activeWindow:s,isDarkMode:h,onWindowClick:(j,xt)=>{var kt;const Vt=e.find(Pt=>Pt.id===j);if(Vt.minimized){const Pt=(kt=document.querySelector(".desktop-content"))==null?void 0:kt.getBoundingClientRect();if(Pt){const{position:Lt,size:me}=lt(Vt.position,Vt.size,Pt);i(e.map(Ae=>Ae.id===j?{...Ae,minimized:!1,position:Lt,size:me}:Ae))}else i(e.map(Lt=>Lt.id===j?{...Lt,minimized:!1}:Lt))}else xt&&(i(e.map(Pt=>Pt.id===j?{...Pt,minimized:!0}:Pt)),l(null));!xt&&!Vt.minimized&&l(j)},onThemeToggle:()=>p(!h)}),tt&&y("div",{className:`url-modal-overlay ${h?"dark":""}`,onClick:()=>st(!1),children:y("div",{className:`url-modal ${h?"dark":""}`,onClick:j=>j.stopPropagation(),children:[y("div",{className:"url-modal-header",children:[y("h3",{children:"Install Package from URL"}),y("button",{className:"close-button",onClick:()=>st(!1),children:"×"})]}),y("div",{className:"url-modal-content",children:[y("input",{type:"text",className:"url-input",placeholder:"Enter package URL (e.g., http://example.com/game.pkg)",value:R,style:{width:"94%"},onChange:j=>I(j.target.value),disabled:C.loading}),C.error&&y("div",{className:"url-error-message",children:C.error}),C.success&&y("div",{className:"url-success-message",children:"Package installation started successfully!"})]}),y("div",{className:"url-modal-footer",children:y("button",{className:"install-url-button",onClick:ii,disabled:C.loading,children:C.loading?"Installing...":"Install"})})]})})]})};function Vb(){return navigator.userAgent.includes("PlayStation 4")?document.body.classList.add("ps4"):navigator.userAgent.includes("PlayStation 5")&&document.body.classList.add("ps5"),y(jb,{})}Qe.init();Ls.defineMode("haxe",function(n,e){var i=n.indentUnit;function s(F){return{type:F,style:"keyword"}}var l=s("keyword a"),u=s("keyword b"),f=s("keyword c"),h=s("operator"),p={type:"atom",style:"atom"},m={type:"attribute",style:"attribute"},O=s("typedef"),b={if:l,while:l,else:u,do:u,try:u,return:f,break:f,continue:f,new:f,throw:f,var:s("var"),final:s("var"),inline:m,static:m,using:s("import"),public:m,private:m,overload:m,extern:m,cast:s("cast"),import:s("import"),macro:s("macro"),function:s("function"),catch:s("catch"),untyped:s("untyped"),callback:s("cb"),for:s("for"),switch:s("switch"),case:s("case"),default:s("default"),in:h,is:h,as:h,never:s("property_access"),trace:s("trace"),class:O,abstract:O,enum:O,interface:O,typedef:O,extends:O,implements:O,dynamic:O,true:p,false:p,null:p},w=/[+\-*&%=<>!?|]/;function S(F,Z,at){return Z.tokenize=at,at(F,Z)}function T(F,Z){for(var at=!1,pt;(pt=F.next())!=null;){if(pt==Z&&!at)return!0;at=!at&&pt=="\\"}}var O,L;function P(F,Z,at){return O=F,L=at,Z}function A(F,Z){var at=F.next();if(at=='"')return S(F,Z,H(at));if(at=="'")return X(at,F,Z);if(at=="}")return Z.interpolationStack.length>0?(Z.tokenize=Z.interpolationStack.pop(),P(at,"string")):P(at);if(/[\[\]{}\(\),;\:\.]/.test(at))return P(at);if(at=="0"&&F.eat(/x/i))return F.eatWhile(/[\da-f]/i),P("number","number");if(/\d/.test(at)||at=="-"&&F.eat(/\d/))return F.match(/^\d*(?:\.\d*(?!\.))?(?:[eE][+\-]?\d+)?/),P("number","number");if(Z.reAllowed&&at=="~"&&F.eat(/\//))return T(F,"/"),F.eatWhile(/[gimsu]/),P("regexp","string-2");if(at=="/")return F.eat("*")?S(F,Z,Y):F.eat("/")?(F.skipToEnd(),P("comment","comment")):(F.eatWhile(w),P("operator",null,F.current()));if(at=="#")return F.skipToEnd(),P("conditional","meta");if(at=="@")return F.eat(/:/),F.eatWhile(/[\w_]/),P("metadata","meta");if(w.test(at))return F.eatWhile(w),P("operator",null,F.current());var pt;if(/[A-Z]/.test(at))return F.eatWhile(/[\w_<>]/),pt=F.current(),P("type","variable-3",pt);F.eatWhile(/[\w_]/);var pt=F.current(),re=b.propertyIsEnumerable(pt)&&b[pt];return re&&Z.kwAllowed?P(re.type,re.style,pt):P("variable","variable",pt)}function H(F){return function(Z,at){return T(Z,F)&&(at.tokenize=A),P("string","string")}}function X(F,Z,at){if(Z.eat(F))return P("string","string");function pt(re,Yt){for(var Ie=!1;;){var Ct=re.next();if(Ct==null)break;if(Ct=="$"&&re.peek()=="$"){re.next();continue}if(Ct=="$")return Yt.interpolationStack.push(Yt.tokenize),Yt.tokenize=G,P("string","string");if(Ct==F&&!Ie){Yt.tokenize=A;break}Ie=!Ie&&Ct=="\\"}return P("string","string")}return at.tokenize=pt,pt(Z,at)}function G(F,Z){return F.eat("$"),F.eat("{")?Z.tokenize=A:Z.tokenize=K,P("string","string")}function K(F,Z){return F.eatWhile(/[\w_]/),Z.tokenize=Z.interpolationStack.pop(),"variable"}function Y(F,Z){for(var at=!1,pt;pt=F.next();){if(pt=="/"&&at){Z.tokenize=A;break}at=pt=="*"}return P("comment","comment")}var Q={atom:!0,number:!0,variable:!0,string:!0,regexp:!0};function q(F,Z,at,pt,re,Yt){this.indented=F,this.column=Z,this.type=at,this.prev=re,this.info=Yt,pt!=null&&(this.align=pt)}function ht(F,Z){for(var at=F.localVars;at;at=at.next)if(at.name==Z)return!0}function it(F,Z,at,pt,re){var Yt=F.cc;for(R.state=F,R.stream=re,R.marked=null,R.cc=Yt,F.lexical.hasOwnProperty("align")||(F.lexical.align=!0);;){var Ie=Yt.length?Yt.pop():zt;if(Ie(at,pt)){for(;Yt.length&&Yt[Yt.length-1].lex;)Yt.pop()();return R.marked?R.marked:at=="variable"&&ht(F,pt)?"variable-2":at=="variable"&&tt(F,pt)?"variable-3":Z}}}function tt(F,Z){if(/[a-z]/.test(Z.charAt(0)))return!1;for(var at=F.importedtypes.length,pt=0;pt<at;pt++)if(F.importedtypes[pt]==Z)return!0}function st(F){for(var Z=R.state,at=Z.importedtypes;at;at=at.next)if(at.name==F)return;Z.importedtypes={name:F,next:Z.importedtypes}}var R={state:null,column:null,marked:null,cc:null};function I(){for(var F=arguments.length-1;F>=0;F--)R.cc.push(arguments[F])}function C(){return I.apply(null,arguments),!0}function ft(F,Z){for(var at=Z;at;at=at.next)if(at.name==F)return!0;return!1}function Rt(F){var Z=R.state;if(Z.context){if(R.marked="def",ft(F,Z.localVars))return;Z.localVars={name:F,next:Z.localVars}}else if(Z.globalVars){if(ft(F,Z.globalVars))return;Z.globalVars={name:F,next:Z.globalVars}}}var jt={name:"this",next:null};function $(){R.state.context||(R.state.localVars=jt),R.state.context={prev:R.state.context,vars:R.state.localVars}}function gt(){R.state.localVars=R.state.context.vars,R.state.context=R.state.context.prev}gt.lex=!0;function lt(F,Z){var at=function(){var pt=R.state;pt.lexical=new q(pt.indented,R.stream.column(),F,null,pt.lexical,Z)};return at.lex=!0,at}function Tt(){var F=R.state;F.lexical.prev&&(F.lexical.type==")"&&(F.indented=F.lexical.indented),F.lexical=F.lexical.prev)}Tt.lex=!0;function It(F){function Z(at){return at==F?C():F==";"?I():C(Z)}return Z}function zt(F){return F=="@"?C(Wt):F=="var"?C(lt("vardef"),me,It(";"),Tt):F=="keyword a"?C(lt("form"),Et,zt,Tt):F=="keyword b"?C(lt("form"),zt,Tt):F=="{"?C(lt("}"),$,Lt,Tt,gt):F==";"?C():F=="attribute"?C(Ft):F=="function"?C($e):F=="for"?C(lt("form"),It("("),lt(")"),nn,It(")"),Tt,zt,Tt):F=="variable"?C(lt("stat"),xt):F=="switch"?C(lt("form"),Et,lt("}","switch"),It("{"),Lt,Tt,Tt):F=="case"?C(Et,It(":")):F=="default"?C(It(":")):F=="catch"?C(lt("form"),$,It("("),Hi,It(")"),zt,Tt,gt):F=="import"?C($t,It(";")):F=="typedef"?C(j):I(lt("stat"),Et,It(";"),Tt)}function Et(F){return Q.hasOwnProperty(F)||F=="type"?C(St):F=="function"?C($e):F=="keyword c"?C(mt):F=="("?C(lt(")"),mt,It(")"),Tt,St):F=="operator"?C(Et):F=="["?C(lt("]"),Pt(mt,"]"),Tt,St):F=="{"?C(lt("}"),Pt(kt,"}"),Tt,St):C()}function mt(F){return F.match(/[;\}\)\],]/)?I():I(Et)}function St(F,Z){if(F=="operator"&&/\+\+|--/.test(Z))return C(St);if(F=="operator"||F==":")return C(Et);if(F!=";"){if(F=="(")return C(lt(")"),Pt(Et,")"),Tt,St);if(F==".")return C(Vt,St);if(F=="[")return C(lt("]"),Et,It("]"),Tt,St)}}function Ft(F){if(F=="attribute")return C(Ft);if(F=="function")return C($e);if(F=="var")return C(me)}function Wt(F){if(F==":"||F=="variable")return C(Wt);if(F=="(")return C(lt(")"),Pt(ii,")"),Tt,zt)}function ii(F){if(F=="variable")return C()}function $t(F,Z){if(F=="variable"&&/[A-Z]/.test(Z.charAt(0)))return st(Z),C();if(F=="variable"||F=="property"||F=="."||Z=="*")return C($t)}function j(F,Z){if(F=="variable"&&/[A-Z]/.test(Z.charAt(0)))return st(Z),C();if(F=="type"&&/[A-Z]/.test(Z.charAt(0)))return C()}function xt(F){return F==":"?C(Tt,zt):I(St,It(";"),Tt)}function Vt(F){if(F=="variable")return R.marked="property",C()}function kt(F){if(F=="variable"&&(R.marked="property"),Q.hasOwnProperty(F))return C(It(":"),Et)}function Pt(F,Z){function at(pt){return pt==","?C(F,at):pt==Z?C():C(It(Z))}return function(pt){return pt==Z?C():I(F,at)}}function Lt(F){return F=="}"?C():I(zt,Lt)}function me(F,Z){return F=="variable"?(Rt(Z),C(yi,Ae)):C()}function Ae(F,Z){if(Z=="=")return C(Et,Ae);if(F==",")return C(me)}function nn(F,Z){return F=="variable"?(Rt(Z),C(vi,Et)):I()}function vi(F,Z){if(Z=="in")return C()}function $e(F,Z){if(F=="variable"||F=="type")return Rt(Z),C($e);if(Z=="new")return C($e);if(F=="(")return C(lt(")"),$,Pt(Hi,")"),Tt,yi,zt,gt)}function yi(F){if(F==":")return C(Ri)}function Ri(F){if(F=="type"||F=="variable")return C();if(F=="{")return C(lt("}"),Pt(Wi,"}"),Tt)}function Wi(F){if(F=="variable")return C(yi)}function Hi(F,Z){if(F=="variable")return Rt(Z),C(yi)}return{startState:function(F){var Z=["Int","Float","String","Void","Std","Bool","Dynamic","Array"],at={tokenize:A,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new q((F||0)-i,0,"block",!1),localVars:e.localVars,importedtypes:Z,context:e.localVars&&{vars:e.localVars},indented:0,interpolationStack:[]};return e.globalVars&&typeof e.globalVars=="object"&&(at.globalVars=e.globalVars),at},token:function(F,Z){if(F.sol()&&(Z.lexical.hasOwnProperty("align")||(Z.lexical.align=!1),Z.indented=F.indentation()),F.eatSpace())return null;var at=Z.tokenize(F,Z);return O=="comment"?at:(Z.reAllowed=!!(O=="operator"||O=="keyword c"||O.match(/^[\[{}\(,;:]$/)),Z.kwAllowed=O!=".",it(Z,at,O,L,F))},indent:function(F,Z){if(F.tokenize!=A)return 0;var at=Z&&Z.charAt(0),pt=F.lexical;pt.type=="stat"&&at=="}"&&(pt=pt.prev);var re=pt.type,Yt=at==re;return re=="vardef"?pt.indented+4:re=="form"&&at=="{"?pt.indented:re=="stat"||re=="form"?pt.indented+i:pt.info=="switch"&&!Yt?pt.indented+(/^(?:case|default)\b/.test(Z)?i:2*i):pt.align?pt.column+(Yt?0:1):pt.indented+(Yt?0:i)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}});Ls.defineMIME("text/x-haxe","haxe");Ls.defineMode("hxml",function(){return{startState:function(){return{define:!1,inString:!1}},token:function(n,e){var l=n.peek(),i=n.sol();if(l=="#")return n.skipToEnd(),"comment";if(i&&l=="-"){var s="variable-2";return n.eat(/-/),n.peek()=="-"&&(n.eat(/-/),s="keyword a"),n.peek()=="D"&&(n.eat(/[D]/),s="keyword c",e.define=!0),n.eatWhile(/[A-Z]/i),s}var l=n.peek();return e.inString==!1&&l=="'"&&(e.inString=!0,n.next()),e.inString==!0?(n.skipTo("'")||n.skipToEnd(),n.peek()=="'"&&(n.next(),e.inString=!1),"string"):(n.next(),null)},lineComment:"#"}});Bn(y(Vb,{}),document.getElementById("app"));
