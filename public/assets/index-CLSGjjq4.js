var Ag=Object.defineProperty;var Pg=(i,e,n)=>e in i?Ag(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n;var It=(i,e,n)=>Pg(i,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var ks,Et,vh,Ni,Fu,yh,Ga,bh,gl,Za,Ja,_h,ms={},xh=[],Ig=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Bo=Array.isArray;function Yn(i,e){for(var n in e)i[n]=e[n];return i}function ml(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function Vn(i,e,n){var s,l,u,f={};for(u in e)u=="key"?s=e[u]:u=="ref"?l=e[u]:f[u]=e[u];if(arguments.length>2&&(f.children=arguments.length>3?ks.call(arguments,2):n),typeof i=="function"&&i.defaultProps!=null)for(u in i.defaultProps)f[u]===void 0&&(f[u]=i.defaultProps[u]);return cs(i,f,s,l,null)}function cs(i,e,n,s,l){var u={type:i,props:e,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:l??++vh,__i:-1,__u:0};return l==null&&Et.vnode!=null&&Et.vnode(u),u}function Eg(){return{current:null}}function je(i){return i.children}function On(i,e){this.props=i,this.context=e}function cr(i,e){if(e==null)return i.__?cr(i.__,i.__i+1):null;for(var n;e<i.__k.length;e++)if((n=i.__k[e])!=null&&n.__e!=null)return n.__e;return typeof i.type=="function"?cr(i):null}function wh(i){var e,n;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,e=0;e<i.__k.length;e++)if((n=i.__k[e])!=null&&n.__e!=null){i.__e=i.__c.base=n.__e;break}return wh(i)}}function Qa(i){(!i.__d&&(i.__d=!0)&&Ni.push(i)&&!Ao.__r++||Fu!==Et.debounceRendering)&&((Fu=Et.debounceRendering)||yh)(Ao)}function Ao(){var i,e,n,s,l,u,f,h;for(Ni.sort(Ga);i=Ni.shift();)i.__d&&(e=Ni.length,s=void 0,u=(l=(n=i).__v).__e,f=[],h=[],n.__P&&((s=Yn({},l)).__v=l.__v+1,Et.vnode&&Et.vnode(s),vl(n.__P,s,l,n.__n,n.__P.namespaceURI,32&l.__u?[u]:null,f,u??cr(l),!!(32&l.__u),h),s.__v=l.__v,s.__.__k[s.__i]=s,Ch(f,s,h),s.__e!=u&&wh(s)),Ni.length>e&&Ni.sort(Ga));Ao.__r=0}function kh(i,e,n,s,l,u,f,h,p,m,b){var x,S,C,A,O,D,E=s&&s.__k||xh,z=e.length;for(p=Fg(n,e,E,p,z),x=0;x<z;x++)(C=n.__k[x])!=null&&(S=C.__i===-1?ms:E[C.__i]||ms,C.__i=x,D=vl(i,C,S,l,u,f,h,p,m,b),A=C.__e,C.ref&&S.ref!=C.ref&&(S.ref&&yl(S.ref,null,C),b.push(C.ref,C.__c||A,C)),O==null&&A!=null&&(O=A),4&C.__u||S.__k===C.__k?p=Sh(C,p,i):typeof C.type=="function"&&D!==void 0?p=D:A&&(p=A.nextSibling),C.__u&=-7);return n.__e=O,p}function Fg(i,e,n,s,l){var u,f,h,p,m,b=n.length,x=b,S=0;for(i.__k=new Array(l),u=0;u<l;u++)(f=e[u])!=null&&typeof f!="boolean"&&typeof f!="function"?(p=u+S,(f=i.__k[u]=typeof f=="string"||typeof f=="number"||typeof f=="bigint"||f.constructor==String?cs(null,f,null,null,null):Bo(f)?cs(je,{children:f},null,null,null):f.constructor===void 0&&f.__b>0?cs(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f).__=i,f.__b=i.__b+1,h=null,(m=f.__i=Rg(f,n,p,x))!==-1&&(x--,(h=n[m])&&(h.__u|=2)),h==null||h.__v===null?(m==-1&&S--,typeof f.type!="function"&&(f.__u|=4)):m!=p&&(m==p-1?S--:m==p+1?S++:(m>p?S--:S++,f.__u|=4))):i.__k[u]=null;if(x)for(u=0;u<b;u++)(h=n[u])!=null&&!(2&h.__u)&&(h.__e==s&&(s=cr(h)),Th(h,h));return s}function Sh(i,e,n){var s,l;if(typeof i.type=="function"){for(s=i.__k,l=0;s&&l<s.length;l++)s[l]&&(s[l].__=i,e=Sh(s[l],e,n));return e}i.__e!=e&&(e&&i.type&&!n.contains(e)&&(e=cr(i)),n.insertBefore(i.__e,e||null),e=i.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Kn(i,e){return e=e||[],i==null||typeof i=="boolean"||(Bo(i)?i.some(function(n){Kn(n,e)}):e.push(i)),e}function Rg(i,e,n,s){var l,u,f=i.key,h=i.type,p=e[n];if(p===null||p&&f==p.key&&h===p.type&&!(2&p.__u))return n;if(s>(p!=null&&!(2&p.__u)?1:0))for(l=n-1,u=n+1;l>=0||u<e.length;){if(l>=0){if((p=e[l])&&!(2&p.__u)&&f==p.key&&h===p.type)return l;l--}if(u<e.length){if((p=e[u])&&!(2&p.__u)&&f==p.key&&h===p.type)return u;u++}}return-1}function Ru(i,e,n){e[0]=="-"?i.setProperty(e,n??""):i[e]=n==null?"":typeof n!="number"||Ig.test(e)?n:n+"px"}function lo(i,e,n,s,l){var u;t:if(e=="style")if(typeof n=="string")i.style.cssText=n;else{if(typeof s=="string"&&(i.style.cssText=s=""),s)for(e in s)n&&e in n||Ru(i.style,e,"");if(n)for(e in n)s&&n[e]===s[e]||Ru(i.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")u=e!=(e=e.replace(bh,"$1")),e=e.toLowerCase()in i||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),i.l||(i.l={}),i.l[e+u]=n,n?s?n.u=s.u:(n.u=gl,i.addEventListener(e,u?Ja:Za,u)):i.removeEventListener(e,u?Ja:Za,u);else{if(l=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in i)try{i[e]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?i.removeAttribute(e):i.setAttribute(e,e=="popover"&&n==1?"":n))}}function Hu(i){return function(e){if(this.l){var n=this.l[e.type+i];if(e.t==null)e.t=gl++;else if(e.t<n.u)return;return n(Et.event?Et.event(e):e)}}}function vl(i,e,n,s,l,u,f,h,p,m){var b,x,S,C,A,O,D,E,z,it,q,j,Y,Q,G,vt,ot,tt=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(p=!!(32&n.__u),u=[h=e.__e=n.__e]),(b=Et.__b)&&b(e);t:if(typeof tt=="function")try{if(E=e.props,z="prototype"in tt&&tt.prototype.render,it=(b=tt.contextType)&&s[b.__c],q=b?it?it.props.value:b.__:s,n.__c?D=(x=e.__c=n.__c).__=x.__E:(z?e.__c=x=new tt(E,q):(e.__c=x=new On(E,q),x.constructor=tt,x.render=zg),it&&it.sub(x),x.props=E,x.state||(x.state={}),x.context=q,x.__n=s,S=x.__d=!0,x.__h=[],x._sb=[]),z&&x.__s==null&&(x.__s=x.state),z&&tt.getDerivedStateFromProps!=null&&(x.__s==x.state&&(x.__s=Yn({},x.__s)),Yn(x.__s,tt.getDerivedStateFromProps(E,x.__s))),C=x.props,A=x.state,x.__v=e,S)z&&tt.getDerivedStateFromProps==null&&x.componentWillMount!=null&&x.componentWillMount(),z&&x.componentDidMount!=null&&x.__h.push(x.componentDidMount);else{if(z&&tt.getDerivedStateFromProps==null&&E!==C&&x.componentWillReceiveProps!=null&&x.componentWillReceiveProps(E,q),!x.__e&&(x.shouldComponentUpdate!=null&&x.shouldComponentUpdate(E,x.__s,q)===!1||e.__v==n.__v)){for(e.__v!=n.__v&&(x.props=E,x.state=x.__s,x.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(rt){rt&&(rt.__=e)}),j=0;j<x._sb.length;j++)x.__h.push(x._sb[j]);x._sb=[],x.__h.length&&f.push(x);break t}x.componentWillUpdate!=null&&x.componentWillUpdate(E,x.__s,q),z&&x.componentDidUpdate!=null&&x.__h.push(function(){x.componentDidUpdate(C,A,O)})}if(x.context=q,x.props=E,x.__P=i,x.__e=!1,Y=Et.__r,Q=0,z){for(x.state=x.__s,x.__d=!1,Y&&Y(e),b=x.render(x.props,x.state,x.context),G=0;G<x._sb.length;G++)x.__h.push(x._sb[G]);x._sb=[]}else do x.__d=!1,Y&&Y(e),b=x.render(x.props,x.state,x.context),x.state=x.__s;while(x.__d&&++Q<25);x.state=x.__s,x.getChildContext!=null&&(s=Yn(Yn({},s),x.getChildContext())),z&&!S&&x.getSnapshotBeforeUpdate!=null&&(O=x.getSnapshotBeforeUpdate(C,A)),h=kh(i,Bo(vt=b!=null&&b.type===je&&b.key==null?b.props.children:b)?vt:[vt],e,n,s,l,u,f,h,p,m),x.base=e.__e,e.__u&=-161,x.__h.length&&f.push(x),D&&(x.__E=x.__=null)}catch(rt){if(e.__v=null,p||u!=null)if(rt.then){for(e.__u|=p?160:128;h&&h.nodeType==8&&h.nextSibling;)h=h.nextSibling;u[u.indexOf(h)]=null,e.__e=h}else for(ot=u.length;ot--;)ml(u[ot]);else e.__e=n.__e,e.__k=n.__k;Et.__e(rt,e,n)}else u==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):h=e.__e=Hg(n.__e,e,n,s,l,u,f,p,m);return(b=Et.diffed)&&b(e),128&e.__u?void 0:h}function Ch(i,e,n){for(var s=0;s<n.length;s++)yl(n[s],n[++s],n[++s]);Et.__c&&Et.__c(e,i),i.some(function(l){try{i=l.__h,l.__h=[],i.some(function(u){u.call(l)})}catch(u){Et.__e(u,l.__v)}})}function Hg(i,e,n,s,l,u,f,h,p){var m,b,x,S,C,A,O,D=n.props,E=e.props,z=e.type;if(z=="svg"?l="http://www.w3.org/2000/svg":z=="math"?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),u!=null){for(m=0;m<u.length;m++)if((C=u[m])&&"setAttribute"in C==!!z&&(z?C.localName==z:C.nodeType==3)){i=C,u[m]=null;break}}if(i==null){if(z==null)return document.createTextNode(E);i=document.createElementNS(l,z,E.is&&E),h&&(Et.__m&&Et.__m(e,u),h=!1),u=null}if(z===null)D===E||h&&i.data===E||(i.data=E);else{if(u=u&&ks.call(i.childNodes),D=n.props||ms,!h&&u!=null)for(D={},m=0;m<i.attributes.length;m++)D[(C=i.attributes[m]).name]=C.value;for(m in D)if(C=D[m],m!="children"){if(m=="dangerouslySetInnerHTML")x=C;else if(!(m in E)){if(m=="value"&&"defaultValue"in E||m=="checked"&&"defaultChecked"in E)continue;lo(i,m,null,C,l)}}for(m in E)C=E[m],m=="children"?S=C:m=="dangerouslySetInnerHTML"?b=C:m=="value"?A=C:m=="checked"?O=C:h&&typeof C!="function"||D[m]===C||lo(i,m,C,D[m],l);if(b)h||x&&(b.__html===x.__html||b.__html===i.innerHTML)||(i.innerHTML=b.__html),e.__k=[];else if(x&&(i.innerHTML=""),kh(i,Bo(S)?S:[S],e,n,s,z=="foreignObject"?"http://www.w3.org/1999/xhtml":l,u,f,u?u[0]:n.__k&&cr(n,0),h,p),u!=null)for(m=u.length;m--;)ml(u[m]);h||(m="value",z=="progress"&&A==null?i.removeAttribute("value"):A!==void 0&&(A!==i[m]||z=="progress"&&!A||z=="option"&&A!==D[m])&&lo(i,m,A,D[m],l),m="checked",O!==void 0&&O!==i[m]&&lo(i,m,O,D[m],l))}return i}function yl(i,e,n){try{if(typeof i=="function"){var s=typeof i.__u=="function";s&&i.__u(),s&&e==null||(i.__u=i(e))}else i.current=e}catch(l){Et.__e(l,n)}}function Th(i,e,n){var s,l;if(Et.unmount&&Et.unmount(i),(s=i.ref)&&(s.current&&s.current!==i.__e||yl(s,null,e)),(s=i.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(u){Et.__e(u,e)}s.base=s.__P=null}if(s=i.__k)for(l=0;l<s.length;l++)s[l]&&Th(s[l],e,n||typeof i.type!="function");n||ml(i.__e),i.__c=i.__=i.__e=void 0}function zg(i,e,n){return this.constructor(i,n)}function ur(i,e,n){var s,l,u,f;e==document&&(e=document.documentElement),Et.__&&Et.__(i,e),l=(s=typeof n=="function")?null:n&&n.__k||e.__k,u=[],f=[],vl(e,i=(!s&&n||e).__k=Vn(je,null,[i]),l||ms,ms,e.namespaceURI,!s&&n?[n]:l?null:e.firstChild?ks.call(e.childNodes):null,u,!s&&n?n:l?l.__e:e.firstChild,s,f),Ch(u,i,f)}function Mh(i,e){ur(i,e,Mh)}function Wg(i,e,n){var s,l,u,f,h=Yn({},i.props);for(u in i.type&&i.type.defaultProps&&(f=i.type.defaultProps),e)u=="key"?s=e[u]:u=="ref"?l=e[u]:h[u]=e[u]===void 0&&f!==void 0?f[u]:e[u];return arguments.length>2&&(h.children=arguments.length>3?ks.call(arguments,2):n),cs(i.type,h,s||i.key,l||i.ref,null)}function Bg(i,e){var n={__c:e="__cC"+_h++,__:i,Consumer:function(s,l){return s.children(l)},Provider:function(s){var l,u;return this.getChildContext||(l=new Set,(u={})[e]=this,this.getChildContext=function(){return u},this.componentWillUnmount=function(){l=null},this.shouldComponentUpdate=function(f){this.props.value!==f.value&&l.forEach(function(h){h.__e=!0,Qa(h)})},this.sub=function(f){l.add(f);var h=f.componentWillUnmount;f.componentWillUnmount=function(){l&&l.delete(f),h&&h.call(f)}}),s.children}};return n.Provider.__=n.Consumer.contextType=n}ks=xh.slice,Et={__e:function(i,e,n,s){for(var l,u,f;e=e.__;)if((l=e.__c)&&!l.__)try{if((u=l.constructor)&&u.getDerivedStateFromError!=null&&(l.setState(u.getDerivedStateFromError(i)),f=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(i,s||{}),f=l.__d),f)return l.__E=l}catch(h){i=h}throw i}},vh=0,On.prototype.setState=function(i,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Yn({},this.state),typeof i=="function"&&(i=i(Yn({},n),this.props)),i&&Yn(n,i),i!=null&&this.__v&&(e&&this._sb.push(e),Qa(this))},On.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),Qa(this))},On.prototype.render=je,Ni=[],yh=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ga=function(i,e){return i.__v.__b-e.__v.__b},Ao.__r=0,bh=/(PointerCapture)$|Capture$/i,gl=0,Za=Hu(!1),Ja=Hu(!0),_h=0;var Ug=0;function k(i,e,n,s,l,u){e||(e={});var f,h,p=e;if("ref"in p)for(h in p={},e)h=="ref"?f=e[h]:p[h]=e[h];var m={type:i,props:p,key:n,ref:f,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Ug,__i:-1,__u:0,__source:l,__self:u};if(typeof i=="function"&&(f=i.defaultProps))for(h in f)p[h]===void 0&&(p[h]=f[h]);return Et.vnode&&Et.vnode(m),m}var ui,ne,za,zu,fr=0,Lh=[],oe=Et,Wu=oe.__b,Bu=oe.__r,Uu=oe.diffed,$u=oe.__c,ju=oe.unmount,Yu=oe.__;function gr(i,e){oe.__h&&oe.__h(ne,i,fr||e),fr=0;var n=ne.__H||(ne.__H={__:[],__h:[]});return i>=n.__.length&&n.__.push({}),n.__[i]}function dt(i){return fr=1,bl(Ih,i)}function bl(i,e,n){var s=gr(ui++,2);if(s.t=i,!s.__c&&(s.__=[n?n(e):Ih(void 0,e),function(h){var p=s.__N?s.__N[0]:s.__[0],m=s.t(p,h);p!==m&&(s.__N=[m,s.__[1]],s.__c.setState({}))}],s.__c=ne,!ne.u)){var l=function(h,p,m){if(!s.__c.__H)return!0;var b=s.__c.__H.__.filter(function(S){return!!S.__c});if(b.every(function(S){return!S.__N}))return!u||u.call(this,h,p,m);var x=s.__c.props!==h;return b.forEach(function(S){if(S.__N){var C=S.__[0];S.__=S.__N,S.__N=void 0,C!==S.__[0]&&(x=!0)}}),u&&u.call(this,h,p,m)||x};ne.u=!0;var u=ne.shouldComponentUpdate,f=ne.componentWillUpdate;ne.componentWillUpdate=function(h,p,m){if(this.__e){var b=u;u=void 0,l(h,p,m),u=b}f&&f.call(this,h,p,m)},ne.shouldComponentUpdate=l}return s.__N||s.__}function Kt(i,e){var n=gr(ui++,3);!oe.__s&&_l(n.__H,e)&&(n.__=i,n.i=e,ne.__H.__h.push(n))}function Ss(i,e){var n=gr(ui++,4);!oe.__s&&_l(n.__H,e)&&(n.__=i,n.i=e,ne.__h.push(n))}function cn(i){return fr=5,Uo(function(){return{current:i}},[])}function Nh(i,e,n){fr=6,Ss(function(){return typeof i=="function"?(i(e()),function(){return i(null)}):i?(i.current=e(),function(){return i.current=null}):void 0},n==null?n:n.concat(i))}function Uo(i,e){var n=gr(ui++,7);return _l(n.__H,e)&&(n.__=i(),n.__H=e,n.__h=i),n.__}function Dh(i,e){return fr=8,Uo(function(){return i},e)}function Oh(i){var e=ne.context[i.__c],n=gr(ui++,9);return n.c=i,e?(n.__==null&&(n.__=!0,e.sub(ne)),e.props.value):i.__}function Ah(i,e){oe.useDebugValue&&oe.useDebugValue(e?e(i):i)}function Ph(){var i=gr(ui++,11);if(!i.__){for(var e=ne.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var n=e.__m||(e.__m=[0,0]);i.__="P"+n[0]+"-"+n[1]++}return i.__}function $g(){for(var i;i=Lh.shift();)if(i.__P&&i.__H)try{i.__H.__h.forEach(So),i.__H.__h.forEach(tl),i.__H.__h=[]}catch(e){i.__H.__h=[],oe.__e(e,i.__v)}}oe.__b=function(i){ne=null,Wu&&Wu(i)},oe.__=function(i,e){i&&e.__k&&e.__k.__m&&(i.__m=e.__k.__m),Yu&&Yu(i,e)},oe.__r=function(i){Bu&&Bu(i),ui=0;var e=(ne=i.__c).__H;e&&(za===ne?(e.__h=[],ne.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(So),e.__h.forEach(tl),e.__h=[],ui=0)),za=ne},oe.diffed=function(i){Uu&&Uu(i);var e=i.__c;e&&e.__H&&(e.__H.__h.length&&(Lh.push(e)!==1&&zu===oe.requestAnimationFrame||((zu=oe.requestAnimationFrame)||jg)($g)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),za=ne=null},oe.__c=function(i,e){e.some(function(n){try{n.__h.forEach(So),n.__h=n.__h.filter(function(s){return!s.__||tl(s)})}catch(s){e.some(function(l){l.__h&&(l.__h=[])}),e=[],oe.__e(s,n.__v)}}),$u&&$u(i,e)},oe.unmount=function(i){ju&&ju(i);var e,n=i.__c;n&&n.__H&&(n.__H.__.forEach(function(s){try{So(s)}catch(l){e=l}}),n.__H=void 0,e&&oe.__e(e,n.__v))};var Ku=typeof requestAnimationFrame=="function";function jg(i){var e,n=function(){clearTimeout(s),Ku&&cancelAnimationFrame(e),setTimeout(i)},s=setTimeout(n,100);Ku&&(e=requestAnimationFrame(n))}function So(i){var e=ne,n=i.__c;typeof n=="function"&&(i.__c=void 0,n()),ne=e}function tl(i){var e=ne;i.__c=i.__(),ne=e}function _l(i,e){return!i||i.length!==e.length||e.some(function(n,s){return n!==i[s]})}function Ih(i,e){return typeof e=="function"?e(i):e}const Yg="/assets/elf-icon-CuriXRkE.svg",Kg={getFileIcon:(i,e)=>{if(i==="folder")return"📁";switch(e.split(".").pop().toLowerCase()){case"pdf":return"📕";case"doc":case"docx":return"📘";case"txt":return"📄";case"xls":case"xlsx":return"📊";case"ppt":case"pptx":return"📑";case"jpg":case"jpeg":case"png":case"gif":case"bmp":return"🖼️";case"mp3":case"wav":case"ogg":return"🎵";case"mp4":case"avi":case"mkv":return"🎬";case"zip":case"rar":case"7z":return"📦";case"pkg":return"🍺";case"js":case"jsx":case"ts":case"tsx":return"⚡";case"html":return"🌐";case"css":return"🎨";case"json":return"📋";case"elf":case"self":case"sprx":case"prx":return k("img",{src:Yg,alt:"ELF",style:{width:"48px",height:"48px"}});default:return"📄"}}},Vg=({window:i,children:e,isActive:n,isDarkMode:s,onClose:l,onFocus:u,onDragStart:f,onMinimize:h})=>{const[p,m]=dt(!1),[b,x]=dt(!1),[S,C]=dt({x:0,y:0}),[A,O]=dt({x:0,y:0,width:0,height:0}),[D,E]=dt(!1),z=cn(null),it=cn({x:0,y:0});Kt(()=>{E("ontouchstart"in i||navigator.maxTouchPoints>0)},[]);const q=ot=>{if(ot.target.closest(".window-header")&&!ot.target.closest(".window-controls")){const tt=ot.touches[0];it.current={x:tt.clientX,y:tt.clientY},m(!0),f();const rt=z.current.getBoundingClientRect();C({x:tt.clientX-rt.left,y:tt.clientY-rt.top})}},j=ot=>{if(p){const tt=ot.touches[0],rt=z.current.getBoundingClientRect(),H=document.querySelector(".desktop-content").getBoundingClientRect();let W=tt.clientX-S.x,M=tt.clientY-S.y;z.current.style.left=`${W}px`,z.current.style.top=`${M}px`,vt(rt,H)}},Y=()=>{m(!1),x(!1)},Q=ot=>{if(ot.target.closest(".window-header")&&!ot.target.closest(".window-controls")){m(!0),f();const tt=z.current.getBoundingClientRect();C({x:ot.clientX-tt.left,y:ot.clientY-tt.top})}},G=ot=>{ot.stopPropagation(),x(!0);const tt=z.current.getBoundingClientRect();O({x:ot.clientX,y:ot.clientY,width:tt.width,height:tt.height})},vt=(ot,tt)=>{let rt=parseInt(z.current.style.left),H=parseInt(z.current.style.top),W=ot.width,M=ot.height;W>tt.width&&(W=tt.width,z.current.style.width=`${W}px`),M>tt.height&&(M=tt.height,z.current.style.height=`${M}px`),rt=Math.max(0,Math.min(rt,tt.width-W)),H=Math.max(0,Math.min(H,tt.height-M)),z.current.style.left=`${rt}px`,z.current.style.top=`${H}px`};return Kt(()=>{const ot=rt=>{const H=z.current.getBoundingClientRect(),W=document.querySelector(".desktop-content").getBoundingClientRect();if(p){let M=rt.clientX-S.x,Lt=rt.clientY-S.y;z.current.style.left=`${M}px`,z.current.style.top=`${Lt}px`,vt(H,W)}else if(b){let M=A.width+(rt.clientX-A.x),Lt=A.height+(rt.clientY-A.y);M=Math.max(200,Math.min(M,W.width)),Lt=Math.max(150,Math.min(Lt,W.height)),z.current.style.width=`${M}px`,z.current.style.height=`${Lt}px`,vt(H,W)}},tt=()=>{m(!1),x(!1)};return(p||b)&&(document.addEventListener("mousemove",ot),document.addEventListener("mouseup",tt)),()=>{document.removeEventListener("mousemove",ot),document.removeEventListener("mouseup",tt)}},[p,b,S,A]),Kt(()=>{const ot=new ResizeObserver(()=>{var W,M;const rt=(W=z.current)==null?void 0:W.getBoundingClientRect(),H=(M=document.querySelector(".desktop-content"))==null?void 0:M.getBoundingClientRect();rt&&H&&vt(rt,H)}),tt=document.querySelector(".desktop-content");return tt&&ot.observe(tt),()=>{ot.disconnect()}},[]),k("div",{ref:z,"data-window-id":i.id,className:`window ${n?"active":""} ${s?"dark":""} 
 ${b?"resizing":""} ${D?"touch-device":""} ${i.app==="PlayStation"?"console":""}`,style:{left:i.position.x,top:i.position.y,width:i.size.width,height:i.size.height,display:i.minimized?"none":"flex"},onMouseDown:u,onTouchStart:q,onTouchMove:j,onTouchEnd:Y,children:[k("div",{className:"window-header",onMouseDown:Q,children:[k("div",{className:"window-title",children:[k("span",{className:"window-icon",children:i.icon}),k("span",{className:"window-title-text",children:i.title})]}),k("div",{className:"window-controls",children:D?k(je,{children:[k("button",{className:"window-minimize touch",onClick:h,children:"−"}),k("button",{className:"window-close touch",onClick:l,children:"×"})]}):k(je,{children:[k("button",{className:"window-minimize",onClick:h,children:"−"}),k("button",{className:"window-close",onClick:l,children:"×"})]})})]}),k("div",{className:"window-content",children:e}),!D&&k("div",{className:"window-resize",onMouseDown:G})]})},Xg=({windows:i,activeWindow:e,isDarkMode:n,onWindowClick:s,onThemeToggle:l})=>k("div",{className:`taskbar ${n?"dark":""}`,children:[" ",k("div",{className:"taskbar-windows",children:[" ",i.map(u=>k("button",{className:`taskbar-window-button ${e===u.id?"active":""}`,onClick:()=>s(u.id,e===u.id),children:[" ",k("span",{className:"taskbar-window-icon",children:u.icon})," ",k("span",{className:"taskbar-window-title",children:u.title})," "]},u.id))," "]})," ",k("button",{className:"taskbar-theme-toggle",onClick:l,children:[" ",n?"☀️":"🌙"," "]})," "]}),ke="/".endsWith("/")?"/".slice(0,-1):"/";class Wt{static async fetch(e){try{const n=await fetch(`${ke}${e}`);if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(n){throw console.error("API Error:",n),n}}static async getSystemInfo(){return this.fetch("/api/system/info")}static async getStorageInfo(){return this.fetch("/api/storage/info")}static async getProcessList(){return this.fetch("/api/process/list")}static async executeScript(e){try{const n=await fetch(`${ke}/api/hscript`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({script:e})});if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(n){throw console.error("Script execution error:",n),n}}static async executeScriptStream(e,n){try{const l=(await fetch(`${ke}/api/hscript`,{method:"POST",body:e})).body.getReader();for(;;){const{done:u,value:f}=await l.read();if(u)break;const h=new TextDecoder().decode(f);n(h)}}catch(s){throw s}}static formatBytes(e){if(e===0)return"0 B";const n=1024,s=["B","KB","MB","GB","TB"],l=Math.floor(Math.log(e)/Math.log(n));return`${(e/Math.pow(n,l)).toFixed(1)} ${s[l]}`}static getTitleImageUrl(e){return`${ke}/api/title/image/${e}`}static async getSystemStatus(){return this.fetch("/api/system/status")}static async getSystemStats(){return this.fetch("/api/system/stats")}static async getAppList(){return this.fetch("/api/app/list")}static async runApp(e){try{const s=await(await fetch(`${ke}/api/app/run/${e}`)).json();return s.code>=0?{success:!0,message:"Application started successfully"}:s.code===-2137784308?{success:!1,message:"Application is already running"}:{success:!1,message:"Failed to start application"}}catch(n){throw console.error("App run error:",n),n}}static async getProfileList(){return this.fetch("/api/profile/list")}static getProfileImageUrl(e){return`${ke}/api/profile/image/${e}`}static async downloadBackup(e=null){const n=e?`${ke}/api/save/backup/${e}`:`${ke}/api/save/backup`;window.location.href=n}static async getTaskList(){return this.fetch("/api/task/list")}static async getTaskDetail(e){try{const n=await fetch(`${ke}/api/task/detail`,{method:"POST",body:JSON.stringify({id:e})});if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(n){throw console.error("Task detail error:",n),n}}static async updateTask(e,n){try{const l=await(await fetch(`${ke}/api/task/update`,{method:"POST",body:JSON.stringify({id:e,...n})})).json();if(l.error)throw new Error(l.error);return{id:e,...n}}catch(s){throw console.error("Task update error:",s),s}}static async createTask(e){try{const n=await fetch(`${ke}/api/task/create`,{method:"POST",body:JSON.stringify({name:e})});if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(n){throw console.error("Task create error:",n),n}}static async deleteTask(e){try{const n=await fetch(`${ke}/api/task/delete`,{method:"POST",body:JSON.stringify({id:e})});if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(n){throw console.error("Task delete error:",n),n}}static async streamTaskLog(e,n){try{const l=(await fetch(`${ke}/api/task/log`,{method:"POST",body:JSON.stringify({id:e})})).body.getReader();for(;;){const{done:u,value:f}=await l.read();if(u)break;const h=new TextDecoder().decode(f);n(h)}}catch(s){throw console.error("Task log stream error:",s),s}}static async getTaskStatus(){try{const e=await fetch(`${ke}/api/task/status`);if(!e.ok)throw new Error("Network response was not ok");return await e.json()}catch(e){throw console.error("Task status error:",e),e}}static async listFiles(e){try{const n=await fetch(`${ke}/api/fs/list`,{method:"POST",body:JSON.stringify({path:e})});if(!n.ok)throw new Error("Network response was not ok");return(await n.json()).map(l=>({id:`${l.name}-${l.mtime}`,name:l.name,type:l.isDirectory?"folder":"file",size:l.size,mtime:l.mtime,permission:l.mode.toString(8),isDirectory:l.isDirectory}))}catch(n){throw console.error("Failed to list files:",n),n}}static async downloadFiles(e){try{const n=btoa(e.join(",")),s=`${ke}/api/fs/download/${n}`;window.open(s,"_blank")}catch(n){throw console.error("Download error:",n),n}}static async renameFile(e,n){try{const s=await fetch(`${ke}/api/fs/rename`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,name:n})});if(!s.ok)throw new Error("Network response was not ok");return await s.json()}catch(s){throw console.error("Rename error:",s),s}}static async uploadFile(e,n,s){return new Promise((l,u)=>{const f=new XMLHttpRequest,h=new FormData;h.append("file",n),f.open("POST",`${ke}/api/fs/upload/${e}`,!0),f.upload.onprogress=p=>{if(p.lengthComputable&&s){const m=p.loaded/p.total*100;s(m)}},f.onload=()=>{f.status>=200&&f.status<300?l(JSON.parse(f.responseText)):u(new Error("Network response was not ok"))},f.onerror=()=>u(new Error("Network error")),f.send(h)})}}const qg=({isDarkMode:i})=>{const[e,n]=dt(null),[s,l]=dt(null),[u,f]=dt(!0),[h,p]=dt(new Set),[m,b]=dt(0);Kt(()=>{const O=setInterval(()=>{b(D=>D+1)},1e3);return()=>clearInterval(O)},[]);const x=async()=>{try{const O=await Wt.getSystemStatus(),D=new Set;e&&(Math.abs(O.cpu.frequency-e.cpu.frequency)>5e7&&D.add("frequency"),Math.abs(O.cpu.temperature-e.cpu.temperature)>.5&&D.add("temperature"),Math.abs(O.cpu.socSensorTemperature-e.cpu.socSensorTemperature)>.5&&D.add("socTemp")),p(D),n(O),l(null),setTimeout(()=>p(new Set),1e3)}catch(O){console.error("System info alınamadı:",O),l("Failed to load system information")}finally{f(!1)}};Kt(()=>{x();const O=setInterval(x,5e3);return()=>clearInterval(O)},[]);const S=O=>{if(!O)return"--:--:--";const E=Math.floor(Date.now()/1e3)-O,z=Math.floor(E/3600),it=Math.floor(E%3600/60),q=E%60,j=Y=>String(Y).padStart(2,"0");return`${j(z)}:${j(it)}:${j(q)}`},C=O=>{switch(O){case 0:return"6CPU";case 1:return"7CPU (LOW)";case 5:return"7CPU (NORMAL)";default:return"Unknown"}},A=(O,D)=>{let E="info-value";return h.has(O)&&(E+=" updated"),O.includes("temperature")&&D>45&&(E+=" warning"),E};return!e||s?k("div",{className:`system-info ${i?"dark":""}`,children:[k("div",{className:"system-info-header",children:"System Information"}),k("div",{className:"system-info-error",children:[k("div",{className:"error-icon",children:"⚠️"}),k("div",{className:"error-message",children:s||"Waiting for data..."}),k("div",{className:"error-detail",children:"Unable to retrieve system information. Please check your connection."})]})]}):k("div",{className:`system-info ${i?"dark":""}`,children:[k("div",{className:"system-info-header",children:"System Status"}),k("div",{className:"system-info-content",children:[e.app&&e.app.titleID&&k("div",{className:"info-section",children:[k("div",{className:"section-title",children:"Running App"}),k("div",{className:"game-info",children:[k("div",{className:"game-image",children:k("img",{src:Wt.getTitleImageUrl(e.app.titleID),alt:e.app.titleName||e.app.titleID,onError:O=>O.target.style.display="none"})}),k("div",{className:"game-details",children:[k("div",{className:"info-group",children:[k("div",{className:"info-label",children:"Title"}),k("div",{className:"info-value",children:e.app.titleName||e.app.titleID})]}),k("div",{className:"info-group",children:[k("div",{className:"info-label",children:"Process"}),k("div",{className:"info-value",children:[e.app.comm," (",e.app.pid,")"]})]}),k("div",{className:"info-group",children:[k("div",{className:"info-label",children:"Uptime"}),k("div",{className:"info-value uptime",children:S(e.app.start)})]})]})]})]}),k("div",{className:"info-section",children:[k("div",{className:"section-title",children:"System Status"}),k("div",{className:"info-group",children:[k("div",{className:"info-label",children:"Mode"}),k("div",{className:"info-value",children:C(e.cpu.mode)})]}),k("div",{className:"info-group",children:[k("div",{className:"info-label",children:"Frequency"}),k("div",{className:A("frequency",e.cpu.frequency),children:[(e.cpu.frequency/1e6).toFixed(0)," MHz"]})]}),k("div",{className:"info-group",children:[k("div",{className:"info-label",children:"CPU Temp"}),k("div",{className:A("temperature",e.cpu.temperature),children:[e.cpu.temperature.toFixed(1),"°C"]})]}),k("div",{className:"info-group",children:[k("div",{className:"info-label",children:"SoC Temp"}),k("div",{className:A("socTemp",e.cpu.socSensorTemperature),children:[e.cpu.socSensorTemperature.toFixed(1),"°C"]})]})]})]})]})};let or=null;const Eh=({isDarkMode:i,showPanel:e,onClose:n})=>{const[s,l]=dt(null),[u,f]=dt(null),[h,p]=dt(!0),m=cn(null),b=async()=>{if(or){l(or),p(!1);return}try{const S=await Wt.getSystemInfo();or=S,l(S),f(null),clearTimeout(m.current)}catch(S){console.error("System bilgisi alınamadı:",S),f("Failed to load system information"),e&&(m.current=setTimeout(()=>{p(!0),b()},5e3))}finally{p(!1)}};Kt(()=>(e&&!or?b():e&&or&&(l(or),p(!1)),()=>{m.current&&clearTimeout(m.current)}),[e]);const x=S=>{if(!S)return"Unknown";const A=Math.floor(Date.now()/1e3)-S,O=A%60,D=Math.floor(A/60)%60,E=Math.floor(A/3600)%24,z=Math.floor(A/86400);return z>0?`${z}d ${E}h ${D}m ${O}s`:E>0?`${E}h ${D}m ${O}s`:D>0?`${D}m ${O}s`:`${O}s`};return e?k("div",{className:`system-details-overlay ${i?"dark":""}`,children:k("div",{className:"system-details-panel",children:[k("div",{className:"system-details-header",children:[k("span",{children:"System Information"}),k("button",{onClick:n,children:"×"})]}),h?k("div",{className:"system-details-loading",children:"Loading system information..."}):u?k("div",{className:"system-details-error",children:[u,k("button",{className:"retry-button",onClick:()=>{p(!0),b()},children:"Try Again"})]}):s&&k("div",{className:"system-details-content",children:[k("div",{className:"detail-group",children:[k("h3",{children:"Hardware Information"}),k("div",{className:"detail-item",children:[k("span",{children:"Model Name:"}),k("span",{children:s.modelName})]}),k("div",{className:"detail-item",children:[k("span",{children:"Serial Number:"}),k("span",{children:s.serialNumber})]}),k("div",{className:"detail-item",children:[k("span",{children:"Hardware Model:"}),k("span",{children:s.hw_model})]}),k("div",{className:"detail-item",children:[k("span",{children:"Architecture:"}),k("span",{children:s.hw_machine})]})]}),k("div",{className:"detail-group",children:[k("h3",{children:"Software Information"}),k("div",{className:"detail-item",children:[k("span",{children:"Operating System:"}),k("span",{children:s.ostype})]}),k("div",{className:"detail-item",children:[k("span",{children:"SDK Version:"}),k("span",{children:s.sdk_version})]}),k("div",{className:"detail-item",children:[k("span",{children:"PS4 SDK:"}),k("span",{children:s.ps4_sdk_version})]}),k("div",{className:"detail-item",children:[k("span",{children:"Kernel Version:"}),k("span",{children:s.kernel_version})]}),k("div",{className:"detail-item",children:[k("span",{children:"Update Version:"}),k("span",{children:s.upd_version})]}),k("div",{className:"detail-item",children:[k("span",{children:"System Uptime:"}),k("span",{children:x(s.kernel_boot_time)})]})]})]})]})}):null},Gg=({isDarkMode:i})=>{const[e,n]=dt([]),[s,l]=dt(!0),[u,f]=dt(null),[h,p]=dt(null),[m,b]=dt(null);Kt(()=>{(async()=>{try{const O=(await Wt.getAppList()).filter(D=>D.size>0).sort((D,E)=>E.size-D.size);n(O),f(null)}catch(A){console.error("Apps yüklenemedi:",A),f("Failed to load applications")}finally{l(!1)}})()},[]);const x=C=>{p(C)},S=async C=>{try{const A=await Wt.runApp(C);b(A),setTimeout(()=>{b(null)},3e3)}catch{b({success:!1,message:"Error running application"})}};return k("div",{className:`applications ${i?"dark":""}`,children:s?k("div",{className:"applications-loading",children:"Loading applications..."}):u?k("div",{className:"applications-error",children:u}):k(je,{children:[k("div",{className:"app-grid",children:e.map(C=>k("div",{className:"app-item",onClick:()=>x(C),children:[k("div",{className:"app-icon",children:k("img",{src:Wt.getTitleImageUrl(C.titleId),alt:C.titleName,onError:A=>{A.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',A.target.style.background="#2c3e50"}})}),k("div",{className:"app-name",children:C.titleName}),k("div",{className:"app-size",children:Wt.formatBytes(C.size)})]},C.titleId))}),h&&k("div",{className:"app-details-overlay",onClick:()=>p(null),children:k("div",{className:"app-details",onClick:C=>C.stopPropagation(),children:[k("div",{className:"app-details-header",children:[k("h2",{children:h.titleName}),k("button",{onClick:()=>p(null),children:"×"})]}),k("div",{className:"app-details-content",children:[k("div",{className:"app-details-icon",children:k("img",{src:Wt.getTitleImageUrl(h.titleId),alt:h.titleName,onError:C=>{C.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',C.target.style.background="#2c3e50"}})}),k("div",{className:"app-details-info",children:[k("div",{className:"detail-row",children:[k("span",{children:"Title ID:"}),k("span",{children:h.titleId})]}),k("div",{className:"detail-row",children:[k("span",{children:"Size:"}),k("span",{children:Wt.formatBytes(h.size)})]}),k("div",{className:"detail-row",children:[k("span",{children:"Install Date:"}),k("span",{children:new Date(h.installTime).toLocaleString()})]}),k("div",{className:"detail-actions",children:[k("button",{className:`run-button ${m?m.success?"success":"error":""}`,onClick:()=>S(h.titleId),children:"Run Application"}),m&&k("div",{className:`status-message ${m.success?"success":"error"}`,children:m.message})]})]})]})]})})]})})},Zg=({contextMenu:i,setContextMenu:e,isDarkMode:n=!0})=>{const[s,l]=dt("/"),[u,f]=dt(["/"]),[h,p]=dt(0),[m,b]=dt([]),[x,S]=dt(!0),[C,A]=dt(null),[O,D]=dt({isSelecting:!1,start:{x:0,y:0},end:{x:0,y:0}}),[E,z]=dt(new Set),[it,q]=dt(!1),[j,Y]=dt({id:null,time:0}),[Q,G]=dt(-1),[vt,ot]=dt(!1),[tt,rt]=dt(""),[H,W]=dt(null),[M,Lt]=dt(null),[Ft,qt]=dt(null),F=cn(null),K=async et=>{try{S(!0),A(null);const _t=await Wt.listFiles(et);b(_t)}catch(_t){console.error("Failed to load files:",_t),A("Failed to load files")}finally{S(!1)}};Kt(()=>{K(s)},[s]);const Z=et=>{l(et.target.value)},ht=et=>{et.key==="Enter"&&pt(s)},pt=async et=>{const _t=et.endsWith("/")?et:et+"/";if(e({...i,show:!1}),_t!==u[h]){const Nt=u.slice(0,h+1);f([...Nt,_t]),p(Nt.length)}l(_t)},ct=()=>{h>0&&(p(h-1),l(u[h-1]))},Mt=()=>{h<u.length-1&&(p(h+1),l(u[h+1]))},ut=()=>{const et=s.split("/").slice(0,-2).join("/")+"/";et!==s&&pt(et)};Kt(()=>{const et=_t=>{var Nt;if(!(!((Nt=F.current)!=null&&Nt.contains(document.activeElement))||document.activeElement.tagName==="INPUT"||document.activeElement.tagName==="TEXTAREA"))switch(_t.key){case"Tab":_t.preventDefault(),G(Ot=>{const Ut=_t.shiftKey?Ot<=0?m.length-1:Ot-1:Ot>=m.length-1?0:Ot+1;z(new Set([m[Ut].id]));const Jt=F.current.querySelector(`[data-id="${m[Ut].id}"]`);return Jt==null||Jt.scrollIntoView({block:"nearest"}),Ut});break;case"Enter":if(Q>=0){const Ot=m[Q];Rt(Ot)}break}};return window.addEventListener("keydown",et),()=>window.removeEventListener("keydown",et)},[m,Q]),Kt(()=>{const et=Nt=>{if(O.isSelecting){const Ot=F.current.getBoundingClientRect();let Ut=Nt.clientX-Ot.left,Jt=Nt.clientY-Ot.top;Ut=Math.max(0,Math.min(Ut,Ot.width)),Jt=Math.max(0,Math.min(Jt,Ot.height)),D(nn=>({...nn,end:{x:Ut,y:Jt}})),Dt(Ut,Jt,Nt.ctrlKey)}},_t=()=>{O.isSelecting&&D(Nt=>({...Nt,isSelecting:!1}))};return O.isSelecting&&(document.addEventListener("mousemove",et),document.addEventListener("mouseup",_t)),()=>{document.removeEventListener("mousemove",et),document.removeEventListener("mouseup",_t)}},[O.isSelecting]);const xt=et=>{if(!et.target.closest(".context-menu")&&(et.preventDefault(),!et.target.closest(".file-item")&&!(et.target.classList.contains("file-grid")&&et.clientX>=et.target.getBoundingClientRect().right-20)&&(e({...i,show:!1}),et.button===0))){const _t=F.current.getBoundingClientRect(),Nt=et.clientX-_t.left,Ot=et.clientY-_t.top;D({isSelecting:!0,start:{x:Nt,y:Ot},end:{x:Nt,y:Ot}}),!et.ctrlKey&&!et.target.closest(".file-item")&&z(new Set),q(!1)}},Dt=(et,_t,Nt)=>{const Ot=F.current.getBoundingClientRect();et=Math.max(0,Math.min(et,Ot.width)),_t=Math.max(0,Math.min(_t,Ot.height));const Ut={left:Math.min(O.start.x,et),right:Math.max(O.start.x,et),top:Math.min(O.start.y,_t),bottom:Math.max(O.start.y,_t)},Jt=F.current.getElementsByClassName("file-item"),nn=new Set(Nt?E:[]);Array.from(Jt).forEach(rn=>{const Ee=rn.getBoundingClientRect(),P={left:Ee.left-Ot.left,right:Ee.right-Ot.left,top:Ee.top-Ot.top,bottom:Ee.bottom-Ot.top};if(!(P.right<Ut.left||P.left>Ut.right||P.bottom<Ut.top||P.top>Ut.bottom)){const V=rn.getAttribute("data-id");V&&nn.add(V)}}),z(nn)},zt=et=>{if(O.isSelecting){const _t=F.current.getBoundingClientRect(),Nt=et.clientX-_t.left,Ot=et.clientY-_t.top,Ut=Math.abs(O.end.x-O.start.x),Jt=Math.abs(O.end.y-O.start.y);(Ut>=5||Jt>=5)&&Dt(Nt,Ot,et.ctrlKey)}D(_t=>({..._t,isSelecting:!1})),setTimeout(()=>q(!1),0)},Pn=(et,_t)=>{if(et.stopPropagation(),!it){const Nt=new Date().getTime();if(j.id===_t.id&&Nt-j.time<300){Rt(_t),Y({id:null,time:0});return}if(Y({id:_t.id,time:Nt}),e({...i,show:!1}),et.ctrlKey||et.metaKey){const Ot=new Set(E);E.has(_t.id)?Ot.delete(_t.id):Ot.add(_t.id),z(Ot)}else if(et.shiftKey&&E.size>0){const Ot=Array.from(E)[E.size-1],Ut=m.findIndex(P=>P.id===Ot),Jt=m.findIndex(P=>P.id===_t.id),nn=Math.min(Ut,Jt),rn=Math.max(Ut,Jt),Ee=new Set(E);for(let P=nn;P<=rn;P++)Ee.add(m[P].id);z(Ee)}else z(new Set([_t.id]))}},Rt=et=>{if(et.isDirectory){e({...i,show:!1});const _t=s+et.name+"/";pt(_t)}else console.log("Open File:",et.name)},ce=(et,_t)=>{O.isSelecting||(et.preventDefault(),E.has(_t.id)||z(new Set([_t.id])),e({show:!0,x:et.pageX,y:et.pageY,item:_t,isBackground:!1}))},en=et=>{const _t=Array.from(E).map(Ot=>{const Ut=m.find(Jt=>Jt.id===Ot);return s+Ut.name}),Nt=_t.length>0?_t:[s+et.name];try{Wt.downloadFiles(Nt)}catch(Ot){console.error("Download failed:",Ot)}e({...i,show:!1})},bn=et=>{if(et.preventDefault(),et.target.classList.contains("file-manager")||et.target.classList.contains("file-grid"))if(E.size>0){const _t=m.find(Nt=>Nt.id===Array.from(E)[0]);e({show:!0,x:et.pageX,y:et.pageY,isBackground:!1,item:_t})}else e({show:!0,x:et.pageX,y:et.pageY,isBackground:!0,item:null})},At=et=>{et.preventDefault(),et.dataTransfer.dropEffect="copy"},ue=async et=>{et.preventDefault();const _t=Array.from(et.dataTransfer.files);if(_t.length>0){Lt(0),qt(null);try{for(const Nt of _t)await Wt.uploadFile(s+Nt.name,Nt,Ot=>{Lt(Ot)});Lt(100),setTimeout(()=>Lt(null),3e3),K(s)}catch(Nt){console.error("Upload failed:",Nt),qt(Nt.message)}}},Ie=async et=>{try{tt&&tt!==et.name&&(await Wt.renameFile(s+et.name,tt),K(s))}catch(_t){console.error("Rename failed:",_t)}finally{ot(!1),W(null)}};return k("div",{ref:F,className:`file-manager ${n?"dark":""}`,onMouseDown:xt,onMouseUp:zt,onContextMenu:bn,onDragOver:At,onDrop:ue,children:[k("div",{className:"path-navigation",children:[k("div",{className:"path-buttons",children:[k("button",{onClick:ct,disabled:h<=0,title:"Back",children:"◀"}),k("button",{onClick:Mt,disabled:h>=u.length-1,title:"Forward",children:"▶"}),k("button",{onClick:ut,disabled:s==="/",title:"Parent Directory",children:"▲"})]}),k("input",{type:"text",className:"path-input",value:s,onChange:Z,onKeyDown:ht})]}),k("div",{className:"file-grid",onScroll:()=>{O.isSelecting&&D(et=>({...et,isSelecting:!1}))},children:x?k("div",{className:"loading",children:"Loading files..."}):C?k("div",{className:"error",children:C}):m.length===0?k("div",{className:"empty",children:"No files found"}):m.map((et,_t)=>k("div",{"data-id":String(et.id),className:`file-item ${E.has(et.id)?"selected":""} ${_t===Q?"focused":""}`,tabIndex:0,onClick:Nt=>Pn(Nt,et),onContextMenu:Nt=>ce(Nt,et),onFocus:()=>{G(_t),E.has(et.id)||z(new Set([et.id]))},children:[k("div",{className:"file-icon",children:Kg.getFileIcon(et.type,et.name)}),vt&&H===et.id?k("input",{type:"text",className:"rename-input",value:tt,onChange:Nt=>rt(Nt.target.value),onBlur:()=>Ie(et),onKeyDown:Nt=>{Nt.key==="Enter"?Ie(et):Nt.key==="Escape"&&(ot(!1),W(null))},autoFocus:!0}):k("div",{className:"file-name",children:et.name})]},et.id))}),M!==null&&k("div",{className:"upload-progress",children:["Uploading: ",Math.round(M),"%",k("div",{className:"upload-progress-bar",children:k("div",{className:"upload-progress-bar-fill",style:{width:`${M}%`}})})]}),Ft&&k("div",{className:"upload-error",children:Ft}),O.isSelecting&&k("div",{className:"selection-box",style:{left:`${Math.min(O.start.x,O.end.x)}px`,top:`${Math.min(O.start.y,O.end.y)}px`,width:`${Math.abs(O.end.x-O.start.x)}px`,height:`${Math.abs(O.end.y-O.start.y)}px`}}),i.show&&k("div",{className:`context-menu ${n?"dark":""}`,style:{left:`${i.x}px`,top:`${i.y}px`},children:i.isBackground?k("div",{className:"context-menu-item create-folder",onClick:null,children:"Create Folder"}):k(je,{children:[k("div",{className:"context-menu-item download",onClick:()=>en(i.item),children:"Download"}),k("div",{className:"context-menu-item rename",onClick:()=>null,children:"Rename (Disabled)"}),k("div",{className:"context-menu-item delete",onClick:()=>null,children:"Delete (Disabled)"})]})})]})},Jg=({isDarkMode:i})=>{const[e,n]=dt([]),[s,l]=dt(!0),[u,f]=dt(null),[h,p]=dt(new Set),[m,b]=dt(!1),[x,S]=dt(null),[C,A]=dt({key:"pid",direction:"asc"}),[O,D]=dt(0);Kt(()=>{const Y=setInterval(()=>{D(Q=>Q+1)},1e3);return()=>clearInterval(Y)},[]),Kt(()=>{const Y=async()=>{try{const G=await Wt.getProcessList();if(!Array.isArray(G))throw new Error("Invalid data format");const vt=e.reduce((rt,H)=>(rt[H.pid]=H,rt),{}),ot=new Set,tt=G.map(rt=>{const H=vt[rt.pid];return H&&(H.rssize!==rt.rssize&&ot.add(`memory-${rt.pid}`),H.stat!==rt.stat&&ot.add(`stat-${rt.pid}`)),delete vt[rt.pid],rt});p(ot),setTimeout(()=>p(new Set),1e3),n(tt),f(null),b(!1),S(new Date)}catch(G){console.error("Failed to fetch processes:",G),e.length===0?f("Failed to load process list"):b(!0)}finally{l(!1)}};Y();const Q=setInterval(Y,5e3);return()=>clearInterval(Q)},[]);const E=Y=>{let Q="asc";C.key===Y&&C.direction==="asc"&&(Q="desc"),A({key:Y,direction:Q})},z=()=>{const Y=[...e];return Y.sort((Q,G)=>{let vt=Q[C.key],ot=G[C.key];return C.key==="rssize"&&(vt=Q.rssize*Q.pageSize,ot=G.rssize*G.pageSize),vt<ot?C.direction==="asc"?-1:1:vt>ot?C.direction==="asc"?1:-1:0}),Y},it=Y=>`${(Y*16384/(1024*1024)).toFixed(1)} MB`,q=Y=>{if(!Y)return"--:--:--";const G=Math.floor(Date.now()/1e3)-Y,vt=Math.floor(G/3600),ot=Math.floor(G%3600/60),tt=G%60,rt=H=>String(H).padStart(2,"0");return`${rt(vt)}:${rt(ot)}:${rt(tt)}`},j=(Y,Q)=>{const G=`${Y}-${Q}`;return h.has(G)?"updated":""};return s&&e.length===0?k("div",{className:`process-list ${i?"dark":""}`,children:k("div",{className:"process-list-message loading",children:[k("div",{className:"loading-spinner"}),k("div",{children:"Loading process list..."})]})}):u&&e.length===0?k("div",{className:`process-list ${i?"dark":""}`,children:k("div",{className:"process-list-message error",children:u})}):e.length?k("div",{className:`process-list ${i?"dark":""}`,children:[m&&k("div",{className:"update-status error",children:[k("span",{className:"error-icon",children:"⚠️"}),"Last update failed",x&&k("span",{className:"last-update",children:["Last successful update: ",x.toLocaleTimeString()]})]}),k("table",{children:[k("thead",{children:k("tr",{children:[k("th",{onClick:()=>E("pid"),children:"PID"}),k("th",{onClick:()=>E("comm"),children:"Process Name"}),k("th",{onClick:()=>E("ppid"),children:"PPID"}),k("th",{onClick:()=>E("rssize"),children:"Memory"}),k("th",{onClick:()=>E("stat"),children:"Status"}),k("th",{onClick:()=>E("start"),children:"Uptime"}),k("th",{onClick:()=>E("emul"),children:"Type"}),k("th",{onClick:()=>E("titleID"),children:"Title ID"})]})}),k("tbody",{children:z().map(Y=>k("tr",{children:[k("td",{children:Y.pid}),k("td",{children:Y.comm}),k("td",{children:Y.ppid}),k("td",{className:j("memory",Y.pid),children:it(Y.rssize)}),k("td",{className:j("stat",Y.pid),children:Y.stat}),k("td",{children:q(Y.start)}),k("td",{children:Y.emul}),k("td",{children:Y.titleID||"-"})]},Y.pid))})]})]}):k("div",{className:`process-list ${i?"dark":""}`,children:k("div",{className:"process-list-message",children:"No processes found"})})},Qg=({isDarkMode:i})=>{const[e,n]=dt([]),[s,l]=dt(!0),[u,f]=dt(null),[h,p]=dt(null);Kt(()=>{(async()=>{try{const S=await Wt.getProfileList();n(S),f(null)}catch(S){console.error("Profiles yüklenemedi:",S),f("Failed to load profiles")}finally{l(!1)}})()},[]);const m=x=>{p(x)},b=async(x=null)=>{try{await Wt.downloadBackup(x)}catch(S){console.error("Backup failed:",S)}};return k("div",{className:`profiles ${i?"dark":""}`,children:s?k("div",{className:"profiles-loading",children:"Loading profiles..."}):u?k("div",{className:"profiles-error",children:u}):k(je,{children:[k("div",{className:"profiles-header",children:[k("h2",{children:"User Profiles"}),k("button",{className:"backup-all-button",onClick:()=>b(),children:[k("span",{className:"icon",children:"💾"}),"Save All Profile Backup Files"]})]}),k("div",{className:"profile-grid",children:e.map(x=>k("div",{className:"profile-item",onClick:()=>m(x),children:[k("div",{className:"profile-icon",children:k("img",{src:Wt.getProfileImageUrl(x.profileId),alt:x.username,onError:S=>{S.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',S.target.style.background="#2c3e50"}})}),k("div",{className:"profile-name",children:x.username})]},x.profileId))}),h&&k("div",{className:"profile-details-overlay",onClick:()=>p(null),children:k("div",{className:"profile-details",onClick:x=>x.stopPropagation(),children:[k("div",{className:"profile-details-header",children:[k("h2",{children:h.username}),k("button",{onClick:()=>p(null),children:"×"})]}),k("div",{className:"profile-details-content",children:[k("div",{className:"profile-details-icon",children:k("img",{src:Wt.getProfileImageUrl(h.profileId),alt:h.username,onError:x=>{x.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',x.target.style.background="#2c3e50"}})}),k("div",{className:"profile-details-info",children:[k("div",{className:"detail-row",children:[k("span",{children:"Username:"}),k("span",{children:h.username})]}),k("div",{className:"detail-row",children:[k("span",{children:"Profile ID:"}),k("span",{children:h.profileId})]}),k("div",{className:"detail-actions",children:k("button",{className:"backup-button",onClick:()=>b(h.profileId),children:"Backup Save Files"})})]})]})]})})]})})};function tm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Co={exports:{}},em=Co.exports,Vu;function Fh(){return Vu||(Vu=1,function(i,e){(function(n,s){i.exports=s()})(em,function(){var n=navigator.userAgent,s=navigator.platform,l=/gecko\/\d/i.test(n),u=/MSIE \d/.test(n),f=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(n),h=/Edge\/(\d+)/.exec(n),p=u||f||h,m=p&&(u?document.documentMode||6:+(h||f)[1]),b=!h&&/WebKit\//.test(n),x=b&&/Qt\/\d+\.\d+/.test(n),S=!h&&/Chrome\//.test(n),C=/Opera\//.test(n),A=/Apple Computer/.test(navigator.vendor),O=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(n),D=/PhantomJS/.test(n),E=A&&(/Mobile\/\w+/.test(n)||navigator.maxTouchPoints>2),z=/Android/.test(n),it=E||z||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(n),q=E||/Mac/.test(s),j=/\bCrOS\b/.test(n),Y=/win/i.test(s),Q=C&&n.match(/Version\/(\d*\.\d*)/);Q&&(Q=Number(Q[1])),Q&&Q>=15&&(C=!1,b=!0);var G=q&&(x||C&&(Q==null||Q<12.11)),vt=l||p&&m>=9;function ot(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var tt=function(t,r){var a=t.className,o=ot(r).exec(a);if(o){var c=a.slice(o.index+o[0].length);t.className=a.slice(0,o.index)+(c?o[1]+c:"")}};function rt(t){for(var r=t.childNodes.length;r>0;--r)t.removeChild(t.firstChild);return t}function H(t,r){return rt(t).appendChild(r)}function W(t,r,a,o){var c=document.createElement(t);if(a&&(c.className=a),o&&(c.style.cssText=o),typeof r=="string")c.appendChild(document.createTextNode(r));else if(r)for(var d=0;d<r.length;++d)c.appendChild(r[d]);return c}function M(t,r,a,o){var c=W(t,r,a,o);return c.setAttribute("role","presentation"),c}var Lt;document.createRange?Lt=function(t,r,a,o){var c=document.createRange();return c.setEnd(o||t,a),c.setStart(t,r),c}:Lt=function(t,r,a){var o=document.body.createTextRange();try{o.moveToElementText(t.parentNode)}catch{return o}return o.collapse(!0),o.moveEnd("character",a),o.moveStart("character",r),o};function Ft(t,r){if(r.nodeType==3&&(r=r.parentNode),t.contains)return t.contains(r);do if(r.nodeType==11&&(r=r.host),r==t)return!0;while(r=r.parentNode)}function qt(){var t;try{t=document.activeElement}catch{t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function F(t,r){var a=t.className;ot(r).test(a)||(t.className+=(a?" ":"")+r)}function K(t,r){for(var a=t.split(" "),o=0;o<a.length;o++)a[o]&&!ot(a[o]).test(r)&&(r+=" "+a[o]);return r}var Z=function(t){t.select()};E?Z=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:p&&(Z=function(t){try{t.select()}catch{}});function ht(t){var r=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,r)}}function pt(t,r,a){r||(r={});for(var o in t)t.hasOwnProperty(o)&&(a!==!1||!r.hasOwnProperty(o))&&(r[o]=t[o]);return r}function ct(t,r,a,o,c){r==null&&(r=t.search(/[^\s\u00a0]/),r==-1&&(r=t.length));for(var d=o||0,g=c||0;;){var v=t.indexOf("	",d);if(v<0||v>=r)return g+(r-d);g+=v-d,g+=a-g%a,d=v+1}}var Mt=function(){this.id=null,this.f=null,this.time=0,this.handler=ht(this.onTimeout,this)};Mt.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},Mt.prototype.set=function(t,r){this.f=r;var a=+new Date+t;(!this.id||a<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=a)};function ut(t,r){for(var a=0;a<t.length;++a)if(t[a]==r)return a;return-1}var xt=50,Dt={toString:function(){return"CodeMirror.Pass"}},zt={scroll:!1},Pn={origin:"*mouse"},Rt={origin:"+move"};function ce(t,r,a){for(var o=0,c=0;;){var d=t.indexOf("	",o);d==-1&&(d=t.length);var g=d-o;if(d==t.length||c+g>=r)return o+Math.min(g,r-c);if(c+=d-o,c+=a-c%a,o=d+1,c>=r)return o}}var en=[""];function bn(t){for(;en.length<=t;)en.push(At(en)+" ");return en[t]}function At(t){return t[t.length-1]}function ue(t,r){for(var a=[],o=0;o<t.length;o++)a[o]=r(t[o],o);return a}function Ie(t,r,a){for(var o=0,c=a(r);o<t.length&&a(t[o])<=c;)o++;t.splice(o,0,r)}function et(){}function _t(t,r){var a;return Object.create?a=Object.create(t):(et.prototype=t,a=new et),r&&pt(r,a),a}var Nt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Ot(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Nt.test(t))}function Ut(t,r){return r?r.source.indexOf("\\w")>-1&&Ot(t)?!0:r.test(t):Ot(t)}function Jt(t){for(var r in t)if(t.hasOwnProperty(r)&&t[r])return!1;return!0}var nn=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function rn(t){return t.charCodeAt(0)>=768&&nn.test(t)}function Ee(t,r,a){for(;(a<0?r>0:r<t.length)&&rn(t.charAt(r));)r+=a;return r}function P(t,r,a){for(var o=r>a?-1:1;;){if(r==a)return r;var c=(r+a)/2,d=o<0?Math.ceil(c):Math.floor(c);if(d==r)return t(d)?r:a;t(d)?a=d:r=d+o}}function V(t,r,a,o){if(!t)return o(r,a,"ltr",0);for(var c=!1,d=0;d<t.length;++d){var g=t[d];(g.from<a&&g.to>r||r==a&&g.to==r)&&(o(Math.max(g.from,r),Math.min(g.to,a),g.level==1?"rtl":"ltr",d),c=!0)}c||o(r,a,"ltr")}var st=null;function mt(t,r,a){var o;st=null;for(var c=0;c<t.length;++c){var d=t[c];if(d.from<r&&d.to>r)return c;d.to==r&&(d.from!=d.to&&a=="before"?o=c:st=c),d.from==r&&(d.from!=d.to&&a!="before"?o=c:st=c)}return o??st}var Qt=function(){var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function a(_){return _<=247?t.charAt(_):1424<=_&&_<=1524?"R":1536<=_&&_<=1785?r.charAt(_-1536):1774<=_&&_<=2220?"r":8192<=_&&_<=8203?"w":_==8204?"b":"L"}var o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,c=/[stwN]/,d=/[LRr]/,g=/[Lb1n]/,v=/[1n]/;function y(_,T,L){this.level=_,this.from=T,this.to=L}return function(_,T){var L=T=="ltr"?"L":"R";if(_.length==0||T=="ltr"&&!o.test(_))return!1;for(var R=_.length,I=[],B=0;B<R;++B)I.push(a(_.charCodeAt(B)));for(var $=0,nt=L;$<R;++$){var at=I[$];at=="m"?I[$]=nt:nt=at}for(var ft=0,lt=L;ft<R;++ft){var yt=I[ft];yt=="1"&&lt=="r"?I[ft]="n":d.test(yt)&&(lt=yt,yt=="r"&&(I[ft]="R"))}for(var St=1,kt=I[0];St<R-1;++St){var Pt=I[St];Pt=="+"&&kt=="1"&&I[St+1]=="1"?I[St]="1":Pt==","&&kt==I[St+1]&&(kt=="1"||kt=="n")&&(I[St]=kt),kt=Pt}for(var Zt=0;Zt<R;++Zt){var be=I[Zt];if(be==",")I[Zt]="N";else if(be=="%"){var ie=void 0;for(ie=Zt+1;ie<R&&I[ie]=="%";++ie);for(var Ve=Zt&&I[Zt-1]=="!"||ie<R&&I[ie]=="1"?"1":"N",Be=Zt;Be<ie;++Be)I[Be]=Ve;Zt=ie-1}}for(var he=0,Ue=L;he<R;++he){var we=I[he];Ue=="L"&&we=="1"?I[he]="L":d.test(we)&&(Ue=we)}for(var ge=0;ge<R;++ge)if(c.test(I[ge])){var de=void 0;for(de=ge+1;de<R&&c.test(I[de]);++de);for(var se=(ge?I[ge-1]:L)=="L",$e=(de<R?I[de]:L)=="L",rr=se==$e?se?"L":"R":L,si=ge;si<de;++si)I[si]=rr;ge=de-1}for(var Ne=[],Mn,_e=0;_e<R;)if(g.test(I[_e])){var Ra=_e;for(++_e;_e<R&&g.test(I[_e]);++_e);Ne.push(new y(0,Ra,_e))}else{var Wn=_e,wi=Ne.length,ki=T=="rtl"?1:0;for(++_e;_e<R&&I[_e]!="L";++_e);for(var Oe=Wn;Oe<_e;)if(v.test(I[Oe])){Wn<Oe&&(Ne.splice(wi,0,new y(1,Wn,Oe)),wi+=ki);var sr=Oe;for(++Oe;Oe<_e&&v.test(I[Oe]);++Oe);Ne.splice(wi,0,new y(2,sr,Oe)),wi+=ki,Wn=Oe}else++Oe;Wn<_e&&Ne.splice(wi,0,new y(1,Wn,_e))}return T=="ltr"&&(Ne[0].level==1&&(Mn=_.match(/^\s+/))&&(Ne[0].from=Mn[0].length,Ne.unshift(new y(0,0,Mn[0].length))),At(Ne).level==1&&(Mn=_.match(/\s+$/))&&(At(Ne).to-=Mn[0].length,Ne.push(new y(0,R-Mn[0].length,R)))),T=="rtl"?Ne.reverse():Ne}}();function $t(t,r){var a=t.order;return a==null&&(a=t.order=Qt(t.text,r)),a}var Fe=[],wt=function(t,r,a){if(t.addEventListener)t.addEventListener(r,a,!1);else if(t.attachEvent)t.attachEvent("on"+r,a);else{var o=t._handlers||(t._handlers={});o[r]=(o[r]||Fe).concat(a)}};function Ei(t,r){return t._handlers&&t._handlers[r]||Fe}function Re(t,r,a){if(t.removeEventListener)t.removeEventListener(r,a,!1);else if(t.detachEvent)t.detachEvent("on"+r,a);else{var o=t._handlers,c=o&&o[r];if(c){var d=ut(c,a);d>-1&&(o[r]=c.slice(0,d).concat(c.slice(d+1)))}}}function Ct(t,r){var a=Ei(t,r);if(a.length)for(var o=Array.prototype.slice.call(arguments,2),c=0;c<a.length;++c)a[c].apply(null,o)}function fe(t,r,a){return typeof r=="string"&&(r={type:r,preventDefault:function(){this.defaultPrevented=!0}}),Ct(t,a||r.type,t,r),Ge(r)||r.codemirrorIgnore}function Fi(t){var r=t._handlers&&t._handlers.cursorActivity;if(r)for(var a=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),o=0;o<r.length;++o)ut(a,r[o])==-1&&a.push(r[o])}function xe(t,r){return Ei(t,r).length>0}function _n(t){t.prototype.on=function(r,a){wt(this,r,a)},t.prototype.off=function(r,a){Re(this,r,a)}}function Te(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Ri(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function Ge(t){return t.defaultPrevented!=null?t.defaultPrevented:t.returnValue==!1}function hi(t){Te(t),Ri(t)}function qn(t){return t.target||t.srcElement}function Ls(t){var r=t.which;return r==null&&(t.button&1?r=1:t.button&2?r=3:t.button&4&&(r=2)),q&&t.ctrlKey&&r==1&&(r=3),r}var vr=function(){if(p&&m<9)return!1;var t=W("div");return"draggable"in t||"dragDrop"in t}(),He;function Ns(t){if(He==null){var r=W("span","​");H(t,W("span",[r,document.createTextNode("x")])),t.firstChild.offsetHeight!=0&&(He=r.offsetWidth<=1&&r.offsetHeight>2&&!(p&&m<8))}var a=He?W("span","​"):W("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return a.setAttribute("cm-text",""),a}var yr;function xn(t){if(yr!=null)return yr;var r=H(t,document.createTextNode("AخA")),a=Lt(r,0,1).getBoundingClientRect(),o=Lt(r,1,2).getBoundingClientRect();return rt(t),!a||a.left==a.right?!1:yr=o.right-a.right<3}var br=`

b`.split(/\n/).length!=3?function(t){for(var r=0,a=[],o=t.length;r<=o;){var c=t.indexOf(`
`,r);c==-1&&(c=t.length);var d=t.slice(r,t.charAt(c-1)=="\r"?c-1:c),g=d.indexOf("\r");g!=-1?(a.push(d.slice(0,g)),r+=g+1):(a.push(d),r=c+1)}return a}:function(t){return t.split(/\r\n?|\n/)},Ds=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch{return!1}}:function(t){var r;try{r=t.ownerDocument.selection.createRange()}catch{}return!r||r.parentElement()!=t?!1:r.compareEndPoints("StartToEnd",r)!=0},Os=function(){var t=W("div");return"oncopy"in t?!0:(t.setAttribute("oncopy","return;"),typeof t.oncopy=="function")}(),_r=null;function Gn(t){if(_r!=null)return _r;var r=H(t,W("span","x")),a=r.getBoundingClientRect(),o=Lt(r,0,1).getBoundingClientRect();return _r=Math.abs(a.left-o.left)>1}var sn={},Ze={};function As(t,r){arguments.length>2&&(r.dependencies=Array.prototype.slice.call(arguments,2)),sn[t]=r}function In(t,r){Ze[t]=r}function Hi(t){if(typeof t=="string"&&Ze.hasOwnProperty(t))t=Ze[t];else if(t&&typeof t.name=="string"&&Ze.hasOwnProperty(t.name)){var r=Ze[t.name];typeof r=="string"&&(r={name:r}),t=_t(r,t),t.name=r.name}else{if(typeof t=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Hi("application/xml");if(typeof t=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Hi("application/json")}return typeof t=="string"?{name:t}:t||{name:"null"}}function zi(t,r){r=Hi(r);var a=sn[r.name];if(!a)return zi(t,"text/plain");var o=a(t,r);if(hn.hasOwnProperty(r.name)){var c=hn[r.name];for(var d in c)c.hasOwnProperty(d)&&(o.hasOwnProperty(d)&&(o["_"+d]=o[d]),o[d]=c[d])}if(o.name=r.name,r.helperType&&(o.helperType=r.helperType),r.modeProps)for(var g in r.modeProps)o[g]=r.modeProps[g];return o}var hn={};function dn(t,r){var a=hn.hasOwnProperty(t)?hn[t]:hn[t]={};pt(r,a)}function Je(t,r){if(r===!0)return r;if(t.copyState)return t.copyState(r);var a={};for(var o in r){var c=r[o];c instanceof Array&&(c=c.concat([])),a[o]=c}return a}function xr(t,r){for(var a;t.innerMode&&(a=t.innerMode(r),!(!a||a.mode==t));)r=a.state,t=a.mode;return a||{mode:t,state:r}}function wr(t,r,a){return t.startState?t.startState(r,a):!0}var re=function(t,r,a){this.pos=this.start=0,this.string=t,this.tabSize=r||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=a};re.prototype.eol=function(){return this.pos>=this.string.length},re.prototype.sol=function(){return this.pos==this.lineStart},re.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},re.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},re.prototype.eat=function(t){var r=this.string.charAt(this.pos),a;if(typeof t=="string"?a=r==t:a=r&&(t.test?t.test(r):t(r)),a)return++this.pos,r},re.prototype.eatWhile=function(t){for(var r=this.pos;this.eat(t););return this.pos>r},re.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},re.prototype.skipToEnd=function(){this.pos=this.string.length},re.prototype.skipTo=function(t){var r=this.string.indexOf(t,this.pos);if(r>-1)return this.pos=r,!0},re.prototype.backUp=function(t){this.pos-=t},re.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=ct(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?ct(this.string,this.lineStart,this.tabSize):0)},re.prototype.indentation=function(){return ct(this.string,null,this.tabSize)-(this.lineStart?ct(this.string,this.lineStart,this.tabSize):0)},re.prototype.match=function(t,r,a){if(typeof t=="string"){var o=function(g){return a?g.toLowerCase():g},c=this.string.substr(this.pos,t.length);if(o(c)==o(t))return r!==!1&&(this.pos+=t.length),!0}else{var d=this.string.slice(this.pos).match(t);return d&&d.index>0?null:(d&&r!==!1&&(this.pos+=d[0].length),d)}},re.prototype.current=function(){return this.string.slice(this.start,this.pos)},re.prototype.hideFirstChars=function(t,r){this.lineStart+=t;try{return r()}finally{this.lineStart-=t}},re.prototype.lookAhead=function(t){var r=this.lineOracle;return r&&r.lookAhead(t)},re.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};function bt(t,r){if(r-=t.first,r<0||r>=t.size)throw new Error("There is no line "+(r+t.first)+" in the document.");for(var a=t;!a.lines;)for(var o=0;;++o){var c=a.children[o],d=c.chunkSize();if(r<d){a=c;break}r-=d}return a.lines[r]}function wn(t,r,a){var o=[],c=r.line;return t.iter(r.line,a.line+1,function(d){var g=d.text;c==a.line&&(g=g.slice(0,a.ch)),c==r.line&&(g=g.slice(r.ch)),o.push(g),++c}),o}function kr(t,r,a){var o=[];return t.iter(r,a,function(c){o.push(c.text)}),o}function Ye(t,r){var a=r-t.height;if(a)for(var o=t;o;o=o.parent)o.height+=a}function jt(t){if(t.parent==null)return null;for(var r=t.parent,a=ut(r.lines,t),o=r.parent;o;r=o,o=o.parent)for(var c=0;o.children[c]!=r;++c)a+=o.children[c].chunkSize();return a+r.first}function kn(t,r){var a=t.first;t:do{for(var o=0;o<t.children.length;++o){var c=t.children[o],d=c.height;if(r<d){t=c;continue t}r-=d,a+=c.chunkSize()}return a}while(!t.lines);for(var g=0;g<t.lines.length;++g){var v=t.lines[g],y=v.height;if(r<y)break;r-=y}return a+g}function di(t,r){return r>=t.first&&r<t.first+t.size}function Sr(t,r){return String(t.lineNumberFormatter(r+t.firstLineNumber))}function X(t,r,a){if(a===void 0&&(a=null),!(this instanceof X))return new X(t,r,a);this.line=t,this.ch=r,this.sticky=a}function w(t,r){return t.line-r.line||t.ch-r.ch}function N(t,r){return t.sticky==r.sticky&&w(t,r)==0}function U(t){return X(t.line,t.ch)}function J(t,r){return w(t,r)<0?r:t}function Tt(t,r){return w(t,r)<0?t:r}function Ht(t,r){return Math.max(t.first,Math.min(r,t.first+t.size-1))}function gt(t,r){if(r.line<t.first)return X(t.first,0);var a=t.first+t.size-1;return r.line>a?X(a,bt(t,a).text.length):Me(r,bt(t,r.line).text.length)}function Me(t,r){var a=t.ch;return a==null||a>r?X(t.line,r):a<0?X(t.line,0):t}function Qe(t,r){for(var a=[],o=0;o<r.length;o++)a[o]=gt(t,r[o]);return a}var Wi=function(t,r){this.state=t,this.lookAhead=r},Sn=function(t,r,a,o){this.state=r,this.doc=t,this.line=a,this.maxLookAhead=o||0,this.baseTokens=null,this.baseTokenPos=1};Sn.prototype.lookAhead=function(t){var r=this.doc.getLine(this.line+t);return r!=null&&t>this.maxLookAhead&&(this.maxLookAhead=t),r},Sn.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var r=this.baseTokens[this.baseTokenPos+1];return{type:r&&r.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},Sn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Sn.fromSaved=function(t,r,a){return r instanceof Wi?new Sn(t,Je(t.mode,r.state),a,r.lookAhead):new Sn(t,Je(t.mode,r),a)},Sn.prototype.save=function(t){var r=t!==!1?Je(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Wi(r,this.maxLookAhead):r};function Hl(t,r,a,o){var c=[t.state.modeGen],d={};jl(t,r.text,t.doc.mode,a,function(_,T){return c.push(_,T)},d,o);for(var g=a.state,v=function(_){a.baseTokens=c;var T=t.state.overlays[_],L=1,R=0;a.state=!0,jl(t,r.text,T.mode,a,function(I,B){for(var $=L;R<I;){var nt=c[L];nt>I&&c.splice(L,1,I,c[L+1],nt),L+=2,R=Math.min(I,nt)}if(B)if(T.opaque)c.splice($,L-$,I,"overlay "+B),L=$+2;else for(;$<L;$+=2){var at=c[$+1];c[$+1]=(at?at+" ":"")+"overlay "+B}},d),a.state=g,a.baseTokens=null,a.baseTokenPos=1},y=0;y<t.state.overlays.length;++y)v(y);return{styles:c,classes:d.bgClass||d.textClass?d:null}}function zl(t,r,a){if(!r.styles||r.styles[0]!=t.state.modeGen){var o=Cr(t,jt(r)),c=r.text.length>t.options.maxHighlightLength&&Je(t.doc.mode,o.state),d=Hl(t,r,o);c&&(o.state=c),r.stateAfter=o.save(!c),r.styles=d.styles,d.classes?r.styleClasses=d.classes:r.styleClasses&&(r.styleClasses=null),a===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return r.styles}function Cr(t,r,a){var o=t.doc,c=t.display;if(!o.mode.startState)return new Sn(o,!0,r);var d=Id(t,r,a),g=d>o.first&&bt(o,d-1).stateAfter,v=g?Sn.fromSaved(o,g,d):new Sn(o,wr(o.mode),d);return o.iter(d,r,function(y){Vo(t,y.text,v);var _=v.line;y.stateAfter=_==r-1||_%5==0||_>=c.viewFrom&&_<c.viewTo?v.save():null,v.nextLine()}),a&&(o.modeFrontier=v.line),v}function Vo(t,r,a,o){var c=t.doc.mode,d=new re(r,t.options.tabSize,a);for(d.start=d.pos=o||0,r==""&&Wl(c,a.state);!d.eol();)Xo(c,d,a.state),d.start=d.pos}function Wl(t,r){if(t.blankLine)return t.blankLine(r);if(t.innerMode){var a=xr(t,r);if(a.mode.blankLine)return a.mode.blankLine(a.state)}}function Xo(t,r,a,o){for(var c=0;c<10;c++){o&&(o[0]=xr(t,a).mode);var d=t.token(r,a);if(r.pos>r.start)return d}throw new Error("Mode "+t.name+" failed to advance stream.")}var Bl=function(t,r,a){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=r||null,this.state=a};function Ul(t,r,a,o){var c=t.doc,d=c.mode,g;r=gt(c,r);var v=bt(c,r.line),y=Cr(t,r.line,a),_=new re(v.text,t.options.tabSize,y),T;for(o&&(T=[]);(o||_.pos<r.ch)&&!_.eol();)_.start=_.pos,g=Xo(d,_,y.state),o&&T.push(new Bl(_,g,Je(c.mode,y.state)));return o?T:new Bl(_,g,y.state)}function $l(t,r){if(t)for(;;){var a=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!a)break;t=t.slice(0,a.index)+t.slice(a.index+a[0].length);var o=a[1]?"bgClass":"textClass";r[o]==null?r[o]=a[2]:new RegExp("(?:^|\\s)"+a[2]+"(?:$|\\s)").test(r[o])||(r[o]+=" "+a[2])}return t}function jl(t,r,a,o,c,d,g){var v=a.flattenSpans;v==null&&(v=t.options.flattenSpans);var y=0,_=null,T=new re(r,t.options.tabSize,o),L,R=t.options.addModeClass&&[null];for(r==""&&$l(Wl(a,o.state),d);!T.eol();){if(T.pos>t.options.maxHighlightLength?(v=!1,g&&Vo(t,r,o,T.pos),T.pos=r.length,L=null):L=$l(Xo(a,T,o.state,R),d),R){var I=R[0].name;I&&(L="m-"+(L?I+" "+L:I))}if(!v||_!=L){for(;y<T.start;)y=Math.min(T.start,y+5e3),c(y,_);_=L}T.start=T.pos}for(;y<T.pos;){var B=Math.min(T.pos,y+5e3);c(B,_),y=B}}function Id(t,r,a){for(var o,c,d=t.doc,g=a?-1:r-(t.doc.mode.innerMode?1e3:100),v=r;v>g;--v){if(v<=d.first)return d.first;var y=bt(d,v-1),_=y.stateAfter;if(_&&(!a||v+(_ instanceof Wi?_.lookAhead:0)<=d.modeFrontier))return v;var T=ct(y.text,null,t.options.tabSize);(c==null||o>T)&&(c=v-1,o=T)}return c}function Ed(t,r){if(t.modeFrontier=Math.min(t.modeFrontier,r),!(t.highlightFrontier<r-10)){for(var a=t.first,o=r-1;o>a;o--){var c=bt(t,o).stateAfter;if(c&&(!(c instanceof Wi)||o+c.lookAhead<r)){a=o+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,a)}}var Yl=!1,En=!1;function Fd(){Yl=!0}function Rd(){En=!0}function Ps(t,r,a){this.marker=t,this.from=r,this.to=a}function Tr(t,r){if(t)for(var a=0;a<t.length;++a){var o=t[a];if(o.marker==r)return o}}function Hd(t,r){for(var a,o=0;o<t.length;++o)t[o]!=r&&(a||(a=[])).push(t[o]);return a}function zd(t,r,a){var o=a&&window.WeakSet&&(a.markedSpans||(a.markedSpans=new WeakSet));o&&o.has(t.markedSpans)?t.markedSpans.push(r):(t.markedSpans=t.markedSpans?t.markedSpans.concat([r]):[r],o&&o.add(t.markedSpans)),r.marker.attachLine(t)}function Wd(t,r,a){var o;if(t)for(var c=0;c<t.length;++c){var d=t[c],g=d.marker,v=d.from==null||(g.inclusiveLeft?d.from<=r:d.from<r);if(v||d.from==r&&g.type=="bookmark"&&(!a||!d.marker.insertLeft)){var y=d.to==null||(g.inclusiveRight?d.to>=r:d.to>r);(o||(o=[])).push(new Ps(g,d.from,y?null:d.to))}}return o}function Bd(t,r,a){var o;if(t)for(var c=0;c<t.length;++c){var d=t[c],g=d.marker,v=d.to==null||(g.inclusiveRight?d.to>=r:d.to>r);if(v||d.from==r&&g.type=="bookmark"&&(!a||d.marker.insertLeft)){var y=d.from==null||(g.inclusiveLeft?d.from<=r:d.from<r);(o||(o=[])).push(new Ps(g,y?null:d.from-r,d.to==null?null:d.to-r))}}return o}function qo(t,r){if(r.full)return null;var a=di(t,r.from.line)&&bt(t,r.from.line).markedSpans,o=di(t,r.to.line)&&bt(t,r.to.line).markedSpans;if(!a&&!o)return null;var c=r.from.ch,d=r.to.ch,g=w(r.from,r.to)==0,v=Wd(a,c,g),y=Bd(o,d,g),_=r.text.length==1,T=At(r.text).length+(_?c:0);if(v)for(var L=0;L<v.length;++L){var R=v[L];if(R.to==null){var I=Tr(y,R.marker);I?_&&(R.to=I.to==null?null:I.to+T):R.to=c}}if(y)for(var B=0;B<y.length;++B){var $=y[B];if($.to!=null&&($.to+=T),$.from==null){var nt=Tr(v,$.marker);nt||($.from=T,_&&(v||(v=[])).push($))}else $.from+=T,_&&(v||(v=[])).push($)}v&&(v=Kl(v)),y&&y!=v&&(y=Kl(y));var at=[v];if(!_){var ft=r.text.length-2,lt;if(ft>0&&v)for(var yt=0;yt<v.length;++yt)v[yt].to==null&&(lt||(lt=[])).push(new Ps(v[yt].marker,null,null));for(var St=0;St<ft;++St)at.push(lt);at.push(y)}return at}function Kl(t){for(var r=0;r<t.length;++r){var a=t[r];a.from!=null&&a.from==a.to&&a.marker.clearWhenEmpty!==!1&&t.splice(r--,1)}return t.length?t:null}function Ud(t,r,a){var o=null;if(t.iter(r.line,a.line+1,function(I){if(I.markedSpans)for(var B=0;B<I.markedSpans.length;++B){var $=I.markedSpans[B].marker;$.readOnly&&(!o||ut(o,$)==-1)&&(o||(o=[])).push($)}}),!o)return null;for(var c=[{from:r,to:a}],d=0;d<o.length;++d)for(var g=o[d],v=g.find(0),y=0;y<c.length;++y){var _=c[y];if(!(w(_.to,v.from)<0||w(_.from,v.to)>0)){var T=[y,1],L=w(_.from,v.from),R=w(_.to,v.to);(L<0||!g.inclusiveLeft&&!L)&&T.push({from:_.from,to:v.from}),(R>0||!g.inclusiveRight&&!R)&&T.push({from:v.to,to:_.to}),c.splice.apply(c,T),y+=T.length-3}}return c}function Vl(t){var r=t.markedSpans;if(r){for(var a=0;a<r.length;++a)r[a].marker.detachLine(t);t.markedSpans=null}}function Xl(t,r){if(r){for(var a=0;a<r.length;++a)r[a].marker.attachLine(t);t.markedSpans=r}}function Is(t){return t.inclusiveLeft?-1:0}function Es(t){return t.inclusiveRight?1:0}function Go(t,r){var a=t.lines.length-r.lines.length;if(a!=0)return a;var o=t.find(),c=r.find(),d=w(o.from,c.from)||Is(t)-Is(r);if(d)return-d;var g=w(o.to,c.to)||Es(t)-Es(r);return g||r.id-t.id}function ql(t,r){var a=En&&t.markedSpans,o;if(a)for(var c=void 0,d=0;d<a.length;++d)c=a[d],c.marker.collapsed&&(r?c.from:c.to)==null&&(!o||Go(o,c.marker)<0)&&(o=c.marker);return o}function Gl(t){return ql(t,!0)}function Fs(t){return ql(t,!1)}function $d(t,r){var a=En&&t.markedSpans,o;if(a)for(var c=0;c<a.length;++c){var d=a[c];d.marker.collapsed&&(d.from==null||d.from<r)&&(d.to==null||d.to>r)&&(!o||Go(o,d.marker)<0)&&(o=d.marker)}return o}function Zl(t,r,a,o,c){var d=bt(t,r),g=En&&d.markedSpans;if(g)for(var v=0;v<g.length;++v){var y=g[v];if(y.marker.collapsed){var _=y.marker.find(0),T=w(_.from,a)||Is(y.marker)-Is(c),L=w(_.to,o)||Es(y.marker)-Es(c);if(!(T>=0&&L<=0||T<=0&&L>=0)&&(T<=0&&(y.marker.inclusiveRight&&c.inclusiveLeft?w(_.to,a)>=0:w(_.to,a)>0)||T>=0&&(y.marker.inclusiveRight&&c.inclusiveLeft?w(_.from,o)<=0:w(_.from,o)<0)))return!0}}}function pn(t){for(var r;r=Gl(t);)t=r.find(-1,!0).line;return t}function jd(t){for(var r;r=Fs(t);)t=r.find(1,!0).line;return t}function Yd(t){for(var r,a;r=Fs(t);)t=r.find(1,!0).line,(a||(a=[])).push(t);return a}function Zo(t,r){var a=bt(t,r),o=pn(a);return a==o?r:jt(o)}function Jl(t,r){if(r>t.lastLine())return r;var a=bt(t,r),o;if(!Zn(t,a))return r;for(;o=Fs(a);)a=o.find(1,!0).line;return jt(a)+1}function Zn(t,r){var a=En&&r.markedSpans;if(a){for(var o=void 0,c=0;c<a.length;++c)if(o=a[c],!!o.marker.collapsed){if(o.from==null)return!0;if(!o.marker.widgetNode&&o.from==0&&o.marker.inclusiveLeft&&Jo(t,r,o))return!0}}}function Jo(t,r,a){if(a.to==null){var o=a.marker.find(1,!0);return Jo(t,o.line,Tr(o.line.markedSpans,a.marker))}if(a.marker.inclusiveRight&&a.to==r.text.length)return!0;for(var c=void 0,d=0;d<r.markedSpans.length;++d)if(c=r.markedSpans[d],c.marker.collapsed&&!c.marker.widgetNode&&c.from==a.to&&(c.to==null||c.to!=a.from)&&(c.marker.inclusiveLeft||a.marker.inclusiveRight)&&Jo(t,r,c))return!0}function Fn(t){t=pn(t);for(var r=0,a=t.parent,o=0;o<a.lines.length;++o){var c=a.lines[o];if(c==t)break;r+=c.height}for(var d=a.parent;d;a=d,d=a.parent)for(var g=0;g<d.children.length;++g){var v=d.children[g];if(v==a)break;r+=v.height}return r}function Rs(t){if(t.height==0)return 0;for(var r=t.text.length,a,o=t;a=Gl(o);){var c=a.find(0,!0);o=c.from.line,r+=c.from.ch-c.to.ch}for(o=t;a=Fs(o);){var d=a.find(0,!0);r-=o.text.length-d.from.ch,o=d.to.line,r+=o.text.length-d.to.ch}return r}function Qo(t){var r=t.display,a=t.doc;r.maxLine=bt(a,a.first),r.maxLineLength=Rs(r.maxLine),r.maxLineChanged=!0,a.iter(function(o){var c=Rs(o);c>r.maxLineLength&&(r.maxLineLength=c,r.maxLine=o)})}var Bi=function(t,r,a){this.text=t,Xl(this,r),this.height=a?a(this):1};Bi.prototype.lineNo=function(){return jt(this)},_n(Bi);function Kd(t,r,a,o){t.text=r,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),t.order!=null&&(t.order=null),Vl(t),Xl(t,a);var c=o?o(t):1;c!=t.height&&Ye(t,c)}function Vd(t){t.parent=null,Vl(t)}var Xd={},qd={};function Ql(t,r){if(!t||/^\s*$/.test(t))return null;var a=r.addModeClass?qd:Xd;return a[t]||(a[t]=t.replace(/\S+/g,"cm-$&"))}function tc(t,r){var a=M("span",null,null,b?"padding-right: .1px":null),o={pre:M("pre",[a],"CodeMirror-line"),content:a,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};r.measure={};for(var c=0;c<=(r.rest?r.rest.length:0);c++){var d=c?r.rest[c-1]:r.line,g=void 0;o.pos=0,o.addToken=Zd,xn(t.display.measure)&&(g=$t(d,t.doc.direction))&&(o.addToken=Qd(o.addToken,g)),o.map=[];var v=r!=t.display.externalMeasured&&jt(d);tp(d,o,zl(t,d,v)),d.styleClasses&&(d.styleClasses.bgClass&&(o.bgClass=K(d.styleClasses.bgClass,o.bgClass||"")),d.styleClasses.textClass&&(o.textClass=K(d.styleClasses.textClass,o.textClass||""))),o.map.length==0&&o.map.push(0,0,o.content.appendChild(Ns(t.display.measure))),c==0?(r.measure.map=o.map,r.measure.cache={}):((r.measure.maps||(r.measure.maps=[])).push(o.map),(r.measure.caches||(r.measure.caches=[])).push({}))}if(b){var y=o.content.lastChild;(/\bcm-tab\b/.test(y.className)||y.querySelector&&y.querySelector(".cm-tab"))&&(o.content.className="cm-tab-wrap-hack")}return Ct(t,"renderLine",t,r.line,o.pre),o.pre.className&&(o.textClass=K(o.pre.className,o.textClass||"")),o}function Gd(t){var r=W("span","•","cm-invalidchar");return r.title="\\u"+t.charCodeAt(0).toString(16),r.setAttribute("aria-label",r.title),r}function Zd(t,r,a,o,c,d,g){if(r){var v=t.splitSpaces?Jd(r,t.trailingSpace):r,y=t.cm.state.specialChars,_=!1,T;if(!y.test(r))t.col+=r.length,T=document.createTextNode(v),t.map.push(t.pos,t.pos+r.length,T),p&&m<9&&(_=!0),t.pos+=r.length;else{T=document.createDocumentFragment();for(var L=0;;){y.lastIndex=L;var R=y.exec(r),I=R?R.index-L:r.length-L;if(I){var B=document.createTextNode(v.slice(L,L+I));p&&m<9?T.appendChild(W("span",[B])):T.appendChild(B),t.map.push(t.pos,t.pos+I,B),t.col+=I,t.pos+=I}if(!R)break;L+=I+1;var $=void 0;if(R[0]=="	"){var nt=t.cm.options.tabSize,at=nt-t.col%nt;$=T.appendChild(W("span",bn(at),"cm-tab")),$.setAttribute("role","presentation"),$.setAttribute("cm-text","	"),t.col+=at}else R[0]=="\r"||R[0]==`
`?($=T.appendChild(W("span",R[0]=="\r"?"␍":"␤","cm-invalidchar")),$.setAttribute("cm-text",R[0]),t.col+=1):($=t.cm.options.specialCharPlaceholder(R[0]),$.setAttribute("cm-text",R[0]),p&&m<9?T.appendChild(W("span",[$])):T.appendChild($),t.col+=1);t.map.push(t.pos,t.pos+1,$),t.pos++}}if(t.trailingSpace=v.charCodeAt(r.length-1)==32,a||o||c||_||d||g){var ft=a||"";o&&(ft+=o),c&&(ft+=c);var lt=W("span",[T],ft,d);if(g)for(var yt in g)g.hasOwnProperty(yt)&&yt!="style"&&yt!="class"&&lt.setAttribute(yt,g[yt]);return t.content.appendChild(lt)}t.content.appendChild(T)}}function Jd(t,r){if(t.length>1&&!/  /.test(t))return t;for(var a=r,o="",c=0;c<t.length;c++){var d=t.charAt(c);d==" "&&a&&(c==t.length-1||t.charCodeAt(c+1)==32)&&(d=" "),o+=d,a=d==" "}return o}function Qd(t,r){return function(a,o,c,d,g,v,y){c=c?c+" cm-force-border":"cm-force-border";for(var _=a.pos,T=_+o.length;;){for(var L=void 0,R=0;R<r.length&&(L=r[R],!(L.to>_&&L.from<=_));R++);if(L.to>=T)return t(a,o,c,d,g,v,y);t(a,o.slice(0,L.to-_),c,d,null,v,y),d=null,o=o.slice(L.to-_),_=L.to}}}function ec(t,r,a,o){var c=!o&&a.widgetNode;c&&t.map.push(t.pos,t.pos+r,c),!o&&t.cm.display.input.needsContentAttribute&&(c||(c=t.content.appendChild(document.createElement("span"))),c.setAttribute("cm-marker",a.id)),c&&(t.cm.display.input.setUneditable(c),t.content.appendChild(c)),t.pos+=r,t.trailingSpace=!1}function tp(t,r,a){var o=t.markedSpans,c=t.text,d=0;if(!o){for(var g=1;g<a.length;g+=2)r.addToken(r,c.slice(d,d=a[g]),Ql(a[g+1],r.cm.options));return}for(var v=c.length,y=0,_=1,T="",L,R,I=0,B,$,nt,at,ft;;){if(I==y){B=$=nt=R="",ft=null,at=null,I=1/0;for(var lt=[],yt=void 0,St=0;St<o.length;++St){var kt=o[St],Pt=kt.marker;if(Pt.type=="bookmark"&&kt.from==y&&Pt.widgetNode)lt.push(Pt);else if(kt.from<=y&&(kt.to==null||kt.to>y||Pt.collapsed&&kt.to==y&&kt.from==y)){if(kt.to!=null&&kt.to!=y&&I>kt.to&&(I=kt.to,$=""),Pt.className&&(B+=" "+Pt.className),Pt.css&&(R=(R?R+";":"")+Pt.css),Pt.startStyle&&kt.from==y&&(nt+=" "+Pt.startStyle),Pt.endStyle&&kt.to==I&&(yt||(yt=[])).push(Pt.endStyle,kt.to),Pt.title&&((ft||(ft={})).title=Pt.title),Pt.attributes)for(var Zt in Pt.attributes)(ft||(ft={}))[Zt]=Pt.attributes[Zt];Pt.collapsed&&(!at||Go(at.marker,Pt)<0)&&(at=kt)}else kt.from>y&&I>kt.from&&(I=kt.from)}if(yt)for(var be=0;be<yt.length;be+=2)yt[be+1]==I&&($+=" "+yt[be]);if(!at||at.from==y)for(var ie=0;ie<lt.length;++ie)ec(r,0,lt[ie]);if(at&&(at.from||0)==y){if(ec(r,(at.to==null?v+1:at.to)-y,at.marker,at.from==null),at.to==null)return;at.to==y&&(at=!1)}}if(y>=v)break;for(var Ve=Math.min(v,I);;){if(T){var Be=y+T.length;if(!at){var he=Be>Ve?T.slice(0,Ve-y):T;r.addToken(r,he,L?L+B:B,nt,y+he.length==I?$:"",R,ft)}if(Be>=Ve){T=T.slice(Ve-y),y=Ve;break}y=Be,nt=""}T=c.slice(d,d=a[_++]),L=Ql(a[_++],r.cm.options)}}}function nc(t,r,a){this.line=r,this.rest=Yd(r),this.size=this.rest?jt(At(this.rest))-a+1:1,this.node=this.text=null,this.hidden=Zn(t,r)}function Hs(t,r,a){for(var o=[],c,d=r;d<a;d=c){var g=new nc(t.doc,bt(t.doc,d),d);c=d+g.size,o.push(g)}return o}var Ui=null;function ep(t){Ui?Ui.ops.push(t):t.ownsGroup=Ui={ops:[t],delayedCallbacks:[]}}function np(t){var r=t.delayedCallbacks,a=0;do{for(;a<r.length;a++)r[a].call(null);for(var o=0;o<t.ops.length;o++){var c=t.ops[o];if(c.cursorActivityHandlers)for(;c.cursorActivityCalled<c.cursorActivityHandlers.length;)c.cursorActivityHandlers[c.cursorActivityCalled++].call(null,c.cm)}}while(a<r.length)}function ip(t,r){var a=t.ownsGroup;if(a)try{np(a)}finally{Ui=null,r(a)}}var Mr=null;function me(t,r){var a=Ei(t,r);if(a.length){var o=Array.prototype.slice.call(arguments,2),c;Ui?c=Ui.delayedCallbacks:Mr?c=Mr:(c=Mr=[],setTimeout(rp,0));for(var d=function(v){c.push(function(){return a[v].apply(null,o)})},g=0;g<a.length;++g)d(g)}}function rp(){var t=Mr;Mr=null;for(var r=0;r<t.length;++r)t[r]()}function ic(t,r,a,o){for(var c=0;c<r.changes.length;c++){var d=r.changes[c];d=="text"?op(t,r):d=="gutter"?sc(t,r,a,o):d=="class"?ta(t,r):d=="widget"&&ap(t,r,o)}r.changes=null}function Lr(t){return t.node==t.text&&(t.node=W("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),p&&m<8&&(t.node.style.zIndex=2)),t.node}function sp(t,r){var a=r.bgClass?r.bgClass+" "+(r.line.bgClass||""):r.line.bgClass;if(a&&(a+=" CodeMirror-linebackground"),r.background)a?r.background.className=a:(r.background.parentNode.removeChild(r.background),r.background=null);else if(a){var o=Lr(r);r.background=o.insertBefore(W("div",null,a),o.firstChild),t.display.input.setUneditable(r.background)}}function rc(t,r){var a=t.display.externalMeasured;return a&&a.line==r.line?(t.display.externalMeasured=null,r.measure=a.measure,a.built):tc(t,r)}function op(t,r){var a=r.text.className,o=rc(t,r);r.text==r.node&&(r.node=o.pre),r.text.parentNode.replaceChild(o.pre,r.text),r.text=o.pre,o.bgClass!=r.bgClass||o.textClass!=r.textClass?(r.bgClass=o.bgClass,r.textClass=o.textClass,ta(t,r)):a&&(r.text.className=a)}function ta(t,r){sp(t,r),r.line.wrapClass?Lr(r).className=r.line.wrapClass:r.node!=r.text&&(r.node.className="");var a=r.textClass?r.textClass+" "+(r.line.textClass||""):r.line.textClass;r.text.className=a||""}function sc(t,r,a,o){if(r.gutter&&(r.node.removeChild(r.gutter),r.gutter=null),r.gutterBackground&&(r.node.removeChild(r.gutterBackground),r.gutterBackground=null),r.line.gutterClass){var c=Lr(r);r.gutterBackground=W("div",null,"CodeMirror-gutter-background "+r.line.gutterClass,"left: "+(t.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px; width: "+o.gutterTotalWidth+"px"),t.display.input.setUneditable(r.gutterBackground),c.insertBefore(r.gutterBackground,r.text)}var d=r.line.gutterMarkers;if(t.options.lineNumbers||d){var g=Lr(r),v=r.gutter=W("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px");if(v.setAttribute("aria-hidden","true"),t.display.input.setUneditable(v),g.insertBefore(v,r.text),r.line.gutterClass&&(v.className+=" "+r.line.gutterClass),t.options.lineNumbers&&(!d||!d["CodeMirror-linenumbers"])&&(r.lineNumber=v.appendChild(W("div",Sr(t.options,a),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+o.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),d)for(var y=0;y<t.display.gutterSpecs.length;++y){var _=t.display.gutterSpecs[y].className,T=d.hasOwnProperty(_)&&d[_];T&&v.appendChild(W("div",[T],"CodeMirror-gutter-elt","left: "+o.gutterLeft[_]+"px; width: "+o.gutterWidth[_]+"px"))}}}function ap(t,r,a){r.alignable&&(r.alignable=null);for(var o=ot("CodeMirror-linewidget"),c=r.node.firstChild,d=void 0;c;c=d)d=c.nextSibling,o.test(c.className)&&r.node.removeChild(c);oc(t,r,a)}function lp(t,r,a,o){var c=rc(t,r);return r.text=r.node=c.pre,c.bgClass&&(r.bgClass=c.bgClass),c.textClass&&(r.textClass=c.textClass),ta(t,r),sc(t,r,a,o),oc(t,r,o),r.node}function oc(t,r,a){if(ac(t,r.line,r,a,!0),r.rest)for(var o=0;o<r.rest.length;o++)ac(t,r.rest[o],r,a,!1)}function ac(t,r,a,o,c){if(r.widgets)for(var d=Lr(a),g=0,v=r.widgets;g<v.length;++g){var y=v[g],_=W("div",[y.node],"CodeMirror-linewidget"+(y.className?" "+y.className:""));y.handleMouseEvents||_.setAttribute("cm-ignore-events","true"),cp(y,_,a,o),t.display.input.setUneditable(_),c&&y.above?d.insertBefore(_,a.gutter||a.text):d.appendChild(_),me(y,"redraw")}}function cp(t,r,a,o){if(t.noHScroll){(a.alignable||(a.alignable=[])).push(r);var c=o.wrapperWidth;r.style.left=o.fixedPos+"px",t.coverGutter||(c-=o.gutterTotalWidth,r.style.paddingLeft=o.gutterTotalWidth+"px"),r.style.width=c+"px"}t.coverGutter&&(r.style.zIndex=5,r.style.position="relative",t.noHScroll||(r.style.marginLeft=-o.gutterTotalWidth+"px"))}function Nr(t){if(t.height!=null)return t.height;var r=t.doc.cm;if(!r)return 0;if(!Ft(document.body,t.node)){var a="position: relative;";t.coverGutter&&(a+="margin-left: -"+r.display.gutters.offsetWidth+"px;"),t.noHScroll&&(a+="width: "+r.display.wrapper.clientWidth+"px;"),H(r.display.measure,W("div",[t.node],null,a))}return t.height=t.node.parentNode.offsetHeight}function Rn(t,r){for(var a=qn(r);a!=t.wrapper;a=a.parentNode)if(!a||a.nodeType==1&&a.getAttribute("cm-ignore-events")=="true"||a.parentNode==t.sizer&&a!=t.mover)return!0}function zs(t){return t.lineSpace.offsetTop}function ea(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function lc(t){if(t.cachedPaddingH)return t.cachedPaddingH;var r=H(t.measure,W("pre","x","CodeMirror-line-like")),a=window.getComputedStyle?window.getComputedStyle(r):r.currentStyle,o={left:parseInt(a.paddingLeft),right:parseInt(a.paddingRight)};return!isNaN(o.left)&&!isNaN(o.right)&&(t.cachedPaddingH=o),o}function Cn(t){return xt-t.display.nativeBarWidth}function pi(t){return t.display.scroller.clientWidth-Cn(t)-t.display.barWidth}function na(t){return t.display.scroller.clientHeight-Cn(t)-t.display.barHeight}function up(t,r,a){var o=t.options.lineWrapping,c=o&&pi(t);if(!r.measure.heights||o&&r.measure.width!=c){var d=r.measure.heights=[];if(o){r.measure.width=c;for(var g=r.text.firstChild.getClientRects(),v=0;v<g.length-1;v++){var y=g[v],_=g[v+1];Math.abs(y.bottom-_.bottom)>2&&d.push((y.bottom+_.top)/2-a.top)}}d.push(a.bottom-a.top)}}function cc(t,r,a){if(t.line==r)return{map:t.measure.map,cache:t.measure.cache};if(t.rest){for(var o=0;o<t.rest.length;o++)if(t.rest[o]==r)return{map:t.measure.maps[o],cache:t.measure.caches[o]};for(var c=0;c<t.rest.length;c++)if(jt(t.rest[c])>a)return{map:t.measure.maps[c],cache:t.measure.caches[c],before:!0}}}function fp(t,r){r=pn(r);var a=jt(r),o=t.display.externalMeasured=new nc(t.doc,r,a);o.lineN=a;var c=o.built=tc(t,o);return o.text=c.pre,H(t.display.lineMeasure,c.pre),o}function uc(t,r,a,o){return Tn(t,$i(t,r),a,o)}function ia(t,r){if(r>=t.display.viewFrom&&r<t.display.viewTo)return t.display.view[vi(t,r)];var a=t.display.externalMeasured;if(a&&r>=a.lineN&&r<a.lineN+a.size)return a}function $i(t,r){var a=jt(r),o=ia(t,a);o&&!o.text?o=null:o&&o.changes&&(ic(t,o,a,la(t)),t.curOp.forceUpdate=!0),o||(o=fp(t,r));var c=cc(o,r,a);return{line:r,view:o,rect:null,map:c.map,cache:c.cache,before:c.before,hasHeights:!1}}function Tn(t,r,a,o,c){r.before&&(a=-1);var d=a+(o||""),g;return r.cache.hasOwnProperty(d)?g=r.cache[d]:(r.rect||(r.rect=r.view.text.getBoundingClientRect()),r.hasHeights||(up(t,r.view,r.rect),r.hasHeights=!0),g=dp(t,r,a,o),g.bogus||(r.cache[d]=g)),{left:g.left,right:g.right,top:c?g.rtop:g.top,bottom:c?g.rbottom:g.bottom}}var fc={left:0,right:0,top:0,bottom:0};function hc(t,r,a){for(var o,c,d,g,v,y,_=0;_<t.length;_+=3)if(v=t[_],y=t[_+1],r<v?(c=0,d=1,g="left"):r<y?(c=r-v,d=c+1):(_==t.length-3||r==y&&t[_+3]>r)&&(d=y-v,c=d-1,r>=y&&(g="right")),c!=null){if(o=t[_+2],v==y&&a==(o.insertLeft?"left":"right")&&(g=a),a=="left"&&c==0)for(;_&&t[_-2]==t[_-3]&&t[_-1].insertLeft;)o=t[(_-=3)+2],g="left";if(a=="right"&&c==y-v)for(;_<t.length-3&&t[_+3]==t[_+4]&&!t[_+5].insertLeft;)o=t[(_+=3)+2],g="right";break}return{node:o,start:c,end:d,collapse:g,coverStart:v,coverEnd:y}}function hp(t,r){var a=fc;if(r=="left")for(var o=0;o<t.length&&(a=t[o]).left==a.right;o++);else for(var c=t.length-1;c>=0&&(a=t[c]).left==a.right;c--);return a}function dp(t,r,a,o){var c=hc(r.map,a,o),d=c.node,g=c.start,v=c.end,y=c.collapse,_;if(d.nodeType==3){for(var T=0;T<4;T++){for(;g&&rn(r.line.text.charAt(c.coverStart+g));)--g;for(;c.coverStart+v<c.coverEnd&&rn(r.line.text.charAt(c.coverStart+v));)++v;if(p&&m<9&&g==0&&v==c.coverEnd-c.coverStart?_=d.parentNode.getBoundingClientRect():_=hp(Lt(d,g,v).getClientRects(),o),_.left||_.right||g==0)break;v=g,g=g-1,y="right"}p&&m<11&&(_=pp(t.display.measure,_))}else{g>0&&(y=o="right");var L;t.options.lineWrapping&&(L=d.getClientRects()).length>1?_=L[o=="right"?L.length-1:0]:_=d.getBoundingClientRect()}if(p&&m<9&&!g&&(!_||!_.left&&!_.right)){var R=d.parentNode.getClientRects()[0];R?_={left:R.left,right:R.left+Yi(t.display),top:R.top,bottom:R.bottom}:_=fc}for(var I=_.top-r.rect.top,B=_.bottom-r.rect.top,$=(I+B)/2,nt=r.view.measure.heights,at=0;at<nt.length-1&&!($<nt[at]);at++);var ft=at?nt[at-1]:0,lt=nt[at],yt={left:(y=="right"?_.right:_.left)-r.rect.left,right:(y=="left"?_.left:_.right)-r.rect.left,top:ft,bottom:lt};return!_.left&&!_.right&&(yt.bogus=!0),t.options.singleCursorHeightPerLine||(yt.rtop=I,yt.rbottom=B),yt}function pp(t,r){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Gn(t))return r;var a=screen.logicalXDPI/screen.deviceXDPI,o=screen.logicalYDPI/screen.deviceYDPI;return{left:r.left*a,right:r.right*a,top:r.top*o,bottom:r.bottom*o}}function dc(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var r=0;r<t.rest.length;r++)t.measure.caches[r]={}}function pc(t){t.display.externalMeasure=null,rt(t.display.lineMeasure);for(var r=0;r<t.display.view.length;r++)dc(t.display.view[r])}function Dr(t){pc(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function gc(){return S&&z?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function mc(){return S&&z?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function ra(t){var r=pn(t),a=r.widgets,o=0;if(a)for(var c=0;c<a.length;++c)a[c].above&&(o+=Nr(a[c]));return o}function Ws(t,r,a,o,c){if(!c){var d=ra(r);a.top+=d,a.bottom+=d}if(o=="line")return a;o||(o="local");var g=Fn(r);if(o=="local"?g+=zs(t.display):g-=t.display.viewOffset,o=="page"||o=="window"){var v=t.display.lineSpace.getBoundingClientRect();g+=v.top+(o=="window"?0:mc());var y=v.left+(o=="window"?0:gc());a.left+=y,a.right+=y}return a.top+=g,a.bottom+=g,a}function vc(t,r,a){if(a=="div")return r;var o=r.left,c=r.top;if(a=="page")o-=gc(),c-=mc();else if(a=="local"||!a){var d=t.display.sizer.getBoundingClientRect();o+=d.left,c+=d.top}var g=t.display.lineSpace.getBoundingClientRect();return{left:o-g.left,top:c-g.top}}function Bs(t,r,a,o,c){return o||(o=bt(t.doc,r.line)),Ws(t,o,uc(t,o,r.ch,c),a)}function gn(t,r,a,o,c,d){o=o||bt(t.doc,r.line),c||(c=$i(t,o));function g(B,$){var nt=Tn(t,c,B,$?"right":"left",d);return $?nt.left=nt.right:nt.right=nt.left,Ws(t,o,nt,a)}var v=$t(o,t.doc.direction),y=r.ch,_=r.sticky;if(y>=o.text.length?(y=o.text.length,_="before"):y<=0&&(y=0,_="after"),!v)return g(_=="before"?y-1:y,_=="before");function T(B,$,nt){var at=v[$],ft=at.level==1;return g(nt?B-1:B,ft!=nt)}var L=mt(v,y,_),R=st,I=T(y,L,_=="before");return R!=null&&(I.other=T(y,R,_!="before")),I}function yc(t,r){var a=0;r=gt(t.doc,r),t.options.lineWrapping||(a=Yi(t.display)*r.ch);var o=bt(t.doc,r.line),c=Fn(o)+zs(t.display);return{left:a,right:a,top:c,bottom:c+o.height}}function sa(t,r,a,o,c){var d=X(t,r,a);return d.xRel=c,o&&(d.outside=o),d}function oa(t,r,a){var o=t.doc;if(a+=t.display.viewOffset,a<0)return sa(o.first,0,null,-1,-1);var c=kn(o,a),d=o.first+o.size-1;if(c>d)return sa(o.first+o.size-1,bt(o,d).text.length,null,1,1);r<0&&(r=0);for(var g=bt(o,c);;){var v=gp(t,g,c,r,a),y=$d(g,v.ch+(v.xRel>0||v.outside>0?1:0));if(!y)return v;var _=y.find(1);if(_.line==c)return _;g=bt(o,c=_.line)}}function bc(t,r,a,o){o-=ra(r);var c=r.text.length,d=P(function(g){return Tn(t,a,g-1).bottom<=o},c,0);return c=P(function(g){return Tn(t,a,g).top>o},d,c),{begin:d,end:c}}function _c(t,r,a,o){a||(a=$i(t,r));var c=Ws(t,r,Tn(t,a,o),"line").top;return bc(t,r,a,c)}function aa(t,r,a,o){return t.bottom<=a?!1:t.top>a?!0:(o?t.left:t.right)>r}function gp(t,r,a,o,c){c-=Fn(r);var d=$i(t,r),g=ra(r),v=0,y=r.text.length,_=!0,T=$t(r,t.doc.direction);if(T){var L=(t.options.lineWrapping?vp:mp)(t,r,a,d,T,o,c);_=L.level!=1,v=_?L.from:L.to-1,y=_?L.to:L.from-1}var R=null,I=null,B=P(function(St){var kt=Tn(t,d,St);return kt.top+=g,kt.bottom+=g,aa(kt,o,c,!1)?(kt.top<=c&&kt.left<=o&&(R=St,I=kt),!0):!1},v,y),$,nt,at=!1;if(I){var ft=o-I.left<I.right-o,lt=ft==_;B=R+(lt?0:1),nt=lt?"after":"before",$=ft?I.left:I.right}else{!_&&(B==y||B==v)&&B++,nt=B==0?"after":B==r.text.length?"before":Tn(t,d,B-(_?1:0)).bottom+g<=c==_?"after":"before";var yt=gn(t,X(a,B,nt),"line",r,d);$=yt.left,at=c<yt.top?-1:c>=yt.bottom?1:0}return B=Ee(r.text,B,1),sa(a,B,nt,at,o-$)}function mp(t,r,a,o,c,d,g){var v=P(function(L){var R=c[L],I=R.level!=1;return aa(gn(t,X(a,I?R.to:R.from,I?"before":"after"),"line",r,o),d,g,!0)},0,c.length-1),y=c[v];if(v>0){var _=y.level!=1,T=gn(t,X(a,_?y.from:y.to,_?"after":"before"),"line",r,o);aa(T,d,g,!0)&&T.top>g&&(y=c[v-1])}return y}function vp(t,r,a,o,c,d,g){var v=bc(t,r,o,g),y=v.begin,_=v.end;/\s/.test(r.text.charAt(_-1))&&_--;for(var T=null,L=null,R=0;R<c.length;R++){var I=c[R];if(!(I.from>=_||I.to<=y)){var B=I.level!=1,$=Tn(t,o,B?Math.min(_,I.to)-1:Math.max(y,I.from)).right,nt=$<d?d-$+1e9:$-d;(!T||L>nt)&&(T=I,L=nt)}}return T||(T=c[c.length-1]),T.from<y&&(T={from:y,to:T.to,level:T.level}),T.to>_&&(T={from:T.from,to:_,level:T.level}),T}var gi;function ji(t){if(t.cachedTextHeight!=null)return t.cachedTextHeight;if(gi==null){gi=W("pre",null,"CodeMirror-line-like");for(var r=0;r<49;++r)gi.appendChild(document.createTextNode("x")),gi.appendChild(W("br"));gi.appendChild(document.createTextNode("x"))}H(t.measure,gi);var a=gi.offsetHeight/50;return a>3&&(t.cachedTextHeight=a),rt(t.measure),a||1}function Yi(t){if(t.cachedCharWidth!=null)return t.cachedCharWidth;var r=W("span","xxxxxxxxxx"),a=W("pre",[r],"CodeMirror-line-like");H(t.measure,a);var o=r.getBoundingClientRect(),c=(o.right-o.left)/10;return c>2&&(t.cachedCharWidth=c),c||10}function la(t){for(var r=t.display,a={},o={},c=r.gutters.clientLeft,d=r.gutters.firstChild,g=0;d;d=d.nextSibling,++g){var v=t.display.gutterSpecs[g].className;a[v]=d.offsetLeft+d.clientLeft+c,o[v]=d.clientWidth}return{fixedPos:ca(r),gutterTotalWidth:r.gutters.offsetWidth,gutterLeft:a,gutterWidth:o,wrapperWidth:r.wrapper.clientWidth}}function ca(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function xc(t){var r=ji(t.display),a=t.options.lineWrapping,o=a&&Math.max(5,t.display.scroller.clientWidth/Yi(t.display)-3);return function(c){if(Zn(t.doc,c))return 0;var d=0;if(c.widgets)for(var g=0;g<c.widgets.length;g++)c.widgets[g].height&&(d+=c.widgets[g].height);return a?d+(Math.ceil(c.text.length/o)||1)*r:d+r}}function ua(t){var r=t.doc,a=xc(t);r.iter(function(o){var c=a(o);c!=o.height&&Ye(o,c)})}function mi(t,r,a,o){var c=t.display;if(!a&&qn(r).getAttribute("cm-not-content")=="true")return null;var d,g,v=c.lineSpace.getBoundingClientRect();try{d=r.clientX-v.left,g=r.clientY-v.top}catch{return null}var y=oa(t,d,g),_;if(o&&y.xRel>0&&(_=bt(t.doc,y.line).text).length==y.ch){var T=ct(_,_.length,t.options.tabSize)-_.length;y=X(y.line,Math.max(0,Math.round((d-lc(t.display).left)/Yi(t.display))-T))}return y}function vi(t,r){if(r>=t.display.viewTo||(r-=t.display.viewFrom,r<0))return null;for(var a=t.display.view,o=0;o<a.length;o++)if(r-=a[o].size,r<0)return o}function ze(t,r,a,o){r==null&&(r=t.doc.first),a==null&&(a=t.doc.first+t.doc.size),o||(o=0);var c=t.display;if(o&&a<c.viewTo&&(c.updateLineNumbers==null||c.updateLineNumbers>r)&&(c.updateLineNumbers=r),t.curOp.viewChanged=!0,r>=c.viewTo)En&&Zo(t.doc,r)<c.viewTo&&Qn(t);else if(a<=c.viewFrom)En&&Jl(t.doc,a+o)>c.viewFrom?Qn(t):(c.viewFrom+=o,c.viewTo+=o);else if(r<=c.viewFrom&&a>=c.viewTo)Qn(t);else if(r<=c.viewFrom){var d=Us(t,a,a+o,1);d?(c.view=c.view.slice(d.index),c.viewFrom=d.lineN,c.viewTo+=o):Qn(t)}else if(a>=c.viewTo){var g=Us(t,r,r,-1);g?(c.view=c.view.slice(0,g.index),c.viewTo=g.lineN):Qn(t)}else{var v=Us(t,r,r,-1),y=Us(t,a,a+o,1);v&&y?(c.view=c.view.slice(0,v.index).concat(Hs(t,v.lineN,y.lineN)).concat(c.view.slice(y.index)),c.viewTo+=o):Qn(t)}var _=c.externalMeasured;_&&(a<_.lineN?_.lineN+=o:r<_.lineN+_.size&&(c.externalMeasured=null))}function Jn(t,r,a){t.curOp.viewChanged=!0;var o=t.display,c=t.display.externalMeasured;if(c&&r>=c.lineN&&r<c.lineN+c.size&&(o.externalMeasured=null),!(r<o.viewFrom||r>=o.viewTo)){var d=o.view[vi(t,r)];if(d.node!=null){var g=d.changes||(d.changes=[]);ut(g,a)==-1&&g.push(a)}}}function Qn(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function Us(t,r,a,o){var c=vi(t,r),d,g=t.display.view;if(!En||a==t.doc.first+t.doc.size)return{index:c,lineN:a};for(var v=t.display.viewFrom,y=0;y<c;y++)v+=g[y].size;if(v!=r){if(o>0){if(c==g.length-1)return null;d=v+g[c].size-r,c++}else d=v-r;r+=d,a+=d}for(;Zo(t.doc,a)!=a;){if(c==(o<0?0:g.length-1))return null;a+=o*g[c-(o<0?1:0)].size,c+=o}return{index:c,lineN:a}}function yp(t,r,a){var o=t.display,c=o.view;c.length==0||r>=o.viewTo||a<=o.viewFrom?(o.view=Hs(t,r,a),o.viewFrom=r):(o.viewFrom>r?o.view=Hs(t,r,o.viewFrom).concat(o.view):o.viewFrom<r&&(o.view=o.view.slice(vi(t,r))),o.viewFrom=r,o.viewTo<a?o.view=o.view.concat(Hs(t,o.viewTo,a)):o.viewTo>a&&(o.view=o.view.slice(0,vi(t,a)))),o.viewTo=a}function wc(t){for(var r=t.display.view,a=0,o=0;o<r.length;o++){var c=r[o];!c.hidden&&(!c.node||c.changes)&&++a}return a}function Or(t){t.display.input.showSelection(t.display.input.prepareSelection())}function kc(t,r){r===void 0&&(r=!0);var a=t.doc,o={},c=o.cursors=document.createDocumentFragment(),d=o.selection=document.createDocumentFragment(),g=t.options.$customCursor;g&&(r=!0);for(var v=0;v<a.sel.ranges.length;v++)if(!(!r&&v==a.sel.primIndex)){var y=a.sel.ranges[v];if(!(y.from().line>=t.display.viewTo||y.to().line<t.display.viewFrom)){var _=y.empty();if(g){var T=g(t,y);T&&fa(t,T,c)}else(_||t.options.showCursorWhenSelecting)&&fa(t,y.head,c);_||bp(t,y,d)}}return o}function fa(t,r,a){var o=gn(t,r,"div",null,null,!t.options.singleCursorHeightPerLine),c=a.appendChild(W("div"," ","CodeMirror-cursor"));if(c.style.left=o.left+"px",c.style.top=o.top+"px",c.style.height=Math.max(0,o.bottom-o.top)*t.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(t.getWrapperElement().className)){var d=Bs(t,r,"div",null,null),g=d.right-d.left;c.style.width=(g>0?g:t.defaultCharWidth())+"px"}if(o.other){var v=a.appendChild(W("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));v.style.display="",v.style.left=o.other.left+"px",v.style.top=o.other.top+"px",v.style.height=(o.other.bottom-o.other.top)*.85+"px"}}function $s(t,r){return t.top-r.top||t.left-r.left}function bp(t,r,a){var o=t.display,c=t.doc,d=document.createDocumentFragment(),g=lc(t.display),v=g.left,y=Math.max(o.sizerWidth,pi(t)-o.sizer.offsetLeft)-g.right,_=c.direction=="ltr";function T(lt,yt,St,kt){yt<0&&(yt=0),yt=Math.round(yt),kt=Math.round(kt),d.appendChild(W("div",null,"CodeMirror-selected","position: absolute; left: "+lt+`px;
                             top: `+yt+"px; width: "+(St??y-lt)+`px;
                             height: `+(kt-yt)+"px"))}function L(lt,yt,St){var kt=bt(c,lt),Pt=kt.text.length,Zt,be;function ie(he,Ue){return Bs(t,X(lt,he),"div",kt,Ue)}function Ve(he,Ue,we){var ge=_c(t,kt,null,he),de=Ue=="ltr"==(we=="after")?"left":"right",se=we=="after"?ge.begin:ge.end-(/\s/.test(kt.text.charAt(ge.end-1))?2:1);return ie(se,de)[de]}var Be=$t(kt,c.direction);return V(Be,yt||0,St??Pt,function(he,Ue,we,ge){var de=we=="ltr",se=ie(he,de?"left":"right"),$e=ie(Ue-1,de?"right":"left"),rr=yt==null&&he==0,si=St==null&&Ue==Pt,Ne=ge==0,Mn=!Be||ge==Be.length-1;if($e.top-se.top<=3){var _e=(_?rr:si)&&Ne,Ra=(_?si:rr)&&Mn,Wn=_e?v:(de?se:$e).left,wi=Ra?y:(de?$e:se).right;T(Wn,se.top,wi-Wn,se.bottom)}else{var ki,Oe,sr,Ha;de?(ki=_&&rr&&Ne?v:se.left,Oe=_?y:Ve(he,we,"before"),sr=_?v:Ve(Ue,we,"after"),Ha=_&&si&&Mn?y:$e.right):(ki=_?Ve(he,we,"before"):v,Oe=!_&&rr&&Ne?y:se.right,sr=!_&&si&&Mn?v:$e.left,Ha=_?Ve(Ue,we,"after"):y),T(ki,se.top,Oe-ki,se.bottom),se.bottom<$e.top&&T(v,se.bottom,null,$e.top),T(sr,$e.top,Ha-sr,$e.bottom)}(!Zt||$s(se,Zt)<0)&&(Zt=se),$s($e,Zt)<0&&(Zt=$e),(!be||$s(se,be)<0)&&(be=se),$s($e,be)<0&&(be=$e)}),{start:Zt,end:be}}var R=r.from(),I=r.to();if(R.line==I.line)L(R.line,R.ch,I.ch);else{var B=bt(c,R.line),$=bt(c,I.line),nt=pn(B)==pn($),at=L(R.line,R.ch,nt?B.text.length+1:null).end,ft=L(I.line,nt?0:null,I.ch).start;nt&&(at.top<ft.top-2?(T(at.right,at.top,null,at.bottom),T(v,ft.top,ft.left,ft.bottom)):T(at.right,at.top,ft.left-at.right,at.bottom)),at.bottom<ft.top&&T(v,at.bottom,null,ft.top)}a.appendChild(d)}function ha(t){if(t.state.focused){var r=t.display;clearInterval(r.blinker);var a=!0;r.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?r.blinker=setInterval(function(){t.hasFocus()||Ki(t),r.cursorDiv.style.visibility=(a=!a)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(r.cursorDiv.style.visibility="hidden")}}function Sc(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||pa(t))}function da(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&Ki(t))},100)}function pa(t,r){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),t.options.readOnly!="nocursor"&&(t.state.focused||(Ct(t,"focus",t,r),t.state.focused=!0,F(t.display.wrapper,"CodeMirror-focused"),!t.curOp&&t.display.selForContextMenu!=t.doc.sel&&(t.display.input.reset(),b&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),ha(t))}function Ki(t,r){t.state.delayingBlurEvent||(t.state.focused&&(Ct(t,"blur",t,r),t.state.focused=!1,tt(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function js(t){for(var r=t.display,a=r.lineDiv.offsetTop,o=Math.max(0,r.scroller.getBoundingClientRect().top),c=r.lineDiv.getBoundingClientRect().top,d=0,g=0;g<r.view.length;g++){var v=r.view[g],y=t.options.lineWrapping,_=void 0,T=0;if(!v.hidden){if(c+=v.line.height,p&&m<8){var L=v.node.offsetTop+v.node.offsetHeight;_=L-a,a=L}else{var R=v.node.getBoundingClientRect();_=R.bottom-R.top,!y&&v.text.firstChild&&(T=v.text.firstChild.getBoundingClientRect().right-R.left-1)}var I=v.line.height-_;if((I>.005||I<-.005)&&(c<o&&(d-=I),Ye(v.line,_),Cc(v.line),v.rest))for(var B=0;B<v.rest.length;B++)Cc(v.rest[B]);if(T>t.display.sizerWidth){var $=Math.ceil(T/Yi(t.display));$>t.display.maxLineLength&&(t.display.maxLineLength=$,t.display.maxLine=v.line,t.display.maxLineChanged=!0)}}}Math.abs(d)>2&&(r.scroller.scrollTop+=d)}function Cc(t){if(t.widgets)for(var r=0;r<t.widgets.length;++r){var a=t.widgets[r],o=a.node.parentNode;o&&(a.height=o.offsetHeight)}}function Ys(t,r,a){var o=a&&a.top!=null?Math.max(0,a.top):t.scroller.scrollTop;o=Math.floor(o-zs(t));var c=a&&a.bottom!=null?a.bottom:o+t.wrapper.clientHeight,d=kn(r,o),g=kn(r,c);if(a&&a.ensure){var v=a.ensure.from.line,y=a.ensure.to.line;v<d?(d=v,g=kn(r,Fn(bt(r,v))+t.wrapper.clientHeight)):Math.min(y,r.lastLine())>=g&&(d=kn(r,Fn(bt(r,y))-t.wrapper.clientHeight),g=y)}return{from:d,to:Math.max(g,d+1)}}function _p(t,r){if(!fe(t,"scrollCursorIntoView")){var a=t.display,o=a.sizer.getBoundingClientRect(),c=null;if(r.top+o.top<0?c=!0:r.bottom+o.top>(window.innerHeight||document.documentElement.clientHeight)&&(c=!1),c!=null&&!D){var d=W("div","​",null,`position: absolute;
                         top: `+(r.top-a.viewOffset-zs(t.display))+`px;
                         height: `+(r.bottom-r.top+Cn(t)+a.barHeight)+`px;
                         left: `+r.left+"px; width: "+Math.max(2,r.right-r.left)+"px;");t.display.lineSpace.appendChild(d),d.scrollIntoView(c),t.display.lineSpace.removeChild(d)}}}function xp(t,r,a,o){o==null&&(o=0);var c;!t.options.lineWrapping&&r==a&&(a=r.sticky=="before"?X(r.line,r.ch+1,"before"):r,r=r.ch?X(r.line,r.sticky=="before"?r.ch-1:r.ch,"after"):r);for(var d=0;d<5;d++){var g=!1,v=gn(t,r),y=!a||a==r?v:gn(t,a);c={left:Math.min(v.left,y.left),top:Math.min(v.top,y.top)-o,right:Math.max(v.left,y.left),bottom:Math.max(v.bottom,y.bottom)+o};var _=ga(t,c),T=t.doc.scrollTop,L=t.doc.scrollLeft;if(_.scrollTop!=null&&(Pr(t,_.scrollTop),Math.abs(t.doc.scrollTop-T)>1&&(g=!0)),_.scrollLeft!=null&&(yi(t,_.scrollLeft),Math.abs(t.doc.scrollLeft-L)>1&&(g=!0)),!g)break}return c}function wp(t,r){var a=ga(t,r);a.scrollTop!=null&&Pr(t,a.scrollTop),a.scrollLeft!=null&&yi(t,a.scrollLeft)}function ga(t,r){var a=t.display,o=ji(t.display);r.top<0&&(r.top=0);var c=t.curOp&&t.curOp.scrollTop!=null?t.curOp.scrollTop:a.scroller.scrollTop,d=na(t),g={};r.bottom-r.top>d&&(r.bottom=r.top+d);var v=t.doc.height+ea(a),y=r.top<o,_=r.bottom>v-o;if(r.top<c)g.scrollTop=y?0:r.top;else if(r.bottom>c+d){var T=Math.min(r.top,(_?v:r.bottom)-d);T!=c&&(g.scrollTop=T)}var L=t.options.fixedGutter?0:a.gutters.offsetWidth,R=t.curOp&&t.curOp.scrollLeft!=null?t.curOp.scrollLeft:a.scroller.scrollLeft-L,I=pi(t)-a.gutters.offsetWidth,B=r.right-r.left>I;return B&&(r.right=r.left+I),r.left<10?g.scrollLeft=0:r.left<R?g.scrollLeft=Math.max(0,r.left+L-(B?0:10)):r.right>I+R-3&&(g.scrollLeft=r.right+(B?0:10)-I),g}function ma(t,r){r!=null&&(Ks(t),t.curOp.scrollTop=(t.curOp.scrollTop==null?t.doc.scrollTop:t.curOp.scrollTop)+r)}function Vi(t){Ks(t);var r=t.getCursor();t.curOp.scrollToPos={from:r,to:r,margin:t.options.cursorScrollMargin}}function Ar(t,r,a){(r!=null||a!=null)&&Ks(t),r!=null&&(t.curOp.scrollLeft=r),a!=null&&(t.curOp.scrollTop=a)}function kp(t,r){Ks(t),t.curOp.scrollToPos=r}function Ks(t){var r=t.curOp.scrollToPos;if(r){t.curOp.scrollToPos=null;var a=yc(t,r.from),o=yc(t,r.to);Tc(t,a,o,r.margin)}}function Tc(t,r,a,o){var c=ga(t,{left:Math.min(r.left,a.left),top:Math.min(r.top,a.top)-o,right:Math.max(r.right,a.right),bottom:Math.max(r.bottom,a.bottom)+o});Ar(t,c.scrollLeft,c.scrollTop)}function Pr(t,r){Math.abs(t.doc.scrollTop-r)<2||(l||ya(t,{top:r}),Mc(t,r,!0),l&&ya(t),Fr(t,100))}function Mc(t,r,a){r=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,r)),!(t.display.scroller.scrollTop==r&&!a)&&(t.doc.scrollTop=r,t.display.scrollbars.setScrollTop(r),t.display.scroller.scrollTop!=r&&(t.display.scroller.scrollTop=r))}function yi(t,r,a,o){r=Math.max(0,Math.min(r,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),!((a?r==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-r)<2)&&!o)&&(t.doc.scrollLeft=r,Ac(t),t.display.scroller.scrollLeft!=r&&(t.display.scroller.scrollLeft=r),t.display.scrollbars.setScrollLeft(r))}function Ir(t){var r=t.display,a=r.gutters.offsetWidth,o=Math.round(t.doc.height+ea(t.display));return{clientHeight:r.scroller.clientHeight,viewHeight:r.wrapper.clientHeight,scrollWidth:r.scroller.scrollWidth,clientWidth:r.scroller.clientWidth,viewWidth:r.wrapper.clientWidth,barLeft:t.options.fixedGutter?a:0,docHeight:o,scrollHeight:o+Cn(t)+r.barHeight,nativeBarWidth:r.nativeBarWidth,gutterWidth:a}}var bi=function(t,r,a){this.cm=a;var o=this.vert=W("div",[W("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),c=this.horiz=W("div",[W("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");o.tabIndex=c.tabIndex=-1,t(o),t(c),wt(o,"scroll",function(){o.clientHeight&&r(o.scrollTop,"vertical")}),wt(c,"scroll",function(){c.clientWidth&&r(c.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,p&&m<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};bi.prototype.update=function(t){var r=t.scrollWidth>t.clientWidth+1,a=t.scrollHeight>t.clientHeight+1,o=t.nativeBarWidth;if(a){this.vert.style.display="block",this.vert.style.bottom=r?o+"px":"0";var c=t.viewHeight-(r?o:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+c)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(r){this.horiz.style.display="block",this.horiz.style.right=a?o+"px":"0",this.horiz.style.left=t.barLeft+"px";var d=t.viewWidth-t.barLeft-(a?o:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+d)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(o==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:a?o:0,bottom:r?o:0}},bi.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},bi.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},bi.prototype.zeroWidthHack=function(){var t=q&&!O?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Mt,this.disableVert=new Mt},bi.prototype.enableZeroWidthBar=function(t,r,a){t.style.pointerEvents="auto";function o(){var c=t.getBoundingClientRect(),d=a=="vert"?document.elementFromPoint(c.right-1,(c.top+c.bottom)/2):document.elementFromPoint((c.right+c.left)/2,c.bottom-1);d!=t?t.style.pointerEvents="none":r.set(1e3,o)}r.set(1e3,o)},bi.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var Er=function(){};Er.prototype.update=function(){return{bottom:0,right:0}},Er.prototype.setScrollLeft=function(){},Er.prototype.setScrollTop=function(){},Er.prototype.clear=function(){};function Xi(t,r){r||(r=Ir(t));var a=t.display.barWidth,o=t.display.barHeight;Lc(t,r);for(var c=0;c<4&&a!=t.display.barWidth||o!=t.display.barHeight;c++)a!=t.display.barWidth&&t.options.lineWrapping&&js(t),Lc(t,Ir(t)),a=t.display.barWidth,o=t.display.barHeight}function Lc(t,r){var a=t.display,o=a.scrollbars.update(r);a.sizer.style.paddingRight=(a.barWidth=o.right)+"px",a.sizer.style.paddingBottom=(a.barHeight=o.bottom)+"px",a.heightForcer.style.borderBottom=o.bottom+"px solid transparent",o.right&&o.bottom?(a.scrollbarFiller.style.display="block",a.scrollbarFiller.style.height=o.bottom+"px",a.scrollbarFiller.style.width=o.right+"px"):a.scrollbarFiller.style.display="",o.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(a.gutterFiller.style.display="block",a.gutterFiller.style.height=o.bottom+"px",a.gutterFiller.style.width=r.gutterWidth+"px"):a.gutterFiller.style.display=""}var Nc={native:bi,null:Er};function Dc(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&tt(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Nc[t.options.scrollbarStyle](function(r){t.display.wrapper.insertBefore(r,t.display.scrollbarFiller),wt(r,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),r.setAttribute("cm-not-content","true")},function(r,a){a=="horizontal"?yi(t,r):Pr(t,r)},t),t.display.scrollbars.addClass&&F(t.display.wrapper,t.display.scrollbars.addClass)}var Sp=0;function _i(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Sp,markArrays:null},ep(t.curOp)}function xi(t){var r=t.curOp;r&&ip(r,function(a){for(var o=0;o<a.ops.length;o++)a.ops[o].cm.curOp=null;Cp(a)})}function Cp(t){for(var r=t.ops,a=0;a<r.length;a++)Tp(r[a]);for(var o=0;o<r.length;o++)Mp(r[o]);for(var c=0;c<r.length;c++)Lp(r[c]);for(var d=0;d<r.length;d++)Np(r[d]);for(var g=0;g<r.length;g++)Dp(r[g])}function Tp(t){var r=t.cm,a=r.display;Ap(r),t.updateMaxLine&&Qo(r),t.mustUpdate=t.viewChanged||t.forceUpdate||t.scrollTop!=null||t.scrollToPos&&(t.scrollToPos.from.line<a.viewFrom||t.scrollToPos.to.line>=a.viewTo)||a.maxLineChanged&&r.options.lineWrapping,t.update=t.mustUpdate&&new Vs(r,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function Mp(t){t.updatedDisplay=t.mustUpdate&&va(t.cm,t.update)}function Lp(t){var r=t.cm,a=r.display;t.updatedDisplay&&js(r),t.barMeasure=Ir(r),a.maxLineChanged&&!r.options.lineWrapping&&(t.adjustWidthTo=uc(r,a.maxLine,a.maxLine.text.length).left+3,r.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(a.scroller.clientWidth,a.sizer.offsetLeft+t.adjustWidthTo+Cn(r)+r.display.barWidth),t.maxScrollLeft=Math.max(0,a.sizer.offsetLeft+t.adjustWidthTo-pi(r))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=a.input.prepareSelection())}function Np(t){var r=t.cm;t.adjustWidthTo!=null&&(r.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<r.doc.scrollLeft&&yi(r,Math.min(r.display.scroller.scrollLeft,t.maxScrollLeft),!0),r.display.maxLineChanged=!1);var a=t.focus&&t.focus==qt();t.preparedSelection&&r.display.input.showSelection(t.preparedSelection,a),(t.updatedDisplay||t.startHeight!=r.doc.height)&&Xi(r,t.barMeasure),t.updatedDisplay&&_a(r,t.barMeasure),t.selectionChanged&&ha(r),r.state.focused&&t.updateInput&&r.display.input.reset(t.typing),a&&Sc(t.cm)}function Dp(t){var r=t.cm,a=r.display,o=r.doc;if(t.updatedDisplay&&Oc(r,t.update),a.wheelStartX!=null&&(t.scrollTop!=null||t.scrollLeft!=null||t.scrollToPos)&&(a.wheelStartX=a.wheelStartY=null),t.scrollTop!=null&&Mc(r,t.scrollTop,t.forceScroll),t.scrollLeft!=null&&yi(r,t.scrollLeft,!0,!0),t.scrollToPos){var c=xp(r,gt(o,t.scrollToPos.from),gt(o,t.scrollToPos.to),t.scrollToPos.margin);_p(r,c)}var d=t.maybeHiddenMarkers,g=t.maybeUnhiddenMarkers;if(d)for(var v=0;v<d.length;++v)d[v].lines.length||Ct(d[v],"hide");if(g)for(var y=0;y<g.length;++y)g[y].lines.length&&Ct(g[y],"unhide");a.wrapper.offsetHeight&&(o.scrollTop=r.display.scroller.scrollTop),t.changeObjs&&Ct(r,"changes",r,t.changeObjs),t.update&&t.update.finish()}function Ke(t,r){if(t.curOp)return r();_i(t);try{return r()}finally{xi(t)}}function ve(t,r){return function(){if(t.curOp)return r.apply(t,arguments);_i(t);try{return r.apply(t,arguments)}finally{xi(t)}}}function De(t){return function(){if(this.curOp)return t.apply(this,arguments);_i(this);try{return t.apply(this,arguments)}finally{xi(this)}}}function ye(t){return function(){var r=this.cm;if(!r||r.curOp)return t.apply(this,arguments);_i(r);try{return t.apply(this,arguments)}finally{xi(r)}}}function Fr(t,r){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(r,ht(Op,t))}function Op(t){var r=t.doc;if(!(r.highlightFrontier>=t.display.viewTo)){var a=+new Date+t.options.workTime,o=Cr(t,r.highlightFrontier),c=[];r.iter(o.line,Math.min(r.first+r.size,t.display.viewTo+500),function(d){if(o.line>=t.display.viewFrom){var g=d.styles,v=d.text.length>t.options.maxHighlightLength?Je(r.mode,o.state):null,y=Hl(t,d,o,!0);v&&(o.state=v),d.styles=y.styles;var _=d.styleClasses,T=y.classes;T?d.styleClasses=T:_&&(d.styleClasses=null);for(var L=!g||g.length!=d.styles.length||_!=T&&(!_||!T||_.bgClass!=T.bgClass||_.textClass!=T.textClass),R=0;!L&&R<g.length;++R)L=g[R]!=d.styles[R];L&&c.push(o.line),d.stateAfter=o.save(),o.nextLine()}else d.text.length<=t.options.maxHighlightLength&&Vo(t,d.text,o),d.stateAfter=o.line%5==0?o.save():null,o.nextLine();if(+new Date>a)return Fr(t,t.options.workDelay),!0}),r.highlightFrontier=o.line,r.modeFrontier=Math.max(r.modeFrontier,o.line),c.length&&Ke(t,function(){for(var d=0;d<c.length;d++)Jn(t,c[d],"text")})}}var Vs=function(t,r,a){var o=t.display;this.viewport=r,this.visible=Ys(o,t.doc,r),this.editorIsHidden=!o.wrapper.offsetWidth,this.wrapperHeight=o.wrapper.clientHeight,this.wrapperWidth=o.wrapper.clientWidth,this.oldDisplayWidth=pi(t),this.force=a,this.dims=la(t),this.events=[]};Vs.prototype.signal=function(t,r){xe(t,r)&&this.events.push(arguments)},Vs.prototype.finish=function(){for(var t=0;t<this.events.length;t++)Ct.apply(null,this.events[t])};function Ap(t){var r=t.display;!r.scrollbarsClipped&&r.scroller.offsetWidth&&(r.nativeBarWidth=r.scroller.offsetWidth-r.scroller.clientWidth,r.heightForcer.style.height=Cn(t)+"px",r.sizer.style.marginBottom=-r.nativeBarWidth+"px",r.sizer.style.borderRightWidth=Cn(t)+"px",r.scrollbarsClipped=!0)}function Pp(t){if(t.hasFocus())return null;var r=qt();if(!r||!Ft(t.display.lineDiv,r))return null;var a={activeElt:r};if(window.getSelection){var o=window.getSelection();o.anchorNode&&o.extend&&Ft(t.display.lineDiv,o.anchorNode)&&(a.anchorNode=o.anchorNode,a.anchorOffset=o.anchorOffset,a.focusNode=o.focusNode,a.focusOffset=o.focusOffset)}return a}function Ip(t){if(!(!t||!t.activeElt||t.activeElt==qt())&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&Ft(document.body,t.anchorNode)&&Ft(document.body,t.focusNode))){var r=window.getSelection(),a=document.createRange();a.setEnd(t.anchorNode,t.anchorOffset),a.collapse(!1),r.removeAllRanges(),r.addRange(a),r.extend(t.focusNode,t.focusOffset)}}function va(t,r){var a=t.display,o=t.doc;if(r.editorIsHidden)return Qn(t),!1;if(!r.force&&r.visible.from>=a.viewFrom&&r.visible.to<=a.viewTo&&(a.updateLineNumbers==null||a.updateLineNumbers>=a.viewTo)&&a.renderedView==a.view&&wc(t)==0)return!1;Pc(t)&&(Qn(t),r.dims=la(t));var c=o.first+o.size,d=Math.max(r.visible.from-t.options.viewportMargin,o.first),g=Math.min(c,r.visible.to+t.options.viewportMargin);a.viewFrom<d&&d-a.viewFrom<20&&(d=Math.max(o.first,a.viewFrom)),a.viewTo>g&&a.viewTo-g<20&&(g=Math.min(c,a.viewTo)),En&&(d=Zo(t.doc,d),g=Jl(t.doc,g));var v=d!=a.viewFrom||g!=a.viewTo||a.lastWrapHeight!=r.wrapperHeight||a.lastWrapWidth!=r.wrapperWidth;yp(t,d,g),a.viewOffset=Fn(bt(t.doc,a.viewFrom)),t.display.mover.style.top=a.viewOffset+"px";var y=wc(t);if(!v&&y==0&&!r.force&&a.renderedView==a.view&&(a.updateLineNumbers==null||a.updateLineNumbers>=a.viewTo))return!1;var _=Pp(t);return y>4&&(a.lineDiv.style.display="none"),Ep(t,a.updateLineNumbers,r.dims),y>4&&(a.lineDiv.style.display=""),a.renderedView=a.view,Ip(_),rt(a.cursorDiv),rt(a.selectionDiv),a.gutters.style.height=a.sizer.style.minHeight=0,v&&(a.lastWrapHeight=r.wrapperHeight,a.lastWrapWidth=r.wrapperWidth,Fr(t,400)),a.updateLineNumbers=null,!0}function Oc(t,r){for(var a=r.viewport,o=!0;;o=!1){if(!o||!t.options.lineWrapping||r.oldDisplayWidth==pi(t)){if(a&&a.top!=null&&(a={top:Math.min(t.doc.height+ea(t.display)-na(t),a.top)}),r.visible=Ys(t.display,t.doc,a),r.visible.from>=t.display.viewFrom&&r.visible.to<=t.display.viewTo)break}else o&&(r.visible=Ys(t.display,t.doc,a));if(!va(t,r))break;js(t);var c=Ir(t);Or(t),Xi(t,c),_a(t,c),r.force=!1}r.signal(t,"update",t),(t.display.viewFrom!=t.display.reportedViewFrom||t.display.viewTo!=t.display.reportedViewTo)&&(r.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function ya(t,r){var a=new Vs(t,r);if(va(t,a)){js(t),Oc(t,a);var o=Ir(t);Or(t),Xi(t,o),_a(t,o),a.finish()}}function Ep(t,r,a){var o=t.display,c=t.options.lineNumbers,d=o.lineDiv,g=d.firstChild;function v(B){var $=B.nextSibling;return b&&q&&t.display.currentWheelTarget==B?B.style.display="none":B.parentNode.removeChild(B),$}for(var y=o.view,_=o.viewFrom,T=0;T<y.length;T++){var L=y[T];if(!L.hidden)if(!L.node||L.node.parentNode!=d){var R=lp(t,L,_,a);d.insertBefore(R,g)}else{for(;g!=L.node;)g=v(g);var I=c&&r!=null&&r<=_&&L.lineNumber;L.changes&&(ut(L.changes,"gutter")>-1&&(I=!1),ic(t,L,_,a)),I&&(rt(L.lineNumber),L.lineNumber.appendChild(document.createTextNode(Sr(t.options,_)))),g=L.node.nextSibling}_+=L.size}for(;g;)g=v(g)}function ba(t){var r=t.gutters.offsetWidth;t.sizer.style.marginLeft=r+"px",me(t,"gutterChanged",t)}function _a(t,r){t.display.sizer.style.minHeight=r.docHeight+"px",t.display.heightForcer.style.top=r.docHeight+"px",t.display.gutters.style.height=r.docHeight+t.display.barHeight+Cn(t)+"px"}function Ac(t){var r=t.display,a=r.view;if(!(!r.alignWidgets&&(!r.gutters.firstChild||!t.options.fixedGutter))){for(var o=ca(r)-r.scroller.scrollLeft+t.doc.scrollLeft,c=r.gutters.offsetWidth,d=o+"px",g=0;g<a.length;g++)if(!a[g].hidden){t.options.fixedGutter&&(a[g].gutter&&(a[g].gutter.style.left=d),a[g].gutterBackground&&(a[g].gutterBackground.style.left=d));var v=a[g].alignable;if(v)for(var y=0;y<v.length;y++)v[y].style.left=d}t.options.fixedGutter&&(r.gutters.style.left=o+c+"px")}}function Pc(t){if(!t.options.lineNumbers)return!1;var r=t.doc,a=Sr(t.options,r.first+r.size-1),o=t.display;if(a.length!=o.lineNumChars){var c=o.measure.appendChild(W("div",[W("div",a)],"CodeMirror-linenumber CodeMirror-gutter-elt")),d=c.firstChild.offsetWidth,g=c.offsetWidth-d;return o.lineGutter.style.width="",o.lineNumInnerWidth=Math.max(d,o.lineGutter.offsetWidth-g)+1,o.lineNumWidth=o.lineNumInnerWidth+g,o.lineNumChars=o.lineNumInnerWidth?a.length:-1,o.lineGutter.style.width=o.lineNumWidth+"px",ba(t.display),!0}return!1}function xa(t,r){for(var a=[],o=!1,c=0;c<t.length;c++){var d=t[c],g=null;if(typeof d!="string"&&(g=d.style,d=d.className),d=="CodeMirror-linenumbers")if(r)o=!0;else continue;a.push({className:d,style:g})}return r&&!o&&a.push({className:"CodeMirror-linenumbers",style:null}),a}function Ic(t){var r=t.gutters,a=t.gutterSpecs;rt(r),t.lineGutter=null;for(var o=0;o<a.length;++o){var c=a[o],d=c.className,g=c.style,v=r.appendChild(W("div",null,"CodeMirror-gutter "+d));g&&(v.style.cssText=g),d=="CodeMirror-linenumbers"&&(t.lineGutter=v,v.style.width=(t.lineNumWidth||1)+"px")}r.style.display=a.length?"":"none",ba(t)}function Rr(t){Ic(t.display),ze(t),Ac(t)}function Fp(t,r,a,o){var c=this;this.input=a,c.scrollbarFiller=W("div",null,"CodeMirror-scrollbar-filler"),c.scrollbarFiller.setAttribute("cm-not-content","true"),c.gutterFiller=W("div",null,"CodeMirror-gutter-filler"),c.gutterFiller.setAttribute("cm-not-content","true"),c.lineDiv=M("div",null,"CodeMirror-code"),c.selectionDiv=W("div",null,null,"position: relative; z-index: 1"),c.cursorDiv=W("div",null,"CodeMirror-cursors"),c.measure=W("div",null,"CodeMirror-measure"),c.lineMeasure=W("div",null,"CodeMirror-measure"),c.lineSpace=M("div",[c.measure,c.lineMeasure,c.selectionDiv,c.cursorDiv,c.lineDiv],null,"position: relative; outline: none");var d=M("div",[c.lineSpace],"CodeMirror-lines");c.mover=W("div",[d],null,"position: relative"),c.sizer=W("div",[c.mover],"CodeMirror-sizer"),c.sizerWidth=null,c.heightForcer=W("div",null,null,"position: absolute; height: "+xt+"px; width: 1px;"),c.gutters=W("div",null,"CodeMirror-gutters"),c.lineGutter=null,c.scroller=W("div",[c.sizer,c.heightForcer,c.gutters],"CodeMirror-scroll"),c.scroller.setAttribute("tabIndex","-1"),c.wrapper=W("div",[c.scrollbarFiller,c.gutterFiller,c.scroller],"CodeMirror"),c.wrapper.setAttribute("translate","no"),p&&m<8&&(c.gutters.style.zIndex=-1,c.scroller.style.paddingRight=0),!b&&!(l&&it)&&(c.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(c.wrapper):t(c.wrapper)),c.viewFrom=c.viewTo=r.first,c.reportedViewFrom=c.reportedViewTo=r.first,c.view=[],c.renderedView=null,c.externalMeasured=null,c.viewOffset=0,c.lastWrapHeight=c.lastWrapWidth=0,c.updateLineNumbers=null,c.nativeBarWidth=c.barHeight=c.barWidth=0,c.scrollbarsClipped=!1,c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null,c.alignWidgets=!1,c.cachedCharWidth=c.cachedTextHeight=c.cachedPaddingH=null,c.maxLine=null,c.maxLineLength=0,c.maxLineChanged=!1,c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null,c.shift=!1,c.selForContextMenu=null,c.activeTouch=null,c.gutterSpecs=xa(o.gutters,o.lineNumbers),Ic(c),a.init(c)}var Xs=0,Hn=null;p?Hn=-.53:l?Hn=15:S?Hn=-.7:A&&(Hn=-1/3);function Ec(t){var r=t.wheelDeltaX,a=t.wheelDeltaY;return r==null&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(r=t.detail),a==null&&t.detail&&t.axis==t.VERTICAL_AXIS?a=t.detail:a==null&&(a=t.wheelDelta),{x:r,y:a}}function Rp(t){var r=Ec(t);return r.x*=Hn,r.y*=Hn,r}function Fc(t,r){var a=Ec(r),o=a.x,c=a.y,d=Hn;r.deltaMode===0&&(o=r.deltaX,c=r.deltaY,d=1);var g=t.display,v=g.scroller,y=v.scrollWidth>v.clientWidth,_=v.scrollHeight>v.clientHeight;if(o&&y||c&&_){if(c&&q&&b){t:for(var T=r.target,L=g.view;T!=v;T=T.parentNode)for(var R=0;R<L.length;R++)if(L[R].node==T){t.display.currentWheelTarget=T;break t}}if(o&&!l&&!C&&d!=null){c&&_&&Pr(t,Math.max(0,v.scrollTop+c*d)),yi(t,Math.max(0,v.scrollLeft+o*d)),(!c||c&&_)&&Te(r),g.wheelStartX=null;return}if(c&&d!=null){var I=c*d,B=t.doc.scrollTop,$=B+g.wrapper.clientHeight;I<0?B=Math.max(0,B+I-50):$=Math.min(t.doc.height,$+I+50),ya(t,{top:B,bottom:$})}Xs<20&&r.deltaMode!==0&&(g.wheelStartX==null?(g.wheelStartX=v.scrollLeft,g.wheelStartY=v.scrollTop,g.wheelDX=o,g.wheelDY=c,setTimeout(function(){if(g.wheelStartX!=null){var nt=v.scrollLeft-g.wheelStartX,at=v.scrollTop-g.wheelStartY,ft=at&&g.wheelDY&&at/g.wheelDY||nt&&g.wheelDX&&nt/g.wheelDX;g.wheelStartX=g.wheelStartY=null,ft&&(Hn=(Hn*Xs+ft)/(Xs+1),++Xs)}},200)):(g.wheelDX+=o,g.wheelDY+=c))}}var tn=function(t,r){this.ranges=t,this.primIndex=r};tn.prototype.primary=function(){return this.ranges[this.primIndex]},tn.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var r=0;r<this.ranges.length;r++){var a=this.ranges[r],o=t.ranges[r];if(!N(a.anchor,o.anchor)||!N(a.head,o.head))return!1}return!0},tn.prototype.deepCopy=function(){for(var t=[],r=0;r<this.ranges.length;r++)t[r]=new Yt(U(this.ranges[r].anchor),U(this.ranges[r].head));return new tn(t,this.primIndex)},tn.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},tn.prototype.contains=function(t,r){r||(r=t);for(var a=0;a<this.ranges.length;a++){var o=this.ranges[a];if(w(r,o.from())>=0&&w(t,o.to())<=0)return a}return-1};var Yt=function(t,r){this.anchor=t,this.head=r};Yt.prototype.from=function(){return Tt(this.anchor,this.head)},Yt.prototype.to=function(){return J(this.anchor,this.head)},Yt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function mn(t,r,a){var o=t&&t.options.selectionsMayTouch,c=r[a];r.sort(function(R,I){return w(R.from(),I.from())}),a=ut(r,c);for(var d=1;d<r.length;d++){var g=r[d],v=r[d-1],y=w(v.to(),g.from());if(o&&!g.empty()?y>0:y>=0){var _=Tt(v.from(),g.from()),T=J(v.to(),g.to()),L=v.empty()?g.from()==g.head:v.from()==v.head;d<=a&&--a,r.splice(--d,2,new Yt(L?T:_,L?_:T))}}return new tn(r,a)}function ti(t,r){return new tn([new Yt(t,r||t)],0)}function ei(t){return t.text?X(t.from.line+t.text.length-1,At(t.text).length+(t.text.length==1?t.from.ch:0)):t.to}function Rc(t,r){if(w(t,r.from)<0)return t;if(w(t,r.to)<=0)return ei(r);var a=t.line+r.text.length-(r.to.line-r.from.line)-1,o=t.ch;return t.line==r.to.line&&(o+=ei(r).ch-r.to.ch),X(a,o)}function wa(t,r){for(var a=[],o=0;o<t.sel.ranges.length;o++){var c=t.sel.ranges[o];a.push(new Yt(Rc(c.anchor,r),Rc(c.head,r)))}return mn(t.cm,a,t.sel.primIndex)}function Hc(t,r,a){return t.line==r.line?X(a.line,t.ch-r.ch+a.ch):X(a.line+(t.line-r.line),t.ch)}function Hp(t,r,a){for(var o=[],c=X(t.first,0),d=c,g=0;g<r.length;g++){var v=r[g],y=Hc(v.from,c,d),_=Hc(ei(v),c,d);if(c=v.to,d=_,a=="around"){var T=t.sel.ranges[g],L=w(T.head,T.anchor)<0;o[g]=new Yt(L?_:y,L?y:_)}else o[g]=new Yt(y,y)}return new tn(o,t.sel.primIndex)}function ka(t){t.doc.mode=zi(t.options,t.doc.modeOption),Hr(t)}function Hr(t){t.doc.iter(function(r){r.stateAfter&&(r.stateAfter=null),r.styles&&(r.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,Fr(t,100),t.state.modeGen++,t.curOp&&ze(t)}function zc(t,r){return r.from.ch==0&&r.to.ch==0&&At(r.text)==""&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Sa(t,r,a,o){function c(ft){return a?a[ft]:null}function d(ft,lt,yt){Kd(ft,lt,yt,o),me(ft,"change",ft,r)}function g(ft,lt){for(var yt=[],St=ft;St<lt;++St)yt.push(new Bi(_[St],c(St),o));return yt}var v=r.from,y=r.to,_=r.text,T=bt(t,v.line),L=bt(t,y.line),R=At(_),I=c(_.length-1),B=y.line-v.line;if(r.full)t.insert(0,g(0,_.length)),t.remove(_.length,t.size-_.length);else if(zc(t,r)){var $=g(0,_.length-1);d(L,L.text,I),B&&t.remove(v.line,B),$.length&&t.insert(v.line,$)}else if(T==L)if(_.length==1)d(T,T.text.slice(0,v.ch)+R+T.text.slice(y.ch),I);else{var nt=g(1,_.length-1);nt.push(new Bi(R+T.text.slice(y.ch),I,o)),d(T,T.text.slice(0,v.ch)+_[0],c(0)),t.insert(v.line+1,nt)}else if(_.length==1)d(T,T.text.slice(0,v.ch)+_[0]+L.text.slice(y.ch),c(0)),t.remove(v.line+1,B);else{d(T,T.text.slice(0,v.ch)+_[0],c(0)),d(L,R+L.text.slice(y.ch),I);var at=g(1,_.length-1);B>1&&t.remove(v.line+1,B-1),t.insert(v.line+1,at)}me(t,"change",t,r)}function ni(t,r,a){function o(c,d,g){if(c.linked)for(var v=0;v<c.linked.length;++v){var y=c.linked[v];if(y.doc!=d){var _=g&&y.sharedHist;a&&!_||(r(y.doc,_),o(y.doc,c,_))}}}o(t,null,!0)}function Wc(t,r){if(r.cm)throw new Error("This document is already in use.");t.doc=r,r.cm=t,ua(t),ka(t),Bc(t),t.options.direction=r.direction,t.options.lineWrapping||Qo(t),t.options.mode=r.modeOption,ze(t)}function Bc(t){(t.doc.direction=="rtl"?F:tt)(t.display.lineDiv,"CodeMirror-rtl")}function zp(t){Ke(t,function(){Bc(t),ze(t)})}function qs(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function Ca(t,r){var a={from:U(r.from),to:ei(r),text:wn(t,r.from,r.to)};return jc(t,a,r.from.line,r.to.line+1),ni(t,function(o){return jc(o,a,r.from.line,r.to.line+1)},!0),a}function Uc(t){for(;t.length;){var r=At(t);if(r.ranges)t.pop();else break}}function Wp(t,r){if(r)return Uc(t.done),At(t.done);if(t.done.length&&!At(t.done).ranges)return At(t.done);if(t.done.length>1&&!t.done[t.done.length-2].ranges)return t.done.pop(),At(t.done)}function $c(t,r,a,o){var c=t.history;c.undone.length=0;var d=+new Date,g,v;if((c.lastOp==o||c.lastOrigin==r.origin&&r.origin&&(r.origin.charAt(0)=="+"&&c.lastModTime>d-(t.cm?t.cm.options.historyEventDelay:500)||r.origin.charAt(0)=="*"))&&(g=Wp(c,c.lastOp==o)))v=At(g.changes),w(r.from,r.to)==0&&w(r.from,v.to)==0?v.to=ei(r):g.changes.push(Ca(t,r));else{var y=At(c.done);for((!y||!y.ranges)&&Gs(t.sel,c.done),g={changes:[Ca(t,r)],generation:c.generation},c.done.push(g);c.done.length>c.undoDepth;)c.done.shift(),c.done[0].ranges||c.done.shift()}c.done.push(a),c.generation=++c.maxGeneration,c.lastModTime=c.lastSelTime=d,c.lastOp=c.lastSelOp=o,c.lastOrigin=c.lastSelOrigin=r.origin,v||Ct(t,"historyAdded")}function Bp(t,r,a,o){var c=r.charAt(0);return c=="*"||c=="+"&&a.ranges.length==o.ranges.length&&a.somethingSelected()==o.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}function Up(t,r,a,o){var c=t.history,d=o&&o.origin;a==c.lastSelOp||d&&c.lastSelOrigin==d&&(c.lastModTime==c.lastSelTime&&c.lastOrigin==d||Bp(t,d,At(c.done),r))?c.done[c.done.length-1]=r:Gs(r,c.done),c.lastSelTime=+new Date,c.lastSelOrigin=d,c.lastSelOp=a,o&&o.clearRedo!==!1&&Uc(c.undone)}function Gs(t,r){var a=At(r);a&&a.ranges&&a.equals(t)||r.push(t)}function jc(t,r,a,o){var c=r["spans_"+t.id],d=0;t.iter(Math.max(t.first,a),Math.min(t.first+t.size,o),function(g){g.markedSpans&&((c||(c=r["spans_"+t.id]={}))[d]=g.markedSpans),++d})}function $p(t){if(!t)return null;for(var r,a=0;a<t.length;++a)t[a].marker.explicitlyCleared?r||(r=t.slice(0,a)):r&&r.push(t[a]);return r?r.length?r:null:t}function jp(t,r){var a=r["spans_"+t.id];if(!a)return null;for(var o=[],c=0;c<r.text.length;++c)o.push($p(a[c]));return o}function Yc(t,r){var a=jp(t,r),o=qo(t,r);if(!a)return o;if(!o)return a;for(var c=0;c<a.length;++c){var d=a[c],g=o[c];if(d&&g)t:for(var v=0;v<g.length;++v){for(var y=g[v],_=0;_<d.length;++_)if(d[_].marker==y.marker)continue t;d.push(y)}else g&&(a[c]=g)}return a}function qi(t,r,a){for(var o=[],c=0;c<t.length;++c){var d=t[c];if(d.ranges){o.push(a?tn.prototype.deepCopy.call(d):d);continue}var g=d.changes,v=[];o.push({changes:v});for(var y=0;y<g.length;++y){var _=g[y],T=void 0;if(v.push({from:_.from,to:_.to,text:_.text}),r)for(var L in _)(T=L.match(/^spans_(\d+)$/))&&ut(r,Number(T[1]))>-1&&(At(v)[L]=_[L],delete _[L])}}return o}function Ta(t,r,a,o){if(o){var c=t.anchor;if(a){var d=w(r,c)<0;d!=w(a,c)<0?(c=r,r=a):d!=w(r,a)<0&&(r=a)}return new Yt(c,r)}else return new Yt(a||r,r)}function Zs(t,r,a,o,c){c==null&&(c=t.cm&&(t.cm.display.shift||t.extend)),Le(t,new tn([Ta(t.sel.primary(),r,a,c)],0),o)}function Kc(t,r,a){for(var o=[],c=t.cm&&(t.cm.display.shift||t.extend),d=0;d<t.sel.ranges.length;d++)o[d]=Ta(t.sel.ranges[d],r[d],null,c);var g=mn(t.cm,o,t.sel.primIndex);Le(t,g,a)}function Ma(t,r,a,o){var c=t.sel.ranges.slice(0);c[r]=a,Le(t,mn(t.cm,c,t.sel.primIndex),o)}function Vc(t,r,a,o){Le(t,ti(r,a),o)}function Yp(t,r,a){var o={ranges:r.ranges,update:function(c){this.ranges=[];for(var d=0;d<c.length;d++)this.ranges[d]=new Yt(gt(t,c[d].anchor),gt(t,c[d].head))},origin:a&&a.origin};return Ct(t,"beforeSelectionChange",t,o),t.cm&&Ct(t.cm,"beforeSelectionChange",t.cm,o),o.ranges!=r.ranges?mn(t.cm,o.ranges,o.ranges.length-1):r}function Xc(t,r,a){var o=t.history.done,c=At(o);c&&c.ranges?(o[o.length-1]=r,Js(t,r,a)):Le(t,r,a)}function Le(t,r,a){Js(t,r,a),Up(t,t.sel,t.cm?t.cm.curOp.id:NaN,a)}function Js(t,r,a){(xe(t,"beforeSelectionChange")||t.cm&&xe(t.cm,"beforeSelectionChange"))&&(r=Yp(t,r,a));var o=a&&a.bias||(w(r.primary().head,t.sel.primary().head)<0?-1:1);qc(t,Zc(t,r,o,!0)),!(a&&a.scroll===!1)&&t.cm&&t.cm.getOption("readOnly")!="nocursor"&&Vi(t.cm)}function qc(t,r){r.equals(t.sel)||(t.sel=r,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,Fi(t.cm)),me(t,"cursorActivity",t))}function Gc(t){qc(t,Zc(t,t.sel,null,!1))}function Zc(t,r,a,o){for(var c,d=0;d<r.ranges.length;d++){var g=r.ranges[d],v=r.ranges.length==t.sel.ranges.length&&t.sel.ranges[d],y=Qs(t,g.anchor,v&&v.anchor,a,o),_=Qs(t,g.head,v&&v.head,a,o);(c||y!=g.anchor||_!=g.head)&&(c||(c=r.ranges.slice(0,d)),c[d]=new Yt(y,_))}return c?mn(t.cm,c,r.primIndex):r}function Gi(t,r,a,o,c){var d=bt(t,r.line);if(d.markedSpans)for(var g=0;g<d.markedSpans.length;++g){var v=d.markedSpans[g],y=v.marker,_="selectLeft"in y?!y.selectLeft:y.inclusiveLeft,T="selectRight"in y?!y.selectRight:y.inclusiveRight;if((v.from==null||(_?v.from<=r.ch:v.from<r.ch))&&(v.to==null||(T?v.to>=r.ch:v.to>r.ch))){if(c&&(Ct(y,"beforeCursorEnter"),y.explicitlyCleared))if(d.markedSpans){--g;continue}else break;if(!y.atomic)continue;if(a){var L=y.find(o<0?1:-1),R=void 0;if((o<0?T:_)&&(L=Jc(t,L,-o,L&&L.line==r.line?d:null)),L&&L.line==r.line&&(R=w(L,a))&&(o<0?R<0:R>0))return Gi(t,L,r,o,c)}var I=y.find(o<0?-1:1);return(o<0?_:T)&&(I=Jc(t,I,o,I.line==r.line?d:null)),I?Gi(t,I,r,o,c):null}}return r}function Qs(t,r,a,o,c){var d=o||1,g=Gi(t,r,a,d,c)||!c&&Gi(t,r,a,d,!0)||Gi(t,r,a,-d,c)||!c&&Gi(t,r,a,-d,!0);return g||(t.cantEdit=!0,X(t.first,0))}function Jc(t,r,a,o){return a<0&&r.ch==0?r.line>t.first?gt(t,X(r.line-1)):null:a>0&&r.ch==(o||bt(t,r.line)).text.length?r.line<t.first+t.size-1?X(r.line+1,0):null:new X(r.line,r.ch+a)}function Qc(t){t.setSelection(X(t.firstLine(),0),X(t.lastLine()),zt)}function tu(t,r,a){var o={canceled:!1,from:r.from,to:r.to,text:r.text,origin:r.origin,cancel:function(){return o.canceled=!0}};return a&&(o.update=function(c,d,g,v){c&&(o.from=gt(t,c)),d&&(o.to=gt(t,d)),g&&(o.text=g),v!==void 0&&(o.origin=v)}),Ct(t,"beforeChange",t,o),t.cm&&Ct(t.cm,"beforeChange",t.cm,o),o.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:o.from,to:o.to,text:o.text,origin:o.origin}}function Zi(t,r,a){if(t.cm){if(!t.cm.curOp)return ve(t.cm,Zi)(t,r,a);if(t.cm.state.suppressEdits)return}if(!((xe(t,"beforeChange")||t.cm&&xe(t.cm,"beforeChange"))&&(r=tu(t,r,!0),!r))){var o=Yl&&!a&&Ud(t,r.from,r.to);if(o)for(var c=o.length-1;c>=0;--c)eu(t,{from:o[c].from,to:o[c].to,text:c?[""]:r.text,origin:r.origin});else eu(t,r)}}function eu(t,r){if(!(r.text.length==1&&r.text[0]==""&&w(r.from,r.to)==0)){var a=wa(t,r);$c(t,r,a,t.cm?t.cm.curOp.id:NaN),zr(t,r,a,qo(t,r));var o=[];ni(t,function(c,d){!d&&ut(o,c.history)==-1&&(su(c.history,r),o.push(c.history)),zr(c,r,null,qo(c,r))})}}function to(t,r,a){var o=t.cm&&t.cm.state.suppressEdits;if(!(o&&!a)){for(var c=t.history,d,g=t.sel,v=r=="undo"?c.done:c.undone,y=r=="undo"?c.undone:c.done,_=0;_<v.length&&(d=v[_],!(a?d.ranges&&!d.equals(t.sel):!d.ranges));_++);if(_!=v.length){for(c.lastOrigin=c.lastSelOrigin=null;;)if(d=v.pop(),d.ranges){if(Gs(d,y),a&&!d.equals(t.sel)){Le(t,d,{clearRedo:!1});return}g=d}else if(o){v.push(d);return}else break;var T=[];Gs(g,y),y.push({changes:T,generation:c.generation}),c.generation=d.generation||++c.maxGeneration;for(var L=xe(t,"beforeChange")||t.cm&&xe(t.cm,"beforeChange"),R=function($){var nt=d.changes[$];if(nt.origin=r,L&&!tu(t,nt,!1))return v.length=0,{};T.push(Ca(t,nt));var at=$?wa(t,nt):At(v);zr(t,nt,at,Yc(t,nt)),!$&&t.cm&&t.cm.scrollIntoView({from:nt.from,to:ei(nt)});var ft=[];ni(t,function(lt,yt){!yt&&ut(ft,lt.history)==-1&&(su(lt.history,nt),ft.push(lt.history)),zr(lt,nt,null,Yc(lt,nt))})},I=d.changes.length-1;I>=0;--I){var B=R(I);if(B)return B.v}}}}function nu(t,r){if(r!=0&&(t.first+=r,t.sel=new tn(ue(t.sel.ranges,function(c){return new Yt(X(c.anchor.line+r,c.anchor.ch),X(c.head.line+r,c.head.ch))}),t.sel.primIndex),t.cm)){ze(t.cm,t.first,t.first-r,r);for(var a=t.cm.display,o=a.viewFrom;o<a.viewTo;o++)Jn(t.cm,o,"gutter")}}function zr(t,r,a,o){if(t.cm&&!t.cm.curOp)return ve(t.cm,zr)(t,r,a,o);if(r.to.line<t.first){nu(t,r.text.length-1-(r.to.line-r.from.line));return}if(!(r.from.line>t.lastLine())){if(r.from.line<t.first){var c=r.text.length-1-(t.first-r.from.line);nu(t,c),r={from:X(t.first,0),to:X(r.to.line+c,r.to.ch),text:[At(r.text)],origin:r.origin}}var d=t.lastLine();r.to.line>d&&(r={from:r.from,to:X(d,bt(t,d).text.length),text:[r.text[0]],origin:r.origin}),r.removed=wn(t,r.from,r.to),a||(a=wa(t,r)),t.cm?Kp(t.cm,r,o):Sa(t,r,o),Js(t,a,zt),t.cantEdit&&Qs(t,X(t.firstLine(),0))&&(t.cantEdit=!1)}}function Kp(t,r,a){var o=t.doc,c=t.display,d=r.from,g=r.to,v=!1,y=d.line;t.options.lineWrapping||(y=jt(pn(bt(o,d.line))),o.iter(y,g.line+1,function(I){if(I==c.maxLine)return v=!0,!0})),o.sel.contains(r.from,r.to)>-1&&Fi(t),Sa(o,r,a,xc(t)),t.options.lineWrapping||(o.iter(y,d.line+r.text.length,function(I){var B=Rs(I);B>c.maxLineLength&&(c.maxLine=I,c.maxLineLength=B,c.maxLineChanged=!0,v=!1)}),v&&(t.curOp.updateMaxLine=!0)),Ed(o,d.line),Fr(t,400);var _=r.text.length-(g.line-d.line)-1;r.full?ze(t):d.line==g.line&&r.text.length==1&&!zc(t.doc,r)?Jn(t,d.line,"text"):ze(t,d.line,g.line+1,_);var T=xe(t,"changes"),L=xe(t,"change");if(L||T){var R={from:d,to:g,text:r.text,removed:r.removed,origin:r.origin};L&&me(t,"change",t,R),T&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(R)}t.display.selForContextMenu=null}function Ji(t,r,a,o,c){var d;o||(o=a),w(o,a)<0&&(d=[o,a],a=d[0],o=d[1]),typeof r=="string"&&(r=t.splitLines(r)),Zi(t,{from:a,to:o,text:r,origin:c})}function iu(t,r,a,o){a<t.line?t.line+=o:r<t.line&&(t.line=r,t.ch=0)}function ru(t,r,a,o){for(var c=0;c<t.length;++c){var d=t[c],g=!0;if(d.ranges){d.copied||(d=t[c]=d.deepCopy(),d.copied=!0);for(var v=0;v<d.ranges.length;v++)iu(d.ranges[v].anchor,r,a,o),iu(d.ranges[v].head,r,a,o);continue}for(var y=0;y<d.changes.length;++y){var _=d.changes[y];if(a<_.from.line)_.from=X(_.from.line+o,_.from.ch),_.to=X(_.to.line+o,_.to.ch);else if(r<=_.to.line){g=!1;break}}g||(t.splice(0,c+1),c=0)}}function su(t,r){var a=r.from.line,o=r.to.line,c=r.text.length-(o-a)-1;ru(t.done,a,o,c),ru(t.undone,a,o,c)}function Wr(t,r,a,o){var c=r,d=r;return typeof r=="number"?d=bt(t,Ht(t,r)):c=jt(r),c==null?null:(o(d,c)&&t.cm&&Jn(t.cm,c,a),d)}function Br(t){this.lines=t,this.parent=null;for(var r=0,a=0;a<t.length;++a)t[a].parent=this,r+=t[a].height;this.height=r}Br.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,r){for(var a=t,o=t+r;a<o;++a){var c=this.lines[a];this.height-=c.height,Vd(c),me(c,"delete")}this.lines.splice(t,r)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,r,a){this.height+=a,this.lines=this.lines.slice(0,t).concat(r).concat(this.lines.slice(t));for(var o=0;o<r.length;++o)r[o].parent=this},iterN:function(t,r,a){for(var o=t+r;t<o;++t)if(a(this.lines[t]))return!0}};function Ur(t){this.children=t;for(var r=0,a=0,o=0;o<t.length;++o){var c=t[o];r+=c.chunkSize(),a+=c.height,c.parent=this}this.size=r,this.height=a,this.parent=null}Ur.prototype={chunkSize:function(){return this.size},removeInner:function(t,r){this.size-=r;for(var a=0;a<this.children.length;++a){var o=this.children[a],c=o.chunkSize();if(t<c){var d=Math.min(r,c-t),g=o.height;if(o.removeInner(t,d),this.height-=g-o.height,c==d&&(this.children.splice(a--,1),o.parent=null),(r-=d)==0)break;t=0}else t-=c}if(this.size-r<25&&(this.children.length>1||!(this.children[0]instanceof Br))){var v=[];this.collapse(v),this.children=[new Br(v)],this.children[0].parent=this}},collapse:function(t){for(var r=0;r<this.children.length;++r)this.children[r].collapse(t)},insertInner:function(t,r,a){this.size+=r.length,this.height+=a;for(var o=0;o<this.children.length;++o){var c=this.children[o],d=c.chunkSize();if(t<=d){if(c.insertInner(t,r,a),c.lines&&c.lines.length>50){for(var g=c.lines.length%25+25,v=g;v<c.lines.length;){var y=new Br(c.lines.slice(v,v+=25));c.height-=y.height,this.children.splice(++o,0,y),y.parent=this}c.lines=c.lines.slice(0,g),this.maybeSpill()}break}t-=d}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var r=t.children.splice(t.children.length-5,5),a=new Ur(r);if(t.parent){t.size-=a.size,t.height-=a.height;var c=ut(t.parent.children,t);t.parent.children.splice(c+1,0,a)}else{var o=new Ur(t.children);o.parent=t,t.children=[o,a],t=o}a.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,r,a){for(var o=0;o<this.children.length;++o){var c=this.children[o],d=c.chunkSize();if(t<d){var g=Math.min(r,d-t);if(c.iterN(t,g,a))return!0;if((r-=g)==0)break;t=0}else t-=d}}};var $r=function(t,r,a){if(a)for(var o in a)a.hasOwnProperty(o)&&(this[o]=a[o]);this.doc=t,this.node=r};$r.prototype.clear=function(){var t=this.doc.cm,r=this.line.widgets,a=this.line,o=jt(a);if(!(o==null||!r)){for(var c=0;c<r.length;++c)r[c]==this&&r.splice(c--,1);r.length||(a.widgets=null);var d=Nr(this);Ye(a,Math.max(0,a.height-d)),t&&(Ke(t,function(){ou(t,a,-d),Jn(t,o,"widget")}),me(t,"lineWidgetCleared",t,this,o))}},$r.prototype.changed=function(){var t=this,r=this.height,a=this.doc.cm,o=this.line;this.height=null;var c=Nr(this)-r;c&&(Zn(this.doc,o)||Ye(o,o.height+c),a&&Ke(a,function(){a.curOp.forceUpdate=!0,ou(a,o,c),me(a,"lineWidgetChanged",a,t,jt(o))}))},_n($r);function ou(t,r,a){Fn(r)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&ma(t,a)}function Vp(t,r,a,o){var c=new $r(t,a,o),d=t.cm;return d&&c.noHScroll&&(d.display.alignWidgets=!0),Wr(t,r,"widget",function(g){var v=g.widgets||(g.widgets=[]);if(c.insertAt==null?v.push(c):v.splice(Math.min(v.length,Math.max(0,c.insertAt)),0,c),c.line=g,d&&!Zn(t,g)){var y=Fn(g)<t.scrollTop;Ye(g,g.height+Nr(c)),y&&ma(d,c.height),d.curOp.forceUpdate=!0}return!0}),d&&me(d,"lineWidgetAdded",d,c,typeof r=="number"?r:jt(r)),c}var au=0,ii=function(t,r){this.lines=[],this.type=r,this.doc=t,this.id=++au};ii.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,r=t&&!t.curOp;if(r&&_i(t),xe(this,"clear")){var a=this.find();a&&me(this,"clear",a.from,a.to)}for(var o=null,c=null,d=0;d<this.lines.length;++d){var g=this.lines[d],v=Tr(g.markedSpans,this);t&&!this.collapsed?Jn(t,jt(g),"text"):t&&(v.to!=null&&(c=jt(g)),v.from!=null&&(o=jt(g))),g.markedSpans=Hd(g.markedSpans,v),v.from==null&&this.collapsed&&!Zn(this.doc,g)&&t&&Ye(g,ji(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var y=0;y<this.lines.length;++y){var _=pn(this.lines[y]),T=Rs(_);T>t.display.maxLineLength&&(t.display.maxLine=_,t.display.maxLineLength=T,t.display.maxLineChanged=!0)}o!=null&&t&&this.collapsed&&ze(t,o,c+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Gc(t.doc)),t&&me(t,"markerCleared",t,this,o,c),r&&xi(t),this.parent&&this.parent.clear()}},ii.prototype.find=function(t,r){t==null&&this.type=="bookmark"&&(t=1);for(var a,o,c=0;c<this.lines.length;++c){var d=this.lines[c],g=Tr(d.markedSpans,this);if(g.from!=null&&(a=X(r?d:jt(d),g.from),t==-1))return a;if(g.to!=null&&(o=X(r?d:jt(d),g.to),t==1))return o}return a&&{from:a,to:o}},ii.prototype.changed=function(){var t=this,r=this.find(-1,!0),a=this,o=this.doc.cm;!r||!o||Ke(o,function(){var c=r.line,d=jt(r.line),g=ia(o,d);if(g&&(dc(g),o.curOp.selectionChanged=o.curOp.forceUpdate=!0),o.curOp.updateMaxLine=!0,!Zn(a.doc,c)&&a.height!=null){var v=a.height;a.height=null;var y=Nr(a)-v;y&&Ye(c,c.height+y)}me(o,"markerChanged",o,t)})},ii.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var r=this.doc.cm.curOp;(!r.maybeHiddenMarkers||ut(r.maybeHiddenMarkers,this)==-1)&&(r.maybeUnhiddenMarkers||(r.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},ii.prototype.detachLine=function(t){if(this.lines.splice(ut(this.lines,t),1),!this.lines.length&&this.doc.cm){var r=this.doc.cm.curOp;(r.maybeHiddenMarkers||(r.maybeHiddenMarkers=[])).push(this)}},_n(ii);function Qi(t,r,a,o,c){if(o&&o.shared)return Xp(t,r,a,o,c);if(t.cm&&!t.cm.curOp)return ve(t.cm,Qi)(t,r,a,o,c);var d=new ii(t,c),g=w(r,a);if(o&&pt(o,d,!1),g>0||g==0&&d.clearWhenEmpty!==!1)return d;if(d.replacedWith&&(d.collapsed=!0,d.widgetNode=M("span",[d.replacedWith],"CodeMirror-widget"),o.handleMouseEvents||d.widgetNode.setAttribute("cm-ignore-events","true"),o.insertLeft&&(d.widgetNode.insertLeft=!0)),d.collapsed){if(Zl(t,r.line,r,a,d)||r.line!=a.line&&Zl(t,a.line,r,a,d))throw new Error("Inserting collapsed marker partially overlapping an existing one");Rd()}d.addToHistory&&$c(t,{from:r,to:a,origin:"markText"},t.sel,NaN);var v=r.line,y=t.cm,_;if(t.iter(v,a.line+1,function(L){y&&d.collapsed&&!y.options.lineWrapping&&pn(L)==y.display.maxLine&&(_=!0),d.collapsed&&v!=r.line&&Ye(L,0),zd(L,new Ps(d,v==r.line?r.ch:null,v==a.line?a.ch:null),t.cm&&t.cm.curOp),++v}),d.collapsed&&t.iter(r.line,a.line+1,function(L){Zn(t,L)&&Ye(L,0)}),d.clearOnEnter&&wt(d,"beforeCursorEnter",function(){return d.clear()}),d.readOnly&&(Fd(),(t.history.done.length||t.history.undone.length)&&t.clearHistory()),d.collapsed&&(d.id=++au,d.atomic=!0),y){if(_&&(y.curOp.updateMaxLine=!0),d.collapsed)ze(y,r.line,a.line+1);else if(d.className||d.startStyle||d.endStyle||d.css||d.attributes||d.title)for(var T=r.line;T<=a.line;T++)Jn(y,T,"text");d.atomic&&Gc(y.doc),me(y,"markerAdded",y,d)}return d}var jr=function(t,r){this.markers=t,this.primary=r;for(var a=0;a<t.length;++a)t[a].parent=this};jr.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();me(this,"clear")}},jr.prototype.find=function(t,r){return this.primary.find(t,r)},_n(jr);function Xp(t,r,a,o,c){o=pt(o),o.shared=!1;var d=[Qi(t,r,a,o,c)],g=d[0],v=o.widgetNode;return ni(t,function(y){v&&(o.widgetNode=v.cloneNode(!0)),d.push(Qi(y,gt(y,r),gt(y,a),o,c));for(var _=0;_<y.linked.length;++_)if(y.linked[_].isParent)return;g=At(d)}),new jr(d,g)}function lu(t){return t.findMarks(X(t.first,0),t.clipPos(X(t.lastLine())),function(r){return r.parent})}function qp(t,r){for(var a=0;a<r.length;a++){var o=r[a],c=o.find(),d=t.clipPos(c.from),g=t.clipPos(c.to);if(w(d,g)){var v=Qi(t,d,g,o.primary,o.primary.type);o.markers.push(v),v.parent=o}}}function Gp(t){for(var r=function(o){var c=t[o],d=[c.primary.doc];ni(c.primary.doc,function(y){return d.push(y)});for(var g=0;g<c.markers.length;g++){var v=c.markers[g];ut(d,v.doc)==-1&&(v.parent=null,c.markers.splice(g--,1))}},a=0;a<t.length;a++)r(a)}var Zp=0,We=function(t,r,a,o,c){if(!(this instanceof We))return new We(t,r,a,o,c);a==null&&(a=0),Ur.call(this,[new Br([new Bi("",null)])]),this.first=a,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=a;var d=X(a,0);this.sel=ti(d),this.history=new qs(null),this.id=++Zp,this.modeOption=r,this.lineSep=o,this.direction=c=="rtl"?"rtl":"ltr",this.extend=!1,typeof t=="string"&&(t=this.splitLines(t)),Sa(this,{from:d,to:d,text:t}),Le(this,ti(d),zt)};We.prototype=_t(Ur.prototype,{constructor:We,iter:function(t,r,a){a?this.iterN(t-this.first,r-t,a):this.iterN(this.first,this.first+this.size,t)},insert:function(t,r){for(var a=0,o=0;o<r.length;++o)a+=r[o].height;this.insertInner(t-this.first,r,a)},remove:function(t,r){this.removeInner(t-this.first,r)},getValue:function(t){var r=kr(this,this.first,this.first+this.size);return t===!1?r:r.join(t||this.lineSeparator())},setValue:ye(function(t){var r=X(this.first,0),a=this.first+this.size-1;Zi(this,{from:r,to:X(a,bt(this,a).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Ar(this.cm,0,0),Le(this,ti(r),zt)}),replaceRange:function(t,r,a,o){r=gt(this,r),a=a?gt(this,a):r,Ji(this,t,r,a,o)},getRange:function(t,r,a){var o=wn(this,gt(this,t),gt(this,r));return a===!1?o:a===""?o.join(""):o.join(a||this.lineSeparator())},getLine:function(t){var r=this.getLineHandle(t);return r&&r.text},getLineHandle:function(t){if(di(this,t))return bt(this,t)},getLineNumber:function(t){return jt(t)},getLineHandleVisualStart:function(t){return typeof t=="number"&&(t=bt(this,t)),pn(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return gt(this,t)},getCursor:function(t){var r=this.sel.primary(),a;return t==null||t=="head"?a=r.head:t=="anchor"?a=r.anchor:t=="end"||t=="to"||t===!1?a=r.to():a=r.from(),a},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ye(function(t,r,a){Vc(this,gt(this,typeof t=="number"?X(t,r||0):t),null,a)}),setSelection:ye(function(t,r,a){Vc(this,gt(this,t),gt(this,r||t),a)}),extendSelection:ye(function(t,r,a){Zs(this,gt(this,t),r&&gt(this,r),a)}),extendSelections:ye(function(t,r){Kc(this,Qe(this,t),r)}),extendSelectionsBy:ye(function(t,r){var a=ue(this.sel.ranges,t);Kc(this,Qe(this,a),r)}),setSelections:ye(function(t,r,a){if(t.length){for(var o=[],c=0;c<t.length;c++)o[c]=new Yt(gt(this,t[c].anchor),gt(this,t[c].head||t[c].anchor));r==null&&(r=Math.min(t.length-1,this.sel.primIndex)),Le(this,mn(this.cm,o,r),a)}}),addSelection:ye(function(t,r,a){var o=this.sel.ranges.slice(0);o.push(new Yt(gt(this,t),gt(this,r||t))),Le(this,mn(this.cm,o,o.length-1),a)}),getSelection:function(t){for(var r=this.sel.ranges,a,o=0;o<r.length;o++){var c=wn(this,r[o].from(),r[o].to());a=a?a.concat(c):c}return t===!1?a:a.join(t||this.lineSeparator())},getSelections:function(t){for(var r=[],a=this.sel.ranges,o=0;o<a.length;o++){var c=wn(this,a[o].from(),a[o].to());t!==!1&&(c=c.join(t||this.lineSeparator())),r[o]=c}return r},replaceSelection:function(t,r,a){for(var o=[],c=0;c<this.sel.ranges.length;c++)o[c]=t;this.replaceSelections(o,r,a||"+input")},replaceSelections:ye(function(t,r,a){for(var o=[],c=this.sel,d=0;d<c.ranges.length;d++){var g=c.ranges[d];o[d]={from:g.from(),to:g.to(),text:this.splitLines(t[d]),origin:a}}for(var v=r&&r!="end"&&Hp(this,o,r),y=o.length-1;y>=0;y--)Zi(this,o[y]);v?Xc(this,v):this.cm&&Vi(this.cm)}),undo:ye(function(){to(this,"undo")}),redo:ye(function(){to(this,"redo")}),undoSelection:ye(function(){to(this,"undo",!0)}),redoSelection:ye(function(){to(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,r=0,a=0,o=0;o<t.done.length;o++)t.done[o].ranges||++r;for(var c=0;c<t.undone.length;c++)t.undone[c].ranges||++a;return{undo:r,redo:a}},clearHistory:function(){var t=this;this.history=new qs(this.history),ni(this,function(r){return r.history=t.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:qi(this.history.done),undone:qi(this.history.undone)}},setHistory:function(t){var r=this.history=new qs(this.history);r.done=qi(t.done.slice(0),null,!0),r.undone=qi(t.undone.slice(0),null,!0)},setGutterMarker:ye(function(t,r,a){return Wr(this,t,"gutter",function(o){var c=o.gutterMarkers||(o.gutterMarkers={});return c[r]=a,!a&&Jt(c)&&(o.gutterMarkers=null),!0})}),clearGutter:ye(function(t){var r=this;this.iter(function(a){a.gutterMarkers&&a.gutterMarkers[t]&&Wr(r,a,"gutter",function(){return a.gutterMarkers[t]=null,Jt(a.gutterMarkers)&&(a.gutterMarkers=null),!0})})}),lineInfo:function(t){var r;if(typeof t=="number"){if(!di(this,t)||(r=t,t=bt(this,t),!t))return null}else if(r=jt(t),r==null)return null;return{line:r,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:ye(function(t,r,a){return Wr(this,t,r=="gutter"?"gutter":"class",function(o){var c=r=="text"?"textClass":r=="background"?"bgClass":r=="gutter"?"gutterClass":"wrapClass";if(!o[c])o[c]=a;else{if(ot(a).test(o[c]))return!1;o[c]+=" "+a}return!0})}),removeLineClass:ye(function(t,r,a){return Wr(this,t,r=="gutter"?"gutter":"class",function(o){var c=r=="text"?"textClass":r=="background"?"bgClass":r=="gutter"?"gutterClass":"wrapClass",d=o[c];if(d)if(a==null)o[c]=null;else{var g=d.match(ot(a));if(!g)return!1;var v=g.index+g[0].length;o[c]=d.slice(0,g.index)+(!g.index||v==d.length?"":" ")+d.slice(v)||null}else return!1;return!0})}),addLineWidget:ye(function(t,r,a){return Vp(this,t,r,a)}),removeLineWidget:function(t){t.clear()},markText:function(t,r,a){return Qi(this,gt(this,t),gt(this,r),a,a&&a.type||"range")},setBookmark:function(t,r){var a={replacedWith:r&&(r.nodeType==null?r.widget:r),insertLeft:r&&r.insertLeft,clearWhenEmpty:!1,shared:r&&r.shared,handleMouseEvents:r&&r.handleMouseEvents};return t=gt(this,t),Qi(this,t,t,a,"bookmark")},findMarksAt:function(t){t=gt(this,t);var r=[],a=bt(this,t.line).markedSpans;if(a)for(var o=0;o<a.length;++o){var c=a[o];(c.from==null||c.from<=t.ch)&&(c.to==null||c.to>=t.ch)&&r.push(c.marker.parent||c.marker)}return r},findMarks:function(t,r,a){t=gt(this,t),r=gt(this,r);var o=[],c=t.line;return this.iter(t.line,r.line+1,function(d){var g=d.markedSpans;if(g)for(var v=0;v<g.length;v++){var y=g[v];!(y.to!=null&&c==t.line&&t.ch>=y.to||y.from==null&&c!=t.line||y.from!=null&&c==r.line&&y.from>=r.ch)&&(!a||a(y.marker))&&o.push(y.marker.parent||y.marker)}++c}),o},getAllMarks:function(){var t=[];return this.iter(function(r){var a=r.markedSpans;if(a)for(var o=0;o<a.length;++o)a[o].from!=null&&t.push(a[o].marker)}),t},posFromIndex:function(t){var r,a=this.first,o=this.lineSeparator().length;return this.iter(function(c){var d=c.text.length+o;if(d>t)return r=t,!0;t-=d,++a}),gt(this,X(a,r))},indexFromPos:function(t){t=gt(this,t);var r=t.ch;if(t.line<this.first||t.ch<0)return 0;var a=this.lineSeparator().length;return this.iter(this.first,t.line,function(o){r+=o.text.length+a}),r},copy:function(t){var r=new We(kr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return r.scrollTop=this.scrollTop,r.scrollLeft=this.scrollLeft,r.sel=this.sel,r.extend=!1,t&&(r.history.undoDepth=this.history.undoDepth,r.setHistory(this.getHistory())),r},linkedDoc:function(t){t||(t={});var r=this.first,a=this.first+this.size;t.from!=null&&t.from>r&&(r=t.from),t.to!=null&&t.to<a&&(a=t.to);var o=new We(kr(this,r,a),t.mode||this.modeOption,r,this.lineSep,this.direction);return t.sharedHist&&(o.history=this.history),(this.linked||(this.linked=[])).push({doc:o,sharedHist:t.sharedHist}),o.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],qp(o,lu(this)),o},unlinkDoc:function(t){if(t instanceof te&&(t=t.doc),this.linked)for(var r=0;r<this.linked.length;++r){var a=this.linked[r];if(a.doc==t){this.linked.splice(r,1),t.unlinkDoc(this),Gp(lu(this));break}}if(t.history==this.history){var o=[t.id];ni(t,function(c){return o.push(c.id)},!0),t.history=new qs(null),t.history.done=qi(this.history.done,o),t.history.undone=qi(this.history.undone,o)}},iterLinkedDocs:function(t){ni(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):br(t)},lineSeparator:function(){return this.lineSep||`
`},setDirection:ye(function(t){t!="rtl"&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(r){return r.order=null}),this.cm&&zp(this.cm))})}),We.prototype.eachLine=We.prototype.iter;var cu=0;function Jp(t){var r=this;if(uu(r),!(fe(r,t)||Rn(r.display,t))){Te(t),p&&(cu=+new Date);var a=mi(r,t,!0),o=t.dataTransfer.files;if(!(!a||r.isReadOnly()))if(o&&o.length&&window.FileReader&&window.File)for(var c=o.length,d=Array(c),g=0,v=function(){++g==c&&ve(r,function(){a=gt(r.doc,a);var I={from:a,to:a,text:r.doc.splitLines(d.filter(function(B){return B!=null}).join(r.doc.lineSeparator())),origin:"paste"};Zi(r.doc,I),Xc(r.doc,ti(gt(r.doc,a),gt(r.doc,ei(I))))})()},y=function(I,B){if(r.options.allowDropFileTypes&&ut(r.options.allowDropFileTypes,I.type)==-1){v();return}var $=new FileReader;$.onerror=function(){return v()},$.onload=function(){var nt=$.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(nt)){v();return}d[B]=nt,v()},$.readAsText(I)},_=0;_<o.length;_++)y(o[_],_);else{if(r.state.draggingText&&r.doc.sel.contains(a)>-1){r.state.draggingText(t),setTimeout(function(){return r.display.input.focus()},20);return}try{var T=t.dataTransfer.getData("Text");if(T){var L;if(r.state.draggingText&&!r.state.draggingText.copy&&(L=r.listSelections()),Js(r.doc,ti(a,a)),L)for(var R=0;R<L.length;++R)Ji(r.doc,"",L[R].anchor,L[R].head,"drag");r.replaceSelection(T,"around","paste"),r.display.input.focus()}}catch{}}}}function Qp(t,r){if(p&&(!t.state.draggingText||+new Date-cu<100)){hi(r);return}if(!(fe(t,r)||Rn(t.display,r))&&(r.dataTransfer.setData("Text",t.getSelection()),r.dataTransfer.effectAllowed="copyMove",r.dataTransfer.setDragImage&&!A)){var a=W("img",null,null,"position: fixed; left: 0; top: 0;");a.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",C&&(a.width=a.height=1,t.display.wrapper.appendChild(a),a._top=a.offsetTop),r.dataTransfer.setDragImage(a,0,0),C&&a.parentNode.removeChild(a)}}function tg(t,r){var a=mi(t,r);if(a){var o=document.createDocumentFragment();fa(t,a,o),t.display.dragCursor||(t.display.dragCursor=W("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),H(t.display.dragCursor,o)}}function uu(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function fu(t){if(document.getElementsByClassName){for(var r=document.getElementsByClassName("CodeMirror"),a=[],o=0;o<r.length;o++){var c=r[o].CodeMirror;c&&a.push(c)}a.length&&a[0].operation(function(){for(var d=0;d<a.length;d++)t(a[d])})}}var hu=!1;function eg(){hu||(ng(),hu=!0)}function ng(){var t;wt(window,"resize",function(){t==null&&(t=setTimeout(function(){t=null,fu(ig)},100))}),wt(window,"blur",function(){return fu(Ki)})}function ig(t){var r=t.display;r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.scrollbarsClipped=!1,t.setSize()}for(var ri={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Yr=0;Yr<10;Yr++)ri[Yr+48]=ri[Yr+96]=String(Yr);for(var eo=65;eo<=90;eo++)ri[eo]=String.fromCharCode(eo);for(var Kr=1;Kr<=12;Kr++)ri[Kr+111]=ri[Kr+63235]="F"+Kr;var zn={};zn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},zn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},zn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},zn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},zn.default=q?zn.macDefault:zn.pcDefault;function rg(t){var r=t.split(/-(?!$)/);t=r[r.length-1];for(var a,o,c,d,g=0;g<r.length-1;g++){var v=r[g];if(/^(cmd|meta|m)$/i.test(v))d=!0;else if(/^a(lt)?$/i.test(v))a=!0;else if(/^(c|ctrl|control)$/i.test(v))o=!0;else if(/^s(hift)?$/i.test(v))c=!0;else throw new Error("Unrecognized modifier name: "+v)}return a&&(t="Alt-"+t),o&&(t="Ctrl-"+t),d&&(t="Cmd-"+t),c&&(t="Shift-"+t),t}function sg(t){var r={};for(var a in t)if(t.hasOwnProperty(a)){var o=t[a];if(/^(name|fallthrough|(de|at)tach)$/.test(a))continue;if(o=="..."){delete t[a];continue}for(var c=ue(a.split(" "),rg),d=0;d<c.length;d++){var g=void 0,v=void 0;d==c.length-1?(v=c.join(" "),g=o):(v=c.slice(0,d+1).join(" "),g="...");var y=r[v];if(!y)r[v]=g;else if(y!=g)throw new Error("Inconsistent bindings for "+v)}delete t[a]}for(var _ in r)t[_]=r[_];return t}function tr(t,r,a,o){r=no(r);var c=r.call?r.call(t,o):r[t];if(c===!1)return"nothing";if(c==="...")return"multi";if(c!=null&&a(c))return"handled";if(r.fallthrough){if(Object.prototype.toString.call(r.fallthrough)!="[object Array]")return tr(t,r.fallthrough,a,o);for(var d=0;d<r.fallthrough.length;d++){var g=tr(t,r.fallthrough[d],a,o);if(g)return g}}}function du(t){var r=typeof t=="string"?t:ri[t.keyCode];return r=="Ctrl"||r=="Alt"||r=="Shift"||r=="Mod"}function pu(t,r,a){var o=t;return r.altKey&&o!="Alt"&&(t="Alt-"+t),(G?r.metaKey:r.ctrlKey)&&o!="Ctrl"&&(t="Ctrl-"+t),(G?r.ctrlKey:r.metaKey)&&o!="Mod"&&(t="Cmd-"+t),!a&&r.shiftKey&&o!="Shift"&&(t="Shift-"+t),t}function gu(t,r){if(C&&t.keyCode==34&&t.char)return!1;var a=ri[t.keyCode];return a==null||t.altGraphKey?!1:(t.keyCode==3&&t.code&&(a=t.code),pu(a,t,r))}function no(t){return typeof t=="string"?zn[t]:t}function er(t,r){for(var a=t.doc.sel.ranges,o=[],c=0;c<a.length;c++){for(var d=r(a[c]);o.length&&w(d.from,At(o).to)<=0;){var g=o.pop();if(w(g.from,d.from)<0){d.from=g.from;break}}o.push(d)}Ke(t,function(){for(var v=o.length-1;v>=0;v--)Ji(t.doc,"",o[v].from,o[v].to,"+delete");Vi(t)})}function La(t,r,a){var o=Ee(t.text,r+a,a);return o<0||o>t.text.length?null:o}function Na(t,r,a){var o=La(t,r.ch,a);return o==null?null:new X(r.line,o,a<0?"after":"before")}function Da(t,r,a,o,c){if(t){r.doc.direction=="rtl"&&(c=-c);var d=$t(a,r.doc.direction);if(d){var g=c<0?At(d):d[0],v=c<0==(g.level==1),y=v?"after":"before",_;if(g.level>0||r.doc.direction=="rtl"){var T=$i(r,a);_=c<0?a.text.length-1:0;var L=Tn(r,T,_).top;_=P(function(R){return Tn(r,T,R).top==L},c<0==(g.level==1)?g.from:g.to-1,_),y=="before"&&(_=La(a,_,1))}else _=c<0?g.to:g.from;return new X(o,_,y)}}return new X(o,c<0?a.text.length:0,c<0?"before":"after")}function og(t,r,a,o){var c=$t(r,t.doc.direction);if(!c)return Na(r,a,o);a.ch>=r.text.length?(a.ch=r.text.length,a.sticky="before"):a.ch<=0&&(a.ch=0,a.sticky="after");var d=mt(c,a.ch,a.sticky),g=c[d];if(t.doc.direction=="ltr"&&g.level%2==0&&(o>0?g.to>a.ch:g.from<a.ch))return Na(r,a,o);var v=function(at,ft){return La(r,at instanceof X?at.ch:at,ft)},y,_=function(at){return t.options.lineWrapping?(y=y||$i(t,r),_c(t,r,y,at)):{begin:0,end:r.text.length}},T=_(a.sticky=="before"?v(a,-1):a.ch);if(t.doc.direction=="rtl"||g.level==1){var L=g.level==1==o<0,R=v(a,L?1:-1);if(R!=null&&(L?R<=g.to&&R<=T.end:R>=g.from&&R>=T.begin)){var I=L?"before":"after";return new X(a.line,R,I)}}var B=function(at,ft,lt){for(var yt=function(Zt,be){return be?new X(a.line,v(Zt,1),"before"):new X(a.line,Zt,"after")};at>=0&&at<c.length;at+=ft){var St=c[at],kt=ft>0==(St.level!=1),Pt=kt?lt.begin:v(lt.end,-1);if(St.from<=Pt&&Pt<St.to||(Pt=kt?St.from:v(St.to,-1),lt.begin<=Pt&&Pt<lt.end))return yt(Pt,kt)}},$=B(d+o,o,T);if($)return $;var nt=o>0?T.end:v(T.begin,-1);return nt!=null&&!(o>0&&nt==r.text.length)&&($=B(o>0?0:c.length-1,o,_(nt)),$)?$:null}var Vr={selectAll:Qc,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),zt)},killLine:function(t){return er(t,function(r){if(r.empty()){var a=bt(t.doc,r.head.line).text.length;return r.head.ch==a&&r.head.line<t.lastLine()?{from:r.head,to:X(r.head.line+1,0)}:{from:r.head,to:X(r.head.line,a)}}else return{from:r.from(),to:r.to()}})},deleteLine:function(t){return er(t,function(r){return{from:X(r.from().line,0),to:gt(t.doc,X(r.to().line+1,0))}})},delLineLeft:function(t){return er(t,function(r){return{from:X(r.from().line,0),to:r.from()}})},delWrappedLineLeft:function(t){return er(t,function(r){var a=t.charCoords(r.head,"div").top+5,o=t.coordsChar({left:0,top:a},"div");return{from:o,to:r.from()}})},delWrappedLineRight:function(t){return er(t,function(r){var a=t.charCoords(r.head,"div").top+5,o=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:a},"div");return{from:r.from(),to:o}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(X(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(X(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(r){return mu(t,r.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(r){return vu(t,r.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(r){return ag(t,r.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(r){var a=t.cursorCoords(r.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:a},"div")},Rt)},goLineLeft:function(t){return t.extendSelectionsBy(function(r){var a=t.cursorCoords(r.head,"div").top+5;return t.coordsChar({left:0,top:a},"div")},Rt)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(r){var a=t.cursorCoords(r.head,"div").top+5,o=t.coordsChar({left:0,top:a},"div");return o.ch<t.getLine(o.line).search(/\S/)?vu(t,r.head):o},Rt)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("	")},insertSoftTab:function(t){for(var r=[],a=t.listSelections(),o=t.options.tabSize,c=0;c<a.length;c++){var d=a[c].from(),g=ct(t.getLine(d.line),d.ch,o);r.push(bn(o-g%o))}t.replaceSelections(r)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return Ke(t,function(){for(var r=t.listSelections(),a=[],o=0;o<r.length;o++)if(r[o].empty()){var c=r[o].head,d=bt(t.doc,c.line).text;if(d){if(c.ch==d.length&&(c=new X(c.line,c.ch-1)),c.ch>0)c=new X(c.line,c.ch+1),t.replaceRange(d.charAt(c.ch-1)+d.charAt(c.ch-2),X(c.line,c.ch-2),c,"+transpose");else if(c.line>t.doc.first){var g=bt(t.doc,c.line-1).text;g&&(c=new X(c.line,1),t.replaceRange(d.charAt(0)+t.doc.lineSeparator()+g.charAt(g.length-1),X(c.line-1,g.length-1),c,"+transpose"))}}a.push(new Yt(c,c))}t.setSelections(a)})},newlineAndIndent:function(t){return Ke(t,function(){for(var r=t.listSelections(),a=r.length-1;a>=0;a--)t.replaceRange(t.doc.lineSeparator(),r[a].anchor,r[a].head,"+input");r=t.listSelections();for(var o=0;o<r.length;o++)t.indentLine(r[o].from().line,null,!0);Vi(t)})},openLine:function(t){return t.replaceSelection(`
`,"start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function mu(t,r){var a=bt(t.doc,r),o=pn(a);return o!=a&&(r=jt(o)),Da(!0,t,o,r,1)}function ag(t,r){var a=bt(t.doc,r),o=jd(a);return o!=a&&(r=jt(o)),Da(!0,t,a,r,-1)}function vu(t,r){var a=mu(t,r.line),o=bt(t.doc,a.line),c=$t(o,t.doc.direction);if(!c||c[0].level==0){var d=Math.max(a.ch,o.text.search(/\S/)),g=r.line==a.line&&r.ch<=d&&r.ch;return X(a.line,g?0:d,a.sticky)}return a}function io(t,r,a){if(typeof r=="string"&&(r=Vr[r],!r))return!1;t.display.input.ensurePolled();var o=t.display.shift,c=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),a&&(t.display.shift=!1),c=r(t)!=Dt}finally{t.display.shift=o,t.state.suppressEdits=!1}return c}function lg(t,r,a){for(var o=0;o<t.state.keyMaps.length;o++){var c=tr(r,t.state.keyMaps[o],a,t);if(c)return c}return t.options.extraKeys&&tr(r,t.options.extraKeys,a,t)||tr(r,t.options.keyMap,a,t)}var cg=new Mt;function Xr(t,r,a,o){var c=t.state.keySeq;if(c){if(du(r))return"handled";if(/\'$/.test(r)?t.state.keySeq=null:cg.set(50,function(){t.state.keySeq==c&&(t.state.keySeq=null,t.display.input.reset())}),yu(t,c+" "+r,a,o))return!0}return yu(t,r,a,o)}function yu(t,r,a,o){var c=lg(t,r,o);return c=="multi"&&(t.state.keySeq=r),c=="handled"&&me(t,"keyHandled",t,r,a),(c=="handled"||c=="multi")&&(Te(a),ha(t)),!!c}function bu(t,r){var a=gu(r,!0);return a?r.shiftKey&&!t.state.keySeq?Xr(t,"Shift-"+a,r,function(o){return io(t,o,!0)})||Xr(t,a,r,function(o){if(typeof o=="string"?/^go[A-Z]/.test(o):o.motion)return io(t,o)}):Xr(t,a,r,function(o){return io(t,o)}):!1}function ug(t,r,a){return Xr(t,"'"+a+"'",r,function(o){return io(t,o,!0)})}var Oa=null;function _u(t){var r=this;if(!(t.target&&t.target!=r.display.input.getField())&&(r.curOp.focus=qt(),!fe(r,t))){p&&m<11&&t.keyCode==27&&(t.returnValue=!1);var a=t.keyCode;r.display.shift=a==16||t.shiftKey;var o=bu(r,t);C&&(Oa=o?a:null,!o&&a==88&&!Os&&(q?t.metaKey:t.ctrlKey)&&r.replaceSelection("",null,"cut")),l&&!q&&!o&&a==46&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),a==18&&!/\bCodeMirror-crosshair\b/.test(r.display.lineDiv.className)&&fg(r)}}function fg(t){var r=t.display.lineDiv;F(r,"CodeMirror-crosshair");function a(o){(o.keyCode==18||!o.altKey)&&(tt(r,"CodeMirror-crosshair"),Re(document,"keyup",a),Re(document,"mouseover",a))}wt(document,"keyup",a),wt(document,"mouseover",a)}function xu(t){t.keyCode==16&&(this.doc.sel.shift=!1),fe(this,t)}function wu(t){var r=this;if(!(t.target&&t.target!=r.display.input.getField())&&!(Rn(r.display,t)||fe(r,t)||t.ctrlKey&&!t.altKey||q&&t.metaKey)){var a=t.keyCode,o=t.charCode;if(C&&a==Oa){Oa=null,Te(t);return}if(!(C&&(!t.which||t.which<10)&&bu(r,t))){var c=String.fromCharCode(o??a);c!="\b"&&(ug(r,t,c)||r.display.input.onKeyPress(t))}}}var hg=400,Aa=function(t,r,a){this.time=t,this.pos=r,this.button=a};Aa.prototype.compare=function(t,r,a){return this.time+hg>t&&w(r,this.pos)==0&&a==this.button};var qr,Gr;function dg(t,r){var a=+new Date;return Gr&&Gr.compare(a,t,r)?(qr=Gr=null,"triple"):qr&&qr.compare(a,t,r)?(Gr=new Aa(a,t,r),qr=null,"double"):(qr=new Aa(a,t,r),Gr=null,"single")}function ku(t){var r=this,a=r.display;if(!(fe(r,t)||a.activeTouch&&a.input.supportsTouch())){if(a.input.ensurePolled(),a.shift=t.shiftKey,Rn(a,t)){b||(a.scroller.draggable=!1,setTimeout(function(){return a.scroller.draggable=!0},100));return}if(!Pa(r,t)){var o=mi(r,t),c=Ls(t),d=o?dg(o,c):"single";window.focus(),c==1&&r.state.selectingText&&r.state.selectingText(t),!(o&&pg(r,c,o,d,t))&&(c==1?o?mg(r,o,d,t):qn(t)==a.scroller&&Te(t):c==2?(o&&Zs(r.doc,o),setTimeout(function(){return a.input.focus()},20)):c==3&&(vt?r.display.input.onContextMenu(t):da(r)))}}}function pg(t,r,a,o,c){var d="Click";return o=="double"?d="Double"+d:o=="triple"&&(d="Triple"+d),d=(r==1?"Left":r==2?"Middle":"Right")+d,Xr(t,pu(d,c),c,function(g){if(typeof g=="string"&&(g=Vr[g]),!g)return!1;var v=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),v=g(t,a)!=Dt}finally{t.state.suppressEdits=!1}return v})}function gg(t,r,a){var o=t.getOption("configureMouse"),c=o?o(t,r,a):{};if(c.unit==null){var d=j?a.shiftKey&&a.metaKey:a.altKey;c.unit=d?"rectangle":r=="single"?"char":r=="double"?"word":"line"}return(c.extend==null||t.doc.extend)&&(c.extend=t.doc.extend||a.shiftKey),c.addNew==null&&(c.addNew=q?a.metaKey:a.ctrlKey),c.moveOnDrag==null&&(c.moveOnDrag=!(q?a.altKey:a.ctrlKey)),c}function mg(t,r,a,o){p?setTimeout(ht(Sc,t),0):t.curOp.focus=qt();var c=gg(t,a,o),d=t.doc.sel,g;t.options.dragDrop&&vr&&!t.isReadOnly()&&a=="single"&&(g=d.contains(r))>-1&&(w((g=d.ranges[g]).from(),r)<0||r.xRel>0)&&(w(g.to(),r)>0||r.xRel<0)?vg(t,o,r,c):yg(t,o,r,c)}function vg(t,r,a,o){var c=t.display,d=!1,g=ve(t,function(_){b&&(c.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:da(t)),Re(c.wrapper.ownerDocument,"mouseup",g),Re(c.wrapper.ownerDocument,"mousemove",v),Re(c.scroller,"dragstart",y),Re(c.scroller,"drop",g),d||(Te(_),o.addNew||Zs(t.doc,a,null,null,o.extend),b&&!A||p&&m==9?setTimeout(function(){c.wrapper.ownerDocument.body.focus({preventScroll:!0}),c.input.focus()},20):c.input.focus())}),v=function(_){d=d||Math.abs(r.clientX-_.clientX)+Math.abs(r.clientY-_.clientY)>=10},y=function(){return d=!0};b&&(c.scroller.draggable=!0),t.state.draggingText=g,g.copy=!o.moveOnDrag,wt(c.wrapper.ownerDocument,"mouseup",g),wt(c.wrapper.ownerDocument,"mousemove",v),wt(c.scroller,"dragstart",y),wt(c.scroller,"drop",g),t.state.delayingBlurEvent=!0,setTimeout(function(){return c.input.focus()},20),c.scroller.dragDrop&&c.scroller.dragDrop()}function Su(t,r,a){if(a=="char")return new Yt(r,r);if(a=="word")return t.findWordAt(r);if(a=="line")return new Yt(X(r.line,0),gt(t.doc,X(r.line+1,0)));var o=a(t,r);return new Yt(o.from,o.to)}function yg(t,r,a,o){p&&da(t);var c=t.display,d=t.doc;Te(r);var g,v,y=d.sel,_=y.ranges;if(o.addNew&&!o.extend?(v=d.sel.contains(a),v>-1?g=_[v]:g=new Yt(a,a)):(g=d.sel.primary(),v=d.sel.primIndex),o.unit=="rectangle")o.addNew||(g=new Yt(a,a)),a=mi(t,r,!0,!0),v=-1;else{var T=Su(t,a,o.unit);o.extend?g=Ta(g,T.anchor,T.head,o.extend):g=T}o.addNew?v==-1?(v=_.length,Le(d,mn(t,_.concat([g]),v),{scroll:!1,origin:"*mouse"})):_.length>1&&_[v].empty()&&o.unit=="char"&&!o.extend?(Le(d,mn(t,_.slice(0,v).concat(_.slice(v+1)),0),{scroll:!1,origin:"*mouse"}),y=d.sel):Ma(d,v,g,Pn):(v=0,Le(d,new tn([g],0),Pn),y=d.sel);var L=a;function R(lt){if(w(L,lt)!=0)if(L=lt,o.unit=="rectangle"){for(var yt=[],St=t.options.tabSize,kt=ct(bt(d,a.line).text,a.ch,St),Pt=ct(bt(d,lt.line).text,lt.ch,St),Zt=Math.min(kt,Pt),be=Math.max(kt,Pt),ie=Math.min(a.line,lt.line),Ve=Math.min(t.lastLine(),Math.max(a.line,lt.line));ie<=Ve;ie++){var Be=bt(d,ie).text,he=ce(Be,Zt,St);Zt==be?yt.push(new Yt(X(ie,he),X(ie,he))):Be.length>he&&yt.push(new Yt(X(ie,he),X(ie,ce(Be,be,St))))}yt.length||yt.push(new Yt(a,a)),Le(d,mn(t,y.ranges.slice(0,v).concat(yt),v),{origin:"*mouse",scroll:!1}),t.scrollIntoView(lt)}else{var Ue=g,we=Su(t,lt,o.unit),ge=Ue.anchor,de;w(we.anchor,ge)>0?(de=we.head,ge=Tt(Ue.from(),we.anchor)):(de=we.anchor,ge=J(Ue.to(),we.head));var se=y.ranges.slice(0);se[v]=bg(t,new Yt(gt(d,ge),de)),Le(d,mn(t,se,v),Pn)}}var I=c.wrapper.getBoundingClientRect(),B=0;function $(lt){var yt=++B,St=mi(t,lt,!0,o.unit=="rectangle");if(St)if(w(St,L)!=0){t.curOp.focus=qt(),R(St);var kt=Ys(c,d);(St.line>=kt.to||St.line<kt.from)&&setTimeout(ve(t,function(){B==yt&&$(lt)}),150)}else{var Pt=lt.clientY<I.top?-20:lt.clientY>I.bottom?20:0;Pt&&setTimeout(ve(t,function(){B==yt&&(c.scroller.scrollTop+=Pt,$(lt))}),50)}}function nt(lt){t.state.selectingText=!1,B=1/0,lt&&(Te(lt),c.input.focus()),Re(c.wrapper.ownerDocument,"mousemove",at),Re(c.wrapper.ownerDocument,"mouseup",ft),d.history.lastSelOrigin=null}var at=ve(t,function(lt){lt.buttons===0||!Ls(lt)?nt(lt):$(lt)}),ft=ve(t,nt);t.state.selectingText=ft,wt(c.wrapper.ownerDocument,"mousemove",at),wt(c.wrapper.ownerDocument,"mouseup",ft)}function bg(t,r){var a=r.anchor,o=r.head,c=bt(t.doc,a.line);if(w(a,o)==0&&a.sticky==o.sticky)return r;var d=$t(c);if(!d)return r;var g=mt(d,a.ch,a.sticky),v=d[g];if(v.from!=a.ch&&v.to!=a.ch)return r;var y=g+(v.from==a.ch==(v.level!=1)?0:1);if(y==0||y==d.length)return r;var _;if(o.line!=a.line)_=(o.line-a.line)*(t.doc.direction=="ltr"?1:-1)>0;else{var T=mt(d,o.ch,o.sticky),L=T-g||(o.ch-a.ch)*(v.level==1?-1:1);T==y-1||T==y?_=L<0:_=L>0}var R=d[y+(_?-1:0)],I=_==(R.level==1),B=I?R.from:R.to,$=I?"after":"before";return a.ch==B&&a.sticky==$?r:new Yt(new X(a.line,B,$),o)}function Cu(t,r,a,o){var c,d;if(r.touches)c=r.touches[0].clientX,d=r.touches[0].clientY;else try{c=r.clientX,d=r.clientY}catch{return!1}if(c>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;o&&Te(r);var g=t.display,v=g.lineDiv.getBoundingClientRect();if(d>v.bottom||!xe(t,a))return Ge(r);d-=v.top-g.viewOffset;for(var y=0;y<t.display.gutterSpecs.length;++y){var _=g.gutters.childNodes[y];if(_&&_.getBoundingClientRect().right>=c){var T=kn(t.doc,d),L=t.display.gutterSpecs[y];return Ct(t,a,t,T,L.className,r),Ge(r)}}}function Pa(t,r){return Cu(t,r,"gutterClick",!0)}function Tu(t,r){Rn(t.display,r)||_g(t,r)||fe(t,r,"contextmenu")||vt||t.display.input.onContextMenu(r)}function _g(t,r){return xe(t,"gutterContextMenu")?Cu(t,r,"gutterContextMenu",!1):!1}function Mu(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Dr(t)}var nr={toString:function(){return"CodeMirror.Init"}},Lu={},ro={};function xg(t){var r=t.optionHandlers;function a(o,c,d,g){t.defaults[o]=c,d&&(r[o]=g?function(v,y,_){_!=nr&&d(v,y,_)}:d)}t.defineOption=a,t.Init=nr,a("value","",function(o,c){return o.setValue(c)},!0),a("mode",null,function(o,c){o.doc.modeOption=c,ka(o)},!0),a("indentUnit",2,ka,!0),a("indentWithTabs",!1),a("smartIndent",!0),a("tabSize",4,function(o){Hr(o),Dr(o),ze(o)},!0),a("lineSeparator",null,function(o,c){if(o.doc.lineSep=c,!!c){var d=[],g=o.doc.first;o.doc.iter(function(y){for(var _=0;;){var T=y.text.indexOf(c,_);if(T==-1)break;_=T+c.length,d.push(X(g,T))}g++});for(var v=d.length-1;v>=0;v--)Ji(o.doc,c,d[v],X(d[v].line,d[v].ch+c.length))}}),a("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(o,c,d){o.state.specialChars=new RegExp(c.source+(c.test("	")?"":"|	"),"g"),d!=nr&&o.refresh()}),a("specialCharPlaceholder",Gd,function(o){return o.refresh()},!0),a("electricChars",!0),a("inputStyle",it?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),a("spellcheck",!1,function(o,c){return o.getInputField().spellcheck=c},!0),a("autocorrect",!1,function(o,c){return o.getInputField().autocorrect=c},!0),a("autocapitalize",!1,function(o,c){return o.getInputField().autocapitalize=c},!0),a("rtlMoveVisually",!Y),a("wholeLineUpdateBefore",!0),a("theme","default",function(o){Mu(o),Rr(o)},!0),a("keyMap","default",function(o,c,d){var g=no(c),v=d!=nr&&no(d);v&&v.detach&&v.detach(o,g),g.attach&&g.attach(o,v||null)}),a("extraKeys",null),a("configureMouse",null),a("lineWrapping",!1,kg,!0),a("gutters",[],function(o,c){o.display.gutterSpecs=xa(c,o.options.lineNumbers),Rr(o)},!0),a("fixedGutter",!0,function(o,c){o.display.gutters.style.left=c?ca(o.display)+"px":"0",o.refresh()},!0),a("coverGutterNextToScrollbar",!1,function(o){return Xi(o)},!0),a("scrollbarStyle","native",function(o){Dc(o),Xi(o),o.display.scrollbars.setScrollTop(o.doc.scrollTop),o.display.scrollbars.setScrollLeft(o.doc.scrollLeft)},!0),a("lineNumbers",!1,function(o,c){o.display.gutterSpecs=xa(o.options.gutters,c),Rr(o)},!0),a("firstLineNumber",1,Rr,!0),a("lineNumberFormatter",function(o){return o},Rr,!0),a("showCursorWhenSelecting",!1,Or,!0),a("resetSelectionOnContextMenu",!0),a("lineWiseCopyCut",!0),a("pasteLinesPerSelection",!0),a("selectionsMayTouch",!1),a("readOnly",!1,function(o,c){c=="nocursor"&&(Ki(o),o.display.input.blur()),o.display.input.readOnlyChanged(c)}),a("screenReaderLabel",null,function(o,c){c=c===""?null:c,o.display.input.screenReaderLabelChanged(c)}),a("disableInput",!1,function(o,c){c||o.display.input.reset()},!0),a("dragDrop",!0,wg),a("allowDropFileTypes",null),a("cursorBlinkRate",530),a("cursorScrollMargin",0),a("cursorHeight",1,Or,!0),a("singleCursorHeightPerLine",!0,Or,!0),a("workTime",100),a("workDelay",100),a("flattenSpans",!0,Hr,!0),a("addModeClass",!1,Hr,!0),a("pollInterval",100),a("undoDepth",200,function(o,c){return o.doc.history.undoDepth=c}),a("historyEventDelay",1250),a("viewportMargin",10,function(o){return o.refresh()},!0),a("maxHighlightLength",1e4,Hr,!0),a("moveInputWithCursor",!0,function(o,c){c||o.display.input.resetPosition()}),a("tabindex",null,function(o,c){return o.display.input.getField().tabIndex=c||""}),a("autofocus",null),a("direction","ltr",function(o,c){return o.doc.setDirection(c)},!0),a("phrases",null)}function wg(t,r,a){var o=a&&a!=nr;if(!r!=!o){var c=t.display.dragFunctions,d=r?wt:Re;d(t.display.scroller,"dragstart",c.start),d(t.display.scroller,"dragenter",c.enter),d(t.display.scroller,"dragover",c.over),d(t.display.scroller,"dragleave",c.leave),d(t.display.scroller,"drop",c.drop)}}function kg(t){t.options.lineWrapping?(F(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(tt(t.display.wrapper,"CodeMirror-wrap"),Qo(t)),ua(t),ze(t),Dr(t),setTimeout(function(){return Xi(t)},100)}function te(t,r){var a=this;if(!(this instanceof te))return new te(t,r);this.options=r=r?pt(r):{},pt(Lu,r,!1);var o=r.value;typeof o=="string"?o=new We(o,r.mode,null,r.lineSeparator,r.direction):r.mode&&(o.modeOption=r.mode),this.doc=o;var c=new te.inputStyles[r.inputStyle](this),d=this.display=new Fp(t,o,c,r);d.wrapper.CodeMirror=this,Mu(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Dc(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Mt,keySeq:null,specialChars:null},r.autofocus&&!it&&d.input.focus(),p&&m<11&&setTimeout(function(){return a.display.input.reset(!0)},20),Sg(this),eg(),_i(this),this.curOp.forceUpdate=!0,Wc(this,o),r.autofocus&&!it||this.hasFocus()?setTimeout(function(){a.hasFocus()&&!a.state.focused&&pa(a)},20):Ki(this);for(var g in ro)ro.hasOwnProperty(g)&&ro[g](this,r[g],nr);Pc(this),r.finishInit&&r.finishInit(this);for(var v=0;v<Ia.length;++v)Ia[v](this);xi(this),b&&r.lineWrapping&&getComputedStyle(d.lineDiv).textRendering=="optimizelegibility"&&(d.lineDiv.style.textRendering="auto")}te.defaults=Lu,te.optionHandlers=ro;function Sg(t){var r=t.display;wt(r.scroller,"mousedown",ve(t,ku)),p&&m<11?wt(r.scroller,"dblclick",ve(t,function(y){if(!fe(t,y)){var _=mi(t,y);if(!(!_||Pa(t,y)||Rn(t.display,y))){Te(y);var T=t.findWordAt(_);Zs(t.doc,T.anchor,T.head)}}})):wt(r.scroller,"dblclick",function(y){return fe(t,y)||Te(y)}),wt(r.scroller,"contextmenu",function(y){return Tu(t,y)}),wt(r.input.getField(),"contextmenu",function(y){r.scroller.contains(y.target)||Tu(t,y)});var a,o={end:0};function c(){r.activeTouch&&(a=setTimeout(function(){return r.activeTouch=null},1e3),o=r.activeTouch,o.end=+new Date)}function d(y){if(y.touches.length!=1)return!1;var _=y.touches[0];return _.radiusX<=1&&_.radiusY<=1}function g(y,_){if(_.left==null)return!0;var T=_.left-y.left,L=_.top-y.top;return T*T+L*L>20*20}wt(r.scroller,"touchstart",function(y){if(!fe(t,y)&&!d(y)&&!Pa(t,y)){r.input.ensurePolled(),clearTimeout(a);var _=+new Date;r.activeTouch={start:_,moved:!1,prev:_-o.end<=300?o:null},y.touches.length==1&&(r.activeTouch.left=y.touches[0].pageX,r.activeTouch.top=y.touches[0].pageY)}}),wt(r.scroller,"touchmove",function(){r.activeTouch&&(r.activeTouch.moved=!0)}),wt(r.scroller,"touchend",function(y){var _=r.activeTouch;if(_&&!Rn(r,y)&&_.left!=null&&!_.moved&&new Date-_.start<300){var T=t.coordsChar(r.activeTouch,"page"),L;!_.prev||g(_,_.prev)?L=new Yt(T,T):!_.prev.prev||g(_,_.prev.prev)?L=t.findWordAt(T):L=new Yt(X(T.line,0),gt(t.doc,X(T.line+1,0))),t.setSelection(L.anchor,L.head),t.focus(),Te(y)}c()}),wt(r.scroller,"touchcancel",c),wt(r.scroller,"scroll",function(){r.scroller.clientHeight&&(Pr(t,r.scroller.scrollTop),yi(t,r.scroller.scrollLeft,!0),Ct(t,"scroll",t))}),wt(r.scroller,"mousewheel",function(y){return Fc(t,y)}),wt(r.scroller,"DOMMouseScroll",function(y){return Fc(t,y)}),wt(r.wrapper,"scroll",function(){return r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),r.dragFunctions={enter:function(y){fe(t,y)||hi(y)},over:function(y){fe(t,y)||(tg(t,y),hi(y))},start:function(y){return Qp(t,y)},drop:ve(t,Jp),leave:function(y){fe(t,y)||uu(t)}};var v=r.input.getField();wt(v,"keyup",function(y){return xu.call(t,y)}),wt(v,"keydown",ve(t,_u)),wt(v,"keypress",ve(t,wu)),wt(v,"focus",function(y){return pa(t,y)}),wt(v,"blur",function(y){return Ki(t,y)})}var Ia=[];te.defineInitHook=function(t){return Ia.push(t)};function Zr(t,r,a,o){var c=t.doc,d;a==null&&(a="add"),a=="smart"&&(c.mode.indent?d=Cr(t,r).state:a="prev");var g=t.options.tabSize,v=bt(c,r),y=ct(v.text,null,g);v.stateAfter&&(v.stateAfter=null);var _=v.text.match(/^\s*/)[0],T;if(!o&&!/\S/.test(v.text))T=0,a="not";else if(a=="smart"&&(T=c.mode.indent(d,v.text.slice(_.length),v.text),T==Dt||T>150)){if(!o)return;a="prev"}a=="prev"?r>c.first?T=ct(bt(c,r-1).text,null,g):T=0:a=="add"?T=y+t.options.indentUnit:a=="subtract"?T=y-t.options.indentUnit:typeof a=="number"&&(T=y+a),T=Math.max(0,T);var L="",R=0;if(t.options.indentWithTabs)for(var I=Math.floor(T/g);I;--I)R+=g,L+="	";if(R<T&&(L+=bn(T-R)),L!=_)return Ji(c,L,X(r,0),X(r,_.length),"+input"),v.stateAfter=null,!0;for(var B=0;B<c.sel.ranges.length;B++){var $=c.sel.ranges[B];if($.head.line==r&&$.head.ch<_.length){var nt=X(r,_.length);Ma(c,B,new Yt(nt,nt));break}}}var vn=null;function so(t){vn=t}function Ea(t,r,a,o,c){var d=t.doc;t.display.shift=!1,o||(o=d.sel);var g=+new Date-200,v=c=="paste"||t.state.pasteIncoming>g,y=br(r),_=null;if(v&&o.ranges.length>1)if(vn&&vn.text.join(`
`)==r){if(o.ranges.length%vn.text.length==0){_=[];for(var T=0;T<vn.text.length;T++)_.push(d.splitLines(vn.text[T]))}}else y.length==o.ranges.length&&t.options.pasteLinesPerSelection&&(_=ue(y,function(at){return[at]}));for(var L=t.curOp.updateInput,R=o.ranges.length-1;R>=0;R--){var I=o.ranges[R],B=I.from(),$=I.to();I.empty()&&(a&&a>0?B=X(B.line,B.ch-a):t.state.overwrite&&!v?$=X($.line,Math.min(bt(d,$.line).text.length,$.ch+At(y).length)):v&&vn&&vn.lineWise&&vn.text.join(`
`)==y.join(`
`)&&(B=$=X(B.line,0)));var nt={from:B,to:$,text:_?_[R%_.length]:y,origin:c||(v?"paste":t.state.cutIncoming>g?"cut":"+input")};Zi(t.doc,nt),me(t,"inputRead",t,nt)}r&&!v&&Du(t,r),Vi(t),t.curOp.updateInput<2&&(t.curOp.updateInput=L),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Nu(t,r){var a=t.clipboardData&&t.clipboardData.getData("Text");if(a)return t.preventDefault(),!r.isReadOnly()&&!r.options.disableInput&&Ke(r,function(){return Ea(r,a,0,null,"paste")}),!0}function Du(t,r){if(!(!t.options.electricChars||!t.options.smartIndent))for(var a=t.doc.sel,o=a.ranges.length-1;o>=0;o--){var c=a.ranges[o];if(!(c.head.ch>100||o&&a.ranges[o-1].head.line==c.head.line)){var d=t.getModeAt(c.head),g=!1;if(d.electricChars){for(var v=0;v<d.electricChars.length;v++)if(r.indexOf(d.electricChars.charAt(v))>-1){g=Zr(t,c.head.line,"smart");break}}else d.electricInput&&d.electricInput.test(bt(t.doc,c.head.line).text.slice(0,c.head.ch))&&(g=Zr(t,c.head.line,"smart"));g&&me(t,"electricInput",t,c.head.line)}}}function Ou(t){for(var r=[],a=[],o=0;o<t.doc.sel.ranges.length;o++){var c=t.doc.sel.ranges[o].head.line,d={anchor:X(c,0),head:X(c+1,0)};a.push(d),r.push(t.getRange(d.anchor,d.head))}return{text:r,ranges:a}}function Au(t,r,a,o){t.setAttribute("autocorrect",a?"":"off"),t.setAttribute("autocapitalize",o?"":"off"),t.setAttribute("spellcheck",!!r)}function Pu(){var t=W("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),r=W("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return b?t.style.width="1000px":t.setAttribute("wrap","off"),E&&(t.style.border="1px solid black"),Au(t),r}function Cg(t){var r=t.optionHandlers,a=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(o,c){var d=this.options,g=d[o];d[o]==c&&o!="mode"||(d[o]=c,r.hasOwnProperty(o)&&ve(this,r[o])(this,c,g),Ct(this,"optionChange",this,o))},getOption:function(o){return this.options[o]},getDoc:function(){return this.doc},addKeyMap:function(o,c){this.state.keyMaps[c?"push":"unshift"](no(o))},removeKeyMap:function(o){for(var c=this.state.keyMaps,d=0;d<c.length;++d)if(c[d]==o||c[d].name==o)return c.splice(d,1),!0},addOverlay:De(function(o,c){var d=o.token?o:t.getMode(this.options,o);if(d.startState)throw new Error("Overlays may not be stateful.");Ie(this.state.overlays,{mode:d,modeSpec:o,opaque:c&&c.opaque,priority:c&&c.priority||0},function(g){return g.priority}),this.state.modeGen++,ze(this)}),removeOverlay:De(function(o){for(var c=this.state.overlays,d=0;d<c.length;++d){var g=c[d].modeSpec;if(g==o||typeof o=="string"&&g.name==o){c.splice(d,1),this.state.modeGen++,ze(this);return}}}),indentLine:De(function(o,c,d){typeof c!="string"&&typeof c!="number"&&(c==null?c=this.options.smartIndent?"smart":"prev":c=c?"add":"subtract"),di(this.doc,o)&&Zr(this,o,c,d)}),indentSelection:De(function(o){for(var c=this.doc.sel.ranges,d=-1,g=0;g<c.length;g++){var v=c[g];if(v.empty())v.head.line>d&&(Zr(this,v.head.line,o,!0),d=v.head.line,g==this.doc.sel.primIndex&&Vi(this));else{var y=v.from(),_=v.to(),T=Math.max(d,y.line);d=Math.min(this.lastLine(),_.line-(_.ch?0:1))+1;for(var L=T;L<d;++L)Zr(this,L,o);var R=this.doc.sel.ranges;y.ch==0&&c.length==R.length&&R[g].from().ch>0&&Ma(this.doc,g,new Yt(y,R[g].to()),zt)}}}),getTokenAt:function(o,c){return Ul(this,o,c)},getLineTokens:function(o,c){return Ul(this,X(o),c,!0)},getTokenTypeAt:function(o){o=gt(this.doc,o);var c=zl(this,bt(this.doc,o.line)),d=0,g=(c.length-1)/2,v=o.ch,y;if(v==0)y=c[2];else for(;;){var _=d+g>>1;if((_?c[_*2-1]:0)>=v)g=_;else if(c[_*2+1]<v)d=_+1;else{y=c[_*2+2];break}}var T=y?y.indexOf("overlay "):-1;return T<0?y:T==0?null:y.slice(0,T-1)},getModeAt:function(o){var c=this.doc.mode;return c.innerMode?t.innerMode(c,this.getTokenAt(o).state).mode:c},getHelper:function(o,c){return this.getHelpers(o,c)[0]},getHelpers:function(o,c){var d=[];if(!a.hasOwnProperty(c))return d;var g=a[c],v=this.getModeAt(o);if(typeof v[c]=="string")g[v[c]]&&d.push(g[v[c]]);else if(v[c])for(var y=0;y<v[c].length;y++){var _=g[v[c][y]];_&&d.push(_)}else v.helperType&&g[v.helperType]?d.push(g[v.helperType]):g[v.name]&&d.push(g[v.name]);for(var T=0;T<g._global.length;T++){var L=g._global[T];L.pred(v,this)&&ut(d,L.val)==-1&&d.push(L.val)}return d},getStateAfter:function(o,c){var d=this.doc;return o=Ht(d,o??d.first+d.size-1),Cr(this,o+1,c).state},cursorCoords:function(o,c){var d,g=this.doc.sel.primary();return o==null?d=g.head:typeof o=="object"?d=gt(this.doc,o):d=o?g.from():g.to(),gn(this,d,c||"page")},charCoords:function(o,c){return Bs(this,gt(this.doc,o),c||"page")},coordsChar:function(o,c){return o=vc(this,o,c||"page"),oa(this,o.left,o.top)},lineAtHeight:function(o,c){return o=vc(this,{top:o,left:0},c||"page").top,kn(this.doc,o+this.display.viewOffset)},heightAtLine:function(o,c,d){var g=!1,v;if(typeof o=="number"){var y=this.doc.first+this.doc.size-1;o<this.doc.first?o=this.doc.first:o>y&&(o=y,g=!0),v=bt(this.doc,o)}else v=o;return Ws(this,v,{top:0,left:0},c||"page",d||g).top+(g?this.doc.height-Fn(v):0)},defaultTextHeight:function(){return ji(this.display)},defaultCharWidth:function(){return Yi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(o,c,d,g,v){var y=this.display;o=gn(this,gt(this.doc,o));var _=o.bottom,T=o.left;if(c.style.position="absolute",c.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(c),y.sizer.appendChild(c),g=="over")_=o.top;else if(g=="above"||g=="near"){var L=Math.max(y.wrapper.clientHeight,this.doc.height),R=Math.max(y.sizer.clientWidth,y.lineSpace.clientWidth);(g=="above"||o.bottom+c.offsetHeight>L)&&o.top>c.offsetHeight?_=o.top-c.offsetHeight:o.bottom+c.offsetHeight<=L&&(_=o.bottom),T+c.offsetWidth>R&&(T=R-c.offsetWidth)}c.style.top=_+"px",c.style.left=c.style.right="",v=="right"?(T=y.sizer.clientWidth-c.offsetWidth,c.style.right="0px"):(v=="left"?T=0:v=="middle"&&(T=(y.sizer.clientWidth-c.offsetWidth)/2),c.style.left=T+"px"),d&&wp(this,{left:T,top:_,right:T+c.offsetWidth,bottom:_+c.offsetHeight})},triggerOnKeyDown:De(_u),triggerOnKeyPress:De(wu),triggerOnKeyUp:xu,triggerOnMouseDown:De(ku),execCommand:function(o){if(Vr.hasOwnProperty(o))return Vr[o].call(null,this)},triggerElectric:De(function(o){Du(this,o)}),findPosH:function(o,c,d,g){var v=1;c<0&&(v=-1,c=-c);for(var y=gt(this.doc,o),_=0;_<c&&(y=Fa(this.doc,y,v,d,g),!y.hitSide);++_);return y},moveH:De(function(o,c){var d=this;this.extendSelectionsBy(function(g){return d.display.shift||d.doc.extend||g.empty()?Fa(d.doc,g.head,o,c,d.options.rtlMoveVisually):o<0?g.from():g.to()},Rt)}),deleteH:De(function(o,c){var d=this.doc.sel,g=this.doc;d.somethingSelected()?g.replaceSelection("",null,"+delete"):er(this,function(v){var y=Fa(g,v.head,o,c,!1);return o<0?{from:y,to:v.head}:{from:v.head,to:y}})}),findPosV:function(o,c,d,g){var v=1,y=g;c<0&&(v=-1,c=-c);for(var _=gt(this.doc,o),T=0;T<c;++T){var L=gn(this,_,"div");if(y==null?y=L.left:L.left=y,_=Iu(this,L,v,d),_.hitSide)break}return _},moveV:De(function(o,c){var d=this,g=this.doc,v=[],y=!this.display.shift&&!g.extend&&g.sel.somethingSelected();if(g.extendSelectionsBy(function(T){if(y)return o<0?T.from():T.to();var L=gn(d,T.head,"div");T.goalColumn!=null&&(L.left=T.goalColumn),v.push(L.left);var R=Iu(d,L,o,c);return c=="page"&&T==g.sel.primary()&&ma(d,Bs(d,R,"div").top-L.top),R},Rt),v.length)for(var _=0;_<g.sel.ranges.length;_++)g.sel.ranges[_].goalColumn=v[_]}),findWordAt:function(o){var c=this.doc,d=bt(c,o.line).text,g=o.ch,v=o.ch;if(d){var y=this.getHelper(o,"wordChars");(o.sticky=="before"||v==d.length)&&g?--g:++v;for(var _=d.charAt(g),T=Ut(_,y)?function(L){return Ut(L,y)}:/\s/.test(_)?function(L){return/\s/.test(L)}:function(L){return!/\s/.test(L)&&!Ut(L)};g>0&&T(d.charAt(g-1));)--g;for(;v<d.length&&T(d.charAt(v));)++v}return new Yt(X(o.line,g),X(o.line,v))},toggleOverwrite:function(o){o!=null&&o==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?F(this.display.cursorDiv,"CodeMirror-overwrite"):tt(this.display.cursorDiv,"CodeMirror-overwrite"),Ct(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==qt()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:De(function(o,c){Ar(this,o,c)}),getScrollInfo:function(){var o=this.display.scroller;return{left:o.scrollLeft,top:o.scrollTop,height:o.scrollHeight-Cn(this)-this.display.barHeight,width:o.scrollWidth-Cn(this)-this.display.barWidth,clientHeight:na(this),clientWidth:pi(this)}},scrollIntoView:De(function(o,c){o==null?(o={from:this.doc.sel.primary().head,to:null},c==null&&(c=this.options.cursorScrollMargin)):typeof o=="number"?o={from:X(o,0),to:null}:o.from==null&&(o={from:o,to:null}),o.to||(o.to=o.from),o.margin=c||0,o.from.line!=null?kp(this,o):Tc(this,o.from,o.to,o.margin)}),setSize:De(function(o,c){var d=this,g=function(y){return typeof y=="number"||/^\d+$/.test(String(y))?y+"px":y};o!=null&&(this.display.wrapper.style.width=g(o)),c!=null&&(this.display.wrapper.style.height=g(c)),this.options.lineWrapping&&pc(this);var v=this.display.viewFrom;this.doc.iter(v,this.display.viewTo,function(y){if(y.widgets){for(var _=0;_<y.widgets.length;_++)if(y.widgets[_].noHScroll){Jn(d,v,"widget");break}}++v}),this.curOp.forceUpdate=!0,Ct(this,"refresh",this)}),operation:function(o){return Ke(this,o)},startOperation:function(){return _i(this)},endOperation:function(){return xi(this)},refresh:De(function(){var o=this.display.cachedTextHeight;ze(this),this.curOp.forceUpdate=!0,Dr(this),Ar(this,this.doc.scrollLeft,this.doc.scrollTop),ba(this.display),(o==null||Math.abs(o-ji(this.display))>.5||this.options.lineWrapping)&&ua(this),Ct(this,"refresh",this)}),swapDoc:De(function(o){var c=this.doc;return c.cm=null,this.state.selectingText&&this.state.selectingText(),Wc(this,o),Dr(this),this.display.input.reset(),Ar(this,o.scrollLeft,o.scrollTop),this.curOp.forceScroll=!0,me(this,"swapDoc",this,c),c}),phrase:function(o){var c=this.options.phrases;return c&&Object.prototype.hasOwnProperty.call(c,o)?c[o]:o},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},_n(t),t.registerHelper=function(o,c,d){a.hasOwnProperty(o)||(a[o]=t[o]={_global:[]}),a[o][c]=d},t.registerGlobalHelper=function(o,c,d,g){t.registerHelper(o,c,g),a[o]._global.push({pred:d,val:g})}}function Fa(t,r,a,o,c){var d=r,g=a,v=bt(t,r.line),y=c&&t.direction=="rtl"?-a:a;function _(){var ft=r.line+y;return ft<t.first||ft>=t.first+t.size?!1:(r=new X(ft,r.ch,r.sticky),v=bt(t,ft))}function T(ft){var lt;if(o=="codepoint"){var yt=v.text.charCodeAt(r.ch+(a>0?0:-1));if(isNaN(yt))lt=null;else{var St=a>0?yt>=55296&&yt<56320:yt>=56320&&yt<57343;lt=new X(r.line,Math.max(0,Math.min(v.text.length,r.ch+a*(St?2:1))),-a)}}else c?lt=og(t.cm,v,r,a):lt=Na(v,r,a);if(lt==null)if(!ft&&_())r=Da(c,t.cm,v,r.line,y);else return!1;else r=lt;return!0}if(o=="char"||o=="codepoint")T();else if(o=="column")T(!0);else if(o=="word"||o=="group")for(var L=null,R=o=="group",I=t.cm&&t.cm.getHelper(r,"wordChars"),B=!0;!(a<0&&!T(!B));B=!1){var $=v.text.charAt(r.ch)||`
`,nt=Ut($,I)?"w":R&&$==`
`?"n":!R||/\s/.test($)?null:"p";if(R&&!B&&!nt&&(nt="s"),L&&L!=nt){a<0&&(a=1,T(),r.sticky="after");break}if(nt&&(L=nt),a>0&&!T(!B))break}var at=Qs(t,r,d,g,!0);return N(d,at)&&(at.hitSide=!0),at}function Iu(t,r,a,o){var c=t.doc,d=r.left,g;if(o=="page"){var v=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),y=Math.max(v-.5*ji(t.display),3);g=(a>0?r.bottom:r.top)+a*y}else o=="line"&&(g=a>0?r.bottom+3:r.top-3);for(var _;_=oa(t,d,g),!!_.outside;){if(a<0?g<=0:g>=c.height){_.hitSide=!0;break}g+=a*5}return _}var Xt=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Mt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Xt.prototype.init=function(t){var r=this,a=this,o=a.cm,c=a.div=t.lineDiv;c.contentEditable=!0,Au(c,o.options.spellcheck,o.options.autocorrect,o.options.autocapitalize);function d(v){for(var y=v.target;y;y=y.parentNode){if(y==c)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(y.className))break}return!1}wt(c,"paste",function(v){!d(v)||fe(o,v)||Nu(v,o)||m<=11&&setTimeout(ve(o,function(){return r.updateFromDOM()}),20)}),wt(c,"compositionstart",function(v){r.composing={data:v.data,done:!1}}),wt(c,"compositionupdate",function(v){r.composing||(r.composing={data:v.data,done:!1})}),wt(c,"compositionend",function(v){r.composing&&(v.data!=r.composing.data&&r.readFromDOMSoon(),r.composing.done=!0)}),wt(c,"touchstart",function(){return a.forceCompositionEnd()}),wt(c,"input",function(){r.composing||r.readFromDOMSoon()});function g(v){if(!(!d(v)||fe(o,v))){if(o.somethingSelected())so({lineWise:!1,text:o.getSelections()}),v.type=="cut"&&o.replaceSelection("",null,"cut");else if(o.options.lineWiseCopyCut){var y=Ou(o);so({lineWise:!0,text:y.text}),v.type=="cut"&&o.operation(function(){o.setSelections(y.ranges,0,zt),o.replaceSelection("",null,"cut")})}else return;if(v.clipboardData){v.clipboardData.clearData();var _=vn.text.join(`
`);if(v.clipboardData.setData("Text",_),v.clipboardData.getData("Text")==_){v.preventDefault();return}}var T=Pu(),L=T.firstChild;o.display.lineSpace.insertBefore(T,o.display.lineSpace.firstChild),L.value=vn.text.join(`
`);var R=qt();Z(L),setTimeout(function(){o.display.lineSpace.removeChild(T),R.focus(),R==c&&a.showPrimarySelection()},50)}}wt(c,"copy",g),wt(c,"cut",g)},Xt.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},Xt.prototype.prepareSelection=function(){var t=kc(this.cm,!1);return t.focus=qt()==this.div,t},Xt.prototype.showSelection=function(t,r){!t||!this.cm.display.view.length||((t.focus||r)&&this.showPrimarySelection(),this.showMultipleSelections(t))},Xt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Xt.prototype.showPrimarySelection=function(){var t=this.getSelection(),r=this.cm,a=r.doc.sel.primary(),o=a.from(),c=a.to();if(r.display.viewTo==r.display.viewFrom||o.line>=r.display.viewTo||c.line<r.display.viewFrom){t.removeAllRanges();return}var d=oo(r,t.anchorNode,t.anchorOffset),g=oo(r,t.focusNode,t.focusOffset);if(!(d&&!d.bad&&g&&!g.bad&&w(Tt(d,g),o)==0&&w(J(d,g),c)==0)){var v=r.display.view,y=o.line>=r.display.viewFrom&&Eu(r,o)||{node:v[0].measure.map[2],offset:0},_=c.line<r.display.viewTo&&Eu(r,c);if(!_){var T=v[v.length-1].measure,L=T.maps?T.maps[T.maps.length-1]:T.map;_={node:L[L.length-1],offset:L[L.length-2]-L[L.length-3]}}if(!y||!_){t.removeAllRanges();return}var R=t.rangeCount&&t.getRangeAt(0),I;try{I=Lt(y.node,y.offset,_.offset,_.node)}catch{}I&&(!l&&r.state.focused?(t.collapse(y.node,y.offset),I.collapsed||(t.removeAllRanges(),t.addRange(I))):(t.removeAllRanges(),t.addRange(I)),R&&t.anchorNode==null?t.addRange(R):l&&this.startGracePeriod()),this.rememberSelection()}},Xt.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},Xt.prototype.showMultipleSelections=function(t){H(this.cm.display.cursorDiv,t.cursors),H(this.cm.display.selectionDiv,t.selection)},Xt.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},Xt.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var r=t.getRangeAt(0).commonAncestorContainer;return Ft(this.div,r)},Xt.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||qt()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},Xt.prototype.blur=function(){this.div.blur()},Xt.prototype.getField=function(){return this.div},Xt.prototype.supportsTouch=function(){return!0},Xt.prototype.receivedFocus=function(){var t=this,r=this;this.selectionInEditor()?setTimeout(function(){return t.pollSelection()},20):Ke(this.cm,function(){return r.cm.curOp.selectionChanged=!0});function a(){r.cm.state.focused&&(r.pollSelection(),r.polling.set(r.cm.options.pollInterval,a))}this.polling.set(this.cm.options.pollInterval,a)},Xt.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},Xt.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var t=this.getSelection(),r=this.cm;if(z&&S&&this.cm.display.gutterSpecs.length&&Tg(t.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var a=oo(r,t.anchorNode,t.anchorOffset),o=oo(r,t.focusNode,t.focusOffset);a&&o&&Ke(r,function(){Le(r.doc,ti(a,o),zt),(a.bad||o.bad)&&(r.curOp.selectionChanged=!0)})}}},Xt.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t=this.cm,r=t.display,a=t.doc.sel.primary(),o=a.from(),c=a.to();if(o.ch==0&&o.line>t.firstLine()&&(o=X(o.line-1,bt(t.doc,o.line-1).length)),c.ch==bt(t.doc,c.line).text.length&&c.line<t.lastLine()&&(c=X(c.line+1,0)),o.line<r.viewFrom||c.line>r.viewTo-1)return!1;var d,g,v;o.line==r.viewFrom||(d=vi(t,o.line))==0?(g=jt(r.view[0].line),v=r.view[0].node):(g=jt(r.view[d].line),v=r.view[d-1].node.nextSibling);var y=vi(t,c.line),_,T;if(y==r.view.length-1?(_=r.viewTo-1,T=r.lineDiv.lastChild):(_=jt(r.view[y+1].line)-1,T=r.view[y+1].node.previousSibling),!v)return!1;for(var L=t.doc.splitLines(Mg(t,v,T,g,_)),R=wn(t.doc,X(g,0),X(_,bt(t.doc,_).text.length));L.length>1&&R.length>1;)if(At(L)==At(R))L.pop(),R.pop(),_--;else if(L[0]==R[0])L.shift(),R.shift(),g++;else break;for(var I=0,B=0,$=L[0],nt=R[0],at=Math.min($.length,nt.length);I<at&&$.charCodeAt(I)==nt.charCodeAt(I);)++I;for(var ft=At(L),lt=At(R),yt=Math.min(ft.length-(L.length==1?I:0),lt.length-(R.length==1?I:0));B<yt&&ft.charCodeAt(ft.length-B-1)==lt.charCodeAt(lt.length-B-1);)++B;if(L.length==1&&R.length==1&&g==o.line)for(;I&&I>o.ch&&ft.charCodeAt(ft.length-B-1)==lt.charCodeAt(lt.length-B-1);)I--,B++;L[L.length-1]=ft.slice(0,ft.length-B).replace(/^\u200b+/,""),L[0]=L[0].slice(I).replace(/\u200b+$/,"");var St=X(g,I),kt=X(_,R.length?At(R).length-B:0);if(L.length>1||L[0]||w(St,kt))return Ji(t.doc,L,St,kt,"+input"),!0},Xt.prototype.ensurePolled=function(){this.forceCompositionEnd()},Xt.prototype.reset=function(){this.forceCompositionEnd()},Xt.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Xt.prototype.readFromDOMSoon=function(){var t=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing)if(t.composing.done)t.composing=null;else return;t.updateFromDOM()},80))},Xt.prototype.updateFromDOM=function(){var t=this;(this.cm.isReadOnly()||!this.pollContent())&&Ke(this.cm,function(){return ze(t.cm)})},Xt.prototype.setUneditable=function(t){t.contentEditable="false"},Xt.prototype.onKeyPress=function(t){t.charCode==0||this.composing||(t.preventDefault(),this.cm.isReadOnly()||ve(this.cm,Ea)(this.cm,String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),0))},Xt.prototype.readOnlyChanged=function(t){this.div.contentEditable=String(t!="nocursor")},Xt.prototype.onContextMenu=function(){},Xt.prototype.resetPosition=function(){},Xt.prototype.needsContentAttribute=!0;function Eu(t,r){var a=ia(t,r.line);if(!a||a.hidden)return null;var o=bt(t.doc,r.line),c=cc(a,o,r.line),d=$t(o,t.doc.direction),g="left";if(d){var v=mt(d,r.ch);g=v%2?"right":"left"}var y=hc(c.map,r.ch,g);return y.offset=y.collapse=="right"?y.end:y.start,y}function Tg(t){for(var r=t;r;r=r.parentNode)if(/CodeMirror-gutter-wrapper/.test(r.className))return!0;return!1}function ir(t,r){return r&&(t.bad=!0),t}function Mg(t,r,a,o,c){var d="",g=!1,v=t.doc.lineSeparator(),y=!1;function _(I){return function(B){return B.id==I}}function T(){g&&(d+=v,y&&(d+=v),g=y=!1)}function L(I){I&&(T(),d+=I)}function R(I){if(I.nodeType==1){var B=I.getAttribute("cm-text");if(B){L(B);return}var $=I.getAttribute("cm-marker"),nt;if($){var at=t.findMarks(X(o,0),X(c+1,0),_(+$));at.length&&(nt=at[0].find(0))&&L(wn(t.doc,nt.from,nt.to).join(v));return}if(I.getAttribute("contenteditable")=="false")return;var ft=/^(pre|div|p|li|table|br)$/i.test(I.nodeName);if(!/^br$/i.test(I.nodeName)&&I.textContent.length==0)return;ft&&T();for(var lt=0;lt<I.childNodes.length;lt++)R(I.childNodes[lt]);/^(pre|p)$/i.test(I.nodeName)&&(y=!0),ft&&(g=!0)}else I.nodeType==3&&L(I.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;R(r),r!=a;)r=r.nextSibling,y=!1;return d}function oo(t,r,a){var o;if(r==t.display.lineDiv){if(o=t.display.lineDiv.childNodes[a],!o)return ir(t.clipPos(X(t.display.viewTo-1)),!0);r=null,a=0}else for(o=r;;o=o.parentNode){if(!o||o==t.display.lineDiv)return null;if(o.parentNode&&o.parentNode==t.display.lineDiv)break}for(var c=0;c<t.display.view.length;c++){var d=t.display.view[c];if(d.node==o)return Lg(d,r,a)}}function Lg(t,r,a){var o=t.text.firstChild,c=!1;if(!r||!Ft(o,r))return ir(X(jt(t.line),0),!0);if(r==o&&(c=!0,r=o.childNodes[a],a=0,!r)){var d=t.rest?At(t.rest):t.line;return ir(X(jt(d),d.text.length),c)}var g=r.nodeType==3?r:null,v=r;for(!g&&r.childNodes.length==1&&r.firstChild.nodeType==3&&(g=r.firstChild,a&&(a=g.nodeValue.length));v.parentNode!=o;)v=v.parentNode;var y=t.measure,_=y.maps;function T(nt,at,ft){for(var lt=-1;lt<(_?_.length:0);lt++)for(var yt=lt<0?y.map:_[lt],St=0;St<yt.length;St+=3){var kt=yt[St+2];if(kt==nt||kt==at){var Pt=jt(lt<0?t.line:t.rest[lt]),Zt=yt[St]+ft;return(ft<0||kt!=nt)&&(Zt=yt[St+(ft?1:0)]),X(Pt,Zt)}}}var L=T(g,v,a);if(L)return ir(L,c);for(var R=v.nextSibling,I=g?g.nodeValue.length-a:0;R;R=R.nextSibling){if(L=T(R,R.firstChild,0),L)return ir(X(L.line,L.ch-I),c);I+=R.textContent.length}for(var B=v.previousSibling,$=a;B;B=B.previousSibling){if(L=T(B,B.firstChild,-1),L)return ir(X(L.line,L.ch+$),c);$+=B.textContent.length}}var ae=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new Mt,this.hasSelection=!1,this.composing=null};ae.prototype.init=function(t){var r=this,a=this,o=this.cm;this.createField(t);var c=this.textarea;t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),E&&(c.style.width="0px"),wt(c,"input",function(){p&&m>=9&&r.hasSelection&&(r.hasSelection=null),a.poll()}),wt(c,"paste",function(g){fe(o,g)||Nu(g,o)||(o.state.pasteIncoming=+new Date,a.fastPoll())});function d(g){if(!fe(o,g)){if(o.somethingSelected())so({lineWise:!1,text:o.getSelections()});else if(o.options.lineWiseCopyCut){var v=Ou(o);so({lineWise:!0,text:v.text}),g.type=="cut"?o.setSelections(v.ranges,null,zt):(a.prevInput="",c.value=v.text.join(`
`),Z(c))}else return;g.type=="cut"&&(o.state.cutIncoming=+new Date)}}wt(c,"cut",d),wt(c,"copy",d),wt(t.scroller,"paste",function(g){if(!(Rn(t,g)||fe(o,g))){if(!c.dispatchEvent){o.state.pasteIncoming=+new Date,a.focus();return}var v=new Event("paste");v.clipboardData=g.clipboardData,c.dispatchEvent(v)}}),wt(t.lineSpace,"selectstart",function(g){Rn(t,g)||Te(g)}),wt(c,"compositionstart",function(){var g=o.getCursor("from");a.composing&&a.composing.range.clear(),a.composing={start:g,range:o.markText(g,o.getCursor("to"),{className:"CodeMirror-composing"})}}),wt(c,"compositionend",function(){a.composing&&(a.poll(),a.composing.range.clear(),a.composing=null)})},ae.prototype.createField=function(t){this.wrapper=Pu(),this.textarea=this.wrapper.firstChild},ae.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},ae.prototype.prepareSelection=function(){var t=this.cm,r=t.display,a=t.doc,o=kc(t);if(t.options.moveInputWithCursor){var c=gn(t,a.sel.primary().head,"div"),d=r.wrapper.getBoundingClientRect(),g=r.lineDiv.getBoundingClientRect();o.teTop=Math.max(0,Math.min(r.wrapper.clientHeight-10,c.top+g.top-d.top)),o.teLeft=Math.max(0,Math.min(r.wrapper.clientWidth-10,c.left+g.left-d.left))}return o},ae.prototype.showSelection=function(t){var r=this.cm,a=r.display;H(a.cursorDiv,t.cursors),H(a.selectionDiv,t.selection),t.teTop!=null&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},ae.prototype.reset=function(t){if(!(this.contextMenuPending||this.composing)){var r=this.cm;if(r.somethingSelected()){this.prevInput="";var a=r.getSelection();this.textarea.value=a,r.state.focused&&Z(this.textarea),p&&m>=9&&(this.hasSelection=a)}else t||(this.prevInput=this.textarea.value="",p&&m>=9&&(this.hasSelection=null))}},ae.prototype.getField=function(){return this.textarea},ae.prototype.supportsTouch=function(){return!1},ae.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!it||qt()!=this.textarea))try{this.textarea.focus()}catch{}},ae.prototype.blur=function(){this.textarea.blur()},ae.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ae.prototype.receivedFocus=function(){this.slowPoll()},ae.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},ae.prototype.fastPoll=function(){var t=!1,r=this;r.pollingFast=!0;function a(){var o=r.poll();!o&&!t?(t=!0,r.polling.set(60,a)):(r.pollingFast=!1,r.slowPoll())}r.polling.set(20,a)},ae.prototype.poll=function(){var t=this,r=this.cm,a=this.textarea,o=this.prevInput;if(this.contextMenuPending||!r.state.focused||Ds(a)&&!o&&!this.composing||r.isReadOnly()||r.options.disableInput||r.state.keySeq)return!1;var c=a.value;if(c==o&&!r.somethingSelected())return!1;if(p&&m>=9&&this.hasSelection===c||q&&/[\uf700-\uf7ff]/.test(c))return r.display.input.reset(),!1;if(r.doc.sel==r.display.selForContextMenu){var d=c.charCodeAt(0);if(d==8203&&!o&&(o="​"),d==8666)return this.reset(),this.cm.execCommand("undo")}for(var g=0,v=Math.min(o.length,c.length);g<v&&o.charCodeAt(g)==c.charCodeAt(g);)++g;return Ke(r,function(){Ea(r,c.slice(g),o.length-g,null,t.composing?"*compose":null),c.length>1e3||c.indexOf(`
`)>-1?a.value=t.prevInput="":t.prevInput=c,t.composing&&(t.composing.range.clear(),t.composing.range=r.markText(t.composing.start,r.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ae.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ae.prototype.onKeyPress=function(){p&&m>=9&&(this.hasSelection=null),this.fastPoll()},ae.prototype.onContextMenu=function(t){var r=this,a=r.cm,o=a.display,c=r.textarea;r.contextMenuPending&&r.contextMenuPending();var d=mi(a,t),g=o.scroller.scrollTop;if(!d||C)return;var v=a.options.resetSelectionOnContextMenu;v&&a.doc.sel.contains(d)==-1&&ve(a,Le)(a.doc,ti(d),zt);var y=c.style.cssText,_=r.wrapper.style.cssText,T=r.wrapper.offsetParent.getBoundingClientRect();r.wrapper.style.cssText="position: static",c.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(t.clientY-T.top-5)+"px; left: "+(t.clientX-T.left-5)+`px;
      z-index: 1000; background: `+(p?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var L;b&&(L=window.scrollY),o.input.focus(),b&&window.scrollTo(null,L),o.input.reset(),a.somethingSelected()||(c.value=r.prevInput=" "),r.contextMenuPending=I,o.selForContextMenu=a.doc.sel,clearTimeout(o.detectingSelectAll);function R(){if(c.selectionStart!=null){var $=a.somethingSelected(),nt="​"+($?c.value:"");c.value="⇚",c.value=nt,r.prevInput=$?"":"​",c.selectionStart=1,c.selectionEnd=nt.length,o.selForContextMenu=a.doc.sel}}function I(){if(r.contextMenuPending==I&&(r.contextMenuPending=!1,r.wrapper.style.cssText=_,c.style.cssText=y,p&&m<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=g),c.selectionStart!=null)){(!p||p&&m<9)&&R();var $=0,nt=function(){o.selForContextMenu==a.doc.sel&&c.selectionStart==0&&c.selectionEnd>0&&r.prevInput=="​"?ve(a,Qc)(a):$++<10?o.detectingSelectAll=setTimeout(nt,500):(o.selForContextMenu=null,o.input.reset())};o.detectingSelectAll=setTimeout(nt,200)}}if(p&&m>=9&&R(),vt){hi(t);var B=function(){Re(window,"mouseup",B),setTimeout(I,20)};wt(window,"mouseup",B)}else setTimeout(I,50)},ae.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled=t=="nocursor",this.textarea.readOnly=!!t},ae.prototype.setUneditable=function(){},ae.prototype.needsContentAttribute=!1;function Ng(t,r){if(r=r?pt(r):{},r.value=t.value,!r.tabindex&&t.tabIndex&&(r.tabindex=t.tabIndex),!r.placeholder&&t.placeholder&&(r.placeholder=t.placeholder),r.autofocus==null){var a=qt();r.autofocus=a==t||t.getAttribute("autofocus")!=null&&a==document.body}function o(){t.value=v.getValue()}var c;if(t.form&&(wt(t.form,"submit",o),!r.leaveSubmitMethodAlone)){var d=t.form;c=d.submit;try{var g=d.submit=function(){o(),d.submit=c,d.submit(),d.submit=g}}catch{}}r.finishInit=function(y){y.save=o,y.getTextArea=function(){return t},y.toTextArea=function(){y.toTextArea=isNaN,o(),t.parentNode.removeChild(y.getWrapperElement()),t.style.display="",t.form&&(Re(t.form,"submit",o),!r.leaveSubmitMethodAlone&&typeof t.form.submit=="function"&&(t.form.submit=c))}},t.style.display="none";var v=te(function(y){return t.parentNode.insertBefore(y,t.nextSibling)},r);return v}function Dg(t){t.off=Re,t.on=wt,t.wheelEventPixels=Rp,t.Doc=We,t.splitLines=br,t.countColumn=ct,t.findColumn=ce,t.isWordChar=Ot,t.Pass=Dt,t.signal=Ct,t.Line=Bi,t.changeEnd=ei,t.scrollbarModel=Nc,t.Pos=X,t.cmpPos=w,t.modes=sn,t.mimeModes=Ze,t.resolveMode=Hi,t.getMode=zi,t.modeExtensions=hn,t.extendMode=dn,t.copyState=Je,t.startState=wr,t.innerMode=xr,t.commands=Vr,t.keyMap=zn,t.keyName=gu,t.isModifierKey=du,t.lookupKey=tr,t.normalizeKeyMap=sg,t.StringStream=re,t.SharedTextMarker=jr,t.TextMarker=ii,t.LineWidget=$r,t.e_preventDefault=Te,t.e_stopPropagation=Ri,t.e_stop=hi,t.addClass=F,t.contains=Ft,t.rmClass=tt,t.keyNames=ri}xg(te),Cg(te);var Og="iter insert remove copy getEditor constructor".split(" ");for(var ao in We.prototype)We.prototype.hasOwnProperty(ao)&&ut(Og,ao)<0&&(te.prototype[ao]=function(t){return function(){return t.apply(this.doc,arguments)}}(We.prototype[ao]));return _n(We),te.inputStyles={textarea:ae,contenteditable:Xt},te.defineMode=function(t){!te.defaults.mode&&t!="null"&&(te.defaults.mode=t),As.apply(this,arguments)},te.defineMIME=In,te.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),te.defineMIME("text/plain","null"),te.defineExtension=function(t,r){te.prototype[t]=r},te.defineDocExtension=function(t,r){We.prototype[t]=r},te.fromTextArea=Ng,Dg(te),te.version="5.65.2",te})}(Co)),Co.exports}var nm=Fh();const Cs=tm(nm);var Xu={exports:{}},qu;function im(){return qu||(qu=1,function(i,e){(function(n){n(Fh())})(function(n){n.defineMode("javascript",function(s,l){var u=s.indentUnit,f=l.statementIndent,h=l.jsonld,p=l.json||h,m=l.trackScope!==!1,b=l.typescript,x=l.wordCharacters||/[\w$\xa1-\uffff]/,S=function(){function w(Me){return{type:Me,style:"keyword"}}var N=w("keyword a"),U=w("keyword b"),J=w("keyword c"),Tt=w("keyword d"),Ht=w("operator"),gt={type:"atom",style:"atom"};return{if:w("if"),while:N,with:N,else:U,do:U,try:U,finally:U,return:Tt,break:Tt,continue:Tt,new:w("new"),delete:J,void:J,throw:J,debugger:w("debugger"),var:w("var"),const:w("var"),let:w("var"),function:w("function"),catch:w("catch"),for:w("for"),switch:w("switch"),case:w("case"),default:w("default"),in:Ht,typeof:Ht,instanceof:Ht,true:gt,false:gt,null:gt,undefined:gt,NaN:gt,Infinity:gt,this:w("this"),class:w("class"),super:w("atom"),yield:J,export:w("export"),import:w("import"),extends:J,await:J}}(),C=/[+\-*&%=<>!?|~^@]/,A=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function O(w){for(var N=!1,U,J=!1;(U=w.next())!=null;){if(!N){if(U=="/"&&!J)return;U=="["?J=!0:J&&U=="]"&&(J=!1)}N=!N&&U=="\\"}}var D,E;function z(w,N,U){return D=w,E=U,N}function it(w,N){var U=w.next();if(U=='"'||U=="'")return N.tokenize=q(U),N.tokenize(w,N);if(U=="."&&w.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return z("number","number");if(U=="."&&w.match(".."))return z("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(U))return z(U);if(U=="="&&w.eat(">"))return z("=>","operator");if(U=="0"&&w.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return z("number","number");if(/\d/.test(U))return w.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),z("number","number");if(U=="/")return w.eat("*")?(N.tokenize=j,j(w,N)):w.eat("/")?(w.skipToEnd(),z("comment","comment")):X(w,N,1)?(O(w),w.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),z("regexp","string-2")):(w.eat("="),z("operator","operator",w.current()));if(U=="`")return N.tokenize=Y,Y(w,N);if(U=="#"&&w.peek()=="!")return w.skipToEnd(),z("meta","meta");if(U=="#"&&w.eatWhile(x))return z("variable","property");if(U=="<"&&w.match("!--")||U=="-"&&w.match("->")&&!/\S/.test(w.string.slice(0,w.start)))return w.skipToEnd(),z("comment","comment");if(C.test(U))return(U!=">"||!N.lexical||N.lexical.type!=">")&&(w.eat("=")?(U=="!"||U=="=")&&w.eat("="):/[<>*+\-|&?]/.test(U)&&(w.eat(U),U==">"&&w.eat(U))),U=="?"&&w.eat(".")?z("."):z("operator","operator",w.current());if(x.test(U)){w.eatWhile(x);var J=w.current();if(N.lastType!="."){if(S.propertyIsEnumerable(J)){var Tt=S[J];return z(Tt.type,Tt.style,J)}if(J=="async"&&w.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return z("async","keyword",J)}return z("variable","variable",J)}}function q(w){return function(N,U){var J=!1,Tt;if(h&&N.peek()=="@"&&N.match(A))return U.tokenize=it,z("jsonld-keyword","meta");for(;(Tt=N.next())!=null&&!(Tt==w&&!J);)J=!J&&Tt=="\\";return J||(U.tokenize=it),z("string","string")}}function j(w,N){for(var U=!1,J;J=w.next();){if(J=="/"&&U){N.tokenize=it;break}U=J=="*"}return z("comment","comment")}function Y(w,N){for(var U=!1,J;(J=w.next())!=null;){if(!U&&(J=="`"||J=="$"&&w.eat("{"))){N.tokenize=it;break}U=!U&&J=="\\"}return z("quasi","string-2",w.current())}var Q="([{}])";function G(w,N){N.fatArrowAt&&(N.fatArrowAt=null);var U=w.string.indexOf("=>",w.start);if(!(U<0)){if(b){var J=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(w.string.slice(w.start,U));J&&(U=J.index)}for(var Tt=0,Ht=!1,gt=U-1;gt>=0;--gt){var Me=w.string.charAt(gt),Qe=Q.indexOf(Me);if(Qe>=0&&Qe<3){if(!Tt){++gt;break}if(--Tt==0){Me=="("&&(Ht=!0);break}}else if(Qe>=3&&Qe<6)++Tt;else if(x.test(Me))Ht=!0;else if(/["'\/`]/.test(Me))for(;;--gt){if(gt==0)return;var Wi=w.string.charAt(gt-1);if(Wi==Me&&w.string.charAt(gt-2)!="\\"){gt--;break}}else if(Ht&&!Tt){++gt;break}}Ht&&!Tt&&(N.fatArrowAt=gt)}}var vt={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function ot(w,N,U,J,Tt,Ht){this.indented=w,this.column=N,this.type=U,this.prev=Tt,this.info=Ht,J!=null&&(this.align=J)}function tt(w,N){if(!m)return!1;for(var U=w.localVars;U;U=U.next)if(U.name==N)return!0;for(var J=w.context;J;J=J.prev)for(var U=J.vars;U;U=U.next)if(U.name==N)return!0}function rt(w,N,U,J,Tt){var Ht=w.cc;for(H.state=w,H.stream=Tt,H.marked=null,H.cc=Ht,H.style=N,w.lexical.hasOwnProperty("align")||(w.lexical.align=!0);;){var gt=Ht.length?Ht.pop():p?Rt:zt;if(gt(U,J)){for(;Ht.length&&Ht[Ht.length-1].lex;)Ht.pop()();return H.marked?H.marked:U=="variable"&&tt(w,J)?"variable-2":N}}}var H={state:null,column:null,marked:null,cc:null};function W(){for(var w=arguments.length-1;w>=0;w--)H.cc.push(arguments[w])}function M(){return W.apply(null,arguments),!0}function Lt(w,N){for(var U=N;U;U=U.next)if(U.name==w)return!0;return!1}function Ft(w){var N=H.state;if(H.marked="def",!!m){if(N.context){if(N.lexical.info=="var"&&N.context&&N.context.block){var U=qt(w,N.context);if(U!=null){N.context=U;return}}else if(!Lt(w,N.localVars)){N.localVars=new Z(w,N.localVars);return}}l.globalVars&&!Lt(w,N.globalVars)&&(N.globalVars=new Z(w,N.globalVars))}}function qt(w,N){if(N)if(N.block){var U=qt(w,N.prev);return U?U==N.prev?N:new K(U,N.vars,!0):null}else return Lt(w,N.vars)?N:new K(N.prev,new Z(w,N.vars),!1);else return null}function F(w){return w=="public"||w=="private"||w=="protected"||w=="abstract"||w=="readonly"}function K(w,N,U){this.prev=w,this.vars=N,this.block=U}function Z(w,N){this.name=w,this.next=N}var ht=new Z("this",new Z("arguments",null));function pt(){H.state.context=new K(H.state.context,H.state.localVars,!1),H.state.localVars=ht}function ct(){H.state.context=new K(H.state.context,H.state.localVars,!0),H.state.localVars=null}pt.lex=ct.lex=!0;function Mt(){H.state.localVars=H.state.context.vars,H.state.context=H.state.context.prev}Mt.lex=!0;function ut(w,N){var U=function(){var J=H.state,Tt=J.indented;if(J.lexical.type=="stat")Tt=J.lexical.indented;else for(var Ht=J.lexical;Ht&&Ht.type==")"&&Ht.align;Ht=Ht.prev)Tt=Ht.indented;J.lexical=new ot(Tt,H.stream.column(),w,null,J.lexical,N)};return U.lex=!0,U}function xt(){var w=H.state;w.lexical.prev&&(w.lexical.type==")"&&(w.indented=w.lexical.indented),w.lexical=w.lexical.prev)}xt.lex=!0;function Dt(w){function N(U){return U==w?M():w==";"||U=="}"||U==")"||U=="]"?W():M(N)}return N}function zt(w,N){return w=="var"?M(ut("vardef",N),vr,Dt(";"),xt):w=="keyword a"?M(ut("form"),en,zt,xt):w=="keyword b"?M(ut("form"),zt,xt):w=="keyword d"?H.stream.match(/^\s*$/,!1)?M():M(ut("stat"),At,Dt(";"),xt):w=="debugger"?M(Dt(";")):w=="{"?M(ut("}"),ct,$t,xt,Mt):w==";"?M():w=="if"?(H.state.lexical.info=="else"&&H.state.cc[H.state.cc.length-1]==xt&&H.state.cc.pop()(),M(ut("form"),en,zt,xt,Ds)):w=="function"?M(sn):w=="for"?M(ut("form"),ct,Os,zt,Mt,xt):w=="class"||b&&N=="interface"?(H.marked="keyword",M(ut("form",w=="class"?w:N),zi,xt)):w=="variable"?b&&N=="declare"?(H.marked="keyword",M(zt)):b&&(N=="module"||N=="enum"||N=="type")&&H.stream.match(/^\s*\w/,!1)?(H.marked="keyword",N=="enum"?M(kn):N=="type"?M(As,Dt("operator"),Ct,Dt(";")):M(ut("form"),He,Dt("{"),ut("}"),$t,xt,xt)):b&&N=="namespace"?(H.marked="keyword",M(ut("form"),Rt,zt,xt)):b&&N=="abstract"?(H.marked="keyword",M(zt)):M(ut("stat"),rn):w=="switch"?M(ut("form"),en,Dt("{"),ut("}","switch"),ct,$t,xt,xt,Mt):w=="case"?M(Rt,Dt(":")):w=="default"?M(Dt(":")):w=="catch"?M(ut("form"),pt,Pn,zt,xt,Mt):w=="export"?M(ut("stat"),xr,xt):w=="import"?M(ut("stat"),re,xt):w=="async"?M(zt):N=="@"?M(Rt,zt):W(ut("stat"),Rt,Dt(";"),xt)}function Pn(w){if(w=="(")return M(In,Dt(")"))}function Rt(w,N){return bn(w,N,!1)}function ce(w,N){return bn(w,N,!0)}function en(w){return w!="("?W():M(ut(")"),At,Dt(")"),xt)}function bn(w,N,U){if(H.state.fatArrowAt==H.stream.start){var J=U?Ot:Nt;if(w=="(")return M(pt,ut(")"),mt(In,")"),xt,Dt("=>"),J,Mt);if(w=="variable")return W(pt,He,Dt("=>"),J,Mt)}var Tt=U?Ie:ue;return vt.hasOwnProperty(w)?M(Tt):w=="function"?M(sn,Tt):w=="class"||b&&N=="interface"?(H.marked="keyword",M(ut("form"),Hi,xt)):w=="keyword c"||w=="async"?M(U?ce:Rt):w=="("?M(ut(")"),At,Dt(")"),xt,Tt):w=="operator"||w=="spread"?M(U?ce:Rt):w=="["?M(ut("]"),jt,xt,Tt):w=="{"?Qt(P,"}",null,Tt):w=="quasi"?W(et,Tt):w=="new"?M(Ut(U)):M()}function At(w){return w.match(/[;\}\)\],]/)?W():W(Rt)}function ue(w,N){return w==","?M(At):Ie(w,N,!1)}function Ie(w,N,U){var J=U==!1?ue:Ie,Tt=U==!1?Rt:ce;if(w=="=>")return M(pt,U?Ot:Nt,Mt);if(w=="operator")return/\+\+|--/.test(N)||b&&N=="!"?M(J):b&&N=="<"&&H.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?M(ut(">"),mt(Ct,">"),xt,J):N=="?"?M(Rt,Dt(":"),Tt):M(Tt);if(w=="quasi")return W(et,J);if(w!=";"){if(w=="(")return Qt(ce,")","call",J);if(w==".")return M(Ee,J);if(w=="[")return M(ut("]"),At,Dt("]"),xt,J);if(b&&N=="as")return H.marked="keyword",M(Ct,J);if(w=="regexp")return H.state.lastType=H.marked="operator",H.stream.backUp(H.stream.pos-H.stream.start-1),M(Tt)}}function et(w,N){return w!="quasi"?W():N.slice(N.length-2)!="${"?M(et):M(At,_t)}function _t(w){if(w=="}")return H.marked="string-2",H.state.tokenize=Y,M(et)}function Nt(w){return G(H.stream,H.state),W(w=="{"?zt:Rt)}function Ot(w){return G(H.stream,H.state),W(w=="{"?zt:ce)}function Ut(w){return function(N){return N=="."?M(w?nn:Jt):N=="variable"&&b?M(hi,w?Ie:ue):W(w?ce:Rt)}}function Jt(w,N){if(N=="target")return H.marked="keyword",M(ue)}function nn(w,N){if(N=="target")return H.marked="keyword",M(Ie)}function rn(w){return w==":"?M(xt,zt):W(ue,Dt(";"),xt)}function Ee(w){if(w=="variable")return H.marked="property",M()}function P(w,N){if(w=="async")return H.marked="property",M(P);if(w=="variable"||H.style=="keyword"){if(H.marked="property",N=="get"||N=="set")return M(V);var U;return b&&H.state.fatArrowAt==H.stream.start&&(U=H.stream.match(/^\s*:\s*/,!1))&&(H.state.fatArrowAt=H.stream.pos+U[0].length),M(st)}else{if(w=="number"||w=="string")return H.marked=h?"property":H.style+" property",M(st);if(w=="jsonld-keyword")return M(st);if(b&&F(N))return H.marked="keyword",M(P);if(w=="[")return M(Rt,Fe,Dt("]"),st);if(w=="spread")return M(ce,st);if(N=="*")return H.marked="keyword",M(P);if(w==":")return W(st)}}function V(w){return w!="variable"?W(st):(H.marked="property",M(sn))}function st(w){if(w==":")return M(ce);if(w=="(")return W(sn)}function mt(w,N,U){function J(Tt,Ht){if(U?U.indexOf(Tt)>-1:Tt==","){var gt=H.state.lexical;return gt.info=="call"&&(gt.pos=(gt.pos||0)+1),M(function(Me,Qe){return Me==N||Qe==N?W():W(w)},J)}return Tt==N||Ht==N?M():U&&U.indexOf(";")>-1?W(w):M(Dt(N))}return function(Tt,Ht){return Tt==N||Ht==N?M():W(w,J)}}function Qt(w,N,U){for(var J=3;J<arguments.length;J++)H.cc.push(arguments[J]);return M(ut(N,U),mt(w,N),xt)}function $t(w){return w=="}"?M():W(zt,$t)}function Fe(w,N){if(b){if(w==":")return M(Ct);if(N=="?")return M(Fe)}}function wt(w,N){if(b&&(w==":"||N=="in"))return M(Ct)}function Ei(w){if(b&&w==":")return H.stream.match(/^\s*\w+\s+is\b/,!1)?M(Rt,Re,Ct):M(Ct)}function Re(w,N){if(N=="is")return H.marked="keyword",M()}function Ct(w,N){if(N=="keyof"||N=="typeof"||N=="infer"||N=="readonly")return H.marked="keyword",M(N=="typeof"?ce:Ct);if(w=="variable"||N=="void")return H.marked="type",M(Ge);if(N=="|"||N=="&")return M(Ct);if(w=="string"||w=="number"||w=="atom")return M(Ge);if(w=="[")return M(ut("]"),mt(Ct,"]",","),xt,Ge);if(w=="{")return M(ut("}"),Fi,xt,Ge);if(w=="(")return M(mt(Ri,")"),fe,Ge);if(w=="<")return M(mt(Ct,">"),Ct);if(w=="quasi")return W(_n,Ge)}function fe(w){if(w=="=>")return M(Ct)}function Fi(w){return w.match(/[\}\)\]]/)?M():w==","||w==";"?M(Fi):W(xe,Fi)}function xe(w,N){if(w=="variable"||H.style=="keyword")return H.marked="property",M(xe);if(N=="?"||w=="number"||w=="string")return M(xe);if(w==":")return M(Ct);if(w=="[")return M(Dt("variable"),wt,Dt("]"),xe);if(w=="(")return W(Ze,xe);if(!w.match(/[;\}\)\],]/))return M()}function _n(w,N){return w!="quasi"?W():N.slice(N.length-2)!="${"?M(_n):M(Ct,Te)}function Te(w){if(w=="}")return H.marked="string-2",H.state.tokenize=Y,M(_n)}function Ri(w,N){return w=="variable"&&H.stream.match(/^\s*[?:]/,!1)||N=="?"?M(Ri):w==":"?M(Ct):w=="spread"?M(Ri):W(Ct)}function Ge(w,N){if(N=="<")return M(ut(">"),mt(Ct,">"),xt,Ge);if(N=="|"||w=="."||N=="&")return M(Ct);if(w=="[")return M(Ct,Dt("]"),Ge);if(N=="extends"||N=="implements")return H.marked="keyword",M(Ct);if(N=="?")return M(Ct,Dt(":"),Ct)}function hi(w,N){if(N=="<")return M(ut(">"),mt(Ct,">"),xt,Ge)}function qn(){return W(Ct,Ls)}function Ls(w,N){if(N=="=")return M(Ct)}function vr(w,N){return N=="enum"?(H.marked="keyword",M(kn)):W(He,Fe,xn,br)}function He(w,N){if(b&&F(N))return H.marked="keyword",M(He);if(w=="variable")return Ft(N),M();if(w=="spread")return M(He);if(w=="[")return Qt(yr,"]");if(w=="{")return Qt(Ns,"}")}function Ns(w,N){return w=="variable"&&!H.stream.match(/^\s*:/,!1)?(Ft(N),M(xn)):(w=="variable"&&(H.marked="property"),w=="spread"?M(He):w=="}"?W():w=="["?M(Rt,Dt("]"),Dt(":"),Ns):M(Dt(":"),He,xn))}function yr(){return W(He,xn)}function xn(w,N){if(N=="=")return M(ce)}function br(w){if(w==",")return M(vr)}function Ds(w,N){if(w=="keyword b"&&N=="else")return M(ut("form","else"),zt,xt)}function Os(w,N){if(N=="await")return M(Os);if(w=="(")return M(ut(")"),_r,xt)}function _r(w){return w=="var"?M(vr,Gn):w=="variable"?M(Gn):W(Gn)}function Gn(w,N){return w==")"?M():w==";"?M(Gn):N=="in"||N=="of"?(H.marked="keyword",M(Rt,Gn)):W(Rt,Gn)}function sn(w,N){if(N=="*")return H.marked="keyword",M(sn);if(w=="variable")return Ft(N),M(sn);if(w=="(")return M(pt,ut(")"),mt(In,")"),xt,Ei,zt,Mt);if(b&&N=="<")return M(ut(">"),mt(qn,">"),xt,sn)}function Ze(w,N){if(N=="*")return H.marked="keyword",M(Ze);if(w=="variable")return Ft(N),M(Ze);if(w=="(")return M(pt,ut(")"),mt(In,")"),xt,Ei,Mt);if(b&&N=="<")return M(ut(">"),mt(qn,">"),xt,Ze)}function As(w,N){if(w=="keyword"||w=="variable")return H.marked="type",M(As);if(N=="<")return M(ut(">"),mt(qn,">"),xt)}function In(w,N){return N=="@"&&M(Rt,In),w=="spread"?M(In):b&&F(N)?(H.marked="keyword",M(In)):b&&w=="this"?M(Fe,xn):W(He,Fe,xn)}function Hi(w,N){return w=="variable"?zi(w,N):hn(w,N)}function zi(w,N){if(w=="variable")return Ft(N),M(hn)}function hn(w,N){if(N=="<")return M(ut(">"),mt(qn,">"),xt,hn);if(N=="extends"||N=="implements"||b&&w==",")return N=="implements"&&(H.marked="keyword"),M(b?Ct:Rt,hn);if(w=="{")return M(ut("}"),dn,xt)}function dn(w,N){if(w=="async"||w=="variable"&&(N=="static"||N=="get"||N=="set"||b&&F(N))&&H.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return H.marked="keyword",M(dn);if(w=="variable"||H.style=="keyword")return H.marked="property",M(Je,dn);if(w=="number"||w=="string")return M(Je,dn);if(w=="[")return M(Rt,Fe,Dt("]"),Je,dn);if(N=="*")return H.marked="keyword",M(dn);if(b&&w=="(")return W(Ze,dn);if(w==";"||w==",")return M(dn);if(w=="}")return M();if(N=="@")return M(Rt,dn)}function Je(w,N){if(N=="!"||N=="?")return M(Je);if(w==":")return M(Ct,xn);if(N=="=")return M(ce);var U=H.state.lexical.prev,J=U&&U.info=="interface";return W(J?Ze:sn)}function xr(w,N){return N=="*"?(H.marked="keyword",M(Ye,Dt(";"))):N=="default"?(H.marked="keyword",M(Rt,Dt(";"))):w=="{"?M(mt(wr,"}"),Ye,Dt(";")):W(zt)}function wr(w,N){if(N=="as")return H.marked="keyword",M(Dt("variable"));if(w=="variable")return W(ce,wr)}function re(w){return w=="string"?M():w=="("?W(Rt):w=="."?W(ue):W(bt,wn,Ye)}function bt(w,N){return w=="{"?Qt(bt,"}"):(w=="variable"&&Ft(N),N=="*"&&(H.marked="keyword"),M(kr))}function wn(w){if(w==",")return M(bt,wn)}function kr(w,N){if(N=="as")return H.marked="keyword",M(bt)}function Ye(w,N){if(N=="from")return H.marked="keyword",M(Rt)}function jt(w){return w=="]"?M():W(mt(ce,"]"))}function kn(){return W(ut("form"),He,Dt("{"),ut("}"),mt(di,"}"),xt,xt)}function di(){return W(He,xn)}function Sr(w,N){return w.lastType=="operator"||w.lastType==","||C.test(N.charAt(0))||/[,.]/.test(N.charAt(0))}function X(w,N,U){return N.tokenize==it&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(N.lastType)||N.lastType=="quasi"&&/\{\s*$/.test(w.string.slice(0,w.pos-(U||0)))}return{startState:function(w){var N={tokenize:it,lastType:"sof",cc:[],lexical:new ot((w||0)-u,0,"block",!1),localVars:l.localVars,context:l.localVars&&new K(null,null,!1),indented:w||0};return l.globalVars&&typeof l.globalVars=="object"&&(N.globalVars=l.globalVars),N},token:function(w,N){if(w.sol()&&(N.lexical.hasOwnProperty("align")||(N.lexical.align=!1),N.indented=w.indentation(),G(w,N)),N.tokenize!=j&&w.eatSpace())return null;var U=N.tokenize(w,N);return D=="comment"?U:(N.lastType=D=="operator"&&(E=="++"||E=="--")?"incdec":D,rt(N,U,D,E,w))},indent:function(w,N){if(w.tokenize==j||w.tokenize==Y)return n.Pass;if(w.tokenize!=it)return 0;var U=N&&N.charAt(0),J=w.lexical,Tt;if(!/^\s*else\b/.test(N))for(var Ht=w.cc.length-1;Ht>=0;--Ht){var gt=w.cc[Ht];if(gt==xt)J=J.prev;else if(gt!=Ds&&gt!=Mt)break}for(;(J.type=="stat"||J.type=="form")&&(U=="}"||(Tt=w.cc[w.cc.length-1])&&(Tt==ue||Tt==Ie)&&!/^[,\.=+\-*:?[\(]/.test(N));)J=J.prev;f&&J.type==")"&&J.prev.type=="stat"&&(J=J.prev);var Me=J.type,Qe=U==Me;return Me=="vardef"?J.indented+(w.lastType=="operator"||w.lastType==","?J.info.length+1:0):Me=="form"&&U=="{"?J.indented:Me=="form"?J.indented+u:Me=="stat"?J.indented+(Sr(w,N)?f||u:0):J.info=="switch"&&!Qe&&l.doubleIndentSwitch!=!1?J.indented+(/^(?:case|default)\b/.test(N)?u:2*u):J.align?J.column+(Qe?0:1):J.indented+(Qe?0:u)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:p?null:"/*",blockCommentEnd:p?null:"*/",blockCommentContinue:p?null:" * ",lineComment:p?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:p?"json":"javascript",jsonldMode:h,jsonMode:p,expressionAllowed:X,skipExpression:function(w){rt(w,"atom","atom","true",new n.StringStream("",2,null))}}}),n.registerHelper("wordChars","javascript",/[\w$]/),n.defineMIME("text/javascript","javascript"),n.defineMIME("text/ecmascript","javascript"),n.defineMIME("application/javascript","javascript"),n.defineMIME("application/x-javascript","javascript"),n.defineMIME("application/ecmascript","javascript"),n.defineMIME("application/json",{name:"javascript",json:!0}),n.defineMIME("application/x-json",{name:"javascript",json:!0}),n.defineMIME("application/manifest+json",{name:"javascript",json:!0}),n.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),n.defineMIME("text/typescript",{name:"javascript",typescript:!0}),n.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),Xu.exports}im();const rm=[{label:"1 Minute",value:60},{label:"5 Minutes",value:300},{label:"15 Minutes",value:900},{label:"30 Minutes",value:1800},{label:"1 Hour",value:3600},{label:"3 Hours",value:10800},{label:"6 Hours",value:21600},{label:"12 Hours",value:43200},{label:"1 Day",value:86400},{label:"1 Week",value:604800}],sm=({isDarkMode:i})=>{const[e,n]=dt([]),[s,l]=dt(null),[u,f]=dt(!0),[h,p]=dt(null),m=cn(null),b=cn(null),[x,S]=dt(!1),[C,A]=dt(""),[O,D]=dt(""),[E,z]=dt(!1),[it,q]=dt(null),j=async()=>{try{const F=await Wt.getTaskList();n(F),p(null)}catch(F){console.error("Tasks yüklenemedi:",F),p("Failed to load tasks")}finally{f(!1)}},Y=async F=>{try{if(s&&O!==s.script&&!window.confirm("You have unsaved changes. Do you want to discard them?"))return;const K=await Wt.getTaskDetail(F);l(K),D(K.script||""),A(""),S(!1),z(!1)}catch(K){console.error("Task detayı alınamadı:",K)}},Q=async(F,K)=>{try{await Wt.updateTask(F,{enabled:K}),l(Z=>({...Z,enabled:K,script:O})),n(e.map(Z=>Z.id===F?{...Z,enabled:K}:Z))}catch(Z){console.error("Task enable/disable edilemedi:",Z),l(ht=>({...ht,enabled:!K,script:O}))}},G=async(F,K)=>{try{const Z=parseInt(K);await Wt.updateTask(F,{frequency:Z}),l(ht=>({...ht,frequency:Z,script:O})),n(e.map(ht=>ht.id===F?{...ht,frequency:Z}:ht))}catch(Z){console.error("Frequency güncellenemedi:",Z)}},vt=async(F,K)=>{try{await Wt.updateTask(F,{logs:K}),l(Z=>({...Z,logs:K,script:O})),n(e.map(Z=>Z.id===F?{...Z,logs:K}:Z))}catch(Z){console.error("Log ayarı güncellenemedi:",Z),l(ht=>({...ht,logs:!K,script:O}))}};Kt(()=>{(async()=>{await Promise.all([j(),qt()])})();const K=setInterval(qt,3e3);return()=>clearInterval(K)},[]),Kt(()=>{if(s&&m.current){b.current&&b.current.toTextArea(),b.current=Cs.fromTextArea(m.current,{mode:"haxe",theme:i?"monokai":"default",lineNumbers:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0,readOnly:!1,autofocus:!0}),D(s.script||""),b.current.setValue(s.script||"");const F=K=>{const Z=K.getValue();D(Z)};return b.current.on("change",F),()=>{b.current&&(b.current.off("change",F),b.current.toTextArea(),b.current=null)}}},[s,i]);const ot=F=>F?new Date(F).toLocaleString():"Never",tt=async()=>{try{const F=O;l(K=>({...K,output:""})),await Wt.executeScriptStream(F,K=>{l(Z=>({...Z,output:Z.output?Z.output+K:K,script:O}))})}catch(F){console.error("Script çalıştırılamadı:",F),l(K=>({...K,output:`Error: ${F.message}`,script:O}))}},rt=async()=>{try{await Wt.updateTask(s.id,{script:O}),l(F=>({...F,script:O,output:"Task saved successfully!"})),n(e.map(F=>F.id===s.id?{...F,script:O}:F))}catch(F){console.error("Script kaydedilemedi:",F);let K=F.message;K.includes("rulescript:")&&(K=K.split(`
`)[0].replace("rulescript:","Line ").replace("Unexpected token:","Syntax error:")),l(Z=>({...Z,output:`Error saving task: ${K}`}))}},H=()=>{A(s.name),S(!0)},W=async()=>{try{await Wt.updateTask(s.id,{name:C}),l(F=>({...F,name:C,script:O})),n(e.map(F=>F.id===s.id?{...F,name:C}:F)),S(!1)}catch(F){console.error("İsim güncellenemedi:",F)}},M=async()=>{try{const F=await Wt.createTask("New Task");n([...e,F]),l(F)}catch(F){console.error("Task oluşturulamadı:",F)}},Lt=async(F,K)=>{if(K.stopPropagation(),!!window.confirm("Are you sure you want to delete this task?"))try{(await Wt.deleteTask(F)).success&&(n(ht=>ht.filter(pt=>pt.id!==F)),(s==null?void 0:s.id)===F&&(l(null),D(""),b.current&&b.current.setValue("")))}catch(Z){console.error("Task silinemedi:",Z),alert("Failed to delete task: "+Z.message)}},Ft=async()=>{if(s)try{z(!0),l(F=>({...F,logContent:"",output:F.output})),await Wt.streamTaskLog(s.id,F=>{l(K=>({...K,logContent:(K.logContent||"")+F}))})}catch(F){console.error("Loglar alınamadı:",F),l(K=>({...K,logContent:`Error loading logs: ${F.message}`}))}},qt=async()=>{try{const F=await Wt.getTaskStatus(),K=F.find(Z=>Z.status===1);if(q(K||null),n(Z=>Z.map(ht=>{const pt=F.find(ct=>ct.id===ht.id);return pt?{...ht,lastRun:pt.lastRun,status:pt.status}:ht})),s){const Z=F.find(ht=>ht.id===s.id);Z&&l(ht=>({...ht,lastRun:Z.lastRun,status:Z.status,script:O}))}}catch(F){console.error("Task status alınamadı:",F),q(null)}};return k("div",{className:`scheduler ${i?"dark":""}`,children:[k("div",{className:"task-list",children:[k("div",{className:"task-list-header",children:[k("h2",{children:"Tasks"}),k("div",{className:"task-list-actions",children:[k("button",{className:"create-task",onClick:M,title:"Create New Task",children:"+"}),k("button",{onClick:j,className:"refresh-button",title:"Refresh Tasks",children:"🔄"})]})]}),u?k("div",{className:"loading",children:"Loading tasks..."}):h?k("div",{className:"error",children:h}):k("div",{className:"task-items",children:e.map(F=>k("div",{className:`task-item ${(s==null?void 0:s.id)===F.id?"selected":""} ${(it==null?void 0:it.id)===F.id?"running":""}`,onClick:()=>Y(F.id),children:[k("div",{className:"task-item-header",children:[k("span",{className:"task-name",children:F.name}),k("div",{className:"task-item-actions",children:[k("label",{className:"task-enabled-toggle",onClick:K=>K.stopPropagation(),children:[k("input",{type:"checkbox",checked:F.enabled,onChange:K=>{K.stopPropagation(),Q(F.id,!F.enabled)}}),k("span",{className:"checkmark"})]}),k("button",{className:"delete-task",onClick:K=>Lt(F.id,K),title:"Delete Task",children:"×"})]})]}),k("div",{className:"task-item-footer",children:k("span",{className:"task-last-run",children:["Last Run: ",ot(F.lastRun)]})})]},F.id))})]}),k("div",{className:"task-detail",children:s?k(je,{children:[k("div",{className:"task-header",children:x?k("div",{className:"name-edit",children:[k("input",{type:"text",value:C,onChange:F=>A(F.target.value),onKeyDown:F=>{F.key==="Enter"&&W(),F.key==="Escape"&&S(!1)},autoFocus:!0}),k("button",{className:"name-save",onClick:W,children:"✓"}),k("button",{className:"name-cancel",onClick:()=>S(!1),children:"✕"})]}):k("h2",{onClick:H,children:s.name})}),k("div",{className:"script-section",children:[k("div",{className:"script-header",children:[k("h3",{children:"Script"}),k("div",{className:"script-actions",children:[k("button",{className:"script-button try",onClick:tt,children:"Try"}),k("button",{className:"script-button save",onClick:rt,children:"Save"}),k("button",{className:"script-button logs",onClick:Ft,children:"Logs"})]})]}),k("div",{className:"editor-container",children:k("textarea",{ref:m})}),s.output&&k("div",{className:"script-output",children:[k("div",{className:"output-header",children:[k("h3",{children:"Output"}),k("button",{className:"close-output",onClick:()=>l(F=>({...F,output:null})),children:"×"})]}),k("pre",{className:"output-content",children:s.output})]}),E&&s.logContent&&k("div",{className:"script-output logs",children:[k("div",{className:"output-header",children:[k("h3",{children:"Logs"}),k("button",{className:"close-output",onClick:()=>{z(!1),l(F=>({...F,logContent:null}))},children:"×"})]}),k("pre",{className:"output-content",children:s.logContent})]})]}),k("div",{className:"detail-section",children:[k("div",{className:"detail-row",children:[k("span",{children:"Status:"}),k("span",{className:`status-${s.status}`,children:s.enabled?"Enabled":"Disabled"})]}),k("div",{className:"detail-row",children:[k("span",{children:"Created:"}),k("span",{children:ot(s.createdAt)})]}),k("div",{className:"detail-row",children:[k("span",{children:"Last Run:"}),k("span",{children:ot(s.lastRun)})]}),k("div",{className:"detail-row",children:[k("span",{children:"Frequency:"}),k("select",{className:"frequency-select",value:s.frequency,onChange:F=>G(s.id,F.target.value),children:rm.map(F=>k("option",{value:F.value,children:F.label},F.value))})]}),k("div",{className:"detail-row",children:[k("span",{children:"Success/Failed:"}),k("span",{children:[s.success,"/",s.failed]})]}),k("div",{className:"detail-row",children:[k("span",{children:"Save Logs:"}),k("label",{className:"task-logs-toggle",children:[k("input",{type:"checkbox",checked:s.logs,onChange:()=>vt(s.id,!s.logs)}),k("span",{className:"checkmark"})]})]})]})]}):k("div",{className:"no-selection",children:"Select a task to view details"})})]})},Gu={tr:{run:"▶ Execute",placeholder:"// HScript kodunuzu buraya yazın",executedCode:"Çalıştırılan kod:",result:"Sonuç:"},en:{run:"▶ Run",placeholder:"// Write your HScript code here",executedCode:"Executed code:",result:"Result:"}},om=({isDarkMode:i,language:e="en"})=>{const[n,s]=dt('sceKernelSendNotificationRequest("Hello World");'),[l,u]=dt(""),f=cn(null),h=cn(null),p=Gu[e]||Gu.en;return Kt(()=>{if(!h.current&&f.current){const b=document.createElement("textarea");f.current.appendChild(b),h.current=Cs.fromTextArea(b,{value:n,mode:"haxe",theme:i?"monokai":"default",lineNumbers:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0,placeholder:p.placeholder}),h.current.on("change",x=>{s(x.getValue())}),h.current.setValue(n)}return()=>{h.current&&(h.current.toTextArea(),h.current=null)}},[]),Kt(()=>{h.current&&h.current.setOption("theme",i?"monokai":"default")},[i]),k("div",{className:`script-editor ${i?"dark":""}`,children:k("div",{className:"script-content",children:[k("div",{className:"editor-container",ref:f}),k("div",{className:"script-output",children:[k("div",{className:"output-toolbar",children:k("button",{className:"run-btn",onClick:async()=>{u("");try{await Wt.executeScriptStream(n,b=>{u(x=>x+b)})}catch(b){u("Error: "+b.message)}},children:p.run})}),k("div",{className:"output-content",children:k("pre",{children:typeof l=="string"?l:JSON.stringify(l,null,2)})})]})]})})};function Rh(i,e){for(var n in e)i[n]=e[n];return i}function el(i,e){for(var n in i)if(n!=="__source"&&!(n in e))return!0;for(var s in e)if(s!=="__source"&&i[s]!==e[s])return!0;return!1}function Hh(i,e){var n=e(),s=dt({t:{__:n,u:e}}),l=s[0].t,u=s[1];return Ss(function(){l.__=n,l.u=e,Wa(l)&&u({t:l})},[i,n,e]),Kt(function(){return Wa(l)&&u({t:l}),i(function(){Wa(l)&&u({t:l})})},[i]),n}function Wa(i){var e,n,s=i.u,l=i.__;try{var u=s();return!((e=l)===(n=u)&&(e!==0||1/e==1/n)||e!=e&&n!=n)}catch{return!0}}function zh(i){i()}function Wh(i){return i}function Bh(){return[!1,zh]}var Uh=Ss;function nl(i,e){this.props=i,this.context=e}function am(i,e){function n(l){var u=this.props.ref,f=u==l.ref;return!f&&u&&(u.call?u(null):u.current=null),e?!e(this.props,l)||!f:el(this.props,l)}function s(l){return this.shouldComponentUpdate=n,Vn(i,l)}return s.displayName="Memo("+(i.displayName||i.name)+")",s.prototype.isReactComponent=!0,s.__f=!0,s}(nl.prototype=new On).isPureReactComponent=!0,nl.prototype.shouldComponentUpdate=function(i,e){return el(this.props,i)||el(this.state,e)};var Zu=Et.__b;Et.__b=function(i){i.type&&i.type.__f&&i.ref&&(i.props.ref=i.ref,i.ref=null),Zu&&Zu(i)};var lm=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function xl(i){function e(n){var s=Rh({},n);return delete s.ref,i(s,n.ref||null)}return e.$$typeof=lm,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(i.displayName||i.name)+")",e}var Ju=function(i,e){return i==null?null:Kn(Kn(i).map(e))},cm={map:Ju,forEach:Ju,count:function(i){return i?Kn(i).length:0},only:function(i){var e=Kn(i);if(e.length!==1)throw"Children.only";return e[0]},toArray:Kn},um=Et.__e;Et.__e=function(i,e,n,s){if(i.then){for(var l,u=e;u=u.__;)if((l=u.__c)&&l.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),l.__c(i,e)}um(i,e,n,s)};var Qu=Et.unmount;function $h(i,e,n){return i&&(i.__c&&i.__c.__H&&(i.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),i.__c.__H=null),(i=Rh({},i)).__c!=null&&(i.__c.__P===n&&(i.__c.__P=e),i.__c=null),i.__k=i.__k&&i.__k.map(function(s){return $h(s,e,n)})),i}function jh(i,e,n){return i&&n&&(i.__v=null,i.__k=i.__k&&i.__k.map(function(s){return jh(s,e,n)}),i.__c&&i.__c.__P===e&&(i.__e&&n.appendChild(i.__e),i.__c.__e=!0,i.__c.__P=n)),i}function To(){this.__u=0,this.o=null,this.__b=null}function Yh(i){var e=i.__.__c;return e&&e.__a&&e.__a(i)}function fm(i){var e,n,s;function l(u){if(e||(e=i()).then(function(f){n=f.default||f},function(f){s=f}),s)throw s;if(!n)throw e;return Vn(n,u)}return l.displayName="Lazy",l.__f=!0,l}function is(){this.i=null,this.l=null}Et.unmount=function(i){var e=i.__c;e&&e.__R&&e.__R(),e&&32&i.__u&&(i.type=null),Qu&&Qu(i)},(To.prototype=new On).__c=function(i,e){var n=e.__c,s=this;s.o==null&&(s.o=[]),s.o.push(n);var l=Yh(s.__v),u=!1,f=function(){u||(u=!0,n.__R=null,l?l(h):h())};n.__R=f;var h=function(){if(!--s.__u){if(s.state.__a){var p=s.state.__a;s.__v.__k[0]=jh(p,p.__c.__P,p.__c.__O)}var m;for(s.setState({__a:s.__b=null});m=s.o.pop();)m.forceUpdate()}};s.__u++||32&e.__u||s.setState({__a:s.__b=s.__v.__k[0]}),i.then(f,f)},To.prototype.componentWillUnmount=function(){this.o=[]},To.prototype.render=function(i,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=$h(this.__b,n,s.__O=s.__P)}this.__b=null}var l=e.__a&&Vn(je,null,i.fallback);return l&&(l.__u&=-33),[Vn(je,null,e.__a?null:i.children),l]};var tf=function(i,e,n){if(++n[1]===n[0]&&i.l.delete(e),i.props.revealOrder&&(i.props.revealOrder[0]!=="t"||!i.l.size))for(n=i.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;i.i=n=n[2]}};function hm(i){return this.getChildContext=function(){return i.context},i.children}function dm(i){var e=this,n=i.h;e.componentWillUnmount=function(){ur(null,e.v),e.v=null,e.h=null},e.h&&e.h!==n&&e.componentWillUnmount(),e.v||(e.h=n,e.v={nodeType:1,parentNode:n,childNodes:[],contains:function(){return!0},appendChild:function(s){this.childNodes.push(s),e.h.appendChild(s)},insertBefore:function(s,l){this.childNodes.push(s),e.h.insertBefore(s,l)},removeChild:function(s){this.childNodes.splice(this.childNodes.indexOf(s)>>>1,1),e.h.removeChild(s)}}),ur(Vn(hm,{context:e.context},i.__v),e.v)}function pm(i,e){var n=Vn(dm,{__v:i,h:e});return n.containerInfo=e,n}(is.prototype=new On).__a=function(i){var e=this,n=Yh(e.__v),s=e.l.get(i);return s[0]++,function(l){var u=function(){e.props.revealOrder?(s.push(l),tf(e,i,s)):l()};n?n(u):u()}},is.prototype.render=function(i){this.i=null,this.l=new Map;var e=Kn(i.children);i.revealOrder&&i.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return i.children},is.prototype.componentDidUpdate=is.prototype.componentDidMount=function(){var i=this;this.l.forEach(function(e,n){tf(i,n,e)})};var Kh=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,gm=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,mm=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,vm=/[A-Z0-9]/g,ym=typeof document<"u",bm=function(i){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(i)};function _m(i,e,n){return e.__k==null&&(e.textContent=""),ur(i,e),typeof n=="function"&&n(),i?i.__c:null}function xm(i,e,n){return Mh(i,e),typeof n=="function"&&n(),i?i.__c:null}On.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(i){Object.defineProperty(On.prototype,i,{configurable:!0,get:function(){return this["UNSAFE_"+i]},set:function(e){Object.defineProperty(this,i,{configurable:!0,writable:!0,value:e})}})});var ef=Et.event;function wm(){}function km(){return this.cancelBubble}function Sm(){return this.defaultPrevented}Et.event=function(i){return ef&&(i=ef(i)),i.persist=wm,i.isPropagationStopped=km,i.isDefaultPrevented=Sm,i.nativeEvent=i};var wl,Cm={enumerable:!1,configurable:!0,get:function(){return this.class}},nf=Et.vnode;Et.vnode=function(i){typeof i.type=="string"&&function(e){var n=e.props,s=e.type,l={},u=s.indexOf("-")===-1;for(var f in n){var h=n[f];if(!(f==="value"&&"defaultValue"in n&&h==null||ym&&f==="children"&&s==="noscript"||f==="class"||f==="className")){var p=f.toLowerCase();f==="defaultValue"&&"value"in n&&n.value==null?f="value":f==="download"&&h===!0?h="":p==="translate"&&h==="no"?h=!1:p[0]==="o"&&p[1]==="n"?p==="ondoubleclick"?f="ondblclick":p!=="onchange"||s!=="input"&&s!=="textarea"||bm(n.type)?p==="onfocus"?f="onfocusin":p==="onblur"?f="onfocusout":mm.test(f)&&(f=p):p=f="oninput":u&&gm.test(f)?f=f.replace(vm,"-$&").toLowerCase():h===null&&(h=void 0),p==="oninput"&&l[f=p]&&(f="oninputCapture"),l[f]=h}}s=="select"&&l.multiple&&Array.isArray(l.value)&&(l.value=Kn(n.children).forEach(function(m){m.props.selected=l.value.indexOf(m.props.value)!=-1})),s=="select"&&l.defaultValue!=null&&(l.value=Kn(n.children).forEach(function(m){m.props.selected=l.multiple?l.defaultValue.indexOf(m.props.value)!=-1:l.defaultValue==m.props.value})),n.class&&!n.className?(l.class=n.class,Object.defineProperty(l,"className",Cm)):(n.className&&!n.class||n.class&&n.className)&&(l.class=l.className=n.className),e.props=l}(i),i.$$typeof=Kh,nf&&nf(i)};var rf=Et.__r;Et.__r=function(i){rf&&rf(i),wl=i.__c};var sf=Et.diffed;Et.diffed=function(i){sf&&sf(i);var e=i.props,n=i.__e;n!=null&&i.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value),wl=null};var Tm={ReactCurrentDispatcher:{current:{readContext:function(i){return wl.__n[i.__c].props.value},useCallback:Dh,useContext:Oh,useDebugValue:Ah,useDeferredValue:Wh,useEffect:Kt,useId:Ph,useImperativeHandle:Nh,useInsertionEffect:Uh,useLayoutEffect:Ss,useMemo:Uo,useReducer:bl,useRef:cn,useState:dt,useSyncExternalStore:Hh,useTransition:Bh}}};function Mm(i){return Vn.bind(null,i)}function $o(i){return!!i&&i.$$typeof===Kh}function Lm(i){return $o(i)&&i.type===je}function Nm(i){return!!i&&!!i.displayName&&(typeof i.displayName=="string"||i.displayName instanceof String)&&i.displayName.startsWith("Memo(")}function Dm(i){return $o(i)?Wg.apply(null,arguments):i}function Om(i){return!!i.__k&&(ur(null,i),!0)}function Am(i){return i&&(i.base||i.nodeType===1&&i)||null}var Pm=function(i,e){return i(e)},Im=function(i,e){return i(e)},Em=je,Fm=$o,Vh={useState:dt,useId:Ph,useReducer:bl,useEffect:Kt,useLayoutEffect:Ss,useInsertionEffect:Uh,useTransition:Bh,useDeferredValue:Wh,useSyncExternalStore:Hh,startTransition:zh,useRef:cn,useImperativeHandle:Nh,useMemo:Uo,useCallback:Dh,useContext:Oh,useDebugValue:Ah,version:"18.3.1",Children:cm,render:_m,hydrate:xm,unmountComponentAtNode:Om,createPortal:pm,createElement:Vn,createContext:Bg,createFactory:Mm,cloneElement:Dm,createRef:Eg,Fragment:je,isValidElement:$o,isElement:Fm,isFragment:Lm,isMemo:Nm,findDOMNode:Am,Component:On,PureComponent:nl,memo:am,forwardRef:xl,flushSync:Im,unstable_batchedUpdates:Pm,StrictMode:Em,Suspense:To,SuspenseList:is,lazy:fm,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Tm};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ts(i){return i+.5|0}const li=(i,e,n)=>Math.max(Math.min(i,n),e);function rs(i){return li(Ts(i*2.55),0,255)}function ci(i){return li(Ts(i*255),0,255)}function jn(i){return li(Ts(i/2.55)/100,0,1)}function of(i){return li(Ts(i*100),0,100)}const on={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},il=[..."0123456789ABCDEF"],Rm=i=>il[i&15],Hm=i=>il[(i&240)>>4]+il[i&15],co=i=>(i&240)>>4===(i&15),zm=i=>co(i.r)&&co(i.g)&&co(i.b)&&co(i.a);function Wm(i){var e=i.length,n;return i[0]==="#"&&(e===4||e===5?n={r:255&on[i[1]]*17,g:255&on[i[2]]*17,b:255&on[i[3]]*17,a:e===5?on[i[4]]*17:255}:(e===7||e===9)&&(n={r:on[i[1]]<<4|on[i[2]],g:on[i[3]]<<4|on[i[4]],b:on[i[5]]<<4|on[i[6]],a:e===9?on[i[7]]<<4|on[i[8]]:255})),n}const Bm=(i,e)=>i<255?e(i):"";function Um(i){var e=zm(i)?Rm:Hm;return i?"#"+e(i.r)+e(i.g)+e(i.b)+Bm(i.a,e):void 0}const $m=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Xh(i,e,n){const s=e*Math.min(n,1-n),l=(u,f=(u+i/30)%12)=>n-s*Math.max(Math.min(f-3,9-f,1),-1);return[l(0),l(8),l(4)]}function jm(i,e,n){const s=(l,u=(l+i/60)%6)=>n-n*e*Math.max(Math.min(u,4-u,1),0);return[s(5),s(3),s(1)]}function Ym(i,e,n){const s=Xh(i,1,.5);let l;for(e+n>1&&(l=1/(e+n),e*=l,n*=l),l=0;l<3;l++)s[l]*=1-e-n,s[l]+=e;return s}function Km(i,e,n,s,l){return i===l?(e-n)/s+(e<n?6:0):e===l?(n-i)/s+2:(i-e)/s+4}function kl(i){const n=i.r/255,s=i.g/255,l=i.b/255,u=Math.max(n,s,l),f=Math.min(n,s,l),h=(u+f)/2;let p,m,b;return u!==f&&(b=u-f,m=h>.5?b/(2-u-f):b/(u+f),p=Km(n,s,l,b,u),p=p*60+.5),[p|0,m||0,h]}function Sl(i,e,n,s){return(Array.isArray(e)?i(e[0],e[1],e[2]):i(e,n,s)).map(ci)}function Cl(i,e,n){return Sl(Xh,i,e,n)}function Vm(i,e,n){return Sl(Ym,i,e,n)}function Xm(i,e,n){return Sl(jm,i,e,n)}function qh(i){return(i%360+360)%360}function qm(i){const e=$m.exec(i);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?rs(+e[5]):ci(+e[5]));const l=qh(+e[2]),u=+e[3]/100,f=+e[4]/100;return e[1]==="hwb"?s=Vm(l,u,f):e[1]==="hsv"?s=Xm(l,u,f):s=Cl(l,u,f),{r:s[0],g:s[1],b:s[2],a:n}}function Gm(i,e){var n=kl(i);n[0]=qh(n[0]+e),n=Cl(n),i.r=n[0],i.g=n[1],i.b=n[2]}function Zm(i){if(!i)return;const e=kl(i),n=e[0],s=of(e[1]),l=of(e[2]);return i.a<255?`hsla(${n}, ${s}%, ${l}%, ${jn(i.a)})`:`hsl(${n}, ${s}%, ${l}%)`}const af={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},lf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Jm(){const i={},e=Object.keys(lf),n=Object.keys(af);let s,l,u,f,h;for(s=0;s<e.length;s++){for(f=h=e[s],l=0;l<n.length;l++)u=n[l],h=h.replace(u,af[u]);u=parseInt(lf[f],16),i[h]=[u>>16&255,u>>8&255,u&255]}return i}let uo;function Qm(i){uo||(uo=Jm(),uo.transparent=[0,0,0,0]);const e=uo[i.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const tv=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ev(i){const e=tv.exec(i);let n=255,s,l,u;if(e){if(e[7]!==s){const f=+e[7];n=e[8]?rs(f):li(f*255,0,255)}return s=+e[1],l=+e[3],u=+e[5],s=255&(e[2]?rs(s):li(s,0,255)),l=255&(e[4]?rs(l):li(l,0,255)),u=255&(e[6]?rs(u):li(u,0,255)),{r:s,g:l,b:u,a:n}}}function nv(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${jn(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const Ba=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,ar=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function iv(i,e,n){const s=ar(jn(i.r)),l=ar(jn(i.g)),u=ar(jn(i.b));return{r:ci(Ba(s+n*(ar(jn(e.r))-s))),g:ci(Ba(l+n*(ar(jn(e.g))-l))),b:ci(Ba(u+n*(ar(jn(e.b))-u))),a:i.a+n*(e.a-i.a)}}function fo(i,e,n){if(i){let s=kl(i);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=Cl(s),i.r=s[0],i.g=s[1],i.b=s[2]}}function Gh(i,e){return i&&Object.assign(e||{},i)}function cf(i){var e={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(e={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(e.a=ci(i[3]))):(e=Gh(i,{r:0,g:0,b:0,a:1}),e.a=ci(e.a)),e}function rv(i){return i.charAt(0)==="r"?ev(i):qm(i)}class vs{constructor(e){if(e instanceof vs)return e;const n=typeof e;let s;n==="object"?s=cf(e):n==="string"&&(s=Wm(e)||Qm(e)||rv(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=Gh(this._rgb);return e&&(e.a=jn(e.a)),e}set rgb(e){this._rgb=cf(e)}rgbString(){return this._valid?nv(this._rgb):void 0}hexString(){return this._valid?Um(this._rgb):void 0}hslString(){return this._valid?Zm(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,l=e.rgb;let u;const f=n===u?.5:n,h=2*f-1,p=s.a-l.a,m=((h*p===-1?h:(h+p)/(1+h*p))+1)/2;u=1-m,s.r=255&m*s.r+u*l.r+.5,s.g=255&m*s.g+u*l.g+.5,s.b=255&m*s.b+u*l.b+.5,s.a=f*s.a+(1-f)*l.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=iv(this._rgb,e._rgb,n)),this}clone(){return new vs(this.rgb)}alpha(e){return this._rgb.a=ci(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ts(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return fo(this._rgb,2,e),this}darken(e){return fo(this._rgb,2,-e),this}saturate(e){return fo(this._rgb,1,e),this}desaturate(e){return fo(this._rgb,1,-e),this}rotate(e){return Gm(this._rgb,e),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function Bn(){}const sv=(()=>{let i=0;return()=>i++})();function le(i){return i==null}function Se(i){if(Array.isArray&&Array.isArray(i))return!0;const e=Object.prototype.toString.call(i);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Vt(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function un(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function Ln(i,e){return un(i)?i:e}function Bt(i,e){return typeof i>"u"?e:i}const ov=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*e:+i;function ee(i,e,n){if(i&&typeof i.call=="function")return i.apply(n,e)}function Gt(i,e,n,s){let l,u,f;if(Se(i))for(u=i.length,l=0;l<u;l++)e.call(n,i[l],l);else if(Vt(i))for(f=Object.keys(i),u=f.length,l=0;l<u;l++)e.call(n,i[f[l]],f[l])}function Po(i,e){let n,s,l,u;if(!i||!e||i.length!==e.length)return!1;for(n=0,s=i.length;n<s;++n)if(l=i[n],u=e[n],l.datasetIndex!==u.datasetIndex||l.index!==u.index)return!1;return!0}function Io(i){if(Se(i))return i.map(Io);if(Vt(i)){const e=Object.create(null),n=Object.keys(i),s=n.length;let l=0;for(;l<s;++l)e[n[l]]=Io(i[n[l]]);return e}return i}function Zh(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function av(i,e,n,s){if(!Zh(i))return;const l=e[i],u=n[i];Vt(l)&&Vt(u)?ys(l,u,s):e[i]=Io(u)}function ys(i,e,n){const s=Se(e)?e:[e],l=s.length;if(!Vt(i))return i;n=n||{};const u=n.merger||av;let f;for(let h=0;h<l;++h){if(f=s[h],!Vt(f))continue;const p=Object.keys(f);for(let m=0,b=p.length;m<b;++m)u(p[m],i,f,n)}return i}function us(i,e){return ys(i,e,{merger:lv})}function lv(i,e,n){if(!Zh(i))return;const s=e[i],l=n[i];Vt(s)&&Vt(l)?us(s,l):Object.prototype.hasOwnProperty.call(e,i)||(e[i]=Io(l))}const uf={"":i=>i,x:i=>i.x,y:i=>i.y};function cv(i){const e=i.split("."),n=[];let s="";for(const l of e)s+=l,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function uv(i){const e=cv(i);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function Eo(i,e){return(uf[e]||(uf[e]=uv(e)))(i)}function Tl(i){return i.charAt(0).toUpperCase()+i.slice(1)}const Fo=i=>typeof i<"u",fi=i=>typeof i=="function",ff=(i,e)=>{if(i.size!==e.size)return!1;for(const n of i)if(!e.has(n))return!1;return!0};function fv(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const Ce=Math.PI,An=2*Ce,hv=An+Ce,Ro=Number.POSITIVE_INFINITY,dv=Ce/180,yn=Ce/2,Si=Ce/4,hf=Ce*2/3,rl=Math.log10,hr=Math.sign;function fs(i,e,n){return Math.abs(i-e)<n}function df(i){const e=Math.round(i);i=fs(i,e,i/1e3)?e:i;const n=Math.pow(10,Math.floor(rl(i))),s=i/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function pv(i){const e=[],n=Math.sqrt(i);let s;for(s=1;s<n;s++)i%s===0&&(e.push(s),e.push(i/s));return n===(n|0)&&e.push(n),e.sort((l,u)=>l-u).pop(),e}function bs(i){return!isNaN(parseFloat(i))&&isFinite(i)}function gv(i,e){const n=Math.round(i);return n-e<=i&&n+e>=i}function mv(i,e,n){let s,l,u;for(s=0,l=i.length;s<l;s++)u=i[s][n],isNaN(u)||(e.min=Math.min(e.min,u),e.max=Math.max(e.max,u))}function Di(i){return i*(Ce/180)}function vv(i){return i*(180/Ce)}function pf(i){if(!un(i))return;let e=1,n=0;for(;Math.round(i*e)/e!==i;)e*=10,n++;return n}function yv(i,e){const n=e.x-i.x,s=e.y-i.y,l=Math.sqrt(n*n+s*s);let u=Math.atan2(s,n);return u<-.5*Ce&&(u+=An),{angle:u,distance:l}}function sl(i,e){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))}function bv(i,e){return(i-e+hv)%An-Ce}function ai(i){return(i%An+An)%An}function Jh(i,e,n,s){const l=ai(i),u=ai(e),f=ai(n),h=ai(u-l),p=ai(f-l),m=ai(l-u),b=ai(l-f);return l===u||l===f||s&&u===f||h>p&&m<b}function an(i,e,n){return Math.max(e,Math.min(n,i))}function _v(i){return an(i,-32768,32767)}function ss(i,e,n,s=1e-6){return i>=Math.min(e,n)-s&&i<=Math.max(e,n)+s}function Ml(i,e,n){n=n||(f=>i[f]<e);let s=i.length-1,l=0,u;for(;s-l>1;)u=l+s>>1,n(u)?l=u:s=u;return{lo:l,hi:s}}const Oi=(i,e,n,s)=>Ml(i,n,s?l=>{const u=i[l][e];return u<n||u===n&&i[l+1][e]===n}:l=>i[l][e]<n),xv=(i,e,n)=>Ml(i,n,s=>i[s][e]>=n);function wv(i,e,n){let s=0,l=i.length;for(;s<l&&i[s]<e;)s++;for(;l>s&&i[l-1]>n;)l--;return s>0||l<i.length?i.slice(s,l):i}const Qh=["push","pop","shift","splice","unshift"];function kv(i,e){if(i._chartjs){i._chartjs.listeners.push(e);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Qh.forEach(n=>{const s="_onData"+Tl(n),l=i[n];Object.defineProperty(i,n,{configurable:!0,enumerable:!1,value(...u){const f=l.apply(this,u);return i._chartjs.listeners.forEach(h=>{typeof h[s]=="function"&&h[s](...u)}),f}})})}function gf(i,e){const n=i._chartjs;if(!n)return;const s=n.listeners,l=s.indexOf(e);l!==-1&&s.splice(l,1),!(s.length>0)&&(Qh.forEach(u=>{delete i[u]}),delete i._chartjs)}function Sv(i){const e=new Set(i);return e.size===i.length?i:Array.from(e)}const td=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function ed(i,e){let n=[],s=!1;return function(...l){n=l,s||(s=!0,td.call(window,()=>{s=!1,i.apply(e,n)}))}}function Cv(i,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(i,e,s)):i.apply(this,s),e}}const Ll=i=>i==="start"?"left":i==="end"?"right":"center",Ae=(i,e,n)=>i==="start"?e:i==="end"?n:(e+n)/2,Tv=(i,e,n,s)=>i===(s?"left":"right")?n:i==="center"?(e+n)/2:e;function Mv(i,e,n){const s=e.length;let l=0,u=s;if(i._sorted){const{iScale:f,_parsed:h}=i,p=f.axis,{min:m,max:b,minDefined:x,maxDefined:S}=f.getUserBounds();x&&(l=an(Math.min(Oi(h,p,m).lo,n?s:Oi(e,p,f.getPixelForValue(m)).lo),0,s-1)),S?u=an(Math.max(Oi(h,f.axis,b,!0).hi+1,n?0:Oi(e,p,f.getPixelForValue(b),!0).hi+1),l,s)-l:u=s-l}return{start:l,count:u}}function Lv(i){const{xScale:e,yScale:n,_scaleRanges:s}=i,l={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return i._scaleRanges=l,!0;const u=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,l),u}const ho=i=>i===0||i===1,mf=(i,e,n)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-e)*An/n)),vf=(i,e,n)=>Math.pow(2,-10*i)*Math.sin((i-e)*An/n)+1,hs={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*yn)+1,easeOutSine:i=>Math.sin(i*yn),easeInOutSine:i=>-.5*(Math.cos(Ce*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>ho(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>ho(i)?i:mf(i,.075,.3),easeOutElastic:i=>ho(i)?i:vf(i,.075,.3),easeInOutElastic(i){return ho(i)?i:i<.5?.5*mf(i*2,.1125,.45):.5+.5*vf(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let e=1.70158;return(i/=.5)<1?.5*(i*i*(((e*=1.525)+1)*i-e)):.5*((i-=2)*i*(((e*=1.525)+1)*i+e)+2)},easeInBounce:i=>1-hs.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?hs.easeInBounce(i*2)*.5:hs.easeOutBounce(i*2-1)*.5+.5};function Nl(i){if(i&&typeof i=="object"){const e=i.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function yf(i){return Nl(i)?i:new vs(i)}function Ua(i){return Nl(i)?i:new vs(i).saturate(.5).darken(.1).hexString()}const Nv=["x","y","borderWidth","radius","tension"],Dv=["color","borderColor","backgroundColor"];function Ov(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),i.set("animations",{colors:{type:"color",properties:Dv},numbers:{type:"number",properties:Nv}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Av(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const bf=new Map;function Pv(i,e){e=e||{};const n=i+JSON.stringify(e);let s=bf.get(n);return s||(s=new Intl.NumberFormat(i,e),bf.set(n,s)),s}function nd(i,e,n){return Pv(e,n).format(i)}const id={values(i){return Se(i)?i:""+i},numeric(i,e,n){if(i===0)return"0";const s=this.chart.options.locale;let l,u=i;if(n.length>1){const m=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(m<1e-4||m>1e15)&&(l="scientific"),u=Iv(i,n)}const f=rl(Math.abs(u)),h=isNaN(f)?1:Math.max(Math.min(-1*Math.floor(f),20),0),p={notation:l,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(p,this.options.ticks.format),nd(i,s,p)},logarithmic(i,e,n){if(i===0)return"0";const s=n[e].significand||i/Math.pow(10,Math.floor(rl(i)));return[1,2,3,5,10,15].includes(s)||e>.8*n.length?id.numeric.call(this,i,e,n):""}};function Iv(i,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&i!==Math.floor(i)&&(n=i-Math.floor(i)),n}var rd={formatters:id};function Ev(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:rd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Pi=Object.create(null),ol=Object.create(null);function ds(i,e){if(!e)return i;const n=e.split(".");for(let s=0,l=n.length;s<l;++s){const u=n[s];i=i[u]||(i[u]=Object.create(null))}return i}function $a(i,e,n){return typeof e=="string"?ys(ds(i,e),n):ys(ds(i,""),e)}class Fv{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,l)=>Ua(l.backgroundColor),this.hoverBorderColor=(s,l)=>Ua(l.borderColor),this.hoverColor=(s,l)=>Ua(l.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return $a(this,e,n)}get(e){return ds(this,e)}describe(e,n){return $a(ol,e,n)}override(e,n){return $a(Pi,e,n)}route(e,n,s,l){const u=ds(this,e),f=ds(this,s),h="_"+n;Object.defineProperties(u,{[h]:{value:u[n],writable:!0},[n]:{enumerable:!0,get(){const p=this[h],m=f[l];return Vt(p)?Object.assign({},m,p):Bt(p,m)},set(p){this[h]=p}}})}apply(e){e.forEach(n=>n(this))}}var pe=new Fv({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Ov,Av,Ev]);function Rv(i){return!i||le(i.size)||le(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function _f(i,e,n,s,l){let u=e[l];return u||(u=e[l]=i.measureText(l).width,n.push(l)),u>s&&(s=u),s}function Ci(i,e,n){const s=i.currentDevicePixelRatio,l=n!==0?Math.max(n/2,.5):0;return Math.round((e-l)*s)/s+l}function xf(i,e){!e&&!i||(e=e||i.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,i.width,i.height),e.restore())}function al(i,e,n,s){sd(i,e,n,s,null)}function sd(i,e,n,s,l){let u,f,h,p,m,b,x,S;const C=e.pointStyle,A=e.rotation,O=e.radius;let D=(A||0)*dv;if(C&&typeof C=="object"&&(u=C.toString(),u==="[object HTMLImageElement]"||u==="[object HTMLCanvasElement]")){i.save(),i.translate(n,s),i.rotate(D),i.drawImage(C,-C.width/2,-C.height/2,C.width,C.height),i.restore();return}if(!(isNaN(O)||O<=0)){switch(i.beginPath(),C){default:l?i.ellipse(n,s,l/2,O,0,0,An):i.arc(n,s,O,0,An),i.closePath();break;case"triangle":b=l?l/2:O,i.moveTo(n+Math.sin(D)*b,s-Math.cos(D)*O),D+=hf,i.lineTo(n+Math.sin(D)*b,s-Math.cos(D)*O),D+=hf,i.lineTo(n+Math.sin(D)*b,s-Math.cos(D)*O),i.closePath();break;case"rectRounded":m=O*.516,p=O-m,f=Math.cos(D+Si)*p,x=Math.cos(D+Si)*(l?l/2-m:p),h=Math.sin(D+Si)*p,S=Math.sin(D+Si)*(l?l/2-m:p),i.arc(n-x,s-h,m,D-Ce,D-yn),i.arc(n+S,s-f,m,D-yn,D),i.arc(n+x,s+h,m,D,D+yn),i.arc(n-S,s+f,m,D+yn,D+Ce),i.closePath();break;case"rect":if(!A){p=Math.SQRT1_2*O,b=l?l/2:p,i.rect(n-b,s-p,2*b,2*p);break}D+=Si;case"rectRot":x=Math.cos(D)*(l?l/2:O),f=Math.cos(D)*O,h=Math.sin(D)*O,S=Math.sin(D)*(l?l/2:O),i.moveTo(n-x,s-h),i.lineTo(n+S,s-f),i.lineTo(n+x,s+h),i.lineTo(n-S,s+f),i.closePath();break;case"crossRot":D+=Si;case"cross":x=Math.cos(D)*(l?l/2:O),f=Math.cos(D)*O,h=Math.sin(D)*O,S=Math.sin(D)*(l?l/2:O),i.moveTo(n-x,s-h),i.lineTo(n+x,s+h),i.moveTo(n+S,s-f),i.lineTo(n-S,s+f);break;case"star":x=Math.cos(D)*(l?l/2:O),f=Math.cos(D)*O,h=Math.sin(D)*O,S=Math.sin(D)*(l?l/2:O),i.moveTo(n-x,s-h),i.lineTo(n+x,s+h),i.moveTo(n+S,s-f),i.lineTo(n-S,s+f),D+=Si,x=Math.cos(D)*(l?l/2:O),f=Math.cos(D)*O,h=Math.sin(D)*O,S=Math.sin(D)*(l?l/2:O),i.moveTo(n-x,s-h),i.lineTo(n+x,s+h),i.moveTo(n+S,s-f),i.lineTo(n-S,s+f);break;case"line":f=l?l/2:Math.cos(D)*O,h=Math.sin(D)*O,i.moveTo(n-f,s-h),i.lineTo(n+f,s+h);break;case"dash":i.moveTo(n,s),i.lineTo(n+Math.cos(D)*(l?l/2:O),s+Math.sin(D)*O);break;case!1:i.closePath();break}i.fill(),e.borderWidth>0&&i.stroke()}}function _s(i,e,n){return n=n||.5,!e||i&&i.x>e.left-n&&i.x<e.right+n&&i.y>e.top-n&&i.y<e.bottom+n}function Dl(i,e){i.save(),i.beginPath(),i.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),i.clip()}function Ol(i){i.restore()}function Hv(i,e,n,s,l){if(!e)return i.lineTo(n.x,n.y);if(l==="middle"){const u=(e.x+n.x)/2;i.lineTo(u,e.y),i.lineTo(u,n.y)}else l==="after"!=!!s?i.lineTo(e.x,n.y):i.lineTo(n.x,e.y);i.lineTo(n.x,n.y)}function zv(i,e,n,s){if(!e)return i.lineTo(n.x,n.y);i.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function Wv(i,e){e.translation&&i.translate(e.translation[0],e.translation[1]),le(e.rotation)||i.rotate(e.rotation),e.color&&(i.fillStyle=e.color),e.textAlign&&(i.textAlign=e.textAlign),e.textBaseline&&(i.textBaseline=e.textBaseline)}function Bv(i,e,n,s,l){if(l.strikethrough||l.underline){const u=i.measureText(s),f=e-u.actualBoundingBoxLeft,h=e+u.actualBoundingBoxRight,p=n-u.actualBoundingBoxAscent,m=n+u.actualBoundingBoxDescent,b=l.strikethrough?(p+m)/2:m;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=l.decorationWidth||2,i.moveTo(f,b),i.lineTo(h,b),i.stroke()}}function Uv(i,e){const n=i.fillStyle;i.fillStyle=e.color,i.fillRect(e.left,e.top,e.width,e.height),i.fillStyle=n}function xs(i,e,n,s,l,u={}){const f=Se(e)?e:[e],h=u.strokeWidth>0&&u.strokeColor!=="";let p,m;for(i.save(),i.font=l.string,Wv(i,u),p=0;p<f.length;++p)m=f[p],u.backdrop&&Uv(i,u.backdrop),h&&(u.strokeColor&&(i.strokeStyle=u.strokeColor),le(u.strokeWidth)||(i.lineWidth=u.strokeWidth),i.strokeText(m,n,s,u.maxWidth)),i.fillText(m,n,s,u.maxWidth),Bv(i,n,s,m,u),s+=Number(l.lineHeight);i.restore()}function ll(i,e){const{x:n,y:s,w:l,h:u,radius:f}=e;i.arc(n+f.topLeft,s+f.topLeft,f.topLeft,1.5*Ce,Ce,!0),i.lineTo(n,s+u-f.bottomLeft),i.arc(n+f.bottomLeft,s+u-f.bottomLeft,f.bottomLeft,Ce,yn,!0),i.lineTo(n+l-f.bottomRight,s+u),i.arc(n+l-f.bottomRight,s+u-f.bottomRight,f.bottomRight,yn,0,!0),i.lineTo(n+l,s+f.topRight),i.arc(n+l-f.topRight,s+f.topRight,f.topRight,0,-yn,!0),i.lineTo(n+f.topLeft,s)}const $v=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,jv=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Yv(i,e){const n=(""+i).match($v);if(!n||n[1]==="normal")return e*1.2;switch(i=+n[2],n[3]){case"px":return i;case"%":i/=100;break}return e*i}const Kv=i=>+i||0;function od(i,e){const n={},s=Vt(e),l=s?Object.keys(e):e,u=Vt(i)?s?f=>Bt(i[f],i[e[f]]):f=>i[f]:()=>i;for(const f of l)n[f]=Kv(u(f));return n}function Vv(i){return od(i,{top:"y",right:"x",bottom:"y",left:"x"})}function ps(i){return od(i,["topLeft","topRight","bottomLeft","bottomRight"])}function fn(i){const e=Vv(i);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Pe(i,e){i=i||{},e=e||pe.font;let n=Bt(i.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=Bt(i.style,e.style);s&&!(""+s).match(jv)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const l={family:Bt(i.family,e.family),lineHeight:Yv(Bt(i.lineHeight,e.lineHeight),n),size:n,style:s,weight:Bt(i.weight,e.weight),string:""};return l.string=Rv(l),l}function po(i,e,n,s){let l,u,f;for(l=0,u=i.length;l<u;++l)if(f=i[l],f!==void 0&&f!==void 0)return f}function Xv(i,e,n){const{min:s,max:l}=i,u=ov(e,(l-s)/2),f=(h,p)=>n&&h===0?0:h+p;return{min:f(s,-Math.abs(u)),max:f(l,u)}}function Ii(i,e){return Object.assign(Object.create(i),e)}function Al(i,e=[""],n,s,l=()=>i[0]){const u=n||i;typeof s>"u"&&(s=ud("_fallback",i));const f={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:u,_fallback:s,_getTarget:l,override:h=>Al([h,...i],e,u,s)};return new Proxy(f,{deleteProperty(h,p){return delete h[p],delete h._keys,delete i[0][p],!0},get(h,p){return ld(h,p,()=>ny(p,e,i,h))},getOwnPropertyDescriptor(h,p){return Reflect.getOwnPropertyDescriptor(h._scopes[0],p)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(h,p){return kf(h).includes(p)},ownKeys(h){return kf(h)},set(h,p,m){const b=h._storage||(h._storage=l());return h[p]=b[p]=m,delete h._keys,!0}})}function dr(i,e,n,s){const l={_cacheable:!1,_proxy:i,_context:e,_subProxy:n,_stack:new Set,_descriptors:ad(i,s),setContext:u=>dr(i,u,n,s),override:u=>dr(i.override(u),e,n,s)};return new Proxy(l,{deleteProperty(u,f){return delete u[f],delete i[f],!0},get(u,f,h){return ld(u,f,()=>Gv(u,f,h))},getOwnPropertyDescriptor(u,f){return u._descriptors.allKeys?Reflect.has(i,f)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,f)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(u,f){return Reflect.has(i,f)},ownKeys(){return Reflect.ownKeys(i)},set(u,f,h){return i[f]=h,delete u[f],!0}})}function ad(i,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:l=e.allKeys}=i;return{allKeys:l,scriptable:n,indexable:s,isScriptable:fi(n)?n:()=>n,isIndexable:fi(s)?s:()=>s}}const qv=(i,e)=>i?i+Tl(e):e,Pl=(i,e)=>Vt(e)&&i!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function ld(i,e,n){if(Object.prototype.hasOwnProperty.call(i,e)||e==="constructor")return i[e];const s=n();return i[e]=s,s}function Gv(i,e,n){const{_proxy:s,_context:l,_subProxy:u,_descriptors:f}=i;let h=s[e];return fi(h)&&f.isScriptable(e)&&(h=Zv(e,h,i,n)),Se(h)&&h.length&&(h=Jv(e,h,i,f.isIndexable)),Pl(e,h)&&(h=dr(h,l,u&&u[e],f)),h}function Zv(i,e,n,s){const{_proxy:l,_context:u,_subProxy:f,_stack:h}=n;if(h.has(i))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+i);h.add(i);let p=e(u,f||s);return h.delete(i),Pl(i,p)&&(p=Il(l._scopes,l,i,p)),p}function Jv(i,e,n,s){const{_proxy:l,_context:u,_subProxy:f,_descriptors:h}=n;if(typeof u.index<"u"&&s(i))return e[u.index%e.length];if(Vt(e[0])){const p=e,m=l._scopes.filter(b=>b!==p);e=[];for(const b of p){const x=Il(m,l,i,b);e.push(dr(x,u,f&&f[i],h))}}return e}function cd(i,e,n){return fi(i)?i(e,n):i}const Qv=(i,e)=>i===!0?e:typeof i=="string"?Eo(e,i):void 0;function ty(i,e,n,s,l){for(const u of e){const f=Qv(n,u);if(f){i.add(f);const h=cd(f._fallback,n,l);if(typeof h<"u"&&h!==n&&h!==s)return h}else if(f===!1&&typeof s<"u"&&n!==s)return null}return!1}function Il(i,e,n,s){const l=e._rootScopes,u=cd(e._fallback,n,s),f=[...i,...l],h=new Set;h.add(s);let p=wf(h,f,n,u||n,s);return p===null||typeof u<"u"&&u!==n&&(p=wf(h,f,u,p,s),p===null)?!1:Al(Array.from(h),[""],l,u,()=>ey(e,n,s))}function wf(i,e,n,s,l){for(;n;)n=ty(i,e,n,s,l);return n}function ey(i,e,n){const s=i._getTarget();e in s||(s[e]={});const l=s[e];return Se(l)&&Vt(n)?n:l||{}}function ny(i,e,n,s){let l;for(const u of e)if(l=ud(qv(u,i),n),typeof l<"u")return Pl(i,l)?Il(n,s,i,l):l}function ud(i,e){for(const n of e){if(!n)continue;const s=n[i];if(typeof s<"u")return s}}function kf(i){let e=i._keys;return e||(e=i._keys=iy(i._scopes)),e}function iy(i){const e=new Set;for(const n of i)for(const s of Object.keys(n).filter(l=>!l.startsWith("_")))e.add(s);return Array.from(e)}const ry=Number.EPSILON||1e-14,pr=(i,e)=>e<i.length&&!i[e].skip&&i[e],fd=i=>i==="x"?"y":"x";function sy(i,e,n,s){const l=i.skip?e:i,u=e,f=n.skip?e:n,h=sl(u,l),p=sl(f,u);let m=h/(h+p),b=p/(h+p);m=isNaN(m)?0:m,b=isNaN(b)?0:b;const x=s*m,S=s*b;return{previous:{x:u.x-x*(f.x-l.x),y:u.y-x*(f.y-l.y)},next:{x:u.x+S*(f.x-l.x),y:u.y+S*(f.y-l.y)}}}function oy(i,e,n){const s=i.length;let l,u,f,h,p,m=pr(i,0);for(let b=0;b<s-1;++b)if(p=m,m=pr(i,b+1),!(!p||!m)){if(fs(e[b],0,ry)){n[b]=n[b+1]=0;continue}l=n[b]/e[b],u=n[b+1]/e[b],h=Math.pow(l,2)+Math.pow(u,2),!(h<=9)&&(f=3/Math.sqrt(h),n[b]=l*f*e[b],n[b+1]=u*f*e[b])}}function ay(i,e,n="x"){const s=fd(n),l=i.length;let u,f,h,p=pr(i,0);for(let m=0;m<l;++m){if(f=h,h=p,p=pr(i,m+1),!h)continue;const b=h[n],x=h[s];f&&(u=(b-f[n])/3,h[`cp1${n}`]=b-u,h[`cp1${s}`]=x-u*e[m]),p&&(u=(p[n]-b)/3,h[`cp2${n}`]=b+u,h[`cp2${s}`]=x+u*e[m])}}function ly(i,e="x"){const n=fd(e),s=i.length,l=Array(s).fill(0),u=Array(s);let f,h,p,m=pr(i,0);for(f=0;f<s;++f)if(h=p,p=m,m=pr(i,f+1),!!p){if(m){const b=m[e]-p[e];l[f]=b!==0?(m[n]-p[n])/b:0}u[f]=h?m?hr(l[f-1])!==hr(l[f])?0:(l[f-1]+l[f])/2:l[f-1]:l[f]}oy(i,l,u),ay(i,u,e)}function go(i,e,n){return Math.max(Math.min(i,n),e)}function cy(i,e){let n,s,l,u,f,h=_s(i[0],e);for(n=0,s=i.length;n<s;++n)f=u,u=h,h=n<s-1&&_s(i[n+1],e),u&&(l=i[n],f&&(l.cp1x=go(l.cp1x,e.left,e.right),l.cp1y=go(l.cp1y,e.top,e.bottom)),h&&(l.cp2x=go(l.cp2x,e.left,e.right),l.cp2y=go(l.cp2y,e.top,e.bottom)))}function uy(i,e,n,s,l){let u,f,h,p;if(e.spanGaps&&(i=i.filter(m=>!m.skip)),e.cubicInterpolationMode==="monotone")ly(i,l);else{let m=s?i[i.length-1]:i[0];for(u=0,f=i.length;u<f;++u)h=i[u],p=sy(m,h,i[Math.min(u+1,f-(s?0:1))%f],e.tension),h.cp1x=p.previous.x,h.cp1y=p.previous.y,h.cp2x=p.next.x,h.cp2y=p.next.y,m=h}e.capBezierPoints&&cy(i,n)}function El(){return typeof window<"u"&&typeof document<"u"}function Fl(i){let e=i.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Ho(i,e,n){let s;return typeof i=="string"?(s=parseInt(i,10),i.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=i,s}const jo=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function fy(i,e){return jo(i).getPropertyValue(e)}const hy=["top","right","bottom","left"];function Ai(i,e,n){const s={};n=n?"-"+n:"";for(let l=0;l<4;l++){const u=hy[l];s[u]=parseFloat(i[e+"-"+u+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const dy=(i,e,n)=>(i>0||e>0)&&(!n||!n.shadowRoot);function py(i,e){const n=i.touches,s=n&&n.length?n[0]:i,{offsetX:l,offsetY:u}=s;let f=!1,h,p;if(dy(l,u,i.target))h=l,p=u;else{const m=e.getBoundingClientRect();h=s.clientX-m.left,p=s.clientY-m.top,f=!0}return{x:h,y:p,box:f}}function Mi(i,e){if("native"in i)return i;const{canvas:n,currentDevicePixelRatio:s}=e,l=jo(n),u=l.boxSizing==="border-box",f=Ai(l,"padding"),h=Ai(l,"border","width"),{x:p,y:m,box:b}=py(i,n),x=f.left+(b&&h.left),S=f.top+(b&&h.top);let{width:C,height:A}=e;return u&&(C-=f.width+h.width,A-=f.height+h.height),{x:Math.round((p-x)/C*n.width/s),y:Math.round((m-S)/A*n.height/s)}}function gy(i,e,n){let s,l;if(e===void 0||n===void 0){const u=i&&Fl(i);if(!u)e=i.clientWidth,n=i.clientHeight;else{const f=u.getBoundingClientRect(),h=jo(u),p=Ai(h,"border","width"),m=Ai(h,"padding");e=f.width-m.width-p.width,n=f.height-m.height-p.height,s=Ho(h.maxWidth,u,"clientWidth"),l=Ho(h.maxHeight,u,"clientHeight")}}return{width:e,height:n,maxWidth:s||Ro,maxHeight:l||Ro}}const mo=i=>Math.round(i*10)/10;function my(i,e,n,s){const l=jo(i),u=Ai(l,"margin"),f=Ho(l.maxWidth,i,"clientWidth")||Ro,h=Ho(l.maxHeight,i,"clientHeight")||Ro,p=gy(i,e,n);let{width:m,height:b}=p;if(l.boxSizing==="content-box"){const S=Ai(l,"border","width"),C=Ai(l,"padding");m-=C.width+S.width,b-=C.height+S.height}return m=Math.max(0,m-u.width),b=Math.max(0,s?m/s:b-u.height),m=mo(Math.min(m,f,p.maxWidth)),b=mo(Math.min(b,h,p.maxHeight)),m&&!b&&(b=mo(m/2)),(e!==void 0||n!==void 0)&&s&&p.height&&b>p.height&&(b=p.height,m=mo(Math.floor(b*s))),{width:m,height:b}}function Sf(i,e,n){const s=e||1,l=Math.floor(i.height*s),u=Math.floor(i.width*s);i.height=Math.floor(i.height),i.width=Math.floor(i.width);const f=i.canvas;return f.style&&(n||!f.style.height&&!f.style.width)&&(f.style.height=`${i.height}px`,f.style.width=`${i.width}px`),i.currentDevicePixelRatio!==s||f.height!==l||f.width!==u?(i.currentDevicePixelRatio=s,f.height=l,f.width=u,i.ctx.setTransform(s,0,0,s,0,0),!0):!1}const vy=function(){let i=!1;try{const e={get passive(){return i=!0,!1}};El()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return i}();function Cf(i,e){const n=fy(i,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Li(i,e,n,s){return{x:i.x+n*(e.x-i.x),y:i.y+n*(e.y-i.y)}}function yy(i,e,n,s){return{x:i.x+n*(e.x-i.x),y:s==="middle"?n<.5?i.y:e.y:s==="after"?n<1?i.y:e.y:n>0?e.y:i.y}}function by(i,e,n,s){const l={x:i.cp2x,y:i.cp2y},u={x:e.cp1x,y:e.cp1y},f=Li(i,l,n),h=Li(l,u,n),p=Li(u,e,n),m=Li(f,h,n),b=Li(h,p,n);return Li(m,b,n)}const _y=function(i,e){return{x(n){return i+i+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},xy=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,e){return i+e},leftForLtr(i,e){return i}}};function lr(i,e,n){return i?_y(e,n):xy()}function hd(i,e){let n,s;(e==="ltr"||e==="rtl")&&(n=i.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),i.prevTextDirection=s)}function dd(i,e){e!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",e[0],e[1]))}function pd(i){return i==="angle"?{between:Jh,compare:bv,normalize:ai}:{between:ss,compare:(e,n)=>e-n,normalize:e=>e}}function Tf({start:i,end:e,count:n,loop:s,style:l}){return{start:i%n,end:e%n,loop:s&&(e-i+1)%n===0,style:l}}function wy(i,e,n){const{property:s,start:l,end:u}=n,{between:f,normalize:h}=pd(s),p=e.length;let{start:m,end:b,loop:x}=i,S,C;if(x){for(m+=p,b+=p,S=0,C=p;S<C&&f(h(e[m%p][s]),l,u);++S)m--,b--;m%=p,b%=p}return b<m&&(b+=p),{start:m,end:b,loop:x,style:i.style}}function ky(i,e,n){if(!n)return[i];const{property:s,start:l,end:u}=n,f=e.length,{compare:h,between:p,normalize:m}=pd(s),{start:b,end:x,loop:S,style:C}=wy(i,e,n),A=[];let O=!1,D=null,E,z,it;const q=()=>p(l,it,E)&&h(l,it)!==0,j=()=>h(u,E)===0||p(u,it,E),Y=()=>O||q(),Q=()=>!O||j();for(let G=b,vt=b;G<=x;++G)z=e[G%f],!z.skip&&(E=m(z[s]),E!==it&&(O=p(E,l,u),D===null&&Y()&&(D=h(E,l)===0?G:vt),D!==null&&Q()&&(A.push(Tf({start:D,end:G,loop:S,count:f,style:C})),D=null),vt=G,it=E));return D!==null&&A.push(Tf({start:D,end:x,loop:S,count:f,style:C})),A}function Sy(i,e){const n=[],s=i.segments;for(let l=0;l<s.length;l++){const u=ky(s[l],i.points,e);u.length&&n.push(...u)}return n}function Cy(i,e,n,s){let l=0,u=e-1;if(n&&!s)for(;l<e&&!i[l].skip;)l++;for(;l<e&&i[l].skip;)l++;for(l%=e,n&&(u+=l);u>l&&i[u%e].skip;)u--;return u%=e,{start:l,end:u}}function Ty(i,e,n,s){const l=i.length,u=[];let f=e,h=i[e],p;for(p=e+1;p<=n;++p){const m=i[p%l];m.skip||m.stop?h.skip||(s=!1,u.push({start:e%l,end:(p-1)%l,loop:s}),e=f=m.stop?p:null):(f=p,h.skip&&(e=p)),h=m}return f!==null&&u.push({start:e%l,end:f%l,loop:s}),u}function My(i,e){const n=i.points,s=i.options.spanGaps,l=n.length;if(!l)return[];const u=!!i._loop,{start:f,end:h}=Cy(n,l,u,s);if(s===!0)return Mf(i,[{start:f,end:h,loop:u}],n,e);const p=h<f?h+l:h,m=!!i._fullLoop&&f===0&&h===l-1;return Mf(i,Ty(n,f,p,m),n,e)}function Mf(i,e,n,s){return!s||!s.setContext||!n?e:Ly(i,e,n,s)}function Ly(i,e,n,s){const l=i._chart.getContext(),u=Lf(i.options),{_datasetIndex:f,options:{spanGaps:h}}=i,p=n.length,m=[];let b=u,x=e[0].start,S=x;function C(A,O,D,E){const z=h?-1:1;if(A!==O){for(A+=p;n[A%p].skip;)A-=z;for(;n[O%p].skip;)O+=z;A%p!==O%p&&(m.push({start:A%p,end:O%p,loop:D,style:E}),b=E,x=O%p)}}for(const A of e){x=h?x:A.start;let O=n[x%p],D;for(S=x+1;S<=A.end;S++){const E=n[S%p];D=Lf(s.setContext(Ii(l,{type:"segment",p0:O,p1:E,p0DataIndex:(S-1)%p,p1DataIndex:S%p,datasetIndex:f}))),Ny(D,b)&&C(x,S-1,A.loop,b),O=E,b=D}x<S-1&&C(x,S-1,A.loop,b)}return m}function Lf(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function Ny(i,e){if(!e)return!1;const n=[],s=function(l,u){return Nl(u)?(n.includes(u)||n.push(u),n.indexOf(u)):u};return JSON.stringify(i,s)!==JSON.stringify(e,s)}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class Dy{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,l){const u=n.listeners[l],f=n.duration;u.forEach(h=>h({chart:e,initial:n.initial,numSteps:f,currentStep:Math.min(s-n.start,f)}))}_refresh(){this._request||(this._running=!0,this._request=td.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,l)=>{if(!s.running||!s.items.length)return;const u=s.items;let f=u.length-1,h=!1,p;for(;f>=0;--f)p=u[f],p._active?(p._total>s.duration&&(s.duration=p._total),p.tick(e),h=!0):(u[f]=u[u.length-1],u.pop());h&&(l.draw(),this._notify(l,s,e,"progress")),u.length||(s.running=!1,this._notify(l,s,e,"complete"),s.initial=!1),n+=u.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,l)=>Math.max(s,l._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let l=s.length-1;for(;l>=0;--l)s[l].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Un=new Dy;const Nf="transparent",Oy={boolean(i,e,n){return n>.5?e:i},color(i,e,n){const s=yf(i||Nf),l=s.valid&&yf(e||Nf);return l&&l.valid?l.mix(s,n).hexString():e},number(i,e,n){return i+(e-i)*n}};class Ay{constructor(e,n,s,l){const u=n[s];l=po([e.to,l,u,e.from]);const f=po([e.from,u,l]);this._active=!0,this._fn=e.fn||Oy[e.type||typeof f],this._easing=hs[e.easing]||hs.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=f,this._to=l,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const l=this._target[this._prop],u=s-this._start,f=this._duration-u;this._start=s,this._duration=Math.floor(Math.max(f,e.duration)),this._total+=u,this._loop=!!e.loop,this._to=po([e.to,n,l,e.from]),this._from=po([e.from,l,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,l=this._prop,u=this._from,f=this._loop,h=this._to;let p;if(this._active=u!==h&&(f||n<s),!this._active){this._target[l]=h,this._notify(!0);return}if(n<0){this._target[l]=u;return}p=n/s%2,p=f&&p>1?2-p:p,p=this._easing(Math.min(1,Math.max(0,p))),this._target[l]=this._fn(u,h,p)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let l=0;l<s.length;l++)s[l][n]()}}class gd{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Vt(e))return;const n=Object.keys(pe.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(l=>{const u=e[l];if(!Vt(u))return;const f={};for(const h of n)f[h]=u[h];(Se(u.properties)&&u.properties||[l]).forEach(h=>{(h===l||!s.has(h))&&s.set(h,f)})})}_animateOptions(e,n){const s=n.options,l=Iy(e,s);if(!l)return[];const u=this._createAnimations(l,s);return s.$shared&&Py(e.options.$animations,s).then(()=>{e.options=s},()=>{}),u}_createAnimations(e,n){const s=this._properties,l=[],u=e.$animations||(e.$animations={}),f=Object.keys(n),h=Date.now();let p;for(p=f.length-1;p>=0;--p){const m=f[p];if(m.charAt(0)==="$")continue;if(m==="options"){l.push(...this._animateOptions(e,n));continue}const b=n[m];let x=u[m];const S=s.get(m);if(x)if(S&&x.active()){x.update(S,b,h);continue}else x.cancel();if(!S||!S.duration){e[m]=b;continue}u[m]=x=new Ay(S,e,m,b),l.push(x)}return l}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return Un.add(this._chart,s),!0}}function Py(i,e){const n=[],s=Object.keys(e);for(let l=0;l<s.length;l++){const u=i[s[l]];u&&u.active()&&n.push(u.wait())}return Promise.all(n)}function Iy(i,e){if(!e)return;let n=i.options;if(!n){i.options=e;return}return n.$shared&&(i.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Df(i,e){const n=i&&i.options||{},s=n.reverse,l=n.min===void 0?e:0,u=n.max===void 0?e:0;return{start:s?u:l,end:s?l:u}}function Ey(i,e,n){if(n===!1)return!1;const s=Df(i,n),l=Df(e,n);return{top:l.end,right:s.end,bottom:l.start,left:s.start}}function Fy(i){let e,n,s,l;return Vt(i)?(e=i.top,n=i.right,s=i.bottom,l=i.left):e=n=s=l=i,{top:e,right:n,bottom:s,left:l,disabled:i===!1}}function md(i,e){const n=[],s=i._getSortedDatasetMetas(e);let l,u;for(l=0,u=s.length;l<u;++l)n.push(s[l].index);return n}function Of(i,e,n,s={}){const l=i.keys,u=s.mode==="single";let f,h,p,m;if(e===null)return;let b=!1;for(f=0,h=l.length;f<h;++f){if(p=+l[f],p===n){if(b=!0,s.all)continue;break}m=i.values[p],un(m)&&(u||e===0||hr(e)===hr(m))&&(e+=m)}return!b&&!s.all?0:e}function Ry(i,e){const{iScale:n,vScale:s}=e,l=n.axis==="x"?"x":"y",u=s.axis==="x"?"x":"y",f=Object.keys(i),h=new Array(f.length);let p,m,b;for(p=0,m=f.length;p<m;++p)b=f[p],h[p]={[l]:b,[u]:i[b]};return h}function ja(i,e){const n=i&&i.options.stacked;return n||n===void 0&&e.stack!==void 0}function Hy(i,e,n){return`${i.id}.${e.id}.${n.stack||n.type}`}function zy(i){const{min:e,max:n,minDefined:s,maxDefined:l}=i.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:l?n:Number.POSITIVE_INFINITY}}function Wy(i,e,n){const s=i[e]||(i[e]={});return s[n]||(s[n]={})}function Af(i,e,n,s){for(const l of e.getMatchingVisibleMetas(s).reverse()){const u=i[l.index];if(n&&u>0||!n&&u<0)return l.index}return null}function Pf(i,e){const{chart:n,_cachedMeta:s}=i,l=n._stacks||(n._stacks={}),{iScale:u,vScale:f,index:h}=s,p=u.axis,m=f.axis,b=Hy(u,f,s),x=e.length;let S;for(let C=0;C<x;++C){const A=e[C],{[p]:O,[m]:D}=A,E=A._stacks||(A._stacks={});S=E[m]=Wy(l,b,O),S[h]=D,S._top=Af(S,f,!0,s.type),S._bottom=Af(S,f,!1,s.type);const z=S._visualValues||(S._visualValues={});z[h]=D}}function Ya(i,e){const n=i.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function By(i,e){return Ii(i,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Uy(i,e,n){return Ii(i,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Jr(i,e){const n=i.controller.index,s=i.vScale&&i.vScale.axis;if(s){e=e||i._parsed;for(const l of e){const u=l._stacks;if(!u||u[s]===void 0||u[s][n]===void 0)return;delete u[s][n],u[s]._visualValues!==void 0&&u[s]._visualValues[n]!==void 0&&delete u[s]._visualValues[n]}}}const Ka=i=>i==="reset"||i==="none",If=(i,e)=>e?i:Object.assign({},i),$y=(i,e,n)=>i&&!e.hidden&&e._stacked&&{keys:md(n,!0),values:null};class gs{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ja(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Jr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),l=(x,S,C,A)=>x==="x"?S:x==="r"?A:C,u=n.xAxisID=Bt(s.xAxisID,Ya(e,"x")),f=n.yAxisID=Bt(s.yAxisID,Ya(e,"y")),h=n.rAxisID=Bt(s.rAxisID,Ya(e,"r")),p=n.indexAxis,m=n.iAxisID=l(p,u,f,h),b=n.vAxisID=l(p,f,u,h);n.xScale=this.getScaleForId(u),n.yScale=this.getScaleForId(f),n.rScale=this.getScaleForId(h),n.iScale=this.getScaleForId(m),n.vScale=this.getScaleForId(b)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&gf(this._data,this),e._stacked&&Jr(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(Vt(n)){const l=this._cachedMeta;this._data=Ry(n,l)}else if(s!==n){if(s){gf(s,this);const l=this._cachedMeta;Jr(l),l._parsed=[]}n&&Object.isExtensible(n)&&kv(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let l=!1;this._dataCheck();const u=n._stacked;n._stacked=ja(n.vScale,n),n.stack!==s.stack&&(l=!0,Jr(n),n.stack=s.stack),this._resyncElements(e),(l||u!==n._stacked)&&(Pf(this,n._parsed),n._stacked=ja(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:l}=this,{iScale:u,_stacked:f}=s,h=u.axis;let p=e===0&&n===l.length?!0:s._sorted,m=e>0&&s._parsed[e-1],b,x,S;if(this._parsing===!1)s._parsed=l,s._sorted=!0,S=l;else{Se(l[e])?S=this.parseArrayData(s,l,e,n):Vt(l[e])?S=this.parseObjectData(s,l,e,n):S=this.parsePrimitiveData(s,l,e,n);const C=()=>x[h]===null||m&&x[h]<m[h];for(b=0;b<n;++b)s._parsed[b+e]=x=S[b],p&&(C()&&(p=!1),m=x);s._sorted=p}f&&Pf(this,S)}parsePrimitiveData(e,n,s,l){const{iScale:u,vScale:f}=e,h=u.axis,p=f.axis,m=u.getLabels(),b=u===f,x=new Array(l);let S,C,A;for(S=0,C=l;S<C;++S)A=S+s,x[S]={[h]:b||u.parse(m[A],A),[p]:f.parse(n[A],A)};return x}parseArrayData(e,n,s,l){const{xScale:u,yScale:f}=e,h=new Array(l);let p,m,b,x;for(p=0,m=l;p<m;++p)b=p+s,x=n[b],h[p]={x:u.parse(x[0],b),y:f.parse(x[1],b)};return h}parseObjectData(e,n,s,l){const{xScale:u,yScale:f}=e,{xAxisKey:h="x",yAxisKey:p="y"}=this._parsing,m=new Array(l);let b,x,S,C;for(b=0,x=l;b<x;++b)S=b+s,C=n[S],m[b]={x:u.parse(Eo(C,h),S),y:f.parse(Eo(C,p),S)};return m}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const l=this.chart,u=this._cachedMeta,f=n[e.axis],h={keys:md(l,!0),values:n._stacks[e.axis]._visualValues};return Of(h,f,u.index,{mode:s})}updateRangeFromParsed(e,n,s,l){const u=s[n.axis];let f=u===null?NaN:u;const h=l&&s._stacks[n.axis];l&&h&&(l.values=h,f=Of(l,u,this._cachedMeta.index)),e.min=Math.min(e.min,f),e.max=Math.max(e.max,f)}getMinMax(e,n){const s=this._cachedMeta,l=s._parsed,u=s._sorted&&e===s.iScale,f=l.length,h=this._getOtherScale(e),p=$y(n,s,this.chart),m={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:b,max:x}=zy(h);let S,C;function A(){C=l[S];const O=C[h.axis];return!un(C[e.axis])||b>O||x<O}for(S=0;S<f&&!(!A()&&(this.updateRangeFromParsed(m,e,C,p),u));++S);if(u){for(S=f-1;S>=0;--S)if(!A()){this.updateRangeFromParsed(m,e,C,p);break}}return m}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let l,u,f;for(l=0,u=n.length;l<u;++l)f=n[l][e.axis],un(f)&&s.push(f);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,l=n.vScale,u=this.getParsed(e);return{label:s?""+s.getLabelForValue(u[s.axis]):"",value:l?""+l.getLabelForValue(u[l.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Fy(Bt(this.options.clip,Ey(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,l=s.data||[],u=n.chartArea,f=[],h=this._drawStart||0,p=this._drawCount||l.length-h,m=this.options.drawActiveElementsOnTop;let b;for(s.dataset&&s.dataset.draw(e,u,h,p),b=h;b<h+p;++b){const x=l[b];x.hidden||(x.active&&m?f.push(x):x.draw(e,u))}for(b=0;b<f.length;++b)f[b].draw(e,u)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const l=this.getDataset();let u;if(e>=0&&e<this._cachedMeta.data.length){const f=this._cachedMeta.data[e];u=f.$context||(f.$context=Uy(this.getContext(),e,f)),u.parsed=this.getParsed(e),u.raw=l.data[e],u.index=u.dataIndex=e}else u=this.$context||(this.$context=By(this.chart.getContext(),this.index)),u.dataset=l,u.index=u.datasetIndex=this.index;return u.active=!!n,u.mode=s,u}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const l=n==="active",u=this._cachedDataOpts,f=e+"-"+n,h=u[f],p=this.enableOptionSharing&&Fo(s);if(h)return If(h,p);const m=this.chart.config,b=m.datasetElementScopeKeys(this._type,e),x=l?[`${e}Hover`,"hover",e,""]:[e,""],S=m.getOptionScopes(this.getDataset(),b),C=Object.keys(pe.elements[e]),A=()=>this.getContext(s,l,n),O=m.resolveNamedOptions(S,C,A,x);return O.$shared&&(O.$shared=p,u[f]=Object.freeze(If(O,p))),O}_resolveAnimations(e,n,s){const l=this.chart,u=this._cachedDataOpts,f=`animation-${n}`,h=u[f];if(h)return h;let p;if(l.options.animation!==!1){const b=this.chart.config,x=b.datasetAnimationScopeKeys(this._type,n),S=b.getOptionScopes(this.getDataset(),x);p=b.createResolver(S,this.getContext(e,s,n))}const m=new gd(l,p&&p.animations);return p&&p._cacheable&&(u[f]=Object.freeze(m)),m}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Ka(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),l=this._sharedOptions,u=this.getSharedOptions(s),f=this.includeOptions(n,u)||u!==l;return this.updateSharedOptions(u,n,s),{sharedOptions:u,includeOptions:f}}updateElement(e,n,s,l){Ka(l)?Object.assign(e,s):this._resolveAnimations(n,l).update(e,s)}updateSharedOptions(e,n,s){e&&!Ka(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,l){e.active=l;const u=this.getStyle(n,l);this._resolveAnimations(n,s,l).update(e,{options:!l&&this.getSharedOptions(u)||u})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[h,p,m]of this._syncList)this[h](p,m);this._syncList=[];const l=s.length,u=n.length,f=Math.min(u,l);f&&this.parse(0,f),u>l?this._insertElements(l,u-l,e):u<l&&this._removeElements(u,l-u)}_insertElements(e,n,s=!0){const l=this._cachedMeta,u=l.data,f=e+n;let h;const p=m=>{for(m.length+=n,h=m.length-1;h>=f;h--)m[h]=m[h-n]};for(p(u),h=e;h<f;++h)u[h]=new this.dataElementType;this._parsing&&p(l._parsed),this.parse(e,n),s&&this.updateElements(u,e,n,"reset")}updateElements(e,n,s,l){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const l=s._parsed.splice(e,n);s._stacked&&Jr(s,l)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,l]=e;this[n](s,l)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}It(gs,"defaults",{}),It(gs,"datasetElementType",null),It(gs,"dataElementType",null);class Mo extends gs{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:l=[],_dataset:u}=n,f=this.chart._animationsDisabled;let{start:h,count:p}=Mv(n,l,f);this._drawStart=h,this._drawCount=p,Lv(n)&&(h=0,p=l.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!u._decimated,s.points=l;const m=this.resolveDatasetElementOptions(e);this.options.showLine||(m.borderWidth=0),m.segment=this.options.segment,this.updateElement(s,void 0,{animated:!f,options:m},e),this.updateElements(l,h,p,e)}updateElements(e,n,s,l){const u=l==="reset",{iScale:f,vScale:h,_stacked:p,_dataset:m}=this._cachedMeta,{sharedOptions:b,includeOptions:x}=this._getSharedOptions(n,l),S=f.axis,C=h.axis,{spanGaps:A,segment:O}=this.options,D=bs(A)?A:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||u||l==="none",z=n+s,it=e.length;let q=n>0&&this.getParsed(n-1);for(let j=0;j<it;++j){const Y=e[j],Q=E?Y:{};if(j<n||j>=z){Q.skip=!0;continue}const G=this.getParsed(j),vt=le(G[C]),ot=Q[S]=f.getPixelForValue(G[S],j),tt=Q[C]=u||vt?h.getBasePixel():h.getPixelForValue(p?this.applyStack(h,G,p):G[C],j);Q.skip=isNaN(ot)||isNaN(tt)||vt,Q.stop=j>0&&Math.abs(G[S]-q[S])>D,O&&(Q.parsed=G,Q.raw=m.data[j]),x&&(Q.options=b||this.resolveDataElementOptions(j,Y.active?"active":l)),E||this.updateElement(Y,j,Q,l),q=G}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,l=e.data||[];if(!l.length)return s;const u=l[0].size(this.resolveDataElementOptions(0)),f=l[l.length-1].size(this.resolveDataElementOptions(l.length-1));return Math.max(s,u,f)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}It(Mo,"id","line"),It(Mo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),It(Mo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Ti(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Rl{constructor(e){It(this,"options");this.options=e||{}}static override(e){Object.assign(Rl.prototype,e)}init(){}formats(){return Ti()}parse(){return Ti()}format(){return Ti()}add(){return Ti()}diff(){return Ti()}startOf(){return Ti()}endOf(){return Ti()}}var jy={_date:Rl};function Yy(i,e,n,s){const{controller:l,data:u,_sorted:f}=i,h=l._cachedMeta.iScale;if(h&&e===h.axis&&e!=="r"&&f&&u.length){const p=h._reversePixels?xv:Oi;if(s){if(l._sharedOptions){const m=u[0],b=typeof m.getRange=="function"&&m.getRange(e);if(b){const x=p(u,e,n-b),S=p(u,e,n+b);return{lo:x.lo,hi:S.hi}}}}else return p(u,e,n)}return{lo:0,hi:u.length-1}}function Ms(i,e,n,s,l){const u=i.getSortedVisibleDatasetMetas(),f=n[e];for(let h=0,p=u.length;h<p;++h){const{index:m,data:b}=u[h],{lo:x,hi:S}=Yy(u[h],e,f,l);for(let C=x;C<=S;++C){const A=b[C];A.skip||s(A,m,C)}}}function Ky(i){const e=i.indexOf("x")!==-1,n=i.indexOf("y")!==-1;return function(s,l){const u=e?Math.abs(s.x-l.x):0,f=n?Math.abs(s.y-l.y):0;return Math.sqrt(Math.pow(u,2)+Math.pow(f,2))}}function Va(i,e,n,s,l){const u=[];return!l&&!i.isPointInArea(e)||Ms(i,n,e,function(h,p,m){!l&&!_s(h,i.chartArea,0)||h.inRange(e.x,e.y,s)&&u.push({element:h,datasetIndex:p,index:m})},!0),u}function Vy(i,e,n,s){let l=[];function u(f,h,p){const{startAngle:m,endAngle:b}=f.getProps(["startAngle","endAngle"],s),{angle:x}=yv(f,{x:e.x,y:e.y});Jh(x,m,b)&&l.push({element:f,datasetIndex:h,index:p})}return Ms(i,n,e,u),l}function Xy(i,e,n,s,l,u){let f=[];const h=Ky(n);let p=Number.POSITIVE_INFINITY;function m(b,x,S){const C=b.inRange(e.x,e.y,l);if(s&&!C)return;const A=b.getCenterPoint(l);if(!(!!u||i.isPointInArea(A))&&!C)return;const D=h(e,A);D<p?(f=[{element:b,datasetIndex:x,index:S}],p=D):D===p&&f.push({element:b,datasetIndex:x,index:S})}return Ms(i,n,e,m),f}function Xa(i,e,n,s,l,u){return!u&&!i.isPointInArea(e)?[]:n==="r"&&!s?Vy(i,e,n,l):Xy(i,e,n,s,l,u)}function Ef(i,e,n,s,l){const u=[],f=n==="x"?"inXRange":"inYRange";let h=!1;return Ms(i,n,e,(p,m,b)=>{p[f]&&p[f](e[n],l)&&(u.push({element:p,datasetIndex:m,index:b}),h=h||p.inRange(e.x,e.y,l))}),s&&!h?[]:u}var qy={evaluateInteractionItems:Ms,modes:{index(i,e,n,s){const l=Mi(e,i),u=n.axis||"x",f=n.includeInvisible||!1,h=n.intersect?Va(i,l,u,s,f):Xa(i,l,u,!1,s,f),p=[];return h.length?(i.getSortedVisibleDatasetMetas().forEach(m=>{const b=h[0].index,x=m.data[b];x&&!x.skip&&p.push({element:x,datasetIndex:m.index,index:b})}),p):[]},dataset(i,e,n,s){const l=Mi(e,i),u=n.axis||"xy",f=n.includeInvisible||!1;let h=n.intersect?Va(i,l,u,s,f):Xa(i,l,u,!1,s,f);if(h.length>0){const p=h[0].datasetIndex,m=i.getDatasetMeta(p).data;h=[];for(let b=0;b<m.length;++b)h.push({element:m[b],datasetIndex:p,index:b})}return h},point(i,e,n,s){const l=Mi(e,i),u=n.axis||"xy",f=n.includeInvisible||!1;return Va(i,l,u,s,f)},nearest(i,e,n,s){const l=Mi(e,i),u=n.axis||"xy",f=n.includeInvisible||!1;return Xa(i,l,u,n.intersect,s,f)},x(i,e,n,s){const l=Mi(e,i);return Ef(i,l,"x",n.intersect,s)},y(i,e,n,s){const l=Mi(e,i);return Ef(i,l,"y",n.intersect,s)}}};const vd=["left","top","right","bottom"];function Qr(i,e){return i.filter(n=>n.pos===e)}function Ff(i,e){return i.filter(n=>vd.indexOf(n.pos)===-1&&n.box.axis===e)}function ts(i,e){return i.sort((n,s)=>{const l=e?s:n,u=e?n:s;return l.weight===u.weight?l.index-u.index:l.weight-u.weight})}function Gy(i){const e=[];let n,s,l,u,f,h;for(n=0,s=(i||[]).length;n<s;++n)l=i[n],{position:u,options:{stack:f,stackWeight:h=1}}=l,e.push({index:n,box:l,pos:u,horizontal:l.isHorizontal(),weight:l.weight,stack:f&&u+f,stackWeight:h});return e}function Zy(i){const e={};for(const n of i){const{stack:s,pos:l,stackWeight:u}=n;if(!s||!vd.includes(l))continue;const f=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});f.count++,f.weight+=u}return e}function Jy(i,e){const n=Zy(i),{vBoxMaxWidth:s,hBoxMaxHeight:l}=e;let u,f,h;for(u=0,f=i.length;u<f;++u){h=i[u];const{fullSize:p}=h.box,m=n[h.stack],b=m&&h.stackWeight/m.weight;h.horizontal?(h.width=b?b*s:p&&e.availableWidth,h.height=l):(h.width=s,h.height=b?b*l:p&&e.availableHeight)}return n}function Qy(i){const e=Gy(i),n=ts(e.filter(m=>m.box.fullSize),!0),s=ts(Qr(e,"left"),!0),l=ts(Qr(e,"right")),u=ts(Qr(e,"top"),!0),f=ts(Qr(e,"bottom")),h=Ff(e,"x"),p=Ff(e,"y");return{fullSize:n,leftAndTop:s.concat(u),rightAndBottom:l.concat(p).concat(f).concat(h),chartArea:Qr(e,"chartArea"),vertical:s.concat(l).concat(p),horizontal:u.concat(f).concat(h)}}function Rf(i,e,n,s){return Math.max(i[n],e[n])+Math.max(i[s],e[s])}function yd(i,e){i.top=Math.max(i.top,e.top),i.left=Math.max(i.left,e.left),i.bottom=Math.max(i.bottom,e.bottom),i.right=Math.max(i.right,e.right)}function t0(i,e,n,s){const{pos:l,box:u}=n,f=i.maxPadding;if(!Vt(l)){n.size&&(i[l]-=n.size);const x=s[n.stack]||{size:0,count:1};x.size=Math.max(x.size,n.horizontal?u.height:u.width),n.size=x.size/x.count,i[l]+=n.size}u.getPadding&&yd(f,u.getPadding());const h=Math.max(0,e.outerWidth-Rf(f,i,"left","right")),p=Math.max(0,e.outerHeight-Rf(f,i,"top","bottom")),m=h!==i.w,b=p!==i.h;return i.w=h,i.h=p,n.horizontal?{same:m,other:b}:{same:b,other:m}}function e0(i){const e=i.maxPadding;function n(s){const l=Math.max(e[s]-i[s],0);return i[s]+=l,l}i.y+=n("top"),i.x+=n("left"),n("right"),n("bottom")}function n0(i,e){const n=e.maxPadding;function s(l){const u={left:0,top:0,right:0,bottom:0};return l.forEach(f=>{u[f]=Math.max(e[f],n[f])}),u}return s(i?["left","right"]:["top","bottom"])}function os(i,e,n,s){const l=[];let u,f,h,p,m,b;for(u=0,f=i.length,m=0;u<f;++u){h=i[u],p=h.box,p.update(h.width||e.w,h.height||e.h,n0(h.horizontal,e));const{same:x,other:S}=t0(e,n,h,s);m|=x&&l.length,b=b||S,p.fullSize||l.push(h)}return m&&os(l,e,n,s)||b}function vo(i,e,n,s,l){i.top=n,i.left=e,i.right=e+s,i.bottom=n+l,i.width=s,i.height=l}function Hf(i,e,n,s){const l=n.padding;let{x:u,y:f}=e;for(const h of i){const p=h.box,m=s[h.stack]||{count:1,placed:0,weight:1},b=h.stackWeight/m.weight||1;if(h.horizontal){const x=e.w*b,S=m.size||p.height;Fo(m.start)&&(f=m.start),p.fullSize?vo(p,l.left,f,n.outerWidth-l.right-l.left,S):vo(p,e.left+m.placed,f,x,S),m.start=f,m.placed+=x,f=p.bottom}else{const x=e.h*b,S=m.size||p.width;Fo(m.start)&&(u=m.start),p.fullSize?vo(p,u,l.top,S,n.outerHeight-l.bottom-l.top):vo(p,u,e.top+m.placed,S,x),m.start=u,m.placed+=x,u=p.right}}e.x=u,e.y=f}var ln={addBox(i,e){i.boxes||(i.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},i.boxes.push(e)},removeBox(i,e){const n=i.boxes?i.boxes.indexOf(e):-1;n!==-1&&i.boxes.splice(n,1)},configure(i,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(i,e,n,s){if(!i)return;const l=fn(i.options.layout.padding),u=Math.max(e-l.width,0),f=Math.max(n-l.height,0),h=Qy(i.boxes),p=h.vertical,m=h.horizontal;Gt(i.boxes,O=>{typeof O.beforeLayout=="function"&&O.beforeLayout()});const b=p.reduce((O,D)=>D.box.options&&D.box.options.display===!1?O:O+1,0)||1,x=Object.freeze({outerWidth:e,outerHeight:n,padding:l,availableWidth:u,availableHeight:f,vBoxMaxWidth:u/2/b,hBoxMaxHeight:f/2}),S=Object.assign({},l);yd(S,fn(s));const C=Object.assign({maxPadding:S,w:u,h:f,x:l.left,y:l.top},l),A=Jy(p.concat(m),x);os(h.fullSize,C,x,A),os(p,C,x,A),os(m,C,x,A)&&os(p,C,x,A),e0(C),Hf(h.leftAndTop,C,x,A),C.x+=C.w,C.y+=C.h,Hf(h.rightAndBottom,C,x,A),i.chartArea={left:C.left,top:C.top,right:C.left+C.w,bottom:C.top+C.h,height:C.h,width:C.w},Gt(h.chartArea,O=>{const D=O.box;Object.assign(D,i.chartArea),D.update(C.w,C.h,{left:0,top:0,right:0,bottom:0})})}};class bd{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,l){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,l?Math.floor(n/l):s)}}isAttached(e){return!0}updateConfig(e){}}class i0 extends bd{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Lo="$chartjs",r0={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},zf=i=>i===null||i==="";function s0(i,e){const n=i.style,s=i.getAttribute("height"),l=i.getAttribute("width");if(i[Lo]={initial:{height:s,width:l,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",zf(l)){const u=Cf(i,"width");u!==void 0&&(i.width=u)}if(zf(s))if(i.style.height==="")i.height=i.width/(e||2);else{const u=Cf(i,"height");u!==void 0&&(i.height=u)}return i}const _d=vy?{passive:!0}:!1;function o0(i,e,n){i&&i.addEventListener(e,n,_d)}function a0(i,e,n){i&&i.canvas&&i.canvas.removeEventListener(e,n,_d)}function l0(i,e){const n=r0[i.type]||i.type,{x:s,y:l}=Mi(i,e);return{type:n,chart:e,native:i,x:s!==void 0?s:null,y:l!==void 0?l:null}}function zo(i,e){for(const n of i)if(n===e||n.contains(e))return!0}function c0(i,e,n){const s=i.canvas,l=new MutationObserver(u=>{let f=!1;for(const h of u)f=f||zo(h.addedNodes,s),f=f&&!zo(h.removedNodes,s);f&&n()});return l.observe(document,{childList:!0,subtree:!0}),l}function u0(i,e,n){const s=i.canvas,l=new MutationObserver(u=>{let f=!1;for(const h of u)f=f||zo(h.removedNodes,s),f=f&&!zo(h.addedNodes,s);f&&n()});return l.observe(document,{childList:!0,subtree:!0}),l}const ws=new Map;let Wf=0;function xd(){const i=window.devicePixelRatio;i!==Wf&&(Wf=i,ws.forEach((e,n)=>{n.currentDevicePixelRatio!==i&&e()}))}function f0(i,e){ws.size||window.addEventListener("resize",xd),ws.set(i,e)}function h0(i){ws.delete(i),ws.size||window.removeEventListener("resize",xd)}function d0(i,e,n){const s=i.canvas,l=s&&Fl(s);if(!l)return;const u=ed((h,p)=>{const m=l.clientWidth;n(h,p),m<l.clientWidth&&n()},window),f=new ResizeObserver(h=>{const p=h[0],m=p.contentRect.width,b=p.contentRect.height;m===0&&b===0||u(m,b)});return f.observe(l),f0(i,u),f}function qa(i,e,n){n&&n.disconnect(),e==="resize"&&h0(i)}function p0(i,e,n){const s=i.canvas,l=ed(u=>{i.ctx!==null&&n(l0(u,i))},i);return o0(s,e,l),l}class g0 extends bd{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(s0(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[Lo])return!1;const s=n[Lo].initial;["height","width"].forEach(u=>{const f=s[u];le(f)?n.removeAttribute(u):n.setAttribute(u,f)});const l=s.style||{};return Object.keys(l).forEach(u=>{n.style[u]=l[u]}),n.width=n.width,delete n[Lo],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const l=e.$proxies||(e.$proxies={}),f={attach:c0,detach:u0,resize:d0}[n]||p0;l[n]=f(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),l=s[n];if(!l)return;({attach:qa,detach:qa,resize:qa}[n]||a0)(e,n,l),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,l){return my(e,n,s,l)}isAttached(e){const n=e&&Fl(e);return!!(n&&n.isConnected)}}function m0(i){return!El()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?i0:g0}class Xn{constructor(){It(this,"x");It(this,"y");It(this,"active",!1);It(this,"options");It(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return bs(this.x)&&bs(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const l={};return e.forEach(u=>{l[u]=s[u]&&s[u].active()?s[u]._to:this[u]}),l}}It(Xn,"defaults",{}),It(Xn,"defaultRoutes");function v0(i,e){const n=i.options.ticks,s=y0(i),l=Math.min(n.maxTicksLimit||s,s),u=n.major.enabled?_0(e):[],f=u.length,h=u[0],p=u[f-1],m=[];if(f>l)return x0(e,m,u,f/l),m;const b=b0(u,e,l);if(f>0){let x,S;const C=f>1?Math.round((p-h)/(f-1)):null;for(yo(e,m,b,le(C)?0:h-C,h),x=0,S=f-1;x<S;x++)yo(e,m,b,u[x],u[x+1]);return yo(e,m,b,p,le(C)?e.length:p+C),m}return yo(e,m,b),m}function y0(i){const e=i.options.offset,n=i._tickSize(),s=i._length/n+(e?0:1),l=i._maxLength/n;return Math.floor(Math.min(s,l))}function b0(i,e,n){const s=w0(i),l=e.length/n;if(!s)return Math.max(l,1);const u=pv(s);for(let f=0,h=u.length-1;f<h;f++){const p=u[f];if(p>l)return p}return Math.max(l,1)}function _0(i){const e=[];let n,s;for(n=0,s=i.length;n<s;n++)i[n].major&&e.push(n);return e}function x0(i,e,n,s){let l=0,u=n[0],f;for(s=Math.ceil(s),f=0;f<i.length;f++)f===u&&(e.push(i[f]),l++,u=n[l*s])}function yo(i,e,n,s,l){const u=Bt(s,0),f=Math.min(Bt(l,i.length),i.length);let h=0,p,m,b;for(n=Math.ceil(n),l&&(p=l-s,n=p/Math.floor(p/n)),b=u;b<0;)h++,b=Math.round(u+h*n);for(m=Math.max(u,0);m<f;m++)m===b&&(e.push(i[m]),h++,b=Math.round(u+h*n))}function w0(i){const e=i.length;let n,s;if(e<2)return!1;for(s=i[0],n=1;n<e;++n)if(i[n]-i[n-1]!==s)return!1;return s}const k0=i=>i==="left"?"right":i==="right"?"left":i,Bf=(i,e,n)=>e==="top"||e==="left"?i[e]+n:i[e]-n,Uf=(i,e)=>Math.min(e||i,i);function $f(i,e){const n=[],s=i.length/e,l=i.length;let u=0;for(;u<l;u+=s)n.push(i[Math.floor(u)]);return n}function S0(i,e,n){const s=i.ticks.length,l=Math.min(e,s-1),u=i._startPixel,f=i._endPixel,h=1e-6;let p=i.getPixelForTick(l),m;if(!(n&&(s===1?m=Math.max(p-u,f-p):e===0?m=(i.getPixelForTick(1)-p)/2:m=(p-i.getPixelForTick(l-1))/2,p+=l<e?m:-m,p<u-h||p>f+h)))return p}function C0(i,e){Gt(i,n=>{const s=n.gc,l=s.length/2;let u;if(l>e){for(u=0;u<l;++u)delete n.data[s[u]];s.splice(0,l)}})}function es(i){return i.drawTicks?i.tickLength:0}function jf(i,e){if(!i.display)return 0;const n=Pe(i.font,e),s=fn(i.padding);return(Se(i.text)?i.text.length:1)*n.lineHeight+s.height}function T0(i,e){return Ii(i,{scale:e,type:"scale"})}function M0(i,e,n){return Ii(i,{tick:n,index:e,type:"tick"})}function L0(i,e,n){let s=Ll(i);return(n&&e!=="right"||!n&&e==="right")&&(s=k0(s)),s}function N0(i,e,n,s){const{top:l,left:u,bottom:f,right:h,chart:p}=i,{chartArea:m,scales:b}=p;let x=0,S,C,A;const O=f-l,D=h-u;if(i.isHorizontal()){if(C=Ae(s,u,h),Vt(n)){const E=Object.keys(n)[0],z=n[E];A=b[E].getPixelForValue(z)+O-e}else n==="center"?A=(m.bottom+m.top)/2+O-e:A=Bf(i,n,e);S=h-u}else{if(Vt(n)){const E=Object.keys(n)[0],z=n[E];C=b[E].getPixelForValue(z)-D+e}else n==="center"?C=(m.left+m.right)/2-D+e:C=Bf(i,n,e);A=Ae(s,f,l),x=n==="left"?-yn:yn}return{titleX:C,titleY:A,maxWidth:S,rotation:x}}class mr extends Xn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:l}=this;return e=Ln(e,Number.POSITIVE_INFINITY),n=Ln(n,Number.NEGATIVE_INFINITY),s=Ln(s,Number.POSITIVE_INFINITY),l=Ln(l,Number.NEGATIVE_INFINITY),{min:Ln(e,s),max:Ln(n,l),minDefined:un(e),maxDefined:un(n)}}getMinMax(e){let{min:n,max:s,minDefined:l,maxDefined:u}=this.getUserBounds(),f;if(l&&u)return{min:n,max:s};const h=this.getMatchingVisibleMetas();for(let p=0,m=h.length;p<m;++p)f=h[p].controller.getMinMax(this,e),l||(n=Math.min(n,f.min)),u||(s=Math.max(s,f.max));return n=u&&n>s?s:n,s=l&&n>s?n:s,{min:Ln(n,Ln(s,n)),max:Ln(s,Ln(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ee(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:l,grace:u,ticks:f}=this.options,h=f.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Xv(this,u,l),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const p=h<this.ticks.length;this._convertTicksToLabels(p?$f(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),f.display&&(f.autoSkip||f.source==="auto")&&(this.ticks=v0(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),p&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ee(this.options.afterUpdate,[this])}beforeSetDimensions(){ee(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ee(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ee(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ee(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,l,u;for(s=0,l=e.length;s<l;s++)u=e[s],u.label=ee(n.callback,[u.value,s,e],this)}afterTickToLabelConversion(){ee(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ee(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=Uf(this.ticks.length,e.ticks.maxTicksLimit),l=n.minRotation||0,u=n.maxRotation;let f=l,h,p,m;if(!this._isVisible()||!n.display||l>=u||s<=1||!this.isHorizontal()){this.labelRotation=l;return}const b=this._getLabelSizes(),x=b.widest.width,S=b.highest.height,C=an(this.chart.width-x,0,this.maxWidth);h=e.offset?this.maxWidth/s:C/(s-1),x+6>h&&(h=C/(s-(e.offset?.5:1)),p=this.maxHeight-es(e.grid)-n.padding-jf(e.title,this.chart.options.font),m=Math.sqrt(x*x+S*S),f=vv(Math.min(Math.asin(an((b.highest.height+6)/h,-1,1)),Math.asin(an(p/m,-1,1))-Math.asin(an(S/m,-1,1)))),f=Math.max(l,Math.min(u,f))),this.labelRotation=f}afterCalculateLabelRotation(){ee(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ee(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:l,grid:u}}=this,f=this._isVisible(),h=this.isHorizontal();if(f){const p=jf(l,n.options.font);if(h?(e.width=this.maxWidth,e.height=es(u)+p):(e.height=this.maxHeight,e.width=es(u)+p),s.display&&this.ticks.length){const{first:m,last:b,widest:x,highest:S}=this._getLabelSizes(),C=s.padding*2,A=Di(this.labelRotation),O=Math.cos(A),D=Math.sin(A);if(h){const E=s.mirror?0:D*x.width+O*S.height;e.height=Math.min(this.maxHeight,e.height+E+C)}else{const E=s.mirror?0:O*x.width+D*S.height;e.width=Math.min(this.maxWidth,e.width+E+C)}this._calculatePadding(m,b,D,O)}}this._handleMargins(),h?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,l){const{ticks:{align:u,padding:f},position:h}=this.options,p=this.labelRotation!==0,m=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const b=this.getPixelForTick(0)-this.left,x=this.right-this.getPixelForTick(this.ticks.length-1);let S=0,C=0;p?m?(S=l*e.width,C=s*n.height):(S=s*e.height,C=l*n.width):u==="start"?C=n.width:u==="end"?S=e.width:u!=="inner"&&(S=e.width/2,C=n.width/2),this.paddingLeft=Math.max((S-b+f)*this.width/(this.width-b),0),this.paddingRight=Math.max((C-x+f)*this.width/(this.width-x),0)}else{let b=n.height/2,x=e.height/2;u==="start"?(b=0,x=e.height):u==="end"&&(b=n.height,x=0),this.paddingTop=b+f,this.paddingBottom=x+f}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ee(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)le(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=$f(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:l,_longestTextCache:u}=this,f=[],h=[],p=Math.floor(n/Uf(n,s));let m=0,b=0,x,S,C,A,O,D,E,z,it,q,j;for(x=0;x<n;x+=p){if(A=e[x].label,O=this._resolveTickFontOptions(x),l.font=D=O.string,E=u[D]=u[D]||{data:{},gc:[]},z=O.lineHeight,it=q=0,!le(A)&&!Se(A))it=_f(l,E.data,E.gc,it,A),q=z;else if(Se(A))for(S=0,C=A.length;S<C;++S)j=A[S],!le(j)&&!Se(j)&&(it=_f(l,E.data,E.gc,it,j),q+=z);f.push(it),h.push(q),m=Math.max(it,m),b=Math.max(q,b)}C0(u,n);const Y=f.indexOf(m),Q=h.indexOf(b),G=vt=>({width:f[vt]||0,height:h[vt]||0});return{first:G(0),last:G(n-1),widest:G(Y),highest:G(Q),widths:f,heights:h}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return _v(this._alignToPixels?Ci(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=M0(this.getContext(),e,s))}return this.$context||(this.$context=T0(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Di(this.labelRotation),s=Math.abs(Math.cos(n)),l=Math.abs(Math.sin(n)),u=this._getLabelSizes(),f=e.autoSkipPadding||0,h=u?u.widest.width+f:0,p=u?u.highest.height+f:0;return this.isHorizontal()?p*s>h*l?h/s:p/l:p*l<h*s?p/s:h/l}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,l=this.options,{grid:u,position:f,border:h}=l,p=u.offset,m=this.isHorizontal(),x=this.ticks.length+(p?1:0),S=es(u),C=[],A=h.setContext(this.getContext()),O=A.display?A.width:0,D=O/2,E=function(Lt){return Ci(s,Lt,O)};let z,it,q,j,Y,Q,G,vt,ot,tt,rt,H;if(f==="top")z=E(this.bottom),Q=this.bottom-S,vt=z-D,tt=E(e.top)+D,H=e.bottom;else if(f==="bottom")z=E(this.top),tt=e.top,H=E(e.bottom)-D,Q=z+D,vt=this.top+S;else if(f==="left")z=E(this.right),Y=this.right-S,G=z-D,ot=E(e.left)+D,rt=e.right;else if(f==="right")z=E(this.left),ot=e.left,rt=E(e.right)-D,Y=z+D,G=this.left+S;else if(n==="x"){if(f==="center")z=E((e.top+e.bottom)/2+.5);else if(Vt(f)){const Lt=Object.keys(f)[0],Ft=f[Lt];z=E(this.chart.scales[Lt].getPixelForValue(Ft))}tt=e.top,H=e.bottom,Q=z+D,vt=Q+S}else if(n==="y"){if(f==="center")z=E((e.left+e.right)/2);else if(Vt(f)){const Lt=Object.keys(f)[0],Ft=f[Lt];z=E(this.chart.scales[Lt].getPixelForValue(Ft))}Y=z-D,G=Y-S,ot=e.left,rt=e.right}const W=Bt(l.ticks.maxTicksLimit,x),M=Math.max(1,Math.ceil(x/W));for(it=0;it<x;it+=M){const Lt=this.getContext(it),Ft=u.setContext(Lt),qt=h.setContext(Lt),F=Ft.lineWidth,K=Ft.color,Z=qt.dash||[],ht=qt.dashOffset,pt=Ft.tickWidth,ct=Ft.tickColor,Mt=Ft.tickBorderDash||[],ut=Ft.tickBorderDashOffset;q=S0(this,it,p),q!==void 0&&(j=Ci(s,q,F),m?Y=G=ot=rt=j:Q=vt=tt=H=j,C.push({tx1:Y,ty1:Q,tx2:G,ty2:vt,x1:ot,y1:tt,x2:rt,y2:H,width:F,color:K,borderDash:Z,borderDashOffset:ht,tickWidth:pt,tickColor:ct,tickBorderDash:Mt,tickBorderDashOffset:ut}))}return this._ticksLength=x,this._borderValue=z,C}_computeLabelItems(e){const n=this.axis,s=this.options,{position:l,ticks:u}=s,f=this.isHorizontal(),h=this.ticks,{align:p,crossAlign:m,padding:b,mirror:x}=u,S=es(s.grid),C=S+b,A=x?-b:C,O=-Di(this.labelRotation),D=[];let E,z,it,q,j,Y,Q,G,vt,ot,tt,rt,H="middle";if(l==="top")Y=this.bottom-A,Q=this._getXAxisLabelAlignment();else if(l==="bottom")Y=this.top+A,Q=this._getXAxisLabelAlignment();else if(l==="left"){const M=this._getYAxisLabelAlignment(S);Q=M.textAlign,j=M.x}else if(l==="right"){const M=this._getYAxisLabelAlignment(S);Q=M.textAlign,j=M.x}else if(n==="x"){if(l==="center")Y=(e.top+e.bottom)/2+C;else if(Vt(l)){const M=Object.keys(l)[0],Lt=l[M];Y=this.chart.scales[M].getPixelForValue(Lt)+C}Q=this._getXAxisLabelAlignment()}else if(n==="y"){if(l==="center")j=(e.left+e.right)/2-C;else if(Vt(l)){const M=Object.keys(l)[0],Lt=l[M];j=this.chart.scales[M].getPixelForValue(Lt)}Q=this._getYAxisLabelAlignment(S).textAlign}n==="y"&&(p==="start"?H="top":p==="end"&&(H="bottom"));const W=this._getLabelSizes();for(E=0,z=h.length;E<z;++E){it=h[E],q=it.label;const M=u.setContext(this.getContext(E));G=this.getPixelForTick(E)+u.labelOffset,vt=this._resolveTickFontOptions(E),ot=vt.lineHeight,tt=Se(q)?q.length:1;const Lt=tt/2,Ft=M.color,qt=M.textStrokeColor,F=M.textStrokeWidth;let K=Q;f?(j=G,Q==="inner"&&(E===z-1?K=this.options.reverse?"left":"right":E===0?K=this.options.reverse?"right":"left":K="center"),l==="top"?m==="near"||O!==0?rt=-tt*ot+ot/2:m==="center"?rt=-W.highest.height/2-Lt*ot+ot:rt=-W.highest.height+ot/2:m==="near"||O!==0?rt=ot/2:m==="center"?rt=W.highest.height/2-Lt*ot:rt=W.highest.height-tt*ot,x&&(rt*=-1),O!==0&&!M.showLabelBackdrop&&(j+=ot/2*Math.sin(O))):(Y=G,rt=(1-tt)*ot/2);let Z;if(M.showLabelBackdrop){const ht=fn(M.backdropPadding),pt=W.heights[E],ct=W.widths[E];let Mt=rt-ht.top,ut=0-ht.left;switch(H){case"middle":Mt-=pt/2;break;case"bottom":Mt-=pt;break}switch(Q){case"center":ut-=ct/2;break;case"right":ut-=ct;break;case"inner":E===z-1?ut-=ct:E>0&&(ut-=ct/2);break}Z={left:ut,top:Mt,width:ct+ht.width,height:pt+ht.height,color:M.backdropColor}}D.push({label:q,font:vt,textOffset:rt,options:{rotation:O,color:Ft,strokeColor:qt,strokeWidth:F,textAlign:K,textBaseline:H,translation:[j,Y],backdrop:Z}})}return D}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Di(this.labelRotation))return e==="top"?"left":"right";let l="center";return n.align==="start"?l="left":n.align==="end"?l="right":n.align==="inner"&&(l="inner"),l}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:l,padding:u}}=this.options,f=this._getLabelSizes(),h=e+u,p=f.widest.width;let m,b;return n==="left"?l?(b=this.right+u,s==="near"?m="left":s==="center"?(m="center",b+=p/2):(m="right",b+=p)):(b=this.right-h,s==="near"?m="right":s==="center"?(m="center",b-=p/2):(m="left",b=this.left)):n==="right"?l?(b=this.left+u,s==="near"?m="right":s==="center"?(m="center",b-=p/2):(m="left",b-=p)):(b=this.left+h,s==="near"?m="left":s==="center"?(m="center",b+=p/2):(m="right",b=this.right)):m="right",{textAlign:m,x:b}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:l,width:u,height:f}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,l,u,f),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const l=this.ticks.findIndex(u=>u.value===e);return l>=0?n.setContext(this.getContext(l)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,l=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let u,f;const h=(p,m,b)=>{!b.width||!b.color||(s.save(),s.lineWidth=b.width,s.strokeStyle=b.color,s.setLineDash(b.borderDash||[]),s.lineDashOffset=b.borderDashOffset,s.beginPath(),s.moveTo(p.x,p.y),s.lineTo(m.x,m.y),s.stroke(),s.restore())};if(n.display)for(u=0,f=l.length;u<f;++u){const p=l[u];n.drawOnChartArea&&h({x:p.x1,y:p.y1},{x:p.x2,y:p.y2},p),n.drawTicks&&h({x:p.tx1,y:p.ty1},{x:p.tx2,y:p.ty2},{color:p.tickColor,width:p.tickWidth,borderDash:p.tickBorderDash,borderDashOffset:p.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:l}}=this,u=s.setContext(this.getContext()),f=s.display?u.width:0;if(!f)return;const h=l.setContext(this.getContext(0)).lineWidth,p=this._borderValue;let m,b,x,S;this.isHorizontal()?(m=Ci(e,this.left,f)-f/2,b=Ci(e,this.right,h)+h/2,x=S=p):(x=Ci(e,this.top,f)-f/2,S=Ci(e,this.bottom,h)+h/2,m=b=p),n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.beginPath(),n.moveTo(m,x),n.lineTo(b,S),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,l=this._computeLabelArea();l&&Dl(s,l);const u=this.getLabelItems(e);for(const f of u){const h=f.options,p=f.font,m=f.label,b=f.textOffset;xs(s,m,0,b,p,h)}l&&Ol(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:l}}=this;if(!s.display)return;const u=Pe(s.font),f=fn(s.padding),h=s.align;let p=u.lineHeight/2;n==="bottom"||n==="center"||Vt(n)?(p+=f.bottom,Se(s.text)&&(p+=u.lineHeight*(s.text.length-1))):p+=f.top;const{titleX:m,titleY:b,maxWidth:x,rotation:S}=N0(this,p,n,h);xs(e,s.text,0,0,u,{color:s.color,maxWidth:x,rotation:S,textAlign:L0(h,n,l),textBaseline:"middle",translation:[m,b]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=Bt(e.grid&&e.grid.z,-1),l=Bt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==mr.prototype.draw?[{z:n,draw:u=>{this.draw(u)}}]:[{z:s,draw:u=>{this.drawBackground(),this.drawGrid(u),this.drawTitle()}},{z:l,draw:()=>{this.drawBorder()}},{z:n,draw:u=>{this.drawLabels(u)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",l=[];let u,f;for(u=0,f=n.length;u<f;++u){const h=n[u];h[s]===this.id&&(!e||h.type===e)&&l.push(h)}return l}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Pe(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class bo{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;A0(n)&&(s=this.register(n));const l=this.items,u=e.id,f=this.scope+"."+u;if(!u)throw new Error("class does not have id: "+e);return u in l||(l[u]=e,D0(e,f,s),this.override&&pe.override(e.id,e.overrides)),f}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,l=this.scope;s in n&&delete n[s],l&&s in pe[l]&&(delete pe[l][s],this.override&&delete Pi[s])}}function D0(i,e,n){const s=ys(Object.create(null),[n?pe.get(n):{},pe.get(e),i.defaults]);pe.set(e,s),i.defaultRoutes&&O0(e,i.defaultRoutes),i.descriptors&&pe.describe(e,i.descriptors)}function O0(i,e){Object.keys(e).forEach(n=>{const s=n.split("."),l=s.pop(),u=[i].concat(s).join("."),f=e[n].split("."),h=f.pop(),p=f.join(".");pe.route(u,l,p,h)})}function A0(i){return"id"in i&&"defaults"in i}class P0{constructor(){this.controllers=new bo(gs,"datasets",!0),this.elements=new bo(Xn,"elements"),this.plugins=new bo(Object,"plugins"),this.scales=new bo(mr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(l=>{const u=s||this._getRegistryForType(l);s||u.isForType(l)||u===this.plugins&&l.id?this._exec(e,u,l):Gt(l,f=>{const h=s||this._getRegistryForType(f);this._exec(e,h,f)})})}_exec(e,n,s){const l=Tl(e);ee(s["before"+l],[],s),n[e](s),ee(s["after"+l],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const l=n.get(e);if(l===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return l}}var Dn=new P0;class I0{constructor(){this._init=[]}notify(e,n,s,l){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const u=l?this._descriptors(e).filter(l):this._descriptors(e),f=this._notify(u,e,n,s);return n==="afterDestroy"&&(this._notify(u,e,"stop"),this._notify(this._init,e,"uninstall")),f}_notify(e,n,s,l){l=l||{};for(const u of e){const f=u.plugin,h=f[s],p=[n,l,u.options];if(ee(h,p,f)===!1&&l.cancelable)return!1}return!0}invalidate(){le(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,l=Bt(s.options&&s.options.plugins,{}),u=E0(s);return l===!1&&!n?[]:R0(e,u,l,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,l=(u,f)=>u.filter(h=>!f.some(p=>h.plugin.id===p.plugin.id));this._notify(l(n,s),e,"stop"),this._notify(l(s,n),e,"start")}}function E0(i){const e={},n=[],s=Object.keys(Dn.plugins.items);for(let u=0;u<s.length;u++)n.push(Dn.getPlugin(s[u]));const l=i.plugins||[];for(let u=0;u<l.length;u++){const f=l[u];n.indexOf(f)===-1&&(n.push(f),e[f.id]=!0)}return{plugins:n,localIds:e}}function F0(i,e){return!e&&i===!1?null:i===!0?{}:i}function R0(i,{plugins:e,localIds:n},s,l){const u=[],f=i.getContext();for(const h of e){const p=h.id,m=F0(s[p],l);m!==null&&u.push({plugin:h,options:H0(i.config,{plugin:h,local:n[p]},m,f)})}return u}function H0(i,{plugin:e,local:n},s,l){const u=i.pluginScopeKeys(e),f=i.getOptionScopes(s,u);return n&&e.defaults&&f.push(e.defaults),i.createResolver(f,l,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function cl(i,e){const n=pe.datasets[i]||{};return((e.datasets||{})[i]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function z0(i,e){let n=i;return i==="_index_"?n=e:i==="_value_"&&(n=e==="x"?"y":"x"),n}function W0(i,e){return i===e?"_index_":"_value_"}function Yf(i){if(i==="x"||i==="y"||i==="r")return i}function B0(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function ul(i,...e){if(Yf(i))return i;for(const n of e){const s=n.axis||B0(n.position)||i.length>1&&Yf(i[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function Kf(i,e,n){if(n[e+"AxisID"]===i)return{axis:e}}function U0(i,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===i||s.yAxisID===i);if(n.length)return Kf(i,"x",n[0])||Kf(i,"y",n[0])}return{}}function $0(i,e){const n=Pi[i.type]||{scales:{}},s=e.scales||{},l=cl(i.type,e),u=Object.create(null);return Object.keys(s).forEach(f=>{const h=s[f];if(!Vt(h))return console.error(`Invalid scale configuration for scale: ${f}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${f}`);const p=ul(f,h,U0(f,i),pe.scales[h.type]),m=W0(p,l),b=n.scales||{};u[f]=us(Object.create(null),[{axis:p},h,b[p],b[m]])}),i.data.datasets.forEach(f=>{const h=f.type||i.type,p=f.indexAxis||cl(h,e),b=(Pi[h]||{}).scales||{};Object.keys(b).forEach(x=>{const S=z0(x,p),C=f[S+"AxisID"]||S;u[C]=u[C]||Object.create(null),us(u[C],[{axis:S},s[C],b[x]])})}),Object.keys(u).forEach(f=>{const h=u[f];us(h,[pe.scales[h.type],pe.scale])}),u}function wd(i){const e=i.options||(i.options={});e.plugins=Bt(e.plugins,{}),e.scales=$0(i,e)}function kd(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function j0(i){return i=i||{},i.data=kd(i.data),wd(i),i}const Vf=new Map,Sd=new Set;function _o(i,e){let n=Vf.get(i);return n||(n=e(),Vf.set(i,n),Sd.add(n)),n}const ns=(i,e,n)=>{const s=Eo(e,n);s!==void 0&&i.add(s)};class Y0{constructor(e){this._config=j0(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=kd(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),wd(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return _o(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return _o(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return _o(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return _o(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let l=s.get(e);return(!l||n)&&(l=new Map,s.set(e,l)),l}getOptionScopes(e,n,s){const{options:l,type:u}=this,f=this._cachedScopes(e,s),h=f.get(n);if(h)return h;const p=new Set;n.forEach(b=>{e&&(p.add(e),b.forEach(x=>ns(p,e,x))),b.forEach(x=>ns(p,l,x)),b.forEach(x=>ns(p,Pi[u]||{},x)),b.forEach(x=>ns(p,pe,x)),b.forEach(x=>ns(p,ol,x))});const m=Array.from(p);return m.length===0&&m.push(Object.create(null)),Sd.has(n)&&f.set(n,m),m}chartOptionScopes(){const{options:e,type:n}=this;return[e,Pi[n]||{},pe.datasets[n]||{},{type:n},pe,ol]}resolveNamedOptions(e,n,s,l=[""]){const u={$shared:!0},{resolver:f,subPrefixes:h}=Xf(this._resolverCache,e,l);let p=f;if(V0(f,n)){u.$shared=!1,s=fi(s)?s():s;const m=this.createResolver(e,s,h);p=dr(f,s,m)}for(const m of n)u[m]=p[m];return u}createResolver(e,n,s=[""],l){const{resolver:u}=Xf(this._resolverCache,e,s);return Vt(n)?dr(u,n,void 0,l):u}}function Xf(i,e,n){let s=i.get(e);s||(s=new Map,i.set(e,s));const l=n.join();let u=s.get(l);return u||(u={resolver:Al(e,n),subPrefixes:n.filter(h=>!h.toLowerCase().includes("hover"))},s.set(l,u)),u}const K0=i=>Vt(i)&&Object.getOwnPropertyNames(i).some(e=>fi(i[e]));function V0(i,e){const{isScriptable:n,isIndexable:s}=ad(i);for(const l of e){const u=n(l),f=s(l),h=(f||u)&&i[l];if(u&&(fi(h)||K0(h))||f&&Se(h))return!0}return!1}var X0="4.4.7";const q0=["top","bottom","left","right","chartArea"];function qf(i,e){return i==="top"||i==="bottom"||q0.indexOf(i)===-1&&e==="x"}function Gf(i,e){return function(n,s){return n[i]===s[i]?n[e]-s[e]:n[i]-s[i]}}function Zf(i){const e=i.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ee(n&&n.onComplete,[i],e)}function G0(i){const e=i.chart,n=e.options.animation;ee(n&&n.onProgress,[i],e)}function Cd(i){return El()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const No={},Jf=i=>{const e=Cd(i);return Object.values(No).filter(n=>n.canvas===e).pop()};function Z0(i,e,n){const s=Object.keys(i);for(const l of s){const u=+l;if(u>=e){const f=i[l];delete i[l],(n>0||u>e)&&(i[u+n]=f)}}}function J0(i,e,n,s){return!n||i.type==="mouseout"?null:s?e:i}function xo(i,e,n){return i.options.clip?i[n]:e[n]}function Q0(i,e){const{xScale:n,yScale:s}=i;return n&&s?{left:xo(n,e,"left"),right:xo(n,e,"right"),top:xo(s,e,"top"),bottom:xo(s,e,"bottom")}:e}var oi;let Yo=(oi=class{static register(...e){Dn.add(...e),Qf()}static unregister(...e){Dn.remove(...e),Qf()}constructor(e,n){const s=this.config=new Y0(n),l=Cd(e),u=Jf(l);if(u)throw new Error("Canvas is already in use. Chart with ID '"+u.id+"' must be destroyed before the canvas with ID '"+u.canvas.id+"' can be reused.");const f=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||m0(l)),this.platform.updateConfig(s);const h=this.platform.acquireContext(l,f.aspectRatio),p=h&&h.canvas,m=p&&p.height,b=p&&p.width;if(this.id=sv(),this.ctx=h,this.canvas=p,this.width=b,this.height=m,this._options=f,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new I0,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Cv(x=>this.update(x),f.resizeDelay||0),this._dataChanges=[],No[this.id]=this,!h||!p){console.error("Failed to create chart: can't acquire context from the given item");return}Un.listen(this,"complete",Zf),Un.listen(this,"progress",G0),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:l,_aspectRatio:u}=this;return le(e)?n&&u?u:l?s/l:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Dn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Sf(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return xf(this.canvas,this.ctx),this}stop(){return Un.stop(this),this}resize(e,n){Un.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,l=this.canvas,u=s.maintainAspectRatio&&this.aspectRatio,f=this.platform.getMaximumSize(l,e,n,u),h=s.devicePixelRatio||this.platform.getDevicePixelRatio(),p=this.width?"resize":"attach";this.width=f.width,this.height=f.height,this._aspectRatio=this.aspectRatio,Sf(this,h,!0)&&(this.notifyPlugins("resize",{size:f}),ee(s.onResize,[this,f],this),this.attached&&this._doResize(p)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Gt(n,(s,l)=>{s.id=l})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,l=Object.keys(s).reduce((f,h)=>(f[h]=!1,f),{});let u=[];n&&(u=u.concat(Object.keys(n).map(f=>{const h=n[f],p=ul(f,h),m=p==="r",b=p==="x";return{options:h,dposition:m?"chartArea":b?"bottom":"left",dtype:m?"radialLinear":b?"category":"linear"}}))),Gt(u,f=>{const h=f.options,p=h.id,m=ul(p,h),b=Bt(h.type,f.dtype);(h.position===void 0||qf(h.position,m)!==qf(f.dposition))&&(h.position=f.dposition),l[p]=!0;let x=null;if(p in s&&s[p].type===b)x=s[p];else{const S=Dn.getScale(b);x=new S({id:p,type:b,ctx:this.ctx,chart:this}),s[x.id]=x}x.init(h,e)}),Gt(l,(f,h)=>{f||delete s[h]}),Gt(s,f=>{ln.configure(this,f,f.options),ln.addBox(this,f)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((l,u)=>l.index-u.index),s>n){for(let l=n;l<s;++l)this._destroyDatasetMeta(l);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(Gf("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,l)=>{n.filter(u=>u===s._dataset).length===0&&this._destroyDatasetMeta(l)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,l;for(this._removeUnreferencedMetasets(),s=0,l=n.length;s<l;s++){const u=n[s];let f=this.getDatasetMeta(s);const h=u.type||this.config.type;if(f.type&&f.type!==h&&(this._destroyDatasetMeta(s),f=this.getDatasetMeta(s)),f.type=h,f.indexAxis=u.indexAxis||cl(h,this.options),f.order=u.order||0,f.index=s,f.label=""+u.label,f.visible=this.isDatasetVisible(s),f.controller)f.controller.updateIndex(s),f.controller.linkScales();else{const p=Dn.getController(h),{datasetElementType:m,dataElementType:b}=pe.datasets[h];Object.assign(p,{dataElementType:Dn.getElement(b),datasetElementType:m&&Dn.getElement(m)}),f.controller=new p(this,s),e.push(f.controller)}}return this._updateMetasets(),e}_resetElements(){Gt(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),l=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const u=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let f=0;for(let m=0,b=this.data.datasets.length;m<b;m++){const{controller:x}=this.getDatasetMeta(m),S=!l&&u.indexOf(x)===-1;x.buildOrUpdateElements(S),f=Math.max(+x.getMaxOverflow(),f)}f=this._minPadding=s.layout.autoPadding?f:0,this._updateLayout(f),l||Gt(u,m=>{m.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Gf("z","_idx"));const{_active:h,_lastEvent:p}=this;p?this._eventHandler(p,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){Gt(this.scales,e=>{ln.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!ff(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:l,count:u}of n){const f=s==="_removeElements"?-u:u;Z0(e,l,f)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=u=>new Set(e.filter(f=>f[0]===u).map((f,h)=>h+","+f.splice(1).join(","))),l=s(0);for(let u=1;u<n;u++)if(!ff(l,s(u)))return;return Array.from(l).map(u=>u.split(",")).map(u=>({method:u[1],start:+u[2],count:+u[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ln.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],Gt(this.boxes,l=>{s&&l.position==="chartArea"||(l.configure&&l.configure(),this._layers.push(...l._layers()))},this),this._layers.forEach((l,u)=>{l._idx=u}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,fi(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),l={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",l)!==!1&&(s.controller._update(n),l.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",l))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Un.has(this)?this.attached&&!Un.running(this)&&Un.start(this):(this.draw(),Zf({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:l}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,l)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let l,u;for(l=0,u=n.length;l<u;++l){const f=n[l];(!e||f.visible)&&s.push(f)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s=e._clip,l=!s.disabled,u=Q0(e,this.chartArea),f={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",f)!==!1&&(l&&Dl(n,{left:s.left===!1?0:u.left-s.left,right:s.right===!1?this.width:u.right+s.right,top:s.top===!1?0:u.top-s.top,bottom:s.bottom===!1?this.height:u.bottom+s.bottom}),e.controller.draw(),l&&Ol(n),f.cancelable=!1,this.notifyPlugins("afterDatasetDraw",f))}isPointInArea(e){return _s(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,l){const u=qy.modes[n];return typeof u=="function"?u(this,e,s,l):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let l=s.filter(u=>u&&u._dataset===n).pop();return l||(l={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(l)),l}getContext(){return this.$context||(this.$context=Ii(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const l=s?"show":"hide",u=this.getDatasetMeta(e),f=u.controller._resolveAnimations(void 0,l);Fo(n)?(u.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),f.update(u,{visible:s}),this.update(h=>h.datasetIndex===e?l:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Un.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),xf(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete No[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(u,f)=>{n.addEventListener(this,u,f),e[u]=f},l=(u,f,h)=>{u.offsetX=f,u.offsetY=h,this._eventHandler(u)};Gt(this.options.events,u=>s(u,l))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(p,m)=>{n.addEventListener(this,p,m),e[p]=m},l=(p,m)=>{e[p]&&(n.removeEventListener(this,p,m),delete e[p])},u=(p,m)=>{this.canvas&&this.resize(p,m)};let f;const h=()=>{l("attach",h),this.attached=!0,this.resize(),s("resize",u),s("detach",f)};f=()=>{this.attached=!1,l("resize",u),this._stop(),this._resize(0,0),s("attach",h)},n.isAttached(this.canvas)?h():f()}unbindEvents(){Gt(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Gt(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const l=s?"set":"remove";let u,f,h,p;for(n==="dataset"&&(u=this.getDatasetMeta(e[0].datasetIndex),u.controller["_"+l+"DatasetHoverStyle"]()),h=0,p=e.length;h<p;++h){f=e[h];const m=f&&this.getDatasetMeta(f.datasetIndex).controller;m&&m[l+"HoverStyle"](f.element,f.datasetIndex,f.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:u,index:f})=>{const h=this.getDatasetMeta(u);if(!h)throw new Error("No dataset found at index "+u);return{datasetIndex:u,element:h.data[f],index:f}});!Po(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const l=this.options.hover,u=(p,m)=>p.filter(b=>!m.some(x=>b.datasetIndex===x.datasetIndex&&b.index===x.index)),f=u(n,e),h=s?e:u(e,n);f.length&&this.updateHoverStyle(f,l.mode,!1),h.length&&l.mode&&this.updateHoverStyle(h,l.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},l=f=>(f.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,l)===!1)return;const u=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,l),(u||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:l=[],options:u}=this,f=n,h=this._getActiveElements(e,l,s,f),p=fv(e),m=J0(e,this._lastEvent,s,p);s&&(this._lastEvent=null,ee(u.onHover,[e,h,this],this),p&&ee(u.onClick,[e,h,this],this));const b=!Po(h,l);return(b||n)&&(this._active=h,this._updateHoverStyles(h,l,n)),this._lastEvent=m,b}_getActiveElements(e,n,s,l){if(e.type==="mouseout")return[];if(!s)return n;const u=this.options.hover;return this.getElementsAtEventForMode(e,u.mode,u,l)}},It(oi,"defaults",pe),It(oi,"instances",No),It(oi,"overrides",Pi),It(oi,"registry",Dn),It(oi,"version",X0),It(oi,"getChart",Jf),oi);function Qf(){return Gt(Yo.instances,i=>i._plugins.invalidate())}function Td(i,e,n=e){i.lineCap=Bt(n.borderCapStyle,e.borderCapStyle),i.setLineDash(Bt(n.borderDash,e.borderDash)),i.lineDashOffset=Bt(n.borderDashOffset,e.borderDashOffset),i.lineJoin=Bt(n.borderJoinStyle,e.borderJoinStyle),i.lineWidth=Bt(n.borderWidth,e.borderWidth),i.strokeStyle=Bt(n.borderColor,e.borderColor)}function tb(i,e,n){i.lineTo(n.x,n.y)}function eb(i){return i.stepped?Hv:i.tension||i.cubicInterpolationMode==="monotone"?zv:tb}function Md(i,e,n={}){const s=i.length,{start:l=0,end:u=s-1}=n,{start:f,end:h}=e,p=Math.max(l,f),m=Math.min(u,h),b=l<f&&u<f||l>h&&u>h;return{count:s,start:p,loop:e.loop,ilen:m<p&&!b?s+m-p:m-p}}function nb(i,e,n,s){const{points:l,options:u}=e,{count:f,start:h,loop:p,ilen:m}=Md(l,n,s),b=eb(u);let{move:x=!0,reverse:S}=s||{},C,A,O;for(C=0;C<=m;++C)A=l[(h+(S?m-C:C))%f],!A.skip&&(x?(i.moveTo(A.x,A.y),x=!1):b(i,O,A,S,u.stepped),O=A);return p&&(A=l[(h+(S?m:0))%f],b(i,O,A,S,u.stepped)),!!p}function ib(i,e,n,s){const l=e.points,{count:u,start:f,ilen:h}=Md(l,n,s),{move:p=!0,reverse:m}=s||{};let b=0,x=0,S,C,A,O,D,E;const z=q=>(f+(m?h-q:q))%u,it=()=>{O!==D&&(i.lineTo(b,D),i.lineTo(b,O),i.lineTo(b,E))};for(p&&(C=l[z(0)],i.moveTo(C.x,C.y)),S=0;S<=h;++S){if(C=l[z(S)],C.skip)continue;const q=C.x,j=C.y,Y=q|0;Y===A?(j<O?O=j:j>D&&(D=j),b=(x*b+q)/++x):(it(),i.lineTo(q,j),A=Y,x=0,O=D=j),E=j}it()}function fl(i){const e=i.options,n=e.borderDash&&e.borderDash.length;return!i._decimated&&!i._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?ib:nb}function rb(i){return i.stepped?yy:i.tension||i.cubicInterpolationMode==="monotone"?by:Li}function sb(i,e,n,s){let l=e._path;l||(l=e._path=new Path2D,e.path(l,n,s)&&l.closePath()),Td(i,e.options),i.stroke(l)}function ob(i,e,n,s){const{segments:l,options:u}=e,f=fl(e);for(const h of l)Td(i,u,h.style),i.beginPath(),f(i,e,h,{start:n,end:n+s-1})&&i.closePath(),i.stroke()}const ab=typeof Path2D=="function";function lb(i,e,n,s){ab&&!e.options.segment?sb(i,e,n,s):ob(i,e,n,s)}class as extends Xn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const l=s.spanGaps?this._loop:this._fullLoop;uy(this._points,s,e,l,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=My(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,l=e[n],u=this.points,f=Sy(this,{property:n,start:l,end:l});if(!f.length)return;const h=[],p=rb(s);let m,b;for(m=0,b=f.length;m<b;++m){const{start:x,end:S}=f[m],C=u[x],A=u[S];if(C===A){h.push(C);continue}const O=Math.abs((l-C[n])/(A[n]-C[n])),D=p(C,A,O,s.stepped);D[n]=e[n],h.push(D)}return h.length===1?h[0]:h}pathSegment(e,n,s){return fl(this)(e,this,n,s)}path(e,n,s){const l=this.segments,u=fl(this);let f=this._loop;n=n||0,s=s||this.points.length-n;for(const h of l)f&=u(e,this,h,{start:n,end:n+s-1});return!!f}draw(e,n,s,l){const u=this.options||{};(this.points||[]).length&&u.borderWidth&&(e.save(),lb(e,this,s,l),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}It(as,"id","line"),It(as,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),It(as,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),It(as,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function th(i,e,n,s){const l=i.options,{[n]:u}=i.getProps([n],s);return Math.abs(e-u)<l.radius+l.hitRadius}class Do extends Xn{constructor(n){super();It(this,"parsed");It(this,"skip");It(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,l){const u=this.options,{x:f,y:h}=this.getProps(["x","y"],l);return Math.pow(n-f,2)+Math.pow(s-h,2)<Math.pow(u.hitRadius+u.radius,2)}inXRange(n,s){return th(this,n,"x",s)}inYRange(n,s){return th(this,n,"y",s)}getCenterPoint(n){const{x:s,y:l}=this.getProps(["x","y"],n);return{x:s,y:l}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const l=s&&n.borderWidth||0;return(s+l)*2}draw(n,s){const l=this.options;this.skip||l.radius<.1||!_s(this,s,this.size(l)/2)||(n.strokeStyle=l.borderColor,n.lineWidth=l.borderWidth,n.fillStyle=l.backgroundColor,al(n,l,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}It(Do,"id","point"),It(Do,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),It(Do,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const eh=(i,e)=>{let{boxHeight:n=e,boxWidth:s=e}=i;return i.usePointStyle&&(n=Math.min(n,e),s=i.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},cb=(i,e)=>i!==null&&e!==null&&i.datasetIndex===e.datasetIndex&&i.index===e.index;class nh extends Xn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ee(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,l)=>e.sort(s,l,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,l=Pe(s.font),u=l.size,f=this._computeTitleHeight(),{boxWidth:h,itemHeight:p}=eh(s,u);let m,b;n.font=l.string,this.isHorizontal()?(m=this.maxWidth,b=this._fitRows(f,u,h,p)+10):(b=this.maxHeight,m=this._fitCols(f,l,h,p)+10),this.width=Math.min(m,e.maxWidth||this.maxWidth),this.height=Math.min(b,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,l){const{ctx:u,maxWidth:f,options:{labels:{padding:h}}}=this,p=this.legendHitBoxes=[],m=this.lineWidths=[0],b=l+h;let x=e;u.textAlign="left",u.textBaseline="middle";let S=-1,C=-b;return this.legendItems.forEach((A,O)=>{const D=s+n/2+u.measureText(A.text).width;(O===0||m[m.length-1]+D+2*h>f)&&(x+=b,m[m.length-(O>0?0:1)]=0,C+=b,S++),p[O]={left:0,top:C,row:S,width:D,height:l},m[m.length-1]+=D+h}),x}_fitCols(e,n,s,l){const{ctx:u,maxHeight:f,options:{labels:{padding:h}}}=this,p=this.legendHitBoxes=[],m=this.columnSizes=[],b=f-e;let x=h,S=0,C=0,A=0,O=0;return this.legendItems.forEach((D,E)=>{const{itemWidth:z,itemHeight:it}=ub(s,n,u,D,l);E>0&&C+it+2*h>b&&(x+=S+h,m.push({width:S,height:C}),A+=S+h,O++,S=C=0),p[E]={left:A,top:C,col:O,width:z,height:it},S=Math.max(S,z),C+=it+h}),x+=S,m.push({width:S,height:C}),x}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:l},rtl:u}}=this,f=lr(u,this.left,this.width);if(this.isHorizontal()){let h=0,p=Ae(s,this.left+l,this.right-this.lineWidths[h]);for(const m of n)h!==m.row&&(h=m.row,p=Ae(s,this.left+l,this.right-this.lineWidths[h])),m.top+=this.top+e+l,m.left=f.leftForLtr(f.x(p),m.width),p+=m.width+l}else{let h=0,p=Ae(s,this.top+e+l,this.bottom-this.columnSizes[h].height);for(const m of n)m.col!==h&&(h=m.col,p=Ae(s,this.top+e+l,this.bottom-this.columnSizes[h].height)),m.top=p,m.left+=this.left+l,m.left=f.leftForLtr(f.x(m.left),m.width),p+=m.height+l}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Dl(e,this),this._draw(),Ol(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:l}=this,{align:u,labels:f}=e,h=pe.color,p=lr(e.rtl,this.left,this.width),m=Pe(f.font),{padding:b}=f,x=m.size,S=x/2;let C;this.drawTitle(),l.textAlign=p.textAlign("left"),l.textBaseline="middle",l.lineWidth=.5,l.font=m.string;const{boxWidth:A,boxHeight:O,itemHeight:D}=eh(f,x),E=function(Y,Q,G){if(isNaN(A)||A<=0||isNaN(O)||O<0)return;l.save();const vt=Bt(G.lineWidth,1);if(l.fillStyle=Bt(G.fillStyle,h),l.lineCap=Bt(G.lineCap,"butt"),l.lineDashOffset=Bt(G.lineDashOffset,0),l.lineJoin=Bt(G.lineJoin,"miter"),l.lineWidth=vt,l.strokeStyle=Bt(G.strokeStyle,h),l.setLineDash(Bt(G.lineDash,[])),f.usePointStyle){const ot={radius:O*Math.SQRT2/2,pointStyle:G.pointStyle,rotation:G.rotation,borderWidth:vt},tt=p.xPlus(Y,A/2),rt=Q+S;sd(l,ot,tt,rt,f.pointStyleWidth&&A)}else{const ot=Q+Math.max((x-O)/2,0),tt=p.leftForLtr(Y,A),rt=ps(G.borderRadius);l.beginPath(),Object.values(rt).some(H=>H!==0)?ll(l,{x:tt,y:ot,w:A,h:O,radius:rt}):l.rect(tt,ot,A,O),l.fill(),vt!==0&&l.stroke()}l.restore()},z=function(Y,Q,G){xs(l,G.text,Y,Q+D/2,m,{strikethrough:G.hidden,textAlign:p.textAlign(G.textAlign)})},it=this.isHorizontal(),q=this._computeTitleHeight();it?C={x:Ae(u,this.left+b,this.right-s[0]),y:this.top+b+q,line:0}:C={x:this.left+b,y:Ae(u,this.top+q+b,this.bottom-n[0].height),line:0},hd(this.ctx,e.textDirection);const j=D+b;this.legendItems.forEach((Y,Q)=>{l.strokeStyle=Y.fontColor,l.fillStyle=Y.fontColor;const G=l.measureText(Y.text).width,vt=p.textAlign(Y.textAlign||(Y.textAlign=f.textAlign)),ot=A+S+G;let tt=C.x,rt=C.y;p.setWidth(this.width),it?Q>0&&tt+ot+b>this.right&&(rt=C.y+=j,C.line++,tt=C.x=Ae(u,this.left+b,this.right-s[C.line])):Q>0&&rt+j>this.bottom&&(tt=C.x=tt+n[C.line].width+b,C.line++,rt=C.y=Ae(u,this.top+q+b,this.bottom-n[C.line].height));const H=p.x(tt);if(E(H,rt,Y),tt=Tv(vt,tt+A+S,it?tt+ot:this.right,e.rtl),z(p.x(tt),rt,Y),it)C.x+=ot+b;else if(typeof Y.text!="string"){const W=m.lineHeight;C.y+=Ld(Y,W)+b}else C.y+=j}),dd(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=Pe(n.font),l=fn(n.padding);if(!n.display)return;const u=lr(e.rtl,this.left,this.width),f=this.ctx,h=n.position,p=s.size/2,m=l.top+p;let b,x=this.left,S=this.width;if(this.isHorizontal())S=Math.max(...this.lineWidths),b=this.top+m,x=Ae(e.align,x,this.right-S);else{const A=this.columnSizes.reduce((O,D)=>Math.max(O,D.height),0);b=m+Ae(e.align,this.top,this.bottom-A-e.labels.padding-this._computeTitleHeight())}const C=Ae(h,x,x+S);f.textAlign=u.textAlign(Ll(h)),f.textBaseline="middle",f.strokeStyle=n.color,f.fillStyle=n.color,f.font=s.string,xs(f,n.text,C,b,s)}_computeTitleHeight(){const e=this.options.title,n=Pe(e.font),s=fn(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,l,u;if(ss(e,this.left,this.right)&&ss(n,this.top,this.bottom)){for(u=this.legendHitBoxes,s=0;s<u.length;++s)if(l=u[s],ss(e,l.left,l.left+l.width)&&ss(n,l.top,l.top+l.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!db(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const l=this._hoveredItem,u=cb(l,s);l&&!u&&ee(n.onLeave,[e,l,this],this),this._hoveredItem=s,s&&!u&&ee(n.onHover,[e,s,this],this)}else s&&ee(n.onClick,[e,s,this],this)}}function ub(i,e,n,s,l){const u=fb(s,i,e,n),f=hb(l,s,e.lineHeight);return{itemWidth:u,itemHeight:f}}function fb(i,e,n,s){let l=i.text;return l&&typeof l!="string"&&(l=l.reduce((u,f)=>u.length>f.length?u:f)),e+n.size/2+s.measureText(l).width}function hb(i,e,n){let s=i;return typeof e.text!="string"&&(s=Ld(e,n)),s}function Ld(i,e){const n=i.text?i.text.length:0;return e*n}function db(i,e){return!!((i==="mousemove"||i==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(i==="click"||i==="mouseup"))}var pb={id:"legend",_element:nh,start(i,e,n){const s=i.legend=new nh({ctx:i.ctx,options:n,chart:i});ln.configure(i,s,n),ln.addBox(i,s)},stop(i){ln.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,e,n){const s=i.legend;ln.configure(i,s,n),s.options=n},afterUpdate(i){const e=i.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(i,e){e.replay||i.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,e,n){const s=e.datasetIndex,l=n.chart;l.isDatasetVisible(s)?(l.hide(s),e.hidden=!0):(l.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const e=i.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:l,color:u,useBorderRadius:f,borderRadius:h}}=i.legend.options;return i._getSortedDatasetMetas().map(p=>{const m=p.controller.getStyle(n?0:void 0),b=fn(m.borderWidth);return{text:e[p.index].label,fillStyle:m.backgroundColor,fontColor:u,hidden:!p.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(b.width+b.height)/4,strokeStyle:m.borderColor,pointStyle:s||m.pointStyle,rotation:m.rotation,textAlign:l||m.textAlign,borderRadius:f&&(h||m.borderRadius),datasetIndex:p.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class Nd extends Xn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const l=Se(s.text)?s.text.length:1;this._padding=fn(s.padding);const u=l*Pe(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=u:this.width=u}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:l,right:u,options:f}=this,h=f.align;let p=0,m,b,x;return this.isHorizontal()?(b=Ae(h,s,u),x=n+e,m=u-s):(f.position==="left"?(b=s+e,x=Ae(h,l,n),p=Ce*-.5):(b=u-e,x=Ae(h,n,l),p=Ce*.5),m=l-n),{titleX:b,titleY:x,maxWidth:m,rotation:p}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=Pe(n.font),u=s.lineHeight/2+this._padding.top,{titleX:f,titleY:h,maxWidth:p,rotation:m}=this._drawArgs(u);xs(e,n.text,0,0,s,{color:n.color,maxWidth:p,rotation:m,textAlign:Ll(n.align),textBaseline:"middle",translation:[f,h]})}}function gb(i,e){const n=new Nd({ctx:i.ctx,options:e,chart:i});ln.configure(i,n,e),ln.addBox(i,n),i.titleBlock=n}var mb={id:"title",_element:Nd,start(i,e,n){gb(i,n)},stop(i){const e=i.titleBlock;ln.removeBox(i,e),delete i.titleBlock},beforeUpdate(i,e,n){const s=i.titleBlock;ln.configure(i,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ls={average(i){if(!i.length)return!1;let e,n,s=new Set,l=0,u=0;for(e=0,n=i.length;e<n;++e){const h=i[e].element;if(h&&h.hasValue()){const p=h.tooltipPosition();s.add(p.x),l+=p.y,++u}}return u===0||s.size===0?!1:{x:[...s].reduce((h,p)=>h+p)/s.size,y:l/u}},nearest(i,e){if(!i.length)return!1;let n=e.x,s=e.y,l=Number.POSITIVE_INFINITY,u,f,h;for(u=0,f=i.length;u<f;++u){const p=i[u].element;if(p&&p.hasValue()){const m=p.getCenterPoint(),b=sl(e,m);b<l&&(l=b,h=p)}}if(h){const p=h.tooltipPosition();n=p.x,s=p.y}return{x:n,y:s}}};function Nn(i,e){return e&&(Se(e)?Array.prototype.push.apply(i,e):i.push(e)),i}function $n(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function vb(i,e){const{element:n,datasetIndex:s,index:l}=e,u=i.getDatasetMeta(s).controller,{label:f,value:h}=u.getLabelAndValue(l);return{chart:i,label:f,parsed:u.getParsed(l),raw:i.data.datasets[s].data[l],formattedValue:h,dataset:u.getDataset(),dataIndex:l,datasetIndex:s,element:n}}function ih(i,e){const n=i.chart.ctx,{body:s,footer:l,title:u}=i,{boxWidth:f,boxHeight:h}=e,p=Pe(e.bodyFont),m=Pe(e.titleFont),b=Pe(e.footerFont),x=u.length,S=l.length,C=s.length,A=fn(e.padding);let O=A.height,D=0,E=s.reduce((q,j)=>q+j.before.length+j.lines.length+j.after.length,0);if(E+=i.beforeBody.length+i.afterBody.length,x&&(O+=x*m.lineHeight+(x-1)*e.titleSpacing+e.titleMarginBottom),E){const q=e.displayColors?Math.max(h,p.lineHeight):p.lineHeight;O+=C*q+(E-C)*p.lineHeight+(E-1)*e.bodySpacing}S&&(O+=e.footerMarginTop+S*b.lineHeight+(S-1)*e.footerSpacing);let z=0;const it=function(q){D=Math.max(D,n.measureText(q).width+z)};return n.save(),n.font=m.string,Gt(i.title,it),n.font=p.string,Gt(i.beforeBody.concat(i.afterBody),it),z=e.displayColors?f+2+e.boxPadding:0,Gt(s,q=>{Gt(q.before,it),Gt(q.lines,it),Gt(q.after,it)}),z=0,n.font=b.string,Gt(i.footer,it),n.restore(),D+=A.width,{width:D,height:O}}function yb(i,e){const{y:n,height:s}=e;return n<s/2?"top":n>i.height-s/2?"bottom":"center"}function bb(i,e,n,s){const{x:l,width:u}=s,f=n.caretSize+n.caretPadding;if(i==="left"&&l+u+f>e.width||i==="right"&&l-u-f<0)return!0}function _b(i,e,n,s){const{x:l,width:u}=n,{width:f,chartArea:{left:h,right:p}}=i;let m="center";return s==="center"?m=l<=(h+p)/2?"left":"right":l<=u/2?m="left":l>=f-u/2&&(m="right"),bb(m,i,e,n)&&(m="center"),m}function rh(i,e,n){const s=n.yAlign||e.yAlign||yb(i,n);return{xAlign:n.xAlign||e.xAlign||_b(i,e,n,s),yAlign:s}}function xb(i,e){let{x:n,width:s}=i;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function wb(i,e,n){let{y:s,height:l}=i;return e==="top"?s+=n:e==="bottom"?s-=l+n:s-=l/2,s}function sh(i,e,n,s){const{caretSize:l,caretPadding:u,cornerRadius:f}=i,{xAlign:h,yAlign:p}=n,m=l+u,{topLeft:b,topRight:x,bottomLeft:S,bottomRight:C}=ps(f);let A=xb(e,h);const O=wb(e,p,m);return p==="center"?h==="left"?A+=m:h==="right"&&(A-=m):h==="left"?A-=Math.max(b,S)+l:h==="right"&&(A+=Math.max(x,C)+l),{x:an(A,0,s.width-e.width),y:an(O,0,s.height-e.height)}}function wo(i,e,n){const s=fn(n.padding);return e==="center"?i.x+i.width/2:e==="right"?i.x+i.width-s.right:i.x+s.left}function oh(i){return Nn([],$n(i))}function kb(i,e,n){return Ii(i,{tooltip:e,tooltipItems:n,type:"tooltip"})}function ah(i,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?i.override(n):i}const Dd={beforeTitle:Bn,title(i){if(i.length>0){const e=i[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:Bn,beforeBody:Bn,beforeLabel:Bn,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let e=i.dataset.label||"";e&&(e+=": ");const n=i.formattedValue;return le(n)||(e+=n),e},labelColor(i){const n=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const n=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Bn,afterBody:Bn,beforeFooter:Bn,footer:Bn,afterFooter:Bn};function Xe(i,e,n,s){const l=i[e].call(n,s);return typeof l>"u"?Dd[e].call(n,s):l}class hl extends Xn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),l=s.enabled&&n.options.animation&&s.animations,u=new gd(this.chart,l);return l._cacheable&&(this._cachedAnimations=Object.freeze(u)),u}getContext(){return this.$context||(this.$context=kb(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,l=Xe(s,"beforeTitle",this,e),u=Xe(s,"title",this,e),f=Xe(s,"afterTitle",this,e);let h=[];return h=Nn(h,$n(l)),h=Nn(h,$n(u)),h=Nn(h,$n(f)),h}getBeforeBody(e,n){return oh(Xe(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,l=[];return Gt(e,u=>{const f={before:[],lines:[],after:[]},h=ah(s,u);Nn(f.before,$n(Xe(h,"beforeLabel",this,u))),Nn(f.lines,Xe(h,"label",this,u)),Nn(f.after,$n(Xe(h,"afterLabel",this,u))),l.push(f)}),l}getAfterBody(e,n){return oh(Xe(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,l=Xe(s,"beforeFooter",this,e),u=Xe(s,"footer",this,e),f=Xe(s,"afterFooter",this,e);let h=[];return h=Nn(h,$n(l)),h=Nn(h,$n(u)),h=Nn(h,$n(f)),h}_createItems(e){const n=this._active,s=this.chart.data,l=[],u=[],f=[];let h=[],p,m;for(p=0,m=n.length;p<m;++p)h.push(vb(this.chart,n[p]));return e.filter&&(h=h.filter((b,x,S)=>e.filter(b,x,S,s))),e.itemSort&&(h=h.sort((b,x)=>e.itemSort(b,x,s))),Gt(h,b=>{const x=ah(e.callbacks,b);l.push(Xe(x,"labelColor",this,b)),u.push(Xe(x,"labelPointStyle",this,b)),f.push(Xe(x,"labelTextColor",this,b))}),this.labelColors=l,this.labelPointStyles=u,this.labelTextColors=f,this.dataPoints=h,h}update(e,n){const s=this.options.setContext(this.getContext()),l=this._active;let u,f=[];if(!l.length)this.opacity!==0&&(u={opacity:0});else{const h=ls[s.position].call(this,l,this._eventPosition);f=this._createItems(s),this.title=this.getTitle(f,s),this.beforeBody=this.getBeforeBody(f,s),this.body=this.getBody(f,s),this.afterBody=this.getAfterBody(f,s),this.footer=this.getFooter(f,s);const p=this._size=ih(this,s),m=Object.assign({},h,p),b=rh(this.chart,s,m),x=sh(s,m,b,this.chart);this.xAlign=b.xAlign,this.yAlign=b.yAlign,u={opacity:1,x:x.x,y:x.y,width:p.width,height:p.height,caretX:h.x,caretY:h.y}}this._tooltipItems=f,this.$context=void 0,u&&this._resolveAnimations().update(this,u),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,l){const u=this.getCaretPosition(e,s,l);n.lineTo(u.x1,u.y1),n.lineTo(u.x2,u.y2),n.lineTo(u.x3,u.y3)}getCaretPosition(e,n,s){const{xAlign:l,yAlign:u}=this,{caretSize:f,cornerRadius:h}=s,{topLeft:p,topRight:m,bottomLeft:b,bottomRight:x}=ps(h),{x:S,y:C}=e,{width:A,height:O}=n;let D,E,z,it,q,j;return u==="center"?(q=C+O/2,l==="left"?(D=S,E=D-f,it=q+f,j=q-f):(D=S+A,E=D+f,it=q-f,j=q+f),z=D):(l==="left"?E=S+Math.max(p,b)+f:l==="right"?E=S+A-Math.max(m,x)-f:E=this.caretX,u==="top"?(it=C,q=it-f,D=E-f,z=E+f):(it=C+O,q=it+f,D=E+f,z=E-f),j=it),{x1:D,x2:E,x3:z,y1:it,y2:q,y3:j}}drawTitle(e,n,s){const l=this.title,u=l.length;let f,h,p;if(u){const m=lr(s.rtl,this.x,this.width);for(e.x=wo(this,s.titleAlign,s),n.textAlign=m.textAlign(s.titleAlign),n.textBaseline="middle",f=Pe(s.titleFont),h=s.titleSpacing,n.fillStyle=s.titleColor,n.font=f.string,p=0;p<u;++p)n.fillText(l[p],m.x(e.x),e.y+f.lineHeight/2),e.y+=f.lineHeight+h,p+1===u&&(e.y+=s.titleMarginBottom-h)}}_drawColorBox(e,n,s,l,u){const f=this.labelColors[s],h=this.labelPointStyles[s],{boxHeight:p,boxWidth:m}=u,b=Pe(u.bodyFont),x=wo(this,"left",u),S=l.x(x),C=p<b.lineHeight?(b.lineHeight-p)/2:0,A=n.y+C;if(u.usePointStyle){const O={radius:Math.min(m,p)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},D=l.leftForLtr(S,m)+m/2,E=A+p/2;e.strokeStyle=u.multiKeyBackground,e.fillStyle=u.multiKeyBackground,al(e,O,D,E),e.strokeStyle=f.borderColor,e.fillStyle=f.backgroundColor,al(e,O,D,E)}else{e.lineWidth=Vt(f.borderWidth)?Math.max(...Object.values(f.borderWidth)):f.borderWidth||1,e.strokeStyle=f.borderColor,e.setLineDash(f.borderDash||[]),e.lineDashOffset=f.borderDashOffset||0;const O=l.leftForLtr(S,m),D=l.leftForLtr(l.xPlus(S,1),m-2),E=ps(f.borderRadius);Object.values(E).some(z=>z!==0)?(e.beginPath(),e.fillStyle=u.multiKeyBackground,ll(e,{x:O,y:A,w:m,h:p,radius:E}),e.fill(),e.stroke(),e.fillStyle=f.backgroundColor,e.beginPath(),ll(e,{x:D,y:A+1,w:m-2,h:p-2,radius:E}),e.fill()):(e.fillStyle=u.multiKeyBackground,e.fillRect(O,A,m,p),e.strokeRect(O,A,m,p),e.fillStyle=f.backgroundColor,e.fillRect(D,A+1,m-2,p-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:l}=this,{bodySpacing:u,bodyAlign:f,displayColors:h,boxHeight:p,boxWidth:m,boxPadding:b}=s,x=Pe(s.bodyFont);let S=x.lineHeight,C=0;const A=lr(s.rtl,this.x,this.width),O=function(G){n.fillText(G,A.x(e.x+C),e.y+S/2),e.y+=S+u},D=A.textAlign(f);let E,z,it,q,j,Y,Q;for(n.textAlign=f,n.textBaseline="middle",n.font=x.string,e.x=wo(this,D,s),n.fillStyle=s.bodyColor,Gt(this.beforeBody,O),C=h&&D!=="right"?f==="center"?m/2+b:m+2+b:0,q=0,Y=l.length;q<Y;++q){for(E=l[q],z=this.labelTextColors[q],n.fillStyle=z,Gt(E.before,O),it=E.lines,h&&it.length&&(this._drawColorBox(n,e,q,A,s),S=Math.max(x.lineHeight,p)),j=0,Q=it.length;j<Q;++j)O(it[j]),S=x.lineHeight;Gt(E.after,O)}C=0,S=x.lineHeight,Gt(this.afterBody,O),e.y-=u}drawFooter(e,n,s){const l=this.footer,u=l.length;let f,h;if(u){const p=lr(s.rtl,this.x,this.width);for(e.x=wo(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=p.textAlign(s.footerAlign),n.textBaseline="middle",f=Pe(s.footerFont),n.fillStyle=s.footerColor,n.font=f.string,h=0;h<u;++h)n.fillText(l[h],p.x(e.x),e.y+f.lineHeight/2),e.y+=f.lineHeight+s.footerSpacing}}drawBackground(e,n,s,l){const{xAlign:u,yAlign:f}=this,{x:h,y:p}=e,{width:m,height:b}=s,{topLeft:x,topRight:S,bottomLeft:C,bottomRight:A}=ps(l.cornerRadius);n.fillStyle=l.backgroundColor,n.strokeStyle=l.borderColor,n.lineWidth=l.borderWidth,n.beginPath(),n.moveTo(h+x,p),f==="top"&&this.drawCaret(e,n,s,l),n.lineTo(h+m-S,p),n.quadraticCurveTo(h+m,p,h+m,p+S),f==="center"&&u==="right"&&this.drawCaret(e,n,s,l),n.lineTo(h+m,p+b-A),n.quadraticCurveTo(h+m,p+b,h+m-A,p+b),f==="bottom"&&this.drawCaret(e,n,s,l),n.lineTo(h+C,p+b),n.quadraticCurveTo(h,p+b,h,p+b-C),f==="center"&&u==="left"&&this.drawCaret(e,n,s,l),n.lineTo(h,p+x),n.quadraticCurveTo(h,p,h+x,p),n.closePath(),n.fill(),l.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,l=s&&s.x,u=s&&s.y;if(l||u){const f=ls[e.position].call(this,this._active,this._eventPosition);if(!f)return;const h=this._size=ih(this,e),p=Object.assign({},f,this._size),m=rh(n,e,p),b=sh(e,p,m,n);(l._to!==b.x||u._to!==b.y)&&(this.xAlign=m.xAlign,this.yAlign=m.yAlign,this.width=h.width,this.height=h.height,this.caretX=f.x,this.caretY=f.y,this._resolveAnimations().update(this,b))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const l={width:this.width,height:this.height},u={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const f=fn(n.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&h&&(e.save(),e.globalAlpha=s,this.drawBackground(u,e,l,n),hd(e,n.textDirection),u.y+=f.top,this.drawTitle(u,e,n),this.drawBody(u,e,n),this.drawFooter(u,e,n),dd(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,l=e.map(({datasetIndex:h,index:p})=>{const m=this.chart.getDatasetMeta(h);if(!m)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:m.data[p],index:p}}),u=!Po(s,l),f=this._positionChanged(l,n);(u||f)&&(this._active=l,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const l=this.options,u=this._active||[],f=this._getActiveElements(e,u,n,s),h=this._positionChanged(f,e),p=n||!Po(f,u)||h;return p&&(this._active=f,(l.enabled||l.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),p}_getActiveElements(e,n,s,l){const u=this.options;if(e.type==="mouseout")return[];if(!l)return n.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const f=this.chart.getElementsAtEventForMode(e,u.mode,u,s);return u.reverse&&f.reverse(),f}_positionChanged(e,n){const{caretX:s,caretY:l,options:u}=this,f=ls[u.position].call(this,e,n);return f!==!1&&(s!==f.x||l!==f.y)}}It(hl,"positioners",ls);var Sb={id:"tooltip",_element:hl,positioners:ls,afterInit(i,e,n){n&&(i.tooltip=new hl({chart:i,options:n}))},beforeUpdate(i,e,n){i.tooltip&&i.tooltip.initialize(n)},reset(i,e,n){i.tooltip&&i.tooltip.initialize(n)},afterDraw(i){const e=i.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(i.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",n)}},afterEvent(i,e){if(i.tooltip){const n=e.replay;i.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,e)=>e.bodyFont.size,boxWidth:(i,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Dd},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Cb=(i,e,n,s)=>(typeof e=="string"?(n=i.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Tb(i,e,n,s){const l=i.indexOf(e);if(l===-1)return Cb(i,e,n,s);const u=i.lastIndexOf(e);return l!==u?n:l}const Mb=(i,e)=>i===null?null:an(Math.round(i),0,e);function lh(i){const e=this.getLabels();return i>=0&&i<e.length?e[i]:i}class dl extends mr{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:l,label:u}of n)s[l]===u&&s.splice(l,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(le(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:Tb(s,e,Bt(n,e),this._addedLabels),Mb(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:l}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(l=this.getLabels().length-1)),this.min=s,this.max=l}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,l=[];let u=this.getLabels();u=e===0&&n===u.length-1?u:u.slice(e,n+1),this._valueRange=Math.max(u.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let f=e;f<=n;f++)l.push({value:f});return l}getLabelForValue(e){return lh.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}It(dl,"id","category"),It(dl,"defaults",{ticks:{callback:lh}});function Lb(i,e){const n=[],{bounds:l,step:u,min:f,max:h,precision:p,count:m,maxTicks:b,maxDigits:x,includeBounds:S}=i,C=u||1,A=b-1,{min:O,max:D}=e,E=!le(f),z=!le(h),it=!le(m),q=(D-O)/(x+1);let j=df((D-O)/A/C)*C,Y,Q,G,vt;if(j<1e-14&&!E&&!z)return[{value:O},{value:D}];vt=Math.ceil(D/j)-Math.floor(O/j),vt>A&&(j=df(vt*j/A/C)*C),le(p)||(Y=Math.pow(10,p),j=Math.ceil(j*Y)/Y),l==="ticks"?(Q=Math.floor(O/j)*j,G=Math.ceil(D/j)*j):(Q=O,G=D),E&&z&&u&&gv((h-f)/u,j/1e3)?(vt=Math.round(Math.min((h-f)/j,b)),j=(h-f)/vt,Q=f,G=h):it?(Q=E?f:Q,G=z?h:G,vt=m-1,j=(G-Q)/vt):(vt=(G-Q)/j,fs(vt,Math.round(vt),j/1e3)?vt=Math.round(vt):vt=Math.ceil(vt));const ot=Math.max(pf(j),pf(Q));Y=Math.pow(10,le(p)?ot:p),Q=Math.round(Q*Y)/Y,G=Math.round(G*Y)/Y;let tt=0;for(E&&(S&&Q!==f?(n.push({value:f}),Q<f&&tt++,fs(Math.round((Q+tt*j)*Y)/Y,f,ch(f,q,i))&&tt++):Q<f&&tt++);tt<vt;++tt){const rt=Math.round((Q+tt*j)*Y)/Y;if(z&&rt>h)break;n.push({value:rt})}return z&&S&&G!==h?n.length&&fs(n[n.length-1].value,h,ch(h,q,i))?n[n.length-1].value=h:n.push({value:h}):(!z||G===h)&&n.push({value:G}),n}function ch(i,e,{horizontal:n,minRotation:s}){const l=Di(s),u=(n?Math.sin(l):Math.cos(l))||.001,f=.75*e*(""+i).length;return Math.min(e/u,f)}class Nb extends mr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return le(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:l,max:u}=this;const f=p=>l=n?l:p,h=p=>u=s?u:p;if(e){const p=hr(l),m=hr(u);p<0&&m<0?h(0):p>0&&m>0&&f(0)}if(l===u){let p=u===0?1:Math.abs(u*.05);h(u+p),e||f(l-p)}this.min=l,this.max=u}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,l;return s?(l=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,l>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${l} ticks. Limiting to 1000.`),l=1e3)):(l=this.computeTickLimit(),n=n||11),n&&(l=Math.min(n,l)),l}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const l={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},u=this._range||this,f=Lb(l,u);return e.bounds==="ticks"&&mv(f,this,"value"),e.reverse?(f.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),f}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const l=(s-n)/Math.max(e.length-1,1)/2;n-=l,s+=l}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return nd(e,this.chart.options.locale,this.options.ticks.format)}}class pl extends Nb{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=un(e)?e:0,this.max=un(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Di(this.options.ticks.minRotation),l=(e?Math.sin(s):Math.cos(s))||.001,u=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,u.lineHeight/l))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}It(pl,"id","linear"),It(pl,"defaults",{ticks:{callback:rd.formatters.numeric}});const Ko={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},qe=Object.keys(Ko);function uh(i,e){return i-e}function fh(i,e){if(le(e))return null;const n=i._adapter,{parser:s,round:l,isoWeekday:u}=i._parseOpts;let f=e;return typeof s=="function"&&(f=s(f)),un(f)||(f=typeof s=="string"?n.parse(f,s):n.parse(f)),f===null?null:(l&&(f=l==="week"&&(bs(u)||u===!0)?n.startOf(f,"isoWeek",u):n.startOf(f,l)),+f)}function hh(i,e,n,s){const l=qe.length;for(let u=qe.indexOf(i);u<l-1;++u){const f=Ko[qe[u]],h=f.steps?f.steps:Number.MAX_SAFE_INTEGER;if(f.common&&Math.ceil((n-e)/(h*f.size))<=s)return qe[u]}return qe[l-1]}function Db(i,e,n,s,l){for(let u=qe.length-1;u>=qe.indexOf(n);u--){const f=qe[u];if(Ko[f].common&&i._adapter.diff(l,s,f)>=e-1)return f}return qe[n?qe.indexOf(n):0]}function Ob(i){for(let e=qe.indexOf(i)+1,n=qe.length;e<n;++e)if(Ko[qe[e]].common)return qe[e]}function dh(i,e,n){if(!n)i[e]=!0;else if(n.length){const{lo:s,hi:l}=Ml(n,e),u=n[s]>=e?n[s]:n[l];i[u]=!0}}function Ab(i,e,n,s){const l=i._adapter,u=+l.startOf(e[0].value,s),f=e[e.length-1].value;let h,p;for(h=u;h<=f;h=+l.add(h,1,s))p=n[h],p>=0&&(e[p].major=!0);return e}function ph(i,e,n){const s=[],l={},u=e.length;let f,h;for(f=0;f<u;++f)h=e[f],l[h]=f,s.push({value:h,major:!1});return u===0||!n?s:Ab(i,s,l,n)}class Wo extends mr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),l=this._adapter=new jy._date(e.adapters.date);l.init(n),us(s.displayFormats,l.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:fh(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:l,max:u,minDefined:f,maxDefined:h}=this.getUserBounds();function p(m){!f&&!isNaN(m.min)&&(l=Math.min(l,m.min)),!h&&!isNaN(m.max)&&(u=Math.max(u,m.max))}(!f||!h)&&(p(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&p(this.getMinMax(!1))),l=un(l)&&!isNaN(l)?l:+n.startOf(Date.now(),s),u=un(u)&&!isNaN(u)?u:+n.endOf(Date.now(),s)+1,this.min=Math.min(l,u-1),this.max=Math.max(l+1,u)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,l=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&l.length&&(this.min=this._userMin||l[0],this.max=this._userMax||l[l.length-1]);const u=this.min,f=this.max,h=wv(l,u,f);return this._unit=n.unit||(s.autoSkip?hh(n.minUnit,this.min,this.max,this._getLabelCapacity(u)):Db(this,h.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Ob(this._unit),this.initOffsets(l),e.reverse&&h.reverse(),ph(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,l,u;this.options.offset&&e.length&&(l=this.getDecimalForValue(e[0]),e.length===1?n=1-l:n=(this.getDecimalForValue(e[1])-l)/2,u=this.getDecimalForValue(e[e.length-1]),e.length===1?s=u:s=(u-this.getDecimalForValue(e[e.length-2]))/2);const f=e.length<3?.5:.25;n=an(n,0,f),s=an(s,0,f),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,l=this.options,u=l.time,f=u.unit||hh(u.minUnit,n,s,this._getLabelCapacity(n)),h=Bt(l.ticks.stepSize,1),p=f==="week"?u.isoWeekday:!1,m=bs(p)||p===!0,b={};let x=n,S,C;if(m&&(x=+e.startOf(x,"isoWeek",p)),x=+e.startOf(x,m?"day":f),e.diff(s,n,f)>1e5*h)throw new Error(n+" and "+s+" are too far apart with stepSize of "+h+" "+f);const A=l.ticks.source==="data"&&this.getDataTimestamps();for(S=x,C=0;S<s;S=+e.add(S,h,f),C++)dh(b,S,A);return(S===s||l.bounds==="ticks"||C===1)&&dh(b,S,A),Object.keys(b).sort(uh).map(O=>+O)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const l=this.options.time.displayFormats,u=this._unit,f=n||l[u];return this._adapter.format(e,f)}_tickFormatFunction(e,n,s,l){const u=this.options,f=u.ticks.callback;if(f)return ee(f,[e,n,s],this);const h=u.time.displayFormats,p=this._unit,m=this._majorUnit,b=p&&h[p],x=m&&h[m],S=s[n],C=m&&x&&S&&S.major;return this._adapter.format(e,l||(C?x:b))}generateTickLabels(e){let n,s,l;for(n=0,s=e.length;n<s;++n)l=e[n],l.label=this._tickFormatFunction(l.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,l=Di(this.isHorizontal()?n.maxRotation:n.minRotation),u=Math.cos(l),f=Math.sin(l),h=this._resolveTickFontOptions(0).size;return{w:s*u+h*f,h:s*f+h*u}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,l=s[n.unit]||s.millisecond,u=this._tickFormatFunction(e,0,ph(this,[e],this._majorUnit),l),f=this._getLabelSize(u),h=Math.floor(this.isHorizontal()?this.width/f.w:this.height/f.h)-1;return h>0?h:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const l=this.getMatchingVisibleMetas();if(this._normalized&&l.length)return this._cache.data=l[0].controller.getAllParsedValues(this);for(n=0,s=l.length;n<s;++n)e=e.concat(l[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const l=this.getLabels();for(n=0,s=l.length;n<s;++n)e.push(fh(this,l[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Sv(e.sort(uh))}}It(Wo,"id","time"),It(Wo,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ko(i,e,n){let s=0,l=i.length-1,u,f,h,p;n?(e>=i[s].pos&&e<=i[l].pos&&({lo:s,hi:l}=Oi(i,"pos",e)),{pos:u,time:h}=i[s],{pos:f,time:p}=i[l]):(e>=i[s].time&&e<=i[l].time&&({lo:s,hi:l}=Oi(i,"time",e)),{time:u,pos:h}=i[s],{time:f,pos:p}=i[l]);const m=f-u;return m?h+(p-h)*(e-u)/m:h}class gh extends Wo{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=ko(n,this.min),this._tableRange=ko(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,l=[],u=[];let f,h,p,m,b;for(f=0,h=e.length;f<h;++f)m=e[f],m>=n&&m<=s&&l.push(m);if(l.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(f=0,h=l.length;f<h;++f)b=l[f+1],p=l[f-1],m=l[f],Math.round((b+p)/2)!==m&&u.push({time:m,pos:f/(h-1)});return u}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((l,u)=>l-u)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(ko(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return ko(this._table,s*this._tableRange+this._minPos,!0)}}It(gh,"id","timeseries"),It(gh,"defaults",Wo.defaults);const Od="label";function mh(i,e){typeof i=="function"?i(e):i&&(i.current=e)}function Pb(i,e){const n=i.options;n&&e&&Object.assign(n,e)}function Ad(i,e){i.labels=e}function Pd(i,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Od;const s=[];i.datasets=e.map(l=>{const u=i.datasets.find(f=>f[n]===l[n]);return!u||!l.data||s.includes(u)?{...l}:(s.push(u),Object.assign(u,l),u)})}function Ib(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Od;const n={labels:[],datasets:[]};return Ad(n,i.labels),Pd(n,i.datasets,e),n}function Eb(i,e){const{height:n=150,width:s=300,redraw:l=!1,datasetIdKey:u,type:f,data:h,options:p,plugins:m=[],fallbackContent:b,updateMode:x,...S}=i,C=cn(null),A=cn(null),O=()=>{C.current&&(A.current=new Yo(C.current,{type:f,data:Ib(h,u),options:p&&{...p},plugins:m}),mh(e,A.current))},D=()=>{mh(e,null),A.current&&(A.current.destroy(),A.current=null)};return Kt(()=>{!l&&A.current&&p&&Pb(A.current,p)},[l,p]),Kt(()=>{!l&&A.current&&Ad(A.current.config.data,h.labels)},[l,h.labels]),Kt(()=>{!l&&A.current&&h.datasets&&Pd(A.current.config.data,h.datasets,u)},[l,h.datasets]),Kt(()=>{A.current&&(l?(D(),setTimeout(O)):A.current.update(x))},[l,p,h.labels,h.datasets,x]),Kt(()=>{A.current&&(D(),setTimeout(O))},[f]),Kt(()=>(O(),()=>D()),[]),Vh.createElement("canvas",{ref:C,role:"img",height:n,width:s,...S},b)}const Fb=xl(Eb);function Rb(i,e){return Yo.register(e),xl((n,s)=>Vh.createElement(Fb,{...n,ref:s,type:i}))}const Hb=Rb("line",Mo);Yo.register(dl,pl,Do,as,mb,Sb,pb);const zb=({isDarkMode:i})=>{const[e,n]=dt([]),[s,l]=dt(!0),[u,f]=dt(null),h=async()=>{try{const S=await Wt.getSystemStats();n(S),f(null)}catch(S){console.error("Stats yüklenemedi:",S),f("Failed to load statistics")}finally{l(!1)}};Kt(()=>{h();const S=setInterval(h,6e4);return()=>clearInterval(S)},[]);const p=S=>{const C=S.filter(D=>D.titleID),A=S.filter(D=>!D.titleID),O=D=>({frequency:D.reduce((E,z)=>E+z.frequency,0)/(D.length||1)/1e6,temperature:D.reduce((E,z)=>E+z.temperature,0)/(D.length||1),socTemp:D.reduce((E,z)=>E+z.socSensorTemperature,0)/(D.length||1)});return{game:O(C),idle:O(A)}},m={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{color:i?"#fff":"#666"}},tooltip:{mode:"index",intersect:!1}},scales:{y:{type:"linear",display:!0,position:"left",grid:{color:i?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:i?"#fff":"#666"}},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},ticks:{color:i?"#fff":"#666"}},x:{grid:{color:i?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:i?"#fff":"#666"}}}},b={labels:e.map(S=>new Date(S.timestamp).toLocaleTimeString()),datasets:[{label:"CPU Frequency (MHz)",data:e.map(S=>S.frequency/1e6),borderColor:"#3498db",backgroundColor:"rgba(52, 152, 219, 0.5)",yAxisID:"y"},{label:"CPU Temperature (°C)",data:e.map(S=>S.temperature),borderColor:"#e74c3c",backgroundColor:"rgba(231, 76, 60, 0.5)",yAxisID:"y1"},{label:"SoC Temperature (°C)",data:e.map(S=>S.socSensorTemperature),borderColor:"#f1c40f",backgroundColor:"rgba(241, 196, 15, 0.5)",yAxisID:"y1"}]},x=p(e);return k("div",{className:`statistics ${i?"dark":""}`,children:s?k("div",{className:"statistics-loading",children:"Loading statistics..."}):u?k("div",{className:"statistics-error",children:u}):k("div",{className:"statistics-content",children:[k("div",{className:"chart-container",children:k(Hb,{options:m,data:b})}),k("div",{className:"stats-averages",children:[k("div",{className:"averages-group",children:[k("h3",{children:"System Idle Averages"}),k("div",{className:"averages-grid",children:[k("div",{className:"average-item",children:[k("span",{children:"CPU Frequency"}),k("strong",{children:[x.idle.frequency.toFixed(0)," MHz"]})]}),k("div",{className:"average-item",children:[k("span",{children:"CPU Temperature"}),k("strong",{children:[x.idle.temperature.toFixed(1),"°C"]})]}),k("div",{className:"average-item",children:[k("span",{children:"SoC Temperature"}),k("strong",{children:[x.idle.socTemp.toFixed(1),"°C"]})]})]})]}),k("div",{className:"averages-group",children:[k("h3",{children:"Gaming Averages"}),k("div",{className:"averages-grid",children:[k("div",{className:"average-item",children:[k("span",{children:"CPU Frequency"}),k("strong",{children:[x.game.frequency.toFixed(0)," MHz"]})]}),k("div",{className:"average-item",children:[k("span",{children:"CPU Temperature"}),k("strong",{children:[x.game.temperature.toFixed(1),"°C"]})]}),k("div",{className:"average-item",children:[k("span",{children:"SoC Temperature"}),k("strong",{children:[x.game.socTemp.toFixed(1),"°C"]})]})]})]})]})]})})};class Oo{static getConfig(e){return this.windows[e]}static getDesktopItems(){return Object.values(this.windows).map((e,n)=>({id:n+1,name:e.title,type:e.id,app:e.id,icon:e.icon}))}static getComponent(e){var n;return(n=this.windows[e])==null?void 0:n.component}}It(Oo,"windows",{fileManager:{id:"fileManager",title:"File Manager",icon:"📁",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,component:Zg},processList:{id:"processList",title:"Process List",icon:"📊",defaultWidth:700,defaultHeight:500,minWidth:300,minHeight:200,component:Jg},scriptEditor:{id:"scriptEditor",title:"Script Editor",icon:"📝",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,component:om},systemInfo:{id:"systemInfo",title:"System Info",icon:"🖥️",defaultWidth:600,defaultHeight:400,minWidth:300,minHeight:200,component:Eh},statistics:{id:"statistics",title:"Statistics",icon:"📈",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,component:zb},applications:{id:"applications",title:"Applications",icon:"🎮",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,component:Gg},profiles:{id:"profiles",title:"Profiles",icon:"👤",defaultWidth:700,defaultHeight:500,minWidth:300,minHeight:200,component:Qg},scheduler:{id:"scheduler",title:"Scheduler",icon:"⏰",defaultWidth:900,defaultHeight:700,minWidth:500,minHeight:400,component:sm}});const Wb=({onAccept:i,isDarkMode:e})=>k("div",{className:`disclaimer-overlay ${e?"dark":""}`,children:k("div",{className:"disclaimer-modal",children:[k("h2",{children:"Disclaimer"}),k("div",{className:"disclaimer-content",children:["This software operates based on the data provided by users and the actions performed. Unexpected actions by users, improper use, or unforeseen circumstances may cause the console to behave unexpectedly or become bricked.",k("br",{}),k("br",{}),"The developer cannot be held responsible for any data loss, service interruptions, or other adverse outcomes that may occur during the use of the software.",k("br",{})," By using this software, you agree to this disclaimer of liability. We would like to explicitly state that this software does not support piracy and cannot be used for such purposes. The use of the software for illegal activities is strictly prohibited, and the developer accepts no responsibility for such misuse.",k("br",{}),k("br",{}),"In certain cases, improper use of this software may render your hardware inoperable ('bricked'). The developer is not liable for such outcomes."]}),k("div",{className:"disclaimer-actions",children:k("button",{onClick:i,children:"I Accept"})})]})}),Bb=()=>{const[i]=dt(Oo.getDesktopItems()),[e,n]=dt([]),[s,l]=dt(null),[u,f]=dt({show:!1,x:0,y:0,item:null}),[h,p]=dt(()=>{const F=localStorage.getItem("theme");return F?F==="dark":!0}),[m,b]=dt([]),[x,S]=dt(null),[C,A]=dt(!0);dt("tr");const[O,D]=dt({id:null,time:0,clickCount:0}),[E,z]=dt(new Set),[it,q]=dt(!1),[j,Y]=dt(-1),[Q,G]=dt(()=>document.cookie.includes("disclaimerAccepted=true"));Kt(()=>{localStorage.setItem("theme",h?"dark":"light")},[h]);const vt=async()=>{try{const F=await Wt.getStorageInfo();b(F),S(null)}catch(F){console.error("Storage bilgisi alınamadı:",F),S("Failed to load storage information")}finally{A(!1)}};Kt(()=>{vt();const F=setInterval(vt,3e4);return()=>clearInterval(F)},[]);const ot=F=>F.includes("USB")?"💽":F.includes("Disc")?"💿":"💾",tt=(F,K,Z)=>{let{x:ht,y:pt}=F;const{width:ct,height:Mt}=K,ut={width:Math.min(ct,Z.width),height:Math.min(Mt,Z.height)};return ht=Math.max(0,Math.min(ht,Z.width-ut.width)),pt=Math.max(0,Math.min(pt,Z.height-ut.height)),{position:{x:ht,y:pt},size:ut}},rt=F=>{const K=Oo.getConfig(F);if(!K)return;if(e.some(pt=>pt.app===F)){const pt=e.find(ct=>ct.app===F);pt.minimized&&n(e.map(ct=>ct.id===pt.id?{...ct,minimized:!1}:ct)),l(pt.id);return}const Z=document.querySelector(".desktop-content");if(Z==null?void 0:Z.getBoundingClientRect()){const pt={id:Date.now(),app:F,title:K.title,icon:K.icon,position:{x:50+e.length*20,y:50+e.length*20},size:{width:K.defaultWidth,height:K.defaultHeight},minSize:{width:K.minWidth,height:K.minHeight},minimized:!1};n([...e,pt]),l(pt.id)}},H=F=>{n(e.filter(K=>K.id!==F)),s===F&&l(null)},W=()=>{f({...u,show:!1})},M=F=>{n(e.map(K=>K.id===F?{...K,minimized:!0}:K))},Lt=F=>{if(F.preventDefault(),F.target.closest(".storage-panel")||F.target.closest(".window"))return;const K=F.target,Z=K.classList.contains("desktop-icons"),ht=K.closest(".desktop-item");if(!Z&&!ht)return;const pt=ht?i.find(ct=>ct.name===ht.querySelector(".desktop-item-name").textContent):null;f({show:!0,x:F.pageX,y:F.pageY,item:pt,isBackground:!ht})};Kt(()=>()=>{dragTimeoutRef.current&&clearTimeout(dragTimeoutRef.current)},[]),Kt(()=>{const F=K=>{if(document.activeElement.tagName==="INPUT"||document.activeElement.tagName==="TEXTAREA")return;if(e.find(ct=>ct.id===s&&!ct.minimized)){const ct=document.querySelector(`[data-window-id="${s}"]`);if(!(ct!=null&&ct.contains(document.activeElement))&&K.key==="Tab"){K.preventDefault();const Mt=ct.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');Mt.length>0&&Mt[0].focus()}return}if(!i.length)return;const ht=Math.floor((window.innerHeight-60)/120),pt=Math.floor(j/ht);switch(K.key){case"ArrowUp":if(K.preventDefault(),j>-1){const ct=j-1;ct>=0&&(Y(ct),z(new Set([i[ct].id])))}else Y(0),z(new Set([i[0].id]));break;case"ArrowDown":if(K.preventDefault(),j<i.length-1){const ct=j+1;Y(ct),z(new Set([i[ct].id]))}break;case"ArrowLeft":if(K.preventDefault(),pt>0){const ct=j-ht;ct>=0&&(Y(ct),z(new Set([i[ct].id])))}break;case"ArrowRight":if(K.preventDefault(),pt<Math.ceil(i.length/ht)-1){const ct=j+ht;ct<i.length&&(Y(ct),z(new Set([i[ct].id])))}break;case"Enter":if(K.preventDefault(),j>-1&&!e.some(ct=>ct.app===i[j].app)){const ct=i[j];ct.app==="systemInfo"?q(!0):rt(ct.app)}break;case"Escape":Y(-1),z(new Set);break}};return window.addEventListener("keydown",F),()=>window.removeEventListener("keydown",F)},[j,i,e,s]);const Ft=(F,K)=>{const Z=i.findIndex(pt=>pt.id===K.id);if(Y(Z),K.app==="systemInfo"){q(!0);return}const ht=Date.now();O.id===K.id&&ht-O.time<500&&O.clickCount===1?(rt(K.app),D({id:null,time:0,clickCount:0})):(D({id:K.id,time:ht,clickCount:1}),z(new Set([K.id])))};return k("div",{className:`desktop ${h?"dark":""}`,onClick:F=>{(F.target.classList.contains("desktop-content")||F.target.classList.contains("desktop-icons"))&&z(new Set),f({...u,show:!1})},onContextMenu:Lt,children:[!Q&&k(Wb,{onAccept:()=>{const F=new Date;F.setFullYear(F.getFullYear()+1),document.cookie=`disclaimerAccepted=true; expires=${F.toUTCString()}; path=/`,G(!0)},isDarkMode:h}),k("div",{className:"desktop-content",children:[k("div",{className:"desktop-icons",children:i.map((F,K)=>k("div",{className:`desktop-item ${E.has(F.id)?"selected":""}`,onClick:Z=>Ft(Z,F),tabIndex:0,children:[k("div",{className:"desktop-item-icon",children:F.icon}),k("div",{className:"desktop-item-name",children:F.name})]},F.id))}),k("div",{className:`storage-panel ${h?"dark":""}`,children:[k("div",{className:"storage-header",children:["Storage",k("button",{className:"refresh-button",onClick:vt,disabled:C,children:"🔄"})]}),C?k("div",{className:"storage-loading",children:"Loading storage info..."}):x?k("div",{className:"storage-error",children:x}):m.map((F,K)=>k("div",{className:"storage-item",children:[k("div",{className:"storage-icon",children:ot(F.name)}),k("div",{className:"storage-info",children:[k("div",{className:"storage-name",children:F.name}),k("div",{className:"storage-usage",children:[k("div",{className:"storage-bar",children:k("div",{className:"storage-bar-fill",style:{width:`${F.used/F.total*100}%`}})}),k("div",{className:"storage-text",children:[Wt.formatBytes(F.used)," /"," ",Wt.formatBytes(F.total)]})]})]})]},F.path)),k("div",{className:"storage-dropzone",children:k("div",{className:"dropzone-content",children:[k("div",{className:"dropzone-icon",children:"🚧"}),k("div",{className:"dropzone-text",children:"PKG Installer - Work in Progress"})]})})]}),k(qg,{isDarkMode:h}),k(Eh,{isDarkMode:h,showPanel:it,onClose:()=>q(!1)}),e.map(F=>{const K=Oo.getComponent(F.app);return k(Vg,{window:F,isActive:s===F.id,isDarkMode:h,onClose:()=>H(F.id),onFocus:()=>l(F.id),onDragStart:W,onMinimize:()=>M(F.id),children:K&&k(K,{isDarkMode:h,contextMenu:u,setContextMenu:f})},F.id)})]}),k(Xg,{windows:e,activeWindow:s,isDarkMode:h,onWindowClick:(F,K)=>{var ht;const Z=e.find(pt=>pt.id===F);if(Z.minimized){const pt=(ht=document.querySelector(".desktop-content"))==null?void 0:ht.getBoundingClientRect();if(pt){const{position:ct,size:Mt}=tt(Z.position,Z.size,pt);n(e.map(ut=>ut.id===F?{...ut,minimized:!1,position:ct,size:Mt}:ut))}else n(e.map(ct=>ct.id===F?{...ct,minimized:!1}:ct))}else K&&(n(e.map(pt=>pt.id===F?{...pt,minimized:!0}:pt)),l(null));!K&&!Z.minimized&&l(F)},onThemeToggle:()=>p(!h)})]})};function Ub(){return k(Bb,{})}Cs.defineMode("haxe",function(i,e){var n=i.indentUnit;function s(P){return{type:P,style:"keyword"}}var l=s("keyword a"),u=s("keyword b"),f=s("keyword c"),h=s("operator"),p={type:"atom",style:"atom"},m={type:"attribute",style:"attribute"},A=s("typedef"),b={if:l,while:l,else:u,do:u,try:u,return:f,break:f,continue:f,new:f,throw:f,var:s("var"),final:s("var"),inline:m,static:m,using:s("import"),public:m,private:m,overload:m,extern:m,cast:s("cast"),import:s("import"),macro:s("macro"),function:s("function"),catch:s("catch"),untyped:s("untyped"),callback:s("cb"),for:s("for"),switch:s("switch"),case:s("case"),default:s("default"),in:h,is:h,as:h,never:s("property_access"),trace:s("trace"),class:A,abstract:A,enum:A,interface:A,typedef:A,extends:A,implements:A,dynamic:A,true:p,false:p,null:p},x=/[+\-*&%=<>!?|]/;function S(P,V,st){return V.tokenize=st,st(P,V)}function C(P,V){for(var st=!1,mt;(mt=P.next())!=null;){if(mt==V&&!st)return!0;st=!st&&mt=="\\"}}var A,O;function D(P,V,st){return A=P,O=st,V}function E(P,V){var st=P.next();if(st=='"')return S(P,V,z(st));if(st=="'")return it(st,P,V);if(st=="}")return V.interpolationStack.length>0?(V.tokenize=V.interpolationStack.pop(),D(st,"string")):D(st);if(/[\[\]{}\(\),;\:\.]/.test(st))return D(st);if(st=="0"&&P.eat(/x/i))return P.eatWhile(/[\da-f]/i),D("number","number");if(/\d/.test(st)||st=="-"&&P.eat(/\d/))return P.match(/^\d*(?:\.\d*(?!\.))?(?:[eE][+\-]?\d+)?/),D("number","number");if(V.reAllowed&&st=="~"&&P.eat(/\//))return C(P,"/"),P.eatWhile(/[gimsu]/),D("regexp","string-2");if(st=="/")return P.eat("*")?S(P,V,Y):P.eat("/")?(P.skipToEnd(),D("comment","comment")):(P.eatWhile(x),D("operator",null,P.current()));if(st=="#")return P.skipToEnd(),D("conditional","meta");if(st=="@")return P.eat(/:/),P.eatWhile(/[\w_]/),D("metadata","meta");if(x.test(st))return P.eatWhile(x),D("operator",null,P.current());var mt;if(/[A-Z]/.test(st))return P.eatWhile(/[\w_<>]/),mt=P.current(),D("type","variable-3",mt);P.eatWhile(/[\w_]/);var mt=P.current(),Qt=b.propertyIsEnumerable(mt)&&b[mt];return Qt&&V.kwAllowed?D(Qt.type,Qt.style,mt):D("variable","variable",mt)}function z(P){return function(V,st){return C(V,P)&&(st.tokenize=E),D("string","string")}}function it(P,V,st){if(V.eat(P))return D("string","string");function mt(Qt,$t){for(var Fe=!1;;){var wt=Qt.next();if(wt==null)break;if(wt=="$"&&Qt.peek()=="$"){Qt.next();continue}if(wt=="$")return $t.interpolationStack.push($t.tokenize),$t.tokenize=q,D("string","string");if(wt==P&&!Fe){$t.tokenize=E;break}Fe=!Fe&&wt=="\\"}return D("string","string")}return st.tokenize=mt,mt(V,st)}function q(P,V){return P.eat("$"),P.eat("{")?V.tokenize=E:V.tokenize=j,D("string","string")}function j(P,V){return P.eatWhile(/[\w_]/),V.tokenize=V.interpolationStack.pop(),"variable"}function Y(P,V){for(var st=!1,mt;mt=P.next();){if(mt=="/"&&st){V.tokenize=E;break}st=mt=="*"}return D("comment","comment")}var Q={atom:!0,number:!0,variable:!0,string:!0,regexp:!0};function G(P,V,st,mt,Qt,$t){this.indented=P,this.column=V,this.type=st,this.prev=Qt,this.info=$t,mt!=null&&(this.align=mt)}function vt(P,V){for(var st=P.localVars;st;st=st.next)if(st.name==V)return!0}function ot(P,V,st,mt,Qt){var $t=P.cc;for(H.state=P,H.stream=Qt,H.marked=null,H.cc=$t,P.lexical.hasOwnProperty("align")||(P.lexical.align=!0);;){var Fe=$t.length?$t.pop():ct;if(Fe(st,mt)){for(;$t.length&&$t[$t.length-1].lex;)$t.pop()();return H.marked?H.marked:st=="variable"&&vt(P,mt)?"variable-2":st=="variable"&&tt(P,mt)?"variable-3":V}}}function tt(P,V){if(/[a-z]/.test(V.charAt(0)))return!1;for(var st=P.importedtypes.length,mt=0;mt<st;mt++)if(P.importedtypes[mt]==V)return!0}function rt(P){for(var V=H.state,st=V.importedtypes;st;st=st.next)if(st.name==P)return;V.importedtypes={name:P,next:V.importedtypes}}var H={state:null,column:null,marked:null,cc:null};function W(){for(var P=arguments.length-1;P>=0;P--)H.cc.push(arguments[P])}function M(){return W.apply(null,arguments),!0}function Lt(P,V){for(var st=V;st;st=st.next)if(st.name==P)return!0;return!1}function Ft(P){var V=H.state;if(V.context){if(H.marked="def",Lt(P,V.localVars))return;V.localVars={name:P,next:V.localVars}}else if(V.globalVars){if(Lt(P,V.globalVars))return;V.globalVars={name:P,next:V.globalVars}}}var qt={name:"this",next:null};function F(){H.state.context||(H.state.localVars=qt),H.state.context={prev:H.state.context,vars:H.state.localVars}}function K(){H.state.localVars=H.state.context.vars,H.state.context=H.state.context.prev}K.lex=!0;function Z(P,V){var st=function(){var mt=H.state;mt.lexical=new G(mt.indented,H.stream.column(),P,null,mt.lexical,V)};return st.lex=!0,st}function ht(){var P=H.state;P.lexical.prev&&(P.lexical.type==")"&&(P.indented=P.lexical.indented),P.lexical=P.lexical.prev)}ht.lex=!0;function pt(P){function V(st){return st==P?M():P==";"?W():M(V)}return V}function ct(P){return P=="@"?M(zt):P=="var"?M(Z("vardef"),et,pt(";"),ht):P=="keyword a"?M(Z("form"),Mt,ct,ht):P=="keyword b"?M(Z("form"),ct,ht):P=="{"?M(Z("}"),F,Ie,ht,K):P==";"?M():P=="attribute"?M(Dt):P=="function"?M(Ut):P=="for"?M(Z("form"),pt("("),Z(")"),Nt,pt(")"),ht,ct,ht):P=="variable"?M(Z("stat"),en):P=="switch"?M(Z("form"),Mt,Z("}","switch"),pt("{"),Ie,ht,ht):P=="case"?M(Mt,pt(":")):P=="default"?M(pt(":")):P=="catch"?M(Z("form"),F,pt("("),Ee,pt(")"),ct,ht,K):P=="import"?M(Rt,pt(";")):P=="typedef"?M(ce):W(Z("stat"),Mt,pt(";"),ht)}function Mt(P){return Q.hasOwnProperty(P)||P=="type"?M(xt):P=="function"?M(Ut):P=="keyword c"?M(ut):P=="("?M(Z(")"),ut,pt(")"),ht,xt):P=="operator"?M(Mt):P=="["?M(Z("]"),ue(ut,"]"),ht,xt):P=="{"?M(Z("}"),ue(At,"}"),ht,xt):M()}function ut(P){return P.match(/[;\}\)\],]/)?W():W(Mt)}function xt(P,V){if(P=="operator"&&/\+\+|--/.test(V))return M(xt);if(P=="operator"||P==":")return M(Mt);if(P!=";"){if(P=="(")return M(Z(")"),ue(Mt,")"),ht,xt);if(P==".")return M(bn,xt);if(P=="[")return M(Z("]"),Mt,pt("]"),ht,xt)}}function Dt(P){if(P=="attribute")return M(Dt);if(P=="function")return M(Ut);if(P=="var")return M(et)}function zt(P){if(P==":"||P=="variable")return M(zt);if(P=="(")return M(Z(")"),ue(Pn,")"),ht,ct)}function Pn(P){if(P=="variable")return M()}function Rt(P,V){if(P=="variable"&&/[A-Z]/.test(V.charAt(0)))return rt(V),M();if(P=="variable"||P=="property"||P=="."||V=="*")return M(Rt)}function ce(P,V){if(P=="variable"&&/[A-Z]/.test(V.charAt(0)))return rt(V),M();if(P=="type"&&/[A-Z]/.test(V.charAt(0)))return M()}function en(P){return P==":"?M(ht,ct):W(xt,pt(";"),ht)}function bn(P){if(P=="variable")return H.marked="property",M()}function At(P){if(P=="variable"&&(H.marked="property"),Q.hasOwnProperty(P))return M(pt(":"),Mt)}function ue(P,V){function st(mt){return mt==","?M(P,st):mt==V?M():M(pt(V))}return function(mt){return mt==V?M():W(P,st)}}function Ie(P){return P=="}"?M():W(ct,Ie)}function et(P,V){return P=="variable"?(Ft(V),M(Jt,_t)):M()}function _t(P,V){if(V=="=")return M(Mt,_t);if(P==",")return M(et)}function Nt(P,V){return P=="variable"?(Ft(V),M(Ot,Mt)):W()}function Ot(P,V){if(V=="in")return M()}function Ut(P,V){if(P=="variable"||P=="type")return Ft(V),M(Ut);if(V=="new")return M(Ut);if(P=="(")return M(Z(")"),F,ue(Ee,")"),ht,Jt,ct,K)}function Jt(P){if(P==":")return M(nn)}function nn(P){if(P=="type"||P=="variable")return M();if(P=="{")return M(Z("}"),ue(rn,"}"),ht)}function rn(P){if(P=="variable")return M(Jt)}function Ee(P,V){if(P=="variable")return Ft(V),M(Jt)}return{startState:function(P){var V=["Int","Float","String","Void","Std","Bool","Dynamic","Array"],st={tokenize:E,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new G((P||0)-n,0,"block",!1),localVars:e.localVars,importedtypes:V,context:e.localVars&&{vars:e.localVars},indented:0,interpolationStack:[]};return e.globalVars&&typeof e.globalVars=="object"&&(st.globalVars=e.globalVars),st},token:function(P,V){if(P.sol()&&(V.lexical.hasOwnProperty("align")||(V.lexical.align=!1),V.indented=P.indentation()),P.eatSpace())return null;var st=V.tokenize(P,V);return A=="comment"?st:(V.reAllowed=!!(A=="operator"||A=="keyword c"||A.match(/^[\[{}\(,;:]$/)),V.kwAllowed=A!=".",ot(V,st,A,O,P))},indent:function(P,V){if(P.tokenize!=E)return 0;var st=V&&V.charAt(0),mt=P.lexical;mt.type=="stat"&&st=="}"&&(mt=mt.prev);var Qt=mt.type,$t=st==Qt;return Qt=="vardef"?mt.indented+4:Qt=="form"&&st=="{"?mt.indented:Qt=="stat"||Qt=="form"?mt.indented+n:mt.info=="switch"&&!$t?mt.indented+(/^(?:case|default)\b/.test(V)?n:2*n):mt.align?mt.column+($t?0:1):mt.indented+($t?0:n)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}});Cs.defineMIME("text/x-haxe","haxe");Cs.defineMode("hxml",function(){return{startState:function(){return{define:!1,inString:!1}},token:function(i,e){var l=i.peek(),n=i.sol();if(l=="#")return i.skipToEnd(),"comment";if(n&&l=="-"){var s="variable-2";return i.eat(/-/),i.peek()=="-"&&(i.eat(/-/),s="keyword a"),i.peek()=="D"&&(i.eat(/[D]/),s="keyword c",e.define=!0),i.eatWhile(/[A-Z]/i),s}var l=i.peek();return e.inString==!1&&l=="'"&&(e.inString=!0,i.next()),e.inString==!0?(i.skipTo("'")||i.skipToEnd(),i.peek()=="'"&&(i.next(),e.inString=!1),"string"):(i.next(),null)},lineComment:"#"}});ur(k(Ub,{}),document.getElementById("app"));
