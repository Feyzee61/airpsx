var Ag=Object.defineProperty;var Ig=(i,e,n)=>e in i?Ag(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n;var Ft=(i,e,n)=>Ig(i,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();var Ss,Bt,yh,Oi,Ru,bh,Ja,xh,ml,Za,Qa,_h,vs={},wh=[],Eg=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Uo=Array.isArray;function Xn(i,e){for(var n in e)i[n]=e[n];return i}function vl(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function Gn(i,e,n){var s,a,u,f={};for(u in e)u=="key"?s=e[u]:u=="ref"?a=e[u]:f[u]=e[u];if(arguments.length>2&&(f.children=arguments.length>3?Ss.call(arguments,2):n),typeof i=="function"&&i.defaultProps!=null)for(u in i.defaultProps)f[u]===void 0&&(f[u]=i.defaultProps[u]);return us(i,f,s,a,null)}function us(i,e,n,s,a){var u={type:i,props:e,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++yh,__i:-1,__u:0};return a==null&&Bt.vnode!=null&&Bt.vnode(u),u}function Fg(){return{current:null}}function Me(i){return i.children}function On(i,e){this.props=i,this.context=e}function fr(i,e){if(e==null)return i.__?fr(i.__,i.__i+1):null;for(var n;e<i.__k.length;e++)if((n=i.__k[e])!=null&&n.__e!=null)return n.__e;return typeof i.type=="function"?fr(i):null}function kh(i){var e,n;if((i=i.__)!=null&&i.__c!=null){for(i.__e=i.__c.base=null,e=0;e<i.__k.length;e++)if((n=i.__k[e])!=null&&n.__e!=null){i.__e=i.__c.base=n.__e;break}return kh(i)}}function tl(i){(!i.__d&&(i.__d=!0)&&Oi.push(i)&&!Ao.__r++||Ru!==Bt.debounceRendering)&&((Ru=Bt.debounceRendering)||bh)(Ao)}function Ao(){var i,e,n,s,a,u,f,h;for(Oi.sort(Ja);i=Oi.shift();)i.__d&&(e=Oi.length,s=void 0,u=(a=(n=i).__v).__e,f=[],h=[],n.__P&&((s=Xn({},a)).__v=a.__v+1,Bt.vnode&&Bt.vnode(s),yl(n.__P,s,a,n.__n,n.__P.namespaceURI,32&a.__u?[u]:null,f,u??fr(a),!!(32&a.__u),h),s.__v=a.__v,s.__.__k[s.__i]=s,Th(f,s,h),s.__e!=u&&kh(s)),Oi.length>e&&Oi.sort(Ja));Ao.__r=0}function Sh(i,e,n,s,a,u,f,h,p,g,b){var _,S,T,M,D,L,A=s&&s.__k||wh,R=e.length;for(p=Rg(n,e,A,p,R),_=0;_<R;_++)(T=n.__k[_])!=null&&(S=T.__i===-1?vs:A[T.__i]||vs,T.__i=_,L=yl(i,T,S,a,u,f,h,p,g,b),M=T.__e,T.ref&&S.ref!=T.ref&&(S.ref&&bl(S.ref,null,T),b.push(T.ref,T.__c||M,T)),D==null&&M!=null&&(D=M),4&T.__u||S.__k===T.__k?p=Ch(T,p,i):typeof T.type=="function"&&L!==void 0?p=L:M&&(p=M.nextSibling),T.__u&=-7);return n.__e=D,p}function Rg(i,e,n,s,a){var u,f,h,p,g,b=n.length,_=b,S=0;for(i.__k=new Array(a),u=0;u<a;u++)(f=e[u])!=null&&typeof f!="boolean"&&typeof f!="function"?(p=u+S,(f=i.__k[u]=typeof f=="string"||typeof f=="number"||typeof f=="bigint"||f.constructor==String?us(null,f,null,null,null):Uo(f)?us(Me,{children:f},null,null,null):f.constructor===void 0&&f.__b>0?us(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f).__=i,f.__b=i.__b+1,h=null,(g=f.__i=Hg(f,n,p,_))!==-1&&(_--,(h=n[g])&&(h.__u|=2)),h==null||h.__v===null?(g==-1&&S--,typeof f.type!="function"&&(f.__u|=4)):g!=p&&(g==p-1?S--:g==p+1?S++:(g>p?S--:S++,f.__u|=4))):i.__k[u]=null;if(_)for(u=0;u<b;u++)(h=n[u])!=null&&!(2&h.__u)&&(h.__e==s&&(s=fr(h)),Lh(h,h));return s}function Ch(i,e,n){var s,a;if(typeof i.type=="function"){for(s=i.__k,a=0;s&&a<s.length;a++)s[a]&&(s[a].__=i,e=Ch(s[a],e,n));return e}i.__e!=e&&(e&&i.type&&!n.contains(e)&&(e=fr(i)),n.insertBefore(i.__e,e||null),e=i.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Kn(i,e){return e=e||[],i==null||typeof i=="boolean"||(Uo(i)?i.some(function(n){Kn(n,e)}):e.push(i)),e}function Hg(i,e,n,s){var a,u,f=i.key,h=i.type,p=e[n];if(p===null||p&&f==p.key&&h===p.type&&!(2&p.__u))return n;if(s>(p!=null&&!(2&p.__u)?1:0))for(a=n-1,u=n+1;a>=0||u<e.length;){if(a>=0){if((p=e[a])&&!(2&p.__u)&&f==p.key&&h===p.type)return a;a--}if(u<e.length){if((p=e[u])&&!(2&p.__u)&&f==p.key&&h===p.type)return u;u++}}return-1}function Hu(i,e,n){e[0]=="-"?i.setProperty(e,n??""):i[e]=n==null?"":typeof n!="number"||Eg.test(e)?n:n+"px"}function co(i,e,n,s,a){var u;t:if(e=="style")if(typeof n=="string")i.style.cssText=n;else{if(typeof s=="string"&&(i.style.cssText=s=""),s)for(e in s)n&&e in n||Hu(i.style,e,"");if(n)for(e in n)s&&n[e]===s[e]||Hu(i.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")u=e!=(e=e.replace(xh,"$1")),e=e.toLowerCase()in i||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),i.l||(i.l={}),i.l[e+u]=n,n?s?n.u=s.u:(n.u=ml,i.addEventListener(e,u?Qa:Za,u)):i.removeEventListener(e,u?Qa:Za,u);else{if(a=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in i)try{i[e]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?i.removeAttribute(e):i.setAttribute(e,e=="popover"&&n==1?"":n))}}function Wu(i){return function(e){if(this.l){var n=this.l[e.type+i];if(e.t==null)e.t=ml++;else if(e.t<n.u)return;return n(Bt.event?Bt.event(e):e)}}}function yl(i,e,n,s,a,u,f,h,p,g){var b,_,S,T,M,D,L,A,R,G,J,j,V,it,Z,bt,ct,Q=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(p=!!(32&n.__u),u=[h=e.__e=n.__e]),(b=Bt.__b)&&b(e);t:if(typeof Q=="function")try{if(A=e.props,R="prototype"in Q&&Q.prototype.render,G=(b=Q.contextType)&&s[b.__c],J=b?G?G.props.value:b.__:s,n.__c?L=(_=e.__c=n.__c).__=_.__E:(R?e.__c=_=new Q(A,J):(e.__c=_=new On(A,J),_.constructor=Q,_.render=zg),G&&G.sub(_),_.props=A,_.state||(_.state={}),_.context=J,_.__n=s,S=_.__d=!0,_.__h=[],_._sb=[]),R&&_.__s==null&&(_.__s=_.state),R&&Q.getDerivedStateFromProps!=null&&(_.__s==_.state&&(_.__s=Xn({},_.__s)),Xn(_.__s,Q.getDerivedStateFromProps(A,_.__s))),T=_.props,M=_.state,_.__v=e,S)R&&Q.getDerivedStateFromProps==null&&_.componentWillMount!=null&&_.componentWillMount(),R&&_.componentDidMount!=null&&_.__h.push(_.componentDidMount);else{if(R&&Q.getDerivedStateFromProps==null&&A!==T&&_.componentWillReceiveProps!=null&&_.componentWillReceiveProps(A,J),!_.__e&&(_.shouldComponentUpdate!=null&&_.shouldComponentUpdate(A,_.__s,J)===!1||e.__v==n.__v)){for(e.__v!=n.__v&&(_.props=A,_.state=_.__s,_.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(rt){rt&&(rt.__=e)}),j=0;j<_._sb.length;j++)_.__h.push(_._sb[j]);_._sb=[],_.__h.length&&f.push(_);break t}_.componentWillUpdate!=null&&_.componentWillUpdate(A,_.__s,J),R&&_.componentDidUpdate!=null&&_.__h.push(function(){_.componentDidUpdate(T,M,D)})}if(_.context=J,_.props=A,_.__P=i,_.__e=!1,V=Bt.__r,it=0,R){for(_.state=_.__s,_.__d=!1,V&&V(e),b=_.render(_.props,_.state,_.context),Z=0;Z<_._sb.length;Z++)_.__h.push(_._sb[Z]);_._sb=[]}else do _.__d=!1,V&&V(e),b=_.render(_.props,_.state,_.context),_.state=_.__s;while(_.__d&&++it<25);_.state=_.__s,_.getChildContext!=null&&(s=Xn(Xn({},s),_.getChildContext())),R&&!S&&_.getSnapshotBeforeUpdate!=null&&(D=_.getSnapshotBeforeUpdate(T,M)),h=Sh(i,Uo(bt=b!=null&&b.type===Me&&b.key==null?b.props.children:b)?bt:[bt],e,n,s,a,u,f,h,p,g),_.base=e.__e,e.__u&=-161,_.__h.length&&f.push(_),L&&(_.__E=_.__=null)}catch(rt){if(e.__v=null,p||u!=null)if(rt.then){for(e.__u|=p?160:128;h&&h.nodeType==8&&h.nextSibling;)h=h.nextSibling;u[u.indexOf(h)]=null,e.__e=h}else for(ct=u.length;ct--;)vl(u[ct]);else e.__e=n.__e,e.__k=n.__k;Bt.__e(rt,e,n)}else u==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):h=e.__e=Wg(n.__e,e,n,s,a,u,f,p,g);return(b=Bt.diffed)&&b(e),128&e.__u?void 0:h}function Th(i,e,n){for(var s=0;s<n.length;s++)bl(n[s],n[++s],n[++s]);Bt.__c&&Bt.__c(e,i),i.some(function(a){try{i=a.__h,a.__h=[],i.some(function(u){u.call(a)})}catch(u){Bt.__e(u,a.__v)}})}function Wg(i,e,n,s,a,u,f,h,p){var g,b,_,S,T,M,D,L=n.props,A=e.props,R=e.type;if(R=="svg"?a="http://www.w3.org/2000/svg":R=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),u!=null){for(g=0;g<u.length;g++)if((T=u[g])&&"setAttribute"in T==!!R&&(R?T.localName==R:T.nodeType==3)){i=T,u[g]=null;break}}if(i==null){if(R==null)return document.createTextNode(A);i=document.createElementNS(a,R,A.is&&A),h&&(Bt.__m&&Bt.__m(e,u),h=!1),u=null}if(R===null)L===A||h&&i.data===A||(i.data=A);else{if(u=u&&Ss.call(i.childNodes),L=n.props||vs,!h&&u!=null)for(L={},g=0;g<i.attributes.length;g++)L[(T=i.attributes[g]).name]=T.value;for(g in L)if(T=L[g],g!="children"){if(g=="dangerouslySetInnerHTML")_=T;else if(!(g in A)){if(g=="value"&&"defaultValue"in A||g=="checked"&&"defaultChecked"in A)continue;co(i,g,null,T,a)}}for(g in A)T=A[g],g=="children"?S=T:g=="dangerouslySetInnerHTML"?b=T:g=="value"?M=T:g=="checked"?D=T:h&&typeof T!="function"||L[g]===T||co(i,g,T,L[g],a);if(b)h||_&&(b.__html===_.__html||b.__html===i.innerHTML)||(i.innerHTML=b.__html),e.__k=[];else if(_&&(i.innerHTML=""),Sh(i,Uo(S)?S:[S],e,n,s,R=="foreignObject"?"http://www.w3.org/1999/xhtml":a,u,f,u?u[0]:n.__k&&fr(n,0),h,p),u!=null)for(g=u.length;g--;)vl(u[g]);h||(g="value",R=="progress"&&M==null?i.removeAttribute("value"):M!==void 0&&(M!==i[g]||R=="progress"&&!M||R=="option"&&M!==L[g])&&co(i,g,M,L[g],a),g="checked",D!==void 0&&D!==i[g]&&co(i,g,D,L[g],a))}return i}function bl(i,e,n){try{if(typeof i=="function"){var s=typeof i.__u=="function";s&&i.__u(),s&&e==null||(i.__u=i(e))}else i.current=e}catch(a){Bt.__e(a,n)}}function Lh(i,e,n){var s,a;if(Bt.unmount&&Bt.unmount(i),(s=i.ref)&&(s.current&&s.current!==i.__e||bl(s,null,e)),(s=i.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(u){Bt.__e(u,e)}s.base=s.__P=null}if(s=i.__k)for(a=0;a<s.length;a++)s[a]&&Lh(s[a],e,n||typeof i.type!="function");n||vl(i.__e),i.__c=i.__=i.__e=void 0}function zg(i,e,n){return this.constructor(i,n)}function Fi(i,e,n){var s,a,u,f;e==document&&(e=document.documentElement),Bt.__&&Bt.__(i,e),a=(s=typeof n=="function")?null:n&&n.__k||e.__k,u=[],f=[],yl(e,i=(!s&&n||e).__k=Gn(Me,null,[i]),a||vs,vs,e.namespaceURI,!s&&n?[n]:a?null:e.firstChild?Ss.call(e.childNodes):null,u,!s&&n?n:a?a.__e:e.firstChild,s,f),Th(u,i,f)}function Nh(i,e){Fi(i,e,Nh)}function Bg(i,e,n){var s,a,u,f,h=Xn({},i.props);for(u in i.type&&i.type.defaultProps&&(f=i.type.defaultProps),e)u=="key"?s=e[u]:u=="ref"?a=e[u]:h[u]=e[u]===void 0&&f!==void 0?f[u]:e[u];return arguments.length>2&&(h.children=arguments.length>3?Ss.call(arguments,2):n),us(i.type,h,s||i.key,a||i.ref,null)}function Ug(i,e){var n={__c:e="__cC"+_h++,__:i,Consumer:function(s,a){return s.children(a)},Provider:function(s){var a,u;return this.getChildContext||(a=new Set,(u={})[e]=this,this.getChildContext=function(){return u},this.componentWillUnmount=function(){a=null},this.shouldComponentUpdate=function(f){this.props.value!==f.value&&a.forEach(function(h){h.__e=!0,tl(h)})},this.sub=function(f){a.add(f);var h=f.componentWillUnmount;f.componentWillUnmount=function(){a&&a.delete(f),h&&h.call(f)}}),s.children}};return n.Provider.__=n.Consumer.contextType=n}Ss=wh.slice,Bt={__e:function(i,e,n,s){for(var a,u,f;e=e.__;)if((a=e.__c)&&!a.__)try{if((u=a.constructor)&&u.getDerivedStateFromError!=null&&(a.setState(u.getDerivedStateFromError(i)),f=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(i,s||{}),f=a.__d),f)return a.__E=a}catch(h){i=h}throw i}},yh=0,On.prototype.setState=function(i,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Xn({},this.state),typeof i=="function"&&(i=i(Xn({},n),this.props)),i&&Xn(n,i),i!=null&&this.__v&&(e&&this._sb.push(e),tl(this))},On.prototype.forceUpdate=function(i){this.__v&&(this.__e=!0,i&&this.__h.push(i),tl(this))},On.prototype.render=Me,Oi=[],bh=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ja=function(i,e){return i.__v.__b-e.__v.__b},Ao.__r=0,xh=/(PointerCapture)$|Capture$/i,ml=0,Za=Wu(!1),Qa=Wu(!0),_h=0;var $g=0;function y(i,e,n,s,a,u){e||(e={});var f,h,p=e;if("ref"in p)for(h in p={},e)h=="ref"?f=e[h]:p[h]=e[h];var g={type:i,props:p,key:n,ref:f,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--$g,__i:-1,__u:0,__source:a,__self:u};if(typeof i=="function"&&(f=i.defaultProps))for(h in f)p[h]===void 0&&(p[h]=f[h]);return Bt.vnode&&Bt.vnode(g),g}var hi,ce,za,zu,hr=0,Mh=[],pe=Bt,Bu=pe.__b,Uu=pe.__r,$u=pe.diffed,ju=pe.__c,Vu=pe.unmount,Yu=pe.__;function mr(i,e){pe.__h&&pe.__h(ce,i,hr||e),hr=0;var n=ce.__H||(ce.__H={__:[],__h:[]});return i>=n.__.length&&n.__.push({}),n.__[i]}function nt(i){return hr=1,xl(Eh,i)}function xl(i,e,n){var s=mr(hi++,2);if(s.t=i,!s.__c&&(s.__=[n?n(e):Eh(void 0,e),function(h){var p=s.__N?s.__N[0]:s.__[0],g=s.t(p,h);p!==g&&(s.__N=[g,s.__[1]],s.__c.setState({}))}],s.__c=ce,!ce.u)){var a=function(h,p,g){if(!s.__c.__H)return!0;var b=s.__c.__H.__.filter(function(S){return!!S.__c});if(b.every(function(S){return!S.__N}))return!u||u.call(this,h,p,g);var _=s.__c.props!==h;return b.forEach(function(S){if(S.__N){var T=S.__[0];S.__=S.__N,S.__N=void 0,T!==S.__[0]&&(_=!0)}}),u&&u.call(this,h,p,g)||_};ce.u=!0;var u=ce.shouldComponentUpdate,f=ce.componentWillUpdate;ce.componentWillUpdate=function(h,p,g){if(this.__e){var b=u;u=void 0,a(h,p,g),u=b}f&&f.call(this,h,p,g)},ce.shouldComponentUpdate=a}return s.__N||s.__}function Ut(i,e){var n=mr(hi++,3);!pe.__s&&_l(n.__H,e)&&(n.__=i,n.i=e,ce.__H.__h.push(n))}function Cs(i,e){var n=mr(hi++,4);!pe.__s&&_l(n.__H,e)&&(n.__=i,n.i=e,ce.__h.push(n))}function ge(i){return hr=5,$o(function(){return{current:i}},[])}function Dh(i,e,n){hr=6,Cs(function(){return typeof i=="function"?(i(e()),function(){return i(null)}):i?(i.current=e(),function(){return i.current=null}):void 0},n==null?n:n.concat(i))}function $o(i,e){var n=mr(hi++,7);return _l(n.__H,e)&&(n.__=i(),n.__H=e,n.__h=i),n.__}function Ph(i,e){return hr=8,$o(function(){return i},e)}function Oh(i){var e=ce.context[i.__c],n=mr(hi++,9);return n.c=i,e?(n.__==null&&(n.__=!0,e.sub(ce)),e.props.value):i.__}function Ah(i,e){pe.useDebugValue&&pe.useDebugValue(e?e(i):i)}function Ih(){var i=mr(hi++,11);if(!i.__){for(var e=ce.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var n=e.__m||(e.__m=[0,0]);i.__="P"+n[0]+"-"+n[1]++}return i.__}function jg(){for(var i;i=Mh.shift();)if(i.__P&&i.__H)try{i.__H.__h.forEach(Co),i.__H.__h.forEach(el),i.__H.__h=[]}catch(e){i.__H.__h=[],pe.__e(e,i.__v)}}pe.__b=function(i){ce=null,Bu&&Bu(i)},pe.__=function(i,e){i&&e.__k&&e.__k.__m&&(i.__m=e.__k.__m),Yu&&Yu(i,e)},pe.__r=function(i){Uu&&Uu(i),hi=0;var e=(ce=i.__c).__H;e&&(za===ce?(e.__h=[],ce.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(Co),e.__h.forEach(el),e.__h=[],hi=0)),za=ce},pe.diffed=function(i){$u&&$u(i);var e=i.__c;e&&e.__H&&(e.__H.__h.length&&(Mh.push(e)!==1&&zu===pe.requestAnimationFrame||((zu=pe.requestAnimationFrame)||Vg)(jg)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),za=ce=null},pe.__c=function(i,e){e.some(function(n){try{n.__h.forEach(Co),n.__h=n.__h.filter(function(s){return!s.__||el(s)})}catch(s){e.some(function(a){a.__h&&(a.__h=[])}),e=[],pe.__e(s,n.__v)}}),ju&&ju(i,e)},pe.unmount=function(i){Vu&&Vu(i);var e,n=i.__c;n&&n.__H&&(n.__H.__.forEach(function(s){try{Co(s)}catch(a){e=a}}),n.__H=void 0,e&&pe.__e(e,n.__v))};var Xu=typeof requestAnimationFrame=="function";function Vg(i){var e,n=function(){clearTimeout(s),Xu&&cancelAnimationFrame(e),setTimeout(i)},s=setTimeout(n,100);Xu&&(e=requestAnimationFrame(n))}function Co(i){var e=ce,n=i.__c;typeof n=="function"&&(i.__c=void 0,n()),ce=e}function el(i){var e=ce;i.__c=i.__(),ce=e}function _l(i,e){return!i||i.length!==e.length||e.some(function(n,s){return n!==i[s]})}function Eh(i,e){return typeof e=="function"?e(i):e}const Yg="/assets/elf-icon-CuriXRkE.svg",Xg={getFileIcon:(i,e)=>{if(i==="folder")return"📁";switch(e.split(".").pop().toLowerCase()){case"pdf":return"📕";case"doc":case"docx":return"📘";case"txt":return"📄";case"xls":case"xlsx":return"📊";case"ppt":case"pptx":return"📑";case"jpg":case"jpeg":case"png":case"gif":case"bmp":return"🖼️";case"flac":case"mp3":case"wav":case"ogg":return"🎵";case"mp4":case"avi":case"mkv":return"🎬";case"zip":case"rar":case"7z":return"📦";case"pkg":return"🍺";case"js":case"jsx":case"ts":case"tsx":return"⚡";case"html":return"🌐";case"css":return"🎨";case"json":return"📋";case"bin":case"elf":case"self":case"sprx":case"prx":return y("img",{src:Yg,alt:"ELF",style:{width:"48px",height:"48px"}});default:return"📄"}}},Kg=({window:i,children:e,isActive:n,isDarkMode:s,onClose:a,onFocus:u,onDragStart:f,onMinimize:h})=>{const[p,g]=nt(!1),[b,_]=nt(!1),[S,T]=nt({x:0,y:0}),[M,D]=nt({x:0,y:0,width:0,height:0}),[L,A]=nt(!1),R=ge(null),G=ge({x:0,y:0});Ut(()=>{A("ontouchstart"in i||navigator.maxTouchPoints>0)},[]);const J=ct=>{if(ct.target.closest(".window-header")&&!ct.target.closest(".window-controls")){const Q=ct.touches[0];G.current={x:Q.clientX,y:Q.clientY},g(!0),f();const rt=R.current.getBoundingClientRect();T({x:Q.clientX-rt.left,y:Q.clientY-rt.top})}},j=ct=>{if(p){const Q=ct.touches[0],rt=R.current.getBoundingClientRect(),H=document.querySelector(".desktop-content").getBoundingClientRect();let I=Q.clientX-S.x,C=Q.clientY-S.y;R.current.style.left=`${I}px`,R.current.style.top=`${C}px`,bt(rt,H)}},V=()=>{g(!1),_(!1)},it=ct=>{if(ct.target.closest(".window-header")&&!ct.target.closest(".window-controls")){g(!0),f();const Q=R.current.getBoundingClientRect();T({x:ct.clientX-Q.left,y:ct.clientY-Q.top})}},Z=ct=>{ct.stopPropagation(),_(!0);const Q=R.current.getBoundingClientRect();D({x:ct.clientX,y:ct.clientY,width:Q.width,height:Q.height})},bt=(ct,Q)=>{let rt=parseInt(R.current.style.left),H=parseInt(R.current.style.top),I=ct.width,C=ct.height;I>Q.width&&(I=Q.width,R.current.style.width=`${I}px`),C>Q.height&&(C=Q.height,R.current.style.height=`${C}px`),rt=Math.max(0,Math.min(rt,Q.width-I)),H=Math.max(0,Math.min(H,Q.height-C)),R.current.style.left=`${rt}px`,R.current.style.top=`${H}px`};return Ut(()=>{const ct=rt=>{const H=R.current.getBoundingClientRect(),I=document.querySelector(".desktop-content").getBoundingClientRect();if(p){let C=rt.clientX-S.x,pt=rt.clientY-S.y;R.current.style.left=`${C}px`,R.current.style.top=`${pt}px`,bt(H,I)}else if(b){let C=M.width+(rt.clientX-M.x),pt=M.height+(rt.clientY-M.y);C=Math.max(200,Math.min(C,I.width)),pt=Math.max(150,Math.min(pt,I.height)),R.current.style.width=`${C}px`,R.current.style.height=`${pt}px`,bt(H,I)}},Q=()=>{g(!1),_(!1)};return(p||b)&&(document.addEventListener("mousemove",ct),document.addEventListener("mouseup",Q)),()=>{document.removeEventListener("mousemove",ct),document.removeEventListener("mouseup",Q)}},[p,b,S,M]),Ut(()=>{const ct=new ResizeObserver(()=>{var I,C;const rt=(I=R.current)==null?void 0:I.getBoundingClientRect(),H=(C=document.querySelector(".desktop-content"))==null?void 0:C.getBoundingClientRect();rt&&H&&bt(rt,H)}),Q=document.querySelector(".desktop-content");return Q&&ct.observe(Q),()=>{ct.disconnect()}},[]),y("div",{ref:R,"data-window-id":i.id,className:`window ${n?"active":""} ${s?"dark":""} 
 ${b?"resizing":""} ${L?"touch-device":""} ${i.app==="PlayStation"?"console":""}`,style:{left:i.position.x,top:i.position.y,width:i.size.width,height:i.size.height,display:i.minimized?"none":"flex"},onMouseDown:u,onTouchStart:J,onTouchMove:j,onTouchEnd:V,children:[y("div",{className:"window-header",onMouseDown:it,children:[y("div",{className:"window-title",children:[y("span",{className:"window-icon icon",children:i.icon}),y("span",{className:"window-title-text",children:i.title})]}),y("div",{className:"window-controls",children:L?y(Me,{children:[y("button",{className:"window-minimize touch",onClick:h,children:"−"}),y("button",{className:"window-close touch",onClick:a,children:"×"})]}):y(Me,{children:[y("button",{className:"window-minimize",onClick:h,children:"−"}),y("button",{className:"window-close",onClick:a,children:"×"})]})})]}),y("div",{className:"window-content",children:e}),!L&&y("div",{className:"window-resize",onMouseDown:Z})]})},Gg=({windows:i,activeWindow:e,isDarkMode:n,onWindowClick:s,onThemeToggle:a})=>y("div",{className:`taskbar ${n?"dark":""}`,children:[" ",y("div",{className:"taskbar-windows",children:[" ",i.map(u=>y("button",{className:`taskbar-window-button ${e===u.id?"active":""}`,onClick:()=>s(u.id,e===u.id),children:[" ",y("span",{className:"taskbar-window-icon icon",children:u.icon})," ",y("span",{className:"taskbar-window-title",children:u.title})," "]},u.id))," "]})," ",y("button",{className:"taskbar-theme-toggle icon",onClick:a,children:[" ",n?"☀️":"🌙"," "]})," "]}),ie="/".endsWith("/")?"/".slice(0,-1):"/";class Nt{static async fetch(e){try{const n=await fetch(`${ie}${e}`);if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(n){throw console.error("API Error:",n),n}}static async getSystemInfo(){return this.fetch("/api/system/info")}static async getStorageInfo(){return this.fetch("/api/storage/info")}static async getProcessList(){return this.fetch("/api/process/list")}static async executeScript(e){try{const n=await fetch(`${ie}/api/script/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({script:e})});if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(n){throw console.error("Script execution error:",n),n}}static async executeScriptStream(e,n){try{const a=(await fetch(`${ie}/api/script/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({script:e})})).body.getReader();for(;;){const{done:u,value:f}=await a.read();if(u)break;const h=new TextDecoder().decode(f);n(h)}}catch(s){throw s}}static formatBytes(e){if(e===0)return"0 B";const n=1024,s=["B","KB","MB","GB","TB"],a=Math.floor(Math.log(e)/Math.log(n));return`${(e/Math.pow(n,a)).toFixed(1)} ${s[a]}`}static getTitleImageUrl(e){return`${ie}/api/title/image/${e}`}static async getSystemStatus(){return this.fetch("/api/system/status")}static async getSystemStats(){return this.fetch("/api/system/stats")}static async getAppList(){return this.fetch("/api/app/list")}static async runApp(e){try{return await(await fetch(`${ie}/api/app/run/${e}`)).json()}catch(n){throw console.error("App run error:",n),n}}static async getProfileList(){return this.fetch("/api/profile/list")}static getProfileImageUrl(e){return`${ie}/api/profile/image/${e}`}static async downloadBackup(e=null){const n=e?`${ie}/api/save/backup/${e}`:`${ie}/api/save/backup`;window.location.href=n}static async getTaskList(){return this.fetch("/api/task/list")}static async getTaskDetail(e){try{const n=await fetch(`${ie}/api/task/detail`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(n){throw console.error("Task detail error:",n),n}}static async updateTask(e,n){try{const a=await(await fetch(`${ie}/api/task/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,...n})})).json();if(a.error)throw new Error(a.error);return{id:e,...n}}catch(s){throw console.error("Task update error:",s),s}}static async createTask(e){try{const n=await fetch(`${ie}/api/task/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})});if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(n){throw console.error("Task create error:",n),n}}static async deleteTask(e){try{const n=await fetch(`${ie}/api/task/delete`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})});if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(n){throw console.error("Task delete error:",n),n}}static async streamTaskLog(e,n){try{const a=(await fetch(`${ie}/api/task/log`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).body.getReader();for(;;){const{done:u,value:f}=await a.read();if(u)break;const h=new TextDecoder().decode(f);n(h)}}catch(s){throw console.error("Task log stream error:",s),s}}static async getTaskStatus(){try{const e=await fetch(`${ie}/api/task/status`);if(!e.ok)throw new Error("Network response was not ok");return await e.json()}catch(e){throw console.error("Task status error:",e),e}}static async listFiles(e){try{const n=await fetch(`${ie}/api/fs/list`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e})});if(!n.ok)throw new Error("Network response was not ok");return(await n.json()).map(a=>({id:`${a.name}-${a.mtime}`,name:a.name,type:a.isDirectory?"folder":"file",size:a.size,mtime:a.mtime,permission:a.mode.toString(8),isDirectory:a.isDirectory}))}catch(n){throw console.error("Failed to list files:",n),n}}static async downloadFiles(e){try{const n=btoa(e.join(",")),s=`${ie}/api/fs/download/${n}`;window.open(s,"_blank")}catch(n){throw console.error("Download error:",n),n}}static async renameFile(e,n){try{const s=await fetch(`${ie}/api/fs/rename`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e,name:n})});if(!s.ok)throw new Error("Network response was not ok");return await s.json()}catch(s){throw console.error("Rename error:",s),s}}static async uploadFile(e,n,s){return new Promise((a,u)=>{const f=new XMLHttpRequest,h=new FormData;h.append("file",n),f.open("POST",`${ie}/api/fs/upload/${e}`,!0),f.upload.onprogress=p=>{if(p.lengthComputable&&s){const g=p.loaded/p.total*100;s(g)}},f.onload=()=>{f.status>=200&&f.status<300?a(JSON.parse(f.responseText)):u(new Error("Network response was not ok"))},f.onerror=()=>u(new Error("Network error")),f.send(h)})}static async executePayload(e){try{const n=await fetch(`${ie}/api/fs/payload`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e})});if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(n){throw console.error("Execute payload error:",n),n}}static async uploadPkg(e,n){return new Promise((s,a)=>{if(e.size<65536){console.error("The file is not big enough.");return}const f=e.slice(0,65536),h=new FileReader;h.onload=p=>{const g=new DataView(p.target.result),b=g.getUint32(0,!1);let _=0n;const S=[];if(b===2135312712)_=parseInt(g.getBigInt64(88,!0)),S.push(e.slice(_,e.size),e.slice(0,_));else if(b===2135117396)S.push(e);else{console.error("Dosya yeterince büyük değil.");return}const T=new XMLHttpRequest,M=new FormData;M.append("file",new Blob(S,{type:e.type})),T.open("POST",`${ie}/api/package/upload?size=${e.size}&offset=${_}`,!0),T.upload.onprogress=D=>{if(D.lengthComputable&&n){const L=D.loaded/D.total*100;n(L)}},T.onload=()=>{T.status>=200&&T.status<300?s(JSON.parse(T.responseText)):a(new Error("Network response was not ok"))},T.onerror=()=>a(new Error("Network error")),T.send(M)},h.readAsArrayBuffer(f)})}static async installPackageFromUrl(e){try{const n=await fetch(`${ie}/api/package/install`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({path:e})});if(!n.ok){const s=await n.json();throw new Error(s.error||"Network response was not ok")}return await n.json()}catch(n){throw console.error("Package install error:",n),n}}static async getMediaList(){try{const e=await fetch(`${ie}/api/media/list`);if(!e.ok)throw new Error("Network response was not ok");return await e.json()}catch(e){throw console.error("Media list error:",e),e}}static getMediaUrl(e){const n=encodeURIComponent(e);return`${ie}/api/media/${n}`}static getMediaThumbnailUrl(e){const n=encodeURIComponent(e);return`${ie}/api/media/thumbnails/${n}`}static isVideo(e){return e.toLowerCase().endsWith(".mp4")||e.toLowerCase().endsWith(".webm")||e.toLowerCase().endsWith(".mov")}static getStreamUrl(e){return`${ie}/api/fs/stream/${e}`}static async getRemoteScripts(){return this.fetch("/api/script/remote/list")}static async searchRemoteScripts(e){return this.fetch(`/api/script/remote/list?search=${encodeURIComponent(e)}`)}static getScriptImageUrl(e){return`${ie}/api/script/remote/image/${e}`}static async executeRemoteScript(e){try{const n=await fetch(`${ie}/api/script/remote/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:e})});if(!n.ok)throw new Error("Network response was not ok");return await n.json()}catch(n){throw console.error("Remote script execution error:",n),n}}static async executeRemoteScriptStream(e,n){try{const s=await fetch(`${ie}/api/script/remote/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:e})});if(!s.ok)throw new Error(`Server returned ${s.status}: ${s.statusText}`);const a=s.body.getReader(),u=new TextDecoder;for(;;){const{done:f,value:h}=await a.read();if(f)break;const p=u.decode(h);n(p)}}catch(s){throw console.error("Remote script execution error:",s),s}}static async sendHeartbeat(){try{await fetch(`${ie}/api/script/remote/heartbeat`,{method:"POST",headers:{"Content-Type":"application/json"}})}catch(e){throw console.error("Heartbeat error:",e),e}}}const qg=({isDarkMode:i})=>{const[e,n]=nt(null),[s,a]=nt(null),[u,f]=nt(!0),[h,p]=nt(new Set),[g,b]=nt(0);Ut(()=>{const D=setInterval(()=>{b(L=>L+1)},1e3);return()=>clearInterval(D)},[]);const _=async()=>{try{const D=await Nt.getSystemStatus(),L=new Set;e&&(Math.abs(D.cpu.frequency-e.cpu.frequency)>5e7&&L.add("frequency"),Math.abs(D.cpu.temperature-e.cpu.temperature)>.5&&L.add("temperature"),Math.abs(D.cpu.socSensorTemperature-e.cpu.socSensorTemperature)>.5&&L.add("socTemp")),p(L),n(D),a(null),setTimeout(()=>p(new Set),1e3)}catch(D){console.error("System info alınamadı:",D),a("Failed to load system information")}finally{f(!1)}};Ut(()=>{_();const D=setInterval(_,5e3);return()=>clearInterval(D)},[]);const S=D=>{if(!D)return"--:--:--";const A=Math.floor(Date.now()/1e3)-D,R=Math.floor(A/3600),G=Math.floor(A%3600/60),J=A%60,j=V=>String(V).padStart(2,"0");return`${j(R)}:${j(G)}:${j(J)}`},T=D=>{switch(D){case 0:return"6CPU";case 1:return"7CPU (LOW)";case 5:return"7CPU (NORMAL)";default:return"Unknown"}},M=(D,L)=>{let A="info-value";return h.has(D)&&(A+=" updated"),D.includes("temperature")&&L>45&&(A+=" warning"),A};return!e||s?y("div",{className:`system-info ${i?"dark":""}`,children:[y("div",{className:"system-info-header",children:"System Information"}),y("div",{className:"system-info-error",children:[y("div",{className:"error-icon",children:"⚠️"}),y("div",{className:"error-message",children:s||"Waiting for data..."}),y("div",{className:"error-detail",children:"Unable to retrieve system information. Please check your connection."})]})]}):y("div",{className:`system-info ${i?"dark":""}`,children:[y("div",{className:"system-info-header",children:"System Status"}),y("div",{className:"system-info-content",children:[e.app&&e.app.titleID&&y("div",{className:"info-section",children:[y("div",{className:"section-title",children:"Running App"}),y("div",{className:"game-info",children:[y("div",{className:"game-image",children:y("img",{src:Nt.getTitleImageUrl(e.app.titleID),alt:e.app.titleName||e.app.titleID,onError:D=>D.target.style.display="none"})}),y("div",{className:"game-details",children:[y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"Title"}),y("div",{className:"info-value",children:e.app.titleName||e.app.titleID})]}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"Process"}),y("div",{className:"info-value",children:[e.app.comm," (",e.app.pid,")"]})]}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"Uptime"}),y("div",{className:"info-value uptime",children:S(e.app.start)})]})]})]})]}),y("div",{className:"info-section",children:[y("div",{className:"section-title",children:"System Status"}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"Mode"}),y("div",{className:"info-value",children:T(e.cpu.mode)})]}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"Frequency"}),y("div",{className:M("frequency",e.cpu.frequency),children:[(e.cpu.frequency/1e6).toFixed(0)," MHz"]})]}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"CPU Temp"}),y("div",{className:M("temperature",e.cpu.temperature),children:[e.cpu.temperature.toFixed(1),"°C"]})]}),y("div",{className:"info-group",children:[y("div",{className:"info-label",children:"SoC Temp"}),y("div",{className:M("socTemp",e.cpu.socSensorTemperature),children:[e.cpu.socSensorTemperature.toFixed(1),"°C"]})]})]})]})]})};let lr=null;const Fh=({isDarkMode:i,showPanel:e,onClose:n})=>{const[s,a]=nt(null),[u,f]=nt(null),[h,p]=nt(!0),g=ge(null),b=async()=>{if(lr){a(lr),p(!1);return}try{const S=await Nt.getSystemInfo();lr=S,a(S),f(null),clearTimeout(g.current)}catch(S){console.error("System bilgisi alınamadı:",S),f("Failed to load system information"),e&&(g.current=setTimeout(()=>{p(!0),b()},5e3))}finally{p(!1)}};Ut(()=>(e&&!lr?b():e&&lr&&(a(lr),p(!1)),()=>{g.current&&clearTimeout(g.current)}),[e]);const _=S=>{if(!S)return"Unknown";const M=Math.floor(Date.now()/1e3)-S,D=M%60,L=Math.floor(M/60)%60,A=Math.floor(M/3600)%24,R=Math.floor(M/86400);return R>0?`${R}d ${A}h ${L}m ${D}s`:A>0?`${A}h ${L}m ${D}s`:L>0?`${L}m ${D}s`:`${D}s`};return e?y("div",{className:`system-details-overlay ${i?"dark":""}`,children:y("div",{className:"system-details-panel",children:[y("div",{className:"system-details-header",children:[y("span",{children:"System Information"}),y("button",{onClick:n,children:"×"})]}),h?y("div",{className:"system-details-loading",children:"Loading system information..."}):u?y("div",{className:"system-details-error",children:[u,y("button",{className:"retry-button",onClick:()=>{p(!0),b()},children:"Try Again"})]}):s&&y("div",{className:"system-details-content",children:[y("div",{className:"detail-group",children:[y("h3",{children:"Hardware Information"}),y("div",{className:"detail-item",children:[y("span",{children:"Model Name:"}),y("span",{children:s.modelName})]}),y("div",{className:"detail-item",children:[y("span",{children:"Serial Number:"}),y("span",{children:s.serialNumber})]}),y("div",{className:"detail-item",children:[y("span",{children:"Hardware Model:"}),y("span",{children:s.hw_model})]}),y("div",{className:"detail-item",children:[y("span",{children:"Architecture:"}),y("span",{children:s.hw_machine})]})]}),y("div",{className:"detail-group",children:[y("h3",{children:"Software Information"}),y("div",{className:"detail-item",children:[y("span",{children:"Operating System:"}),y("span",{children:s.ostype})]}),y("div",{className:"detail-item",children:[y("span",{children:"SDK Version:"}),y("span",{children:s.sdk_version})]}),y("div",{className:"detail-item",children:[y("span",{children:"PS4 SDK:"}),y("span",{children:s.ps4_sdk_version})]}),y("div",{className:"detail-item",children:[y("span",{children:"Kernel Version:"}),y("span",{children:s.kernel_version})]}),y("div",{className:"detail-item",children:[y("span",{children:"Update Version:"}),y("span",{children:s.upd_version})]}),y("div",{className:"detail-item",children:[y("span",{children:"System Uptime:"}),y("span",{children:_(s.kernel_boot_time)})]})]})]})]})}):null},Jg=({isDarkMode:i})=>{const[e,n]=nt([]),[s,a]=nt(!0),[u,f]=nt(null),[h,p]=nt(null),[g,b]=nt(null),_=["NPXS40032","NPXS40037","NPXS40047","NPXS40053","NPXS40054","NPXS40056","NPXS40063","NPXS40071","NPXS40139","NPXS40144","NPXS40145","NPXS40148","NPXS40149","NPXS40150"];Ut(()=>{(async()=>{try{const L=(await Nt.getAppList()).filter(A=>!_.includes(A.titleId)).sort((A,R)=>R.size-A.size);n(L),f(null)}catch(D){console.error("Apps yüklenemedi:",D),f("Failed to load applications")}finally{a(!1)}})()},[]);const S=M=>{p(M)},T=async M=>{try{const D=await Nt.runApp(M);b(D),setTimeout(()=>{b(null)},3e3)}catch{b({success:!1,message:"Error running application"})}};return y("div",{className:`applications ${i?"dark":""}`,children:s?y("div",{className:"applications-loading",children:"Loading applications..."}):u?y("div",{className:"applications-error",children:u}):y(Me,{children:[y("div",{className:"app-grid",children:e.map(M=>y("div",{className:"app-item",onClick:()=>S(M),children:[y("div",{className:"app-icon",children:y("img",{src:Nt.getTitleImageUrl(M.titleId),alt:M.titleName,onError:D=>{D.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',D.target.style.background="#2c3e50"}})}),y("div",{className:"app-name",children:M.titleName}),M.size!=0&&y("div",{className:"app-size",children:Nt.formatBytes(M.size)})]},M.titleId))}),h&&y("div",{className:"app-details-overlay",onClick:()=>p(null),children:y("div",{className:"app-details",onClick:M=>M.stopPropagation(),children:[y("div",{className:"app-details-header",children:[y("h2",{children:h.titleName}),y("button",{onClick:()=>p(null),children:"×"})]}),y("div",{className:"app-details-content",children:[y("div",{className:"app-details-icon",children:y("img",{src:Nt.getTitleImageUrl(h.titleId),alt:h.titleName,onError:M=>{M.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',M.target.style.background="#2c3e50"}})}),y("div",{className:"app-details-info",children:[y("div",{className:"detail-row",children:[y("span",{children:"Title ID:"}),y("span",{children:h.titleId})]}),h.size!=0&&y("div",{className:"detail-row",children:[y("span",{children:"Size:"}),y("span",{children:Nt.formatBytes(h.size)})]}),h.installTime!=null&&y("div",{className:"detail-row",children:[y("span",{children:"Install Date:"}),y("span",{children:new Date(h.installTime).toLocaleString()})]}),y("div",{className:"detail-actions",children:[y("button",{className:`run-button ${g?g.success?"success":"error":""}`,onClick:()=>T(h.titleId),children:"Run Application"}),g&&y("div",{className:`status-message ${g.success?"success":"error"}`,children:g.message})]})]})]})]})})]})})},Zg=({message:i,type:e="info",duration:n=3e3,onClose:s})=>{const[a,u]=nt(!0);return Ut(()=>{const f=setTimeout(()=>{u(!1),setTimeout(()=>{s&&s()},300)},n);return()=>clearTimeout(f)},[n,s]),y("div",{className:`toast ${e} ${a?"visible":"hidden"}`,children:[y("div",{className:"toast-icon",children:[e==="success"&&"✓",e==="error"&&"✗",e==="warning"&&"⚠",e==="info"&&"ℹ"]}),y("div",{className:"toast-message",children:i}),y("button",{className:"toast-close",onClick:()=>u(!1),children:"×"})]})};class Ze{static init(){this.container||(this.container=document.createElement("div"),this.container.className="toast-container",document.body.appendChild(this.container),this.render())}static show(e,n="info",s=3e3){this.init();const a=this.nextId++;return this.toasts.push({id:a,message:e,type:n,duration:s}),this.render(),a}static success(e,n=3e3){return this.show(e,"success",n)}static error(e,n=3e3){return this.show(e,"error",n)}static warning(e,n=3e3){return this.show(e,"warning",n)}static info(e,n=3e3){return this.show(e,"info",n)}static dismiss(e){this.toasts=this.toasts.filter(n=>n.id!==e),this.render()}static render(){if(!this.container)return;document.body.classList.contains("dark")||document.documentElement.classList.contains("dark")||localStorage.getItem("theme")==="dark"?this.container.classList.add("dark"):this.container.classList.remove("dark"),Fi(y("div",{children:this.toasts.map(n=>y(Zg,{message:n.message,type:n.type,duration:n.duration,onClose:()=>this.dismiss(n.id)},n.id))}),this.container)}}Ft(Ze,"container",null),Ft(Ze,"toasts",[]),Ft(Ze,"nextId",1);const Qg=({contextMenu:i,setContextMenu:e,isDarkMode:n=!0,onOpenWindow:s})=>{const[a,u]=nt("/"),[f,h]=nt(["/"]),[p,g]=nt(0),[b,_]=nt([]),[S,T]=nt(!0),[M,D]=nt(null),[L,A]=nt({isSelecting:!1,start:{x:0,y:0},end:{x:0,y:0}}),[R,G]=nt(new Set),[J,j]=nt(!1),[V,it]=nt({id:null,time:0}),[Z,bt]=nt(-1),[ct,Q]=nt(!1),[rt,H]=nt(""),[I,C]=nt(null),[pt,Mt]=nt(null),[$t,$]=nt(null),[gt,ut]=nt(new Set),kt=ge(null),Ot=async z=>{try{T(!0),D(null);const K=await Nt.listFiles(z);_(K)}catch(K){console.error("Failed to load files:",K),D("Failed to load files")}finally{T(!1)}};Ut(()=>{Ot(a)},[a]),Ut(()=>{const z=b.filter(K=>It(K.name)).map(K=>K.id);ut(new Set(z))},[b]);const Rt=z=>{const K=z.target instanceof HTMLInputElement?z.target.value:"";u(K)},Ht=z=>{z.key==="Enter"&&mt(a)},mt=async z=>{const K=z.endsWith("/")?z:z+"/";if(e({...i,show:!1}),K!==f[p]){const _t=f.slice(0,p+1);h([..._t,K]),g(_t.length)}u(K)},St=()=>{p>0&&(g(p-1),u(f[p-1]))},Et=()=>{p<f.length-1&&(g(p+1),u(f[p+1]))},Vt=()=>{const z=a.split("/").slice(0,-2).join("/")+"/";z!==a&&mt(z)};Ut(()=>{const z=K=>{var _t;if(!(!((_t=kt.current)!=null&&_t.contains(document.activeElement))||document.activeElement.tagName==="INPUT"||document.activeElement.tagName==="TEXTAREA"))switch(K.key){case"Tab":K.preventDefault(),bt(Y=>{const Gt=K.shiftKey?Y<=0?b.length-1:Y-1:Y>=b.length-1?0:Y+1;G(new Set([b[Gt].id]));const zt=kt.current.querySelector(`[data-id="${b[Gt].id}"]`);return zt==null||zt.scrollIntoView({block:"nearest"}),Gt});break;case"Enter":if(Z>=0){const Y=b[Z];q(Y)}break}};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[b,Z]),Ut(()=>{const z=_t=>{if(L.isSelecting){const Y=kt.current.getBoundingClientRect();let Gt=_t.clientX-Y.left,zt=_t.clientY-Y.top;Gt=Math.max(0,Math.min(Gt,Y.width)),zt=Math.max(0,Math.min(zt,Y.height)),A(Tt=>({...Tt,end:{x:Gt,y:zt}})),jt(Gt,zt,_t.ctrlKey)}},K=()=>{L.isSelecting&&A(_t=>({..._t,isSelecting:!1}))};return L.isSelecting&&(document.addEventListener("mousemove",z),document.addEventListener("mouseup",K)),()=>{document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",K)}},[L.isSelecting]);const dn=z=>{if(!z.target.closest(".context-menu")&&(z.preventDefault(),!z.target.closest(".file-item")&&!(z.target.classList.contains("file-grid")&&z.clientX>=z.target.getBoundingClientRect().right-20)&&(e({...i,show:!1}),z.button===0))){const K=kt.current.getBoundingClientRect(),_t=z.clientX-K.left,Y=z.clientY-K.top;A({isSelecting:!0,start:{x:_t,y:Y},end:{x:_t,y:Y}}),!z.ctrlKey&&!z.target.closest(".file-item")&&G(new Set),j(!1)}},jt=(z,K,_t)=>{const Y=kt.current.getBoundingClientRect();z=Math.max(0,Math.min(z,Y.width)),K=Math.max(0,Math.min(K,Y.height));const Gt={left:Math.min(L.start.x,z),right:Math.max(L.start.x,z),top:Math.min(L.start.y,K),bottom:Math.max(L.start.y,K)},zt=kt.current.getElementsByClassName("file-item"),Tt=new Set(_t?R:[]);Array.from(zt).forEach(oe=>{const Xe=oe.getBoundingClientRect(),te={left:Xe.left-Y.left,right:Xe.right-Y.left,top:Xe.top-Y.top,bottom:Xe.bottom-Y.top};if(!(te.right<Gt.left||te.left>Gt.right||te.bottom<Gt.top||te.top>Gt.bottom)){const tn=oe.getAttribute("data-id");tn&&Tt.add(tn)}}),G(Tt)},fe=z=>{if(L.isSelecting){const K=kt.current.getBoundingClientRect(),_t=z.clientX-K.left,Y=z.clientY-K.top,Gt=Math.abs(L.end.x-L.start.x),zt=Math.abs(L.end.y-L.start.y);(Gt>=5||zt>=5)&&jt(_t,Y,z.ctrlKey)}A(K=>({...K,isSelecting:!1})),setTimeout(()=>j(!1),0)},Ve=(z,K)=>{if(z.stopPropagation(),!J){const _t=new Date().getTime();if(V.id===K.id&&_t-V.time<300){q(K),it({id:null,time:0});return}if(it({id:K.id,time:_t}),e({...i,show:!1}),z.ctrlKey||z.metaKey){const Y=new Set(R);R.has(K.id)?Y.delete(K.id):Y.add(K.id),G(Y)}else if(z.shiftKey&&R.size>0){const Y=Array.from(R)[R.size-1],Gt=b.findIndex(te=>te.id===Y),zt=b.findIndex(te=>te.id===K.id),Tt=Math.min(Gt,zt),oe=Math.max(Gt,zt),Xe=new Set(R);for(let te=Tt;te<=oe;te++)Xe.add(b[te].id);G(Xe)}else G(new Set([K.id]))}},q=z=>{if(z.isDirectory){e({...i,show:!1});const K=a+z.name+"/";mt(K)}else Yt(z.name)?At(z):It(z.name)?Qt(z):console.log("Open File:",z.name)},at=z=>{if(!z)return!1;const K=[".mp3",".wav",".ogg",".flac",".aac",".m4a"],_t=z.toLowerCase();return K.some(Y=>_t.endsWith(Y))},Dt=z=>{if(!z)return!1;const K=[".mp4",".webm",".mkv",".avi",".mov",".wmv",".mpg",".mpeg",".m4v"],_t=z.toLowerCase();return K.some(Y=>_t.endsWith(Y))},It=z=>{if(!z)return!1;const K=[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".ico"],_t=z.toLowerCase();return K.some(Y=>_t.endsWith(Y))},Yt=z=>at(z)||Dt(z),At=z=>{s&&s({app:"mediaPlayer",title:`Media Player - ${z.name}`,props:{mediaFile:z,currentPath:a}})},Qt=z=>{s&&s({app:"imageViewer",title:`Image Viewer - ${z.name}`,props:{imageFile:z,currentPath:a}})},Kt=(z,K)=>{L.isSelecting||(z.preventDefault(),R.has(K.id)||G(new Set([K.id])),e({show:!0,x:z.pageX,y:z.pageY,item:K,isBackground:!1}))},Ye=z=>{const K=Array.from(R).map(Y=>{const Gt=b.find(zt=>zt.id===Y);return a+Gt.name}),_t=K.length>0?K:[a+z.name];try{Nt.downloadFiles(_t)}catch(Y){console.error("Download failed:",Y)}e({...i,show:!1})},pn=z=>{const K=Array.from(R).map(Gt=>b.find(zt=>zt.id===Gt)),_t=K.map(Gt=>`• ${Gt.name}`).join(`
`),Y=K.length>1?`Are you sure you want to delete these ${K.length} items?

${_t}`:`Are you sure you want to delete "${z.name}"?`;if(window.confirm(Y)){const Gt=b.filter(zt=>!R.has(zt.id));_(Gt),G(new Set),console.log("Deleted items:",K.map(zt=>zt.name))}e({...i,show:!1})},pi=z=>{if(z.preventDefault(),z.target.classList.contains("file-manager")||z.target.classList.contains("file-grid"))if(R.size>0){const K=b.find(_t=>_t.id===Array.from(R)[0]);e({show:!0,x:z.pageX,y:z.pageY,isBackground:!1,item:K})}else e({show:!0,x:z.pageX,y:z.pageY,isBackground:!0,item:null})},In=z=>{z.preventDefault(),z.dataTransfer.dropEffect="copy"},En=async z=>{z.preventDefault();const K=Array.from(z.dataTransfer.files);if(K.length>0){Mt(0),$(null);try{for(const _t of K)await Nt.uploadFile(a+_t.name,_t,Y=>{Mt(Y)});Mt(100),setTimeout(()=>Mt(null),3e3),Ot(a)}catch(_t){console.error("Upload failed:",_t),$(_t.message)}}},F=z=>{C(z.id),H(z.name),Q(!0),e({...i,show:!1})},tt=async z=>{try{rt&&rt!==z.name&&(await Nt.renameFile(a+z.name,rt),Ot(a))}catch(K){console.error("Rename failed:",K)}finally{Q(!1),C(null)}},lt=async z=>{try{const K=await Nt.executePayload(a+z.name);K.success?Ze.success("Payload executed successfully"):Ze.error(K.message||"Failed to execute payload")}catch(K){console.error("Execute payload failed:",K),Ze.error("Network error while executing payload")}e({...i,show:!1})},vt=async z=>{try{const K=Array.from(R).map(Y=>b.find(zt=>zt.id===Y)).filter(Y=>Y&&Y.name.toLowerCase().endsWith(".pkg")).map(Y=>a+Y.name);if(K.length===0&&z.name.toLowerCase().endsWith(".pkg")&&K.push(a+z.name),K.length===0){Ze.error("No PKG files selected for installation");return}let _t=0;for(const Y of K)await Nt.installPackageFromUrl(Y),_t++;_t===1?Ze.success("Package installation started"):Ze.success(`Installation of ${_t} packages started`)}catch(K){console.error("Package installation failed:",K),Ze.error(K.message||"Failed to install package")}e({...i,show:!1})};return y("div",{ref:kt,className:`file-manager ${n?"dark":""}`,onMouseDown:dn,onMouseUp:fe,onContextMenu:pi,onDragOver:In,onDrop:En,children:[y("div",{className:"path-navigation",children:[y("div",{className:"path-buttons",children:[y("button",{onClick:St,disabled:p<=0,title:"Back",children:"◀"}),y("button",{onClick:Et,disabled:p>=f.length-1,title:"Forward",children:"▶"}),y("button",{onClick:Vt,disabled:a==="/",title:"Parent Directory",children:"▲"})]}),y("input",{type:"text",className:"path-input",value:a,onChange:Rt,onKeyDown:Ht})]}),y("div",{className:"file-grid",onScroll:()=>{L.isSelecting&&A(z=>({...z,isSelecting:!1}))},children:S?y("div",{className:"loading",children:"Loading files..."}):M?y("div",{className:"error",children:M}):b.length===0?y("div",{className:"empty",children:"No files found"}):b.map((z,K)=>y("div",{"data-id":String(z.id),className:`file-item ${R.has(z.id)?"selected":""} ${K===Z?"focused":""}`,tabIndex:0,onClick:_t=>Ve(_t,z),onContextMenu:_t=>Kt(_t,z),onFocus:()=>{bt(K),R.has(z.id)||G(new Set([z.id]))},children:[y("div",{className:"file-icon icon",children:It(z.name)?y("div",{className:"image-thumbnail",children:[gt.has(z.id)&&y("div",{className:"image-loading-spinner",children:y("div",{className:"spinner"})}),y("img",{src:Nt.getStreamUrl(a+z.name),alt:z.name,loading:"lazy",onLoad:()=>{ut(_t=>{const Y=new Set(_t);return Y.delete(z.id),Y})},style:{opacity:gt.has(z.id)?0:1},onError:()=>{ut(_t=>{const Y=new Set(_t);return Y.delete(z.id),Y})}})]}):Xg.getFileIcon(z.type,z.name)}),ct&&I===z.id?y("input",{type:"text",className:"rename-input",value:rt,onChange:_t=>H(_t.target.value),onBlur:()=>tt(z),onKeyDown:_t=>{_t.key==="Enter"?tt(z):_t.key==="Escape"&&(Q(!1),C(null))},autoFocus:!0}):y("div",{className:"file-name",children:z.name})]},z.id))}),pt!==null&&y("div",{className:"upload-progress",children:["Uploading: ",Math.round(pt),"%",y("div",{className:"upload-progress-bar",children:y("div",{className:"upload-progress-bar-fill",style:{width:`${pt}%`}})})]}),$t&&y("div",{className:"upload-error",children:$t}),L.isSelecting&&y("div",{className:"selection-box",style:{left:`${Math.min(L.start.x,L.end.x)}px`,top:`${Math.min(L.start.y,L.end.y)}px`,width:`${Math.abs(L.end.x-L.start.x)}px`,height:`${Math.abs(L.end.y-L.start.y)}px`}}),i.show&&y("div",{className:`context-menu ${n?"dark":""}`,style:{left:`${i.x}px`,top:`${i.y}px`},children:[!i.isBackground&&i.item&&i.item.name&&i.item.name.toLowerCase().endsWith(".pkg")&&y(Me,{children:[y("div",{className:"context-menu-item install",onClick:()=>vt(i.item),children:"Install Package"}),y("div",{className:"context-menu-separator"})]}),!i.isBackground&&i.item&&i.item.name&&(i.item.name.endsWith(".elf")||i.item.name.endsWith(".bin"))&&y(Me,{children:[y("div",{className:"context-menu-separator"}),y("div",{className:"context-menu-item execute",onClick:()=>lt(i.item),children:"Execute Payload"})]}),i.isBackground?y("div",{className:"context-menu-item create-folder",children:"Create Folder"}):y(Me,{children:[y("div",{className:"context-menu-item download",onClick:()=>Ye(i.item),children:"Download"}),y("div",{className:"context-menu-item rename",onClick:()=>F(i.item),children:"Rename"}),y("div",{className:"context-menu-separator"}),y("div",{className:"context-menu-item delete",onClick:()=>pn(i.item),children:"Delete"})]})]})]})},tm=({isDarkMode:i})=>{const[e,n]=nt([]),[s,a]=nt({}),[u,f]=nt(!0),[h,p]=nt(null),[g,b]=nt("all"),[_,S]=nt("all"),[T,M]=nt("date-desc"),[D,L]=nt(null),[A,R]=nt(!1);Ut(()=>{G()},[]);const G=async()=>{try{f(!0),p(null);const I=await Nt.getMediaList(),C=I.entries.map(pt=>{const Mt=pt.filePath.toLowerCase().endsWith(".mp4"),$t=J(pt.filePath),$=pt.ext&&pt.ext.trophy,gt=pt.meta&&pt.meta.appVerTitleId;let ut=null;return pt.meta&&pt.meta.segmentInfo&&pt.meta.segmentInfo.mediaTime&&pt.meta.segmentInfo.mediaTime.length>0&&pt.meta.segmentInfo.mediaTime[0].length>1&&(ut=pt.meta.segmentInfo.mediaTime[0][1]),{...pt,isVideo:Mt,isJxr:$t,hasTrophy:$,titleId:gt,duration:ut,date:pt.meta&&pt.meta.segmentInfo?new Date(pt.meta.segmentInfo.start):new Date(0)}});n(C),a(I.titles||{})}catch(I){console.error("Failed to load media list:",I),p("Failed to load media list"),Ze.error("Failed to load media list")}finally{f(!1)}},J=I=>{if(!I)return!1;const C=I.toLowerCase();return C.endsWith(".jxr")||C.endsWith(".wdp")||C.endsWith(".hdp")},j=I=>{try{const C=Nt.getMediaUrl(I.filePath+"?download=true"),pt=document.createElement("a");pt.href=C,pt.download=I.filePath.split("/").pop(),document.body.appendChild(pt),pt.click(),document.body.removeChild(pt),Ze.success("Download started")}catch(C){console.error("Download failed:",C),Ze.error("Download failed")}},V=I=>{L(I),R(!0)},it=()=>{R(!1),L(null)},Z=I=>I?s[I]||"Deleted Games and Apps":"Unknown",bt=()=>{let I=[...e];return g==="images"?I=I.filter(C=>!C.isVideo):g==="videos"?I=I.filter(C=>C.isVideo):g==="trophies"&&(I=I.filter(C=>C.hasTrophy)),_!=="all"&&(I=I.filter(C=>C.titleId===_)),T==="date-desc"?I.sort((C,pt)=>pt.date-C.date):T==="date-asc"&&I.sort((C,pt)=>C.date-pt.date),I},ct=()=>{const I=new Set;return e.forEach(C=>{C.titleId&&I.add(C.titleId)}),Array.from(I)},Q=bt(),rt=ct(),H=I=>{if(!I)return"";const C=Math.floor(I/1e3),pt=Math.floor(C/3600),Mt=Math.floor(C%3600/60),$t=C%60;return pt>0?`${pt.toString().padStart(2,"0")}:${Mt.toString().padStart(2,"0")}:${$t.toString().padStart(2,"0")}`:`${Mt.toString().padStart(2,"0")}:${$t.toString().padStart(2,"0")}`};return y("div",{className:`media-gallery ${i?"dark":""}`,children:[y("div",{className:"media-toolbar",children:[y("div",{className:"filter-group",children:[y("label",{children:"Filter:"}),y("select",{value:g,onChange:I=>b(I.target.value),className:"filter-select",children:[y("option",{value:"all",children:"All Media"}),y("option",{value:"images",children:"Images Only"}),y("option",{value:"videos",children:"Videos Only"}),y("option",{value:"trophies",children:"Trophy Media"})]})]}),y("div",{className:"filter-group",children:[y("label",{children:"Game:"}),y("select",{value:_,onChange:I=>S(I.target.value),className:"filter-select",children:[y("option",{value:"all",children:"All Games"}),rt.map(I=>y("option",{value:I,children:Z(I)},I))]})]}),y("div",{className:"filter-group",children:[y("label",{children:"Sort:"}),y("select",{value:T,onChange:I=>M(I.target.value),className:"filter-select",children:[y("option",{value:"date-desc",children:"Newest First"}),y("option",{value:"date-asc",children:"Oldest First"})]})]}),y("button",{className:"refresh-button icon",onClick:G,disabled:u,children:"🔄"})]}),y("div",{className:"media-content",children:u?y("div",{className:"media-loading",children:"Loading media..."}):h?y("div",{className:"media-error",children:h}):Q.length===0?y("div",{className:"media-empty",children:"No media found"}):y("div",{className:"media-grid",children:Q.map((I,C)=>y("div",{className:"media-item",onClick:()=>V(I),children:[y("div",{className:"media-thumbnail",children:[I.isVideo&&y("div",{className:"video-indicator",children:"▶"}),I.isJxr?y("div",{className:"jxr-thumbnail",children:y("div",{className:"jxr-thumbnail-content",children:[y("div",{className:"jxr-thumbnail-icon",children:"HDR"}),y("div",{className:"jxr-thumbnail-text",children:"HDR Content"})]})}):y("img",{src:Nt.getMediaThumbnailUrl(I.filePath),alt:"Media thumbnail",loading:"lazy"}),I.hasTrophy&&y("div",{className:"trophy-badge icon",title:"Trophy Earned",children:"🏆"})]}),y("div",{className:"media-info",children:[y("div",{className:"media-title",title:Z(I.titleId),children:Z(I.titleId)}),y("div",{className:"media-details",children:[y("div",{className:"media-date",children:I.date.toLocaleDateString()}),I.isVideo&&I.duration&&y("div",{className:"media-duration",children:H(I.duration)})]})]})]},C))})}),A&&D&&y("div",{className:"media-viewer-overlay",onClick:it,children:y("div",{className:"media-viewer",onClick:I=>I.stopPropagation(),children:[y("div",{className:"viewer-header",children:[y("div",{className:"viewer-title",children:[Z(D.titleId),D.hasTrophy&&y("span",{className:"viewer-trophy",children:"🏆"}),D.isJxr&&y("span",{className:"viewer-hdr",children:"HDR"})]}),y("div",{className:"viewer-actions",children:[y("button",{className:"download-button icon",onClick:()=>j(D),title:"Download",children:"⬇️"}),y("button",{className:"close-button",onClick:it,title:"Close",children:"✖"})]})]}),y("div",{className:"viewer-content",children:D.isVideo?y("video",{src:Nt.getMediaUrl(D.filePath),controls:!0,autoPlay:!0}):D.isJxr?y("div",{className:"hdr-content-container",children:y("div",{className:"hdr-content-message",children:[y("div",{className:"hdr-icon",children:"HDR"}),y("div",{className:"hdr-text",children:"HDR Content cannot be previewed."})]})}):y("img",{src:Nt.getMediaUrl(D.filePath),alt:"Media content"})}),y("div",{className:"viewer-footer",children:[y("div",{className:"media-date",children:D.date.toLocaleString()}),D.isVideo&&D.duration&&y("div",{className:"media-duration viewer-duration",children:H(D.duration)})]})]})})]})},em=({mediaFile:i,currentPath:e,onClose:n})=>{const[s,a]=nt(!0),u=b(i==null?void 0:i.name),f=ge(null),h=ge(null),p=ge(null),g=ge("");Ut(()=>{if(!i||!e)return;a(!0),p.current||(p.current=new AbortController);const S=Nt.getStreamUrl(e+i.name),T=S.includes("?")?"&":"?";return g.current=`${S}${T}t=${Date.now()}`,()=>{p.current&&(p.current.abort(),p.current=null),f.current&&(f.current.pause(),f.current.src="",f.current.load()),h.current&&(h.current.pause(),h.current.src="",h.current.load())}},[i,e]);function b(S){if(!S)return!1;const T=[".mp3",".wav",".ogg",".flac",".aac",".m4a"],M=S.toLowerCase();return T.some(D=>M.endsWith(D))}return y("div",{className:"media-player",children:[y("div",{className:"download-button-container",children:y("button",{className:"download-button-media",onClick:()=>{if(i){const S=e+i.name;Nt.downloadFiles([S])}},title:"İndir",children:y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[y("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),y("polyline",{points:"7 10 12 15 17 10"}),y("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})})}),y("div",{className:"media-player-content",children:[u?y("div",{className:"audio-player-wrapper",children:[y("div",{className:"audio-visualization",children:[y("div",{className:"audio-icon",children:y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",children:[y("circle",{cx:"12",cy:"12",r:"10"}),y("circle",{cx:"12",cy:"12",r:"3"}),y("line",{x1:"12",y1:"2",x2:"12",y2:"4"}),y("line",{x1:"12",y1:"20",x2:"12",y2:"22"}),y("line",{x1:"4",y1:"12",x2:"2",y2:"12"}),y("line",{x1:"22",y1:"12",x2:"20",y2:"12"}),y("line",{x1:"6.34",y1:"6.34",x2:"4.93",y2:"4.93"}),y("line",{x1:"19.07",y1:"4.93",x2:"17.66",y2:"6.34"}),y("line",{x1:"17.66",y1:"17.66",x2:"19.07",y2:"19.07"}),y("line",{x1:"4.93",y1:"19.07",x2:"6.34",y2:"17.66"})]})}),y("div",{className:"audio-title-large",children:i==null?void 0:i.name})]}),i&&y("audio",{ref:f,src:g.current,controls:!0,autoPlay:!0,className:"audio-player-element",onLoadStart:()=>a(!0),onLoadedData:()=>a(!1),onError:()=>a(!1)})]}):y("div",{className:"video-container",children:i&&y("video",{ref:h,src:g.current,controls:!0,autoPlay:!0,onLoadStart:()=>a(!0),onLoadedData:()=>a(!1),onError:()=>a(!1)})}),s&&y("div",{className:"media-loading",children:[y("div",{className:"media-spinner"}),y("div",{className:"media-loading-text",children:"Loading..."})]})]})]})},nm=({imageFile:i,currentPath:e,onClose:n})=>{const[s,a]=nt(!0),u=ge(null),f=ge(null),h=ge("");return Ut(()=>{if(!i||!e)return;a(!0),f.current||(f.current=new AbortController);const g=Nt.getStreamUrl(e+i.name),b=g.includes("?")?"&":"?";return h.current=`${g}${b}t=${Date.now()}`,()=>{f.current&&(f.current.abort(),f.current=null)}},[i,e]),Ut(()=>{const g=u.current;if(!g)return;const b=()=>{console.log("Image loaded"),a(!1)},_=()=>{console.log("Image error"),a(!1)};return g.addEventListener("load",b),g.addEventListener("error",_),()=>{g.removeEventListener("load",b),g.removeEventListener("error",_)}},[u.current,i]),y("div",{className:"image-viewer",children:y("div",{className:"image-viewer-content",children:[y("button",{className:"download-button floating",onClick:()=>{if(i){const g=e+i.name;Nt.downloadFiles([g])}},title:"İndir",children:y("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[y("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),y("polyline",{points:"7 10 12 15 17 10"}),y("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})}),s&&y("div",{className:"image-loading",children:[y("div",{className:"image-spinner"}),y("div",{className:"image-loading-text",children:"Image is loading..."})]}),i&&y("img",{ref:u,src:h.current,alt:i==null?void 0:i.name,className:"image-viewer-img"})]})})},im=({isDarkMode:i})=>{const[e,n]=nt([]),[s,a]=nt(!0),[u,f]=nt(null),[h,p]=nt(new Set),[g,b]=nt(!1),[_,S]=nt(null),[T,M]=nt({key:"pid",direction:"asc"}),[D,L]=nt(0);Ut(()=>{const V=setInterval(()=>{L(it=>it+1)},1e3);return()=>clearInterval(V)},[]),Ut(()=>{const V=async()=>{try{const Z=await Nt.getProcessList();if(!Array.isArray(Z))throw new Error("Invalid data format");const bt=e.reduce((rt,H)=>(rt[H.pid]=H,rt),{}),ct=new Set,Q=Z.map(rt=>{const H=bt[rt.pid];return H&&(H.rssize!==rt.rssize&&ct.add(`memory-${rt.pid}`),H.stat!==rt.stat&&ct.add(`stat-${rt.pid}`)),delete bt[rt.pid],rt});p(ct),setTimeout(()=>p(new Set),1e3),n(Q),f(null),b(!1),S(new Date)}catch(Z){console.error("Failed to fetch processes:",Z),e.length===0?f("Failed to load process list"):b(!0)}finally{a(!1)}};V();const it=setInterval(V,5e3);return()=>clearInterval(it)},[]);const A=V=>{let it="asc";T.key===V&&T.direction==="asc"&&(it="desc"),M({key:V,direction:it})},R=()=>{const V=[...e];return V.sort((it,Z)=>{let bt=it[T.key],ct=Z[T.key];return T.key==="rssize"&&(bt=it.rssize*it.pageSize,ct=Z.rssize*Z.pageSize),bt<ct?T.direction==="asc"?-1:1:bt>ct?T.direction==="asc"?1:-1:0}),V},G=V=>`${(V*16384/(1024*1024)).toFixed(1)} MB`,J=V=>{if(!V)return"--:--:--";const Z=Math.floor(Date.now()/1e3)-V,bt=Math.floor(Z/3600),ct=Math.floor(Z%3600/60),Q=Z%60,rt=H=>String(H).padStart(2,"0");return`${rt(bt)}:${rt(ct)}:${rt(Q)}`},j=(V,it)=>{const Z=`${V}-${it}`;return h.has(Z)?"updated":""};return s&&e.length===0?y("div",{className:`process-list ${i?"dark":""}`,children:y("div",{className:"process-list-message loading",children:[y("div",{className:"loading-spinner"}),y("div",{children:"Loading process list..."})]})}):u&&e.length===0?y("div",{className:`process-list ${i?"dark":""}`,children:y("div",{className:"process-list-message error",children:u})}):e.length?y("div",{className:`process-list ${i?"dark":""}`,children:[g&&y("div",{className:"update-status error",children:[y("span",{className:"error-icon",children:"⚠️"}),"Last update failed",_&&y("span",{className:"last-update",children:["Last successful update: ",_.toLocaleTimeString()]})]}),y("table",{children:[y("thead",{children:y("tr",{children:[y("th",{onClick:()=>A("pid"),children:"PID"}),y("th",{onClick:()=>A("comm"),children:"Process Name"}),y("th",{onClick:()=>A("ppid"),children:"PPID"}),y("th",{onClick:()=>A("rssize"),children:"Memory"}),y("th",{onClick:()=>A("stat"),children:"Status"}),y("th",{onClick:()=>A("start"),children:"Uptime"}),y("th",{onClick:()=>A("emul"),children:"Type"}),y("th",{onClick:()=>A("titleID"),children:"Title ID"})]})}),y("tbody",{children:R().map(V=>y("tr",{children:[y("td",{children:V.pid}),y("td",{children:V.comm}),y("td",{children:V.ppid}),y("td",{className:j("memory",V.pid),children:G(V.rssize)}),y("td",{className:j("stat",V.pid),children:V.stat}),y("td",{children:J(V.start)}),y("td",{children:V.emul}),y("td",{children:V.titleID||"-"})]},V.pid))})]})]}):y("div",{className:`process-list ${i?"dark":""}`,children:y("div",{className:"process-list-message",children:"No processes found"})})},rm=({isDarkMode:i})=>{const[e,n]=nt([]),[s,a]=nt(!0),[u,f]=nt(null),[h,p]=nt(null);Ut(()=>{(async()=>{try{const S=await Nt.getProfileList();n(S),f(null)}catch(S){console.error("Profiles yüklenemedi:",S),f("Failed to load profiles")}finally{a(!1)}})()},[]);const g=_=>{p(_)},b=async(_=null)=>{try{await Nt.downloadBackup(_)}catch(S){console.error("Backup failed:",S)}};return y("div",{className:`profiles ${i?"dark":""}`,children:s?y("div",{className:"profiles-loading",children:"Loading profiles..."}):u?y("div",{className:"profiles-error",children:u}):y(Me,{children:[y("div",{className:"profiles-header",children:[y("h2",{children:"User Profiles"}),y("button",{className:"backup-all-button",onClick:()=>b(),children:[y("span",{className:"icon",children:"💾"}),"Save All Profile Backup Files"]})]}),y("div",{className:"profile-grid",children:e.map(_=>y("div",{className:"profile-item",onClick:()=>g(_),children:[y("div",{className:"profile-icon",children:y("img",{src:Nt.getProfileImageUrl(_.profileId),alt:_.username,onError:S=>{S.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',S.target.style.background="#2c3e50"}})}),y("div",{className:"profile-name",children:_.username})]},_.profileId))}),h&&y("div",{className:"profile-details-overlay",onClick:()=>p(null),children:y("div",{className:"profile-details",onClick:_=>_.stopPropagation(),children:[y("div",{className:"profile-details-header",children:[y("h2",{children:h.username}),y("button",{onClick:()=>p(null),children:"×"})]}),y("div",{className:"profile-details-content",children:[y("div",{className:"profile-details-icon",children:y("img",{src:Nt.getProfileImageUrl(h.profileId),alt:h.username,onError:_=>{_.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',_.target.style.background="#2c3e50"}})}),y("div",{className:"profile-details-info",children:[y("div",{className:"detail-row",children:[y("span",{children:"Username:"}),y("span",{children:h.username})]}),y("div",{className:"detail-row",children:[y("span",{children:"Profile ID:"}),y("span",{children:h.profileId})]}),y("div",{className:"detail-actions",children:y("button",{className:"backup-button icon",onClick:()=>b(h.profileId),children:"Backup Save Files"})})]})]})]})})]})})};function sm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var To={exports:{}},om=To.exports,Ku;function Rh(){return Ku||(Ku=1,function(i,e){(function(n,s){i.exports=s()})(om,function(){var n=navigator.userAgent,s=navigator.platform,a=/gecko\/\d/i.test(n),u=/MSIE \d/.test(n),f=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(n),h=/Edge\/(\d+)/.exec(n),p=u||f||h,g=p&&(u?document.documentMode||6:+(h||f)[1]),b=!h&&/WebKit\//.test(n),_=b&&/Qt\/\d+\.\d+/.test(n),S=!h&&/Chrome\//.test(n),T=/Opera\//.test(n),M=/Apple Computer/.test(navigator.vendor),D=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(n),L=/PhantomJS/.test(n),A=M&&(/Mobile\/\w+/.test(n)||navigator.maxTouchPoints>2),R=/Android/.test(n),G=A||R||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(n),J=A||/Mac/.test(s),j=/\bCrOS\b/.test(n),V=/win/i.test(s),it=T&&n.match(/Version\/(\d*\.\d*)/);it&&(it=Number(it[1])),it&&it>=15&&(T=!1,b=!0);var Z=J&&(_||T&&(it==null||it<12.11)),bt=a||p&&g>=9;function ct(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var Q=function(t,r){var l=t.className,o=ct(r).exec(l);if(o){var c=l.slice(o.index+o[0].length);t.className=l.slice(0,o.index)+(c?o[1]+c:"")}};function rt(t){for(var r=t.childNodes.length;r>0;--r)t.removeChild(t.firstChild);return t}function H(t,r){return rt(t).appendChild(r)}function I(t,r,l,o){var c=document.createElement(t);if(l&&(c.className=l),o&&(c.style.cssText=o),typeof r=="string")c.appendChild(document.createTextNode(r));else if(r)for(var d=0;d<r.length;++d)c.appendChild(r[d]);return c}function C(t,r,l,o){var c=I(t,r,l,o);return c.setAttribute("role","presentation"),c}var pt;document.createRange?pt=function(t,r,l,o){var c=document.createRange();return c.setEnd(o||t,l),c.setStart(t,r),c}:pt=function(t,r,l){var o=document.body.createTextRange();try{o.moveToElementText(t.parentNode)}catch{return o}return o.collapse(!0),o.moveEnd("character",l),o.moveStart("character",r),o};function Mt(t,r){if(r.nodeType==3&&(r=r.parentNode),t.contains)return t.contains(r);do if(r.nodeType==11&&(r=r.host),r==t)return!0;while(r=r.parentNode)}function $t(){var t;try{t=document.activeElement}catch{t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function $(t,r){var l=t.className;ct(r).test(l)||(t.className+=(l?" ":"")+r)}function gt(t,r){for(var l=t.split(" "),o=0;o<l.length;o++)l[o]&&!ct(l[o]).test(r)&&(r+=" "+l[o]);return r}var ut=function(t){t.select()};A?ut=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:p&&(ut=function(t){try{t.select()}catch{}});function kt(t){var r=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,r)}}function Ot(t,r,l){r||(r={});for(var o in t)t.hasOwnProperty(o)&&(l!==!1||!r.hasOwnProperty(o))&&(r[o]=t[o]);return r}function Rt(t,r,l,o,c){r==null&&(r=t.search(/[^\s\u00a0]/),r==-1&&(r=t.length));for(var d=o||0,m=c||0;;){var v=t.indexOf("	",d);if(v<0||v>=r)return m+(r-d);m+=v-d,m+=l-m%l,d=v+1}}var Ht=function(){this.id=null,this.f=null,this.time=0,this.handler=kt(this.onTimeout,this)};Ht.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},Ht.prototype.set=function(t,r){this.f=r;var l=+new Date+t;(!this.id||l<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=l)};function mt(t,r){for(var l=0;l<t.length;++l)if(t[l]==r)return l;return-1}var St=50,Et={toString:function(){return"CodeMirror.Pass"}},Vt={scroll:!1},dn={origin:"*mouse"},jt={origin:"+move"};function fe(t,r,l){for(var o=0,c=0;;){var d=t.indexOf("	",o);d==-1&&(d=t.length);var m=d-o;if(d==t.length||c+m>=r)return o+Math.min(m,r-c);if(c+=d-o,c+=l-c%l,o=d+1,c>=r)return o}}var Ve=[""];function q(t){for(;Ve.length<=t;)Ve.push(at(Ve)+" ");return Ve[t]}function at(t){return t[t.length-1]}function Dt(t,r){for(var l=[],o=0;o<t.length;o++)l[o]=r(t[o],o);return l}function It(t,r,l){for(var o=0,c=l(r);o<t.length&&l(t[o])<=c;)o++;t.splice(o,0,r)}function Yt(){}function At(t,r){var l;return Object.create?l=Object.create(t):(Yt.prototype=t,l=new Yt),r&&Ot(r,l),l}var Qt=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Kt(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Qt.test(t))}function Ye(t,r){return r?r.source.indexOf("\\w")>-1&&Kt(t)?!0:r.test(t):Kt(t)}function pn(t){for(var r in t)if(t.hasOwnProperty(r)&&t[r])return!1;return!0}var pi=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function In(t){return t.charCodeAt(0)>=768&&pi.test(t)}function En(t,r,l){for(;(l<0?r>0:r<t.length)&&In(t.charAt(r));)r+=l;return r}function F(t,r,l){for(var o=r>l?-1:1;;){if(r==l)return r;var c=(r+l)/2,d=o<0?Math.ceil(c):Math.floor(c);if(d==r)return t(d)?r:l;t(d)?l=d:r=d+o}}function tt(t,r,l,o){if(!t)return o(r,l,"ltr",0);for(var c=!1,d=0;d<t.length;++d){var m=t[d];(m.from<l&&m.to>r||r==l&&m.to==r)&&(o(Math.max(m.from,r),Math.min(m.to,l),m.level==1?"rtl":"ltr",d),c=!0)}c||o(r,l,"ltr")}var lt=null;function vt(t,r,l){var o;lt=null;for(var c=0;c<t.length;++c){var d=t[c];if(d.from<r&&d.to>r)return c;d.to==r&&(d.from!=d.to&&l=="before"?o=c:lt=c),d.from==r&&(d.from!=d.to&&l!="before"?o=c:lt=c)}return o??lt}var z=function(){var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function l(w){return w<=247?t.charAt(w):1424<=w&&w<=1524?"R":1536<=w&&w<=1785?r.charAt(w-1536):1774<=w&&w<=2220?"r":8192<=w&&w<=8203?"w":w==8204?"b":"L"}var o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,c=/[stwN]/,d=/[LRr]/,m=/[Lb1n]/,v=/[1n]/;function x(w,N,P){this.level=w,this.from=N,this.to=P}return function(w,N){var P=N=="ltr"?"L":"R";if(w.length==0||N=="ltr"&&!o.test(w))return!1;for(var W=w.length,E=[],B=0;B<W;++B)E.push(l(w.charCodeAt(B)));for(var X=0,ot=P;X<W;++X){var ft=E[X];ft=="m"?E[X]=ot:ot=ft}for(var dt=0,ht=P;dt<W;++dt){var xt=E[dt];xt=="1"&&ht=="r"?E[dt]="n":d.test(xt)&&(ht=xt,xt=="r"&&(E[dt]="R"))}for(var Lt=1,Ct=E[0];Lt<W-1;++Lt){var Wt=E[Lt];Wt=="+"&&Ct=="1"&&E[Lt+1]=="1"?E[Lt]="1":Wt==","&&Ct==E[Lt+1]&&(Ct=="1"||Ct=="n")&&(E[Lt]=Ct),Ct=Wt}for(var se=0;se<W;++se){var Ce=E[se];if(Ce==",")E[se]="N";else if(Ce=="%"){var ue=void 0;for(ue=se+1;ue<W&&E[ue]=="%";++ue);for(var qe=se&&E[se-1]=="!"||ue<W&&E[ue]=="1"?"1":"N",Ue=se;Ue<ue;++Ue)E[Ue]=qe;se=ue-1}}for(var ye=0,$e=P;ye<W;++ye){var Le=E[ye];$e=="L"&&Le=="1"?E[ye]="L":d.test(Le)&&($e=Le)}for(var _e=0;_e<W;++_e)if(c.test(E[_e])){var be=void 0;for(be=_e+1;be<W&&c.test(E[be]);++be);for(var de=(_e?E[_e-1]:P)=="L",je=(be<W?E[be]:P)=="L",or=de==je?de?"L":"R":P,ai=_e;ai<be;++ai)E[ai]=or;_e=be-1}for(var Ie=[],Nn,Te=0;Te<W;)if(m.test(E[Te])){var Ha=Te;for(++Te;Te<W&&m.test(E[Te]);++Te);Ie.push(new x(0,Ha,Te))}else{var Un=Te,Ci=Ie.length,Ti=N=="rtl"?1:0;for(++Te;Te<W&&E[Te]!="L";++Te);for(var Fe=Un;Fe<Te;)if(v.test(E[Fe])){Un<Fe&&(Ie.splice(Ci,0,new x(1,Un,Fe)),Ci+=Ti);var ar=Fe;for(++Fe;Fe<Te&&v.test(E[Fe]);++Fe);Ie.splice(Ci,0,new x(2,ar,Fe)),Ci+=Ti,Un=Fe}else++Fe;Un<Te&&Ie.splice(Ci,0,new x(1,Un,Te))}return N=="ltr"&&(Ie[0].level==1&&(Nn=w.match(/^\s+/))&&(Ie[0].from=Nn[0].length,Ie.unshift(new x(0,0,Nn[0].length))),at(Ie).level==1&&(Nn=w.match(/\s+$/))&&(at(Ie).to-=Nn[0].length,Ie.push(new x(0,W-Nn[0].length,W)))),N=="rtl"?Ie.reverse():Ie}}();function K(t,r){var l=t.order;return l==null&&(l=t.order=z(t.text,r)),l}var _t=[],Y=function(t,r,l){if(t.addEventListener)t.addEventListener(r,l,!1);else if(t.attachEvent)t.attachEvent("on"+r,l);else{var o=t._handlers||(t._handlers={});o[r]=(o[r]||_t).concat(l)}};function Gt(t,r){return t._handlers&&t._handlers[r]||_t}function zt(t,r,l){if(t.removeEventListener)t.removeEventListener(r,l,!1);else if(t.detachEvent)t.detachEvent("on"+r,l);else{var o=t._handlers,c=o&&o[r];if(c){var d=mt(c,l);d>-1&&(o[r]=c.slice(0,d).concat(c.slice(d+1)))}}}function Tt(t,r){var l=Gt(t,r);if(l.length)for(var o=Array.prototype.slice.call(arguments,2),c=0;c<l.length;++c)l[c].apply(null,o)}function oe(t,r,l){return typeof r=="string"&&(r={type:r,preventDefault:function(){this.defaultPrevented=!0}}),Tt(t,l||r.type,t,r),en(r)||r.codemirrorIgnore}function Xe(t){var r=t._handlers&&t._handlers.cursorActivity;if(r)for(var l=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),o=0;o<r.length;++o)mt(l,r[o])==-1&&l.push(r[o])}function te(t,r){return Gt(t,r).length>0}function tn(t){t.prototype.on=function(r,l){Y(this,r,l)},t.prototype.off=function(r,l){zt(this,r,l)}}function Pe(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Wi(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function en(t){return t.defaultPrevented!=null?t.defaultPrevented:t.returnValue==!1}function gi(t){Pe(t),Wi(t)}function Jn(t){return t.target||t.srcElement}function Ms(t){var r=t.which;return r==null&&(t.button&1?r=1:t.button&2?r=3:t.button&4&&(r=2)),J&&t.ctrlKey&&r==1&&(r=3),r}var yr=function(){if(p&&g<9)return!1;var t=I("div");return"draggable"in t||"dragDrop"in t}(),We;function Ds(t){if(We==null){var r=I("span","​");H(t,I("span",[r,document.createTextNode("x")])),t.firstChild.offsetHeight!=0&&(We=r.offsetWidth<=1&&r.offsetHeight>2&&!(p&&g<8))}var l=We?I("span","​"):I("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return l.setAttribute("cm-text",""),l}var br;function wn(t){if(br!=null)return br;var r=H(t,document.createTextNode("AخA")),l=pt(r,0,1).getBoundingClientRect(),o=pt(r,1,2).getBoundingClientRect();return rt(t),!l||l.left==l.right?!1:br=o.right-l.right<3}var xr=`

b`.split(/\n/).length!=3?function(t){for(var r=0,l=[],o=t.length;r<=o;){var c=t.indexOf(`
`,r);c==-1&&(c=t.length);var d=t.slice(r,t.charAt(c-1)=="\r"?c-1:c),m=d.indexOf("\r");m!=-1?(l.push(d.slice(0,m)),r+=m+1):(l.push(d),r=c+1)}return l}:function(t){return t.split(/\r\n?|\n/)},Ps=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch{return!1}}:function(t){var r;try{r=t.ownerDocument.selection.createRange()}catch{}return!r||r.parentElement()!=t?!1:r.compareEndPoints("StartToEnd",r)!=0},Os=function(){var t=I("div");return"oncopy"in t?!0:(t.setAttribute("oncopy","return;"),typeof t.oncopy=="function")}(),_r=null;function Zn(t){if(_r!=null)return _r;var r=H(t,I("span","x")),l=r.getBoundingClientRect(),o=pt(r,0,1).getBoundingClientRect();return _r=Math.abs(l.left-o.left)>1}var an={},nn={};function As(t,r){arguments.length>2&&(r.dependencies=Array.prototype.slice.call(arguments,2)),an[t]=r}function Fn(t,r){nn[t]=r}function zi(t){if(typeof t=="string"&&nn.hasOwnProperty(t))t=nn[t];else if(t&&typeof t.name=="string"&&nn.hasOwnProperty(t.name)){var r=nn[t.name];typeof r=="string"&&(r={name:r}),t=At(r,t),t.name=r.name}else{if(typeof t=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return zi("application/xml");if(typeof t=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return zi("application/json")}return typeof t=="string"?{name:t}:t||{name:"null"}}function Bi(t,r){r=zi(r);var l=an[r.name];if(!l)return Bi(t,"text/plain");var o=l(t,r);if(gn.hasOwnProperty(r.name)){var c=gn[r.name];for(var d in c)c.hasOwnProperty(d)&&(o.hasOwnProperty(d)&&(o["_"+d]=o[d]),o[d]=c[d])}if(o.name=r.name,r.helperType&&(o.helperType=r.helperType),r.modeProps)for(var m in r.modeProps)o[m]=r.modeProps[m];return o}var gn={};function mn(t,r){var l=gn.hasOwnProperty(t)?gn[t]:gn[t]={};Ot(r,l)}function rn(t,r){if(r===!0)return r;if(t.copyState)return t.copyState(r);var l={};for(var o in r){var c=r[o];c instanceof Array&&(c=c.concat([])),l[o]=c}return l}function wr(t,r){for(var l;t.innerMode&&(l=t.innerMode(r),!(!l||l.mode==t));)r=l.state,t=l.mode;return l||{mode:t,state:r}}function kr(t,r,l){return t.startState?t.startState(r,l):!0}var he=function(t,r,l){this.pos=this.start=0,this.string=t,this.tabSize=r||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=l};he.prototype.eol=function(){return this.pos>=this.string.length},he.prototype.sol=function(){return this.pos==this.lineStart},he.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},he.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},he.prototype.eat=function(t){var r=this.string.charAt(this.pos),l;if(typeof t=="string"?l=r==t:l=r&&(t.test?t.test(r):t(r)),l)return++this.pos,r},he.prototype.eatWhile=function(t){for(var r=this.pos;this.eat(t););return this.pos>r},he.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},he.prototype.skipToEnd=function(){this.pos=this.string.length},he.prototype.skipTo=function(t){var r=this.string.indexOf(t,this.pos);if(r>-1)return this.pos=r,!0},he.prototype.backUp=function(t){this.pos-=t},he.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Rt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Rt(this.string,this.lineStart,this.tabSize):0)},he.prototype.indentation=function(){return Rt(this.string,null,this.tabSize)-(this.lineStart?Rt(this.string,this.lineStart,this.tabSize):0)},he.prototype.match=function(t,r,l){if(typeof t=="string"){var o=function(m){return l?m.toLowerCase():m},c=this.string.substr(this.pos,t.length);if(o(c)==o(t))return r!==!1&&(this.pos+=t.length),!0}else{var d=this.string.slice(this.pos).match(t);return d&&d.index>0?null:(d&&r!==!1&&(this.pos+=d[0].length),d)}},he.prototype.current=function(){return this.string.slice(this.start,this.pos)},he.prototype.hideFirstChars=function(t,r){this.lineStart+=t;try{return r()}finally{this.lineStart-=t}},he.prototype.lookAhead=function(t){var r=this.lineOracle;return r&&r.lookAhead(t)},he.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};function wt(t,r){if(r-=t.first,r<0||r>=t.size)throw new Error("There is no line "+(r+t.first)+" in the document.");for(var l=t;!l.lines;)for(var o=0;;++o){var c=l.children[o],d=c.chunkSize();if(r<d){l=c;break}r-=d}return l.lines[r]}function kn(t,r,l){var o=[],c=r.line;return t.iter(r.line,l.line+1,function(d){var m=d.text;c==l.line&&(m=m.slice(0,l.ch)),c==r.line&&(m=m.slice(r.ch)),o.push(m),++c}),o}function Sr(t,r,l){var o=[];return t.iter(r,l,function(c){o.push(c.text)}),o}function Ke(t,r){var l=r-t.height;if(l)for(var o=t;o;o=o.parent)o.height+=l}function Jt(t){if(t.parent==null)return null;for(var r=t.parent,l=mt(r.lines,t),o=r.parent;o;r=o,o=o.parent)for(var c=0;o.children[c]!=r;++c)l+=o.children[c].chunkSize();return l+r.first}function Sn(t,r){var l=t.first;t:do{for(var o=0;o<t.children.length;++o){var c=t.children[o],d=c.height;if(r<d){t=c;continue t}r-=d,l+=c.chunkSize()}return l}while(!t.lines);for(var m=0;m<t.lines.length;++m){var v=t.lines[m],x=v.height;if(r<x)break;r-=x}return l+m}function mi(t,r){return r>=t.first&&r<t.first+t.size}function Cr(t,r){return String(t.lineNumberFormatter(r+t.firstLineNumber))}function et(t,r,l){if(l===void 0&&(l=null),!(this instanceof et))return new et(t,r,l);this.line=t,this.ch=r,this.sticky=l}function k(t,r){return t.line-r.line||t.ch-r.ch}function O(t,r){return t.sticky==r.sticky&&k(t,r)==0}function U(t){return et(t.line,t.ch)}function st(t,r){return k(t,r)<0?r:t}function Pt(t,r){return k(t,r)<0?t:r}function Xt(t,r){return Math.max(t.first,Math.min(r,t.first+t.size-1))}function yt(t,r){if(r.line<t.first)return et(t.first,0);var l=t.first+t.size-1;return r.line>l?et(l,wt(t,l).text.length):Oe(r,wt(t,r.line).text.length)}function Oe(t,r){var l=t.ch;return l==null||l>r?et(t.line,r):l<0?et(t.line,0):t}function sn(t,r){for(var l=[],o=0;o<r.length;o++)l[o]=yt(t,r[o]);return l}var Ui=function(t,r){this.state=t,this.lookAhead=r},Cn=function(t,r,l,o){this.state=r,this.doc=t,this.line=l,this.maxLookAhead=o||0,this.baseTokens=null,this.baseTokenPos=1};Cn.prototype.lookAhead=function(t){var r=this.doc.getLine(this.line+t);return r!=null&&t>this.maxLookAhead&&(this.maxLookAhead=t),r},Cn.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var r=this.baseTokens[this.baseTokenPos+1];return{type:r&&r.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},Cn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Cn.fromSaved=function(t,r,l){return r instanceof Ui?new Cn(t,rn(t.mode,r.state),l,r.lookAhead):new Cn(t,rn(t.mode,r),l)},Cn.prototype.save=function(t){var r=t!==!1?rn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ui(r,this.maxLookAhead):r};function Wl(t,r,l,o){var c=[t.state.modeGen],d={};Vl(t,r.text,t.doc.mode,l,function(w,N){return c.push(w,N)},d,o);for(var m=l.state,v=function(w){l.baseTokens=c;var N=t.state.overlays[w],P=1,W=0;l.state=!0,Vl(t,r.text,N.mode,l,function(E,B){for(var X=P;W<E;){var ot=c[P];ot>E&&c.splice(P,1,E,c[P+1],ot),P+=2,W=Math.min(E,ot)}if(B)if(N.opaque)c.splice(X,P-X,E,"overlay "+B),P=X+2;else for(;X<P;X+=2){var ft=c[X+1];c[X+1]=(ft?ft+" ":"")+"overlay "+B}},d),l.state=m,l.baseTokens=null,l.baseTokenPos=1},x=0;x<t.state.overlays.length;++x)v(x);return{styles:c,classes:d.bgClass||d.textClass?d:null}}function zl(t,r,l){if(!r.styles||r.styles[0]!=t.state.modeGen){var o=Tr(t,Jt(r)),c=r.text.length>t.options.maxHighlightLength&&rn(t.doc.mode,o.state),d=Wl(t,r,o);c&&(o.state=c),r.stateAfter=o.save(!c),r.styles=d.styles,d.classes?r.styleClasses=d.classes:r.styleClasses&&(r.styleClasses=null),l===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return r.styles}function Tr(t,r,l){var o=t.doc,c=t.display;if(!o.mode.startState)return new Cn(o,!0,r);var d=Ed(t,r,l),m=d>o.first&&wt(o,d-1).stateAfter,v=m?Cn.fromSaved(o,m,d):new Cn(o,kr(o.mode),d);return o.iter(d,r,function(x){Ko(t,x.text,v);var w=v.line;x.stateAfter=w==r-1||w%5==0||w>=c.viewFrom&&w<c.viewTo?v.save():null,v.nextLine()}),l&&(o.modeFrontier=v.line),v}function Ko(t,r,l,o){var c=t.doc.mode,d=new he(r,t.options.tabSize,l);for(d.start=d.pos=o||0,r==""&&Bl(c,l.state);!d.eol();)Go(c,d,l.state),d.start=d.pos}function Bl(t,r){if(t.blankLine)return t.blankLine(r);if(t.innerMode){var l=wr(t,r);if(l.mode.blankLine)return l.mode.blankLine(l.state)}}function Go(t,r,l,o){for(var c=0;c<10;c++){o&&(o[0]=wr(t,l).mode);var d=t.token(r,l);if(r.pos>r.start)return d}throw new Error("Mode "+t.name+" failed to advance stream.")}var Ul=function(t,r,l){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=r||null,this.state=l};function $l(t,r,l,o){var c=t.doc,d=c.mode,m;r=yt(c,r);var v=wt(c,r.line),x=Tr(t,r.line,l),w=new he(v.text,t.options.tabSize,x),N;for(o&&(N=[]);(o||w.pos<r.ch)&&!w.eol();)w.start=w.pos,m=Go(d,w,x.state),o&&N.push(new Ul(w,m,rn(c.mode,x.state)));return o?N:new Ul(w,m,x.state)}function jl(t,r){if(t)for(;;){var l=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!l)break;t=t.slice(0,l.index)+t.slice(l.index+l[0].length);var o=l[1]?"bgClass":"textClass";r[o]==null?r[o]=l[2]:new RegExp("(?:^|\\s)"+l[2]+"(?:$|\\s)").test(r[o])||(r[o]+=" "+l[2])}return t}function Vl(t,r,l,o,c,d,m){var v=l.flattenSpans;v==null&&(v=t.options.flattenSpans);var x=0,w=null,N=new he(r,t.options.tabSize,o),P,W=t.options.addModeClass&&[null];for(r==""&&jl(Bl(l,o.state),d);!N.eol();){if(N.pos>t.options.maxHighlightLength?(v=!1,m&&Ko(t,r,o,N.pos),N.pos=r.length,P=null):P=jl(Go(l,N,o.state,W),d),W){var E=W[0].name;E&&(P="m-"+(P?E+" "+P:E))}if(!v||w!=P){for(;x<N.start;)x=Math.min(N.start,x+5e3),c(x,w);w=P}N.start=N.pos}for(;x<N.pos;){var B=Math.min(N.pos,x+5e3);c(B,w),x=B}}function Ed(t,r,l){for(var o,c,d=t.doc,m=l?-1:r-(t.doc.mode.innerMode?1e3:100),v=r;v>m;--v){if(v<=d.first)return d.first;var x=wt(d,v-1),w=x.stateAfter;if(w&&(!l||v+(w instanceof Ui?w.lookAhead:0)<=d.modeFrontier))return v;var N=Rt(x.text,null,t.options.tabSize);(c==null||o>N)&&(c=v-1,o=N)}return c}function Fd(t,r){if(t.modeFrontier=Math.min(t.modeFrontier,r),!(t.highlightFrontier<r-10)){for(var l=t.first,o=r-1;o>l;o--){var c=wt(t,o).stateAfter;if(c&&(!(c instanceof Ui)||o+c.lookAhead<r)){l=o+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,l)}}var Yl=!1,Rn=!1;function Rd(){Yl=!0}function Hd(){Rn=!0}function Is(t,r,l){this.marker=t,this.from=r,this.to=l}function Lr(t,r){if(t)for(var l=0;l<t.length;++l){var o=t[l];if(o.marker==r)return o}}function Wd(t,r){for(var l,o=0;o<t.length;++o)t[o]!=r&&(l||(l=[])).push(t[o]);return l}function zd(t,r,l){var o=l&&window.WeakSet&&(l.markedSpans||(l.markedSpans=new WeakSet));o&&o.has(t.markedSpans)?t.markedSpans.push(r):(t.markedSpans=t.markedSpans?t.markedSpans.concat([r]):[r],o&&o.add(t.markedSpans)),r.marker.attachLine(t)}function Bd(t,r,l){var o;if(t)for(var c=0;c<t.length;++c){var d=t[c],m=d.marker,v=d.from==null||(m.inclusiveLeft?d.from<=r:d.from<r);if(v||d.from==r&&m.type=="bookmark"&&(!l||!d.marker.insertLeft)){var x=d.to==null||(m.inclusiveRight?d.to>=r:d.to>r);(o||(o=[])).push(new Is(m,d.from,x?null:d.to))}}return o}function Ud(t,r,l){var o;if(t)for(var c=0;c<t.length;++c){var d=t[c],m=d.marker,v=d.to==null||(m.inclusiveRight?d.to>=r:d.to>r);if(v||d.from==r&&m.type=="bookmark"&&(!l||d.marker.insertLeft)){var x=d.from==null||(m.inclusiveLeft?d.from<=r:d.from<r);(o||(o=[])).push(new Is(m,x?null:d.from-r,d.to==null?null:d.to-r))}}return o}function qo(t,r){if(r.full)return null;var l=mi(t,r.from.line)&&wt(t,r.from.line).markedSpans,o=mi(t,r.to.line)&&wt(t,r.to.line).markedSpans;if(!l&&!o)return null;var c=r.from.ch,d=r.to.ch,m=k(r.from,r.to)==0,v=Bd(l,c,m),x=Ud(o,d,m),w=r.text.length==1,N=at(r.text).length+(w?c:0);if(v)for(var P=0;P<v.length;++P){var W=v[P];if(W.to==null){var E=Lr(x,W.marker);E?w&&(W.to=E.to==null?null:E.to+N):W.to=c}}if(x)for(var B=0;B<x.length;++B){var X=x[B];if(X.to!=null&&(X.to+=N),X.from==null){var ot=Lr(v,X.marker);ot||(X.from=N,w&&(v||(v=[])).push(X))}else X.from+=N,w&&(v||(v=[])).push(X)}v&&(v=Xl(v)),x&&x!=v&&(x=Xl(x));var ft=[v];if(!w){var dt=r.text.length-2,ht;if(dt>0&&v)for(var xt=0;xt<v.length;++xt)v[xt].to==null&&(ht||(ht=[])).push(new Is(v[xt].marker,null,null));for(var Lt=0;Lt<dt;++Lt)ft.push(ht);ft.push(x)}return ft}function Xl(t){for(var r=0;r<t.length;++r){var l=t[r];l.from!=null&&l.from==l.to&&l.marker.clearWhenEmpty!==!1&&t.splice(r--,1)}return t.length?t:null}function $d(t,r,l){var o=null;if(t.iter(r.line,l.line+1,function(E){if(E.markedSpans)for(var B=0;B<E.markedSpans.length;++B){var X=E.markedSpans[B].marker;X.readOnly&&(!o||mt(o,X)==-1)&&(o||(o=[])).push(X)}}),!o)return null;for(var c=[{from:r,to:l}],d=0;d<o.length;++d)for(var m=o[d],v=m.find(0),x=0;x<c.length;++x){var w=c[x];if(!(k(w.to,v.from)<0||k(w.from,v.to)>0)){var N=[x,1],P=k(w.from,v.from),W=k(w.to,v.to);(P<0||!m.inclusiveLeft&&!P)&&N.push({from:w.from,to:v.from}),(W>0||!m.inclusiveRight&&!W)&&N.push({from:v.to,to:w.to}),c.splice.apply(c,N),x+=N.length-3}}return c}function Kl(t){var r=t.markedSpans;if(r){for(var l=0;l<r.length;++l)r[l].marker.detachLine(t);t.markedSpans=null}}function Gl(t,r){if(r){for(var l=0;l<r.length;++l)r[l].marker.attachLine(t);t.markedSpans=r}}function Es(t){return t.inclusiveLeft?-1:0}function Fs(t){return t.inclusiveRight?1:0}function Jo(t,r){var l=t.lines.length-r.lines.length;if(l!=0)return l;var o=t.find(),c=r.find(),d=k(o.from,c.from)||Es(t)-Es(r);if(d)return-d;var m=k(o.to,c.to)||Fs(t)-Fs(r);return m||r.id-t.id}function ql(t,r){var l=Rn&&t.markedSpans,o;if(l)for(var c=void 0,d=0;d<l.length;++d)c=l[d],c.marker.collapsed&&(r?c.from:c.to)==null&&(!o||Jo(o,c.marker)<0)&&(o=c.marker);return o}function Jl(t){return ql(t,!0)}function Rs(t){return ql(t,!1)}function jd(t,r){var l=Rn&&t.markedSpans,o;if(l)for(var c=0;c<l.length;++c){var d=l[c];d.marker.collapsed&&(d.from==null||d.from<r)&&(d.to==null||d.to>r)&&(!o||Jo(o,d.marker)<0)&&(o=d.marker)}return o}function Zl(t,r,l,o,c){var d=wt(t,r),m=Rn&&d.markedSpans;if(m)for(var v=0;v<m.length;++v){var x=m[v];if(x.marker.collapsed){var w=x.marker.find(0),N=k(w.from,l)||Es(x.marker)-Es(c),P=k(w.to,o)||Fs(x.marker)-Fs(c);if(!(N>=0&&P<=0||N<=0&&P>=0)&&(N<=0&&(x.marker.inclusiveRight&&c.inclusiveLeft?k(w.to,l)>=0:k(w.to,l)>0)||N>=0&&(x.marker.inclusiveRight&&c.inclusiveLeft?k(w.from,o)<=0:k(w.from,o)<0)))return!0}}}function vn(t){for(var r;r=Jl(t);)t=r.find(-1,!0).line;return t}function Vd(t){for(var r;r=Rs(t);)t=r.find(1,!0).line;return t}function Yd(t){for(var r,l;r=Rs(t);)t=r.find(1,!0).line,(l||(l=[])).push(t);return l}function Zo(t,r){var l=wt(t,r),o=vn(l);return l==o?r:Jt(o)}function Ql(t,r){if(r>t.lastLine())return r;var l=wt(t,r),o;if(!Qn(t,l))return r;for(;o=Rs(l);)l=o.find(1,!0).line;return Jt(l)+1}function Qn(t,r){var l=Rn&&r.markedSpans;if(l){for(var o=void 0,c=0;c<l.length;++c)if(o=l[c],!!o.marker.collapsed){if(o.from==null)return!0;if(!o.marker.widgetNode&&o.from==0&&o.marker.inclusiveLeft&&Qo(t,r,o))return!0}}}function Qo(t,r,l){if(l.to==null){var o=l.marker.find(1,!0);return Qo(t,o.line,Lr(o.line.markedSpans,l.marker))}if(l.marker.inclusiveRight&&l.to==r.text.length)return!0;for(var c=void 0,d=0;d<r.markedSpans.length;++d)if(c=r.markedSpans[d],c.marker.collapsed&&!c.marker.widgetNode&&c.from==l.to&&(c.to==null||c.to!=l.from)&&(c.marker.inclusiveLeft||l.marker.inclusiveRight)&&Qo(t,r,c))return!0}function Hn(t){t=vn(t);for(var r=0,l=t.parent,o=0;o<l.lines.length;++o){var c=l.lines[o];if(c==t)break;r+=c.height}for(var d=l.parent;d;l=d,d=l.parent)for(var m=0;m<d.children.length;++m){var v=d.children[m];if(v==l)break;r+=v.height}return r}function Hs(t){if(t.height==0)return 0;for(var r=t.text.length,l,o=t;l=Jl(o);){var c=l.find(0,!0);o=c.from.line,r+=c.from.ch-c.to.ch}for(o=t;l=Rs(o);){var d=l.find(0,!0);r-=o.text.length-d.from.ch,o=d.to.line,r+=o.text.length-d.to.ch}return r}function ta(t){var r=t.display,l=t.doc;r.maxLine=wt(l,l.first),r.maxLineLength=Hs(r.maxLine),r.maxLineChanged=!0,l.iter(function(o){var c=Hs(o);c>r.maxLineLength&&(r.maxLineLength=c,r.maxLine=o)})}var $i=function(t,r,l){this.text=t,Gl(this,r),this.height=l?l(this):1};$i.prototype.lineNo=function(){return Jt(this)},tn($i);function Xd(t,r,l,o){t.text=r,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),t.order!=null&&(t.order=null),Kl(t),Gl(t,l);var c=o?o(t):1;c!=t.height&&Ke(t,c)}function Kd(t){t.parent=null,Kl(t)}var Gd={},qd={};function tc(t,r){if(!t||/^\s*$/.test(t))return null;var l=r.addModeClass?qd:Gd;return l[t]||(l[t]=t.replace(/\S+/g,"cm-$&"))}function ec(t,r){var l=C("span",null,null,b?"padding-right: .1px":null),o={pre:C("pre",[l],"CodeMirror-line"),content:l,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};r.measure={};for(var c=0;c<=(r.rest?r.rest.length:0);c++){var d=c?r.rest[c-1]:r.line,m=void 0;o.pos=0,o.addToken=Zd,wn(t.display.measure)&&(m=K(d,t.doc.direction))&&(o.addToken=tp(o.addToken,m)),o.map=[];var v=r!=t.display.externalMeasured&&Jt(d);ep(d,o,zl(t,d,v)),d.styleClasses&&(d.styleClasses.bgClass&&(o.bgClass=gt(d.styleClasses.bgClass,o.bgClass||"")),d.styleClasses.textClass&&(o.textClass=gt(d.styleClasses.textClass,o.textClass||""))),o.map.length==0&&o.map.push(0,0,o.content.appendChild(Ds(t.display.measure))),c==0?(r.measure.map=o.map,r.measure.cache={}):((r.measure.maps||(r.measure.maps=[])).push(o.map),(r.measure.caches||(r.measure.caches=[])).push({}))}if(b){var x=o.content.lastChild;(/\bcm-tab\b/.test(x.className)||x.querySelector&&x.querySelector(".cm-tab"))&&(o.content.className="cm-tab-wrap-hack")}return Tt(t,"renderLine",t,r.line,o.pre),o.pre.className&&(o.textClass=gt(o.pre.className,o.textClass||"")),o}function Jd(t){var r=I("span","•","cm-invalidchar");return r.title="\\u"+t.charCodeAt(0).toString(16),r.setAttribute("aria-label",r.title),r}function Zd(t,r,l,o,c,d,m){if(r){var v=t.splitSpaces?Qd(r,t.trailingSpace):r,x=t.cm.state.specialChars,w=!1,N;if(!x.test(r))t.col+=r.length,N=document.createTextNode(v),t.map.push(t.pos,t.pos+r.length,N),p&&g<9&&(w=!0),t.pos+=r.length;else{N=document.createDocumentFragment();for(var P=0;;){x.lastIndex=P;var W=x.exec(r),E=W?W.index-P:r.length-P;if(E){var B=document.createTextNode(v.slice(P,P+E));p&&g<9?N.appendChild(I("span",[B])):N.appendChild(B),t.map.push(t.pos,t.pos+E,B),t.col+=E,t.pos+=E}if(!W)break;P+=E+1;var X=void 0;if(W[0]=="	"){var ot=t.cm.options.tabSize,ft=ot-t.col%ot;X=N.appendChild(I("span",q(ft),"cm-tab")),X.setAttribute("role","presentation"),X.setAttribute("cm-text","	"),t.col+=ft}else W[0]=="\r"||W[0]==`
`?(X=N.appendChild(I("span",W[0]=="\r"?"␍":"␤","cm-invalidchar")),X.setAttribute("cm-text",W[0]),t.col+=1):(X=t.cm.options.specialCharPlaceholder(W[0]),X.setAttribute("cm-text",W[0]),p&&g<9?N.appendChild(I("span",[X])):N.appendChild(X),t.col+=1);t.map.push(t.pos,t.pos+1,X),t.pos++}}if(t.trailingSpace=v.charCodeAt(r.length-1)==32,l||o||c||w||d||m){var dt=l||"";o&&(dt+=o),c&&(dt+=c);var ht=I("span",[N],dt,d);if(m)for(var xt in m)m.hasOwnProperty(xt)&&xt!="style"&&xt!="class"&&ht.setAttribute(xt,m[xt]);return t.content.appendChild(ht)}t.content.appendChild(N)}}function Qd(t,r){if(t.length>1&&!/  /.test(t))return t;for(var l=r,o="",c=0;c<t.length;c++){var d=t.charAt(c);d==" "&&l&&(c==t.length-1||t.charCodeAt(c+1)==32)&&(d=" "),o+=d,l=d==" "}return o}function tp(t,r){return function(l,o,c,d,m,v,x){c=c?c+" cm-force-border":"cm-force-border";for(var w=l.pos,N=w+o.length;;){for(var P=void 0,W=0;W<r.length&&(P=r[W],!(P.to>w&&P.from<=w));W++);if(P.to>=N)return t(l,o,c,d,m,v,x);t(l,o.slice(0,P.to-w),c,d,null,v,x),d=null,o=o.slice(P.to-w),w=P.to}}}function nc(t,r,l,o){var c=!o&&l.widgetNode;c&&t.map.push(t.pos,t.pos+r,c),!o&&t.cm.display.input.needsContentAttribute&&(c||(c=t.content.appendChild(document.createElement("span"))),c.setAttribute("cm-marker",l.id)),c&&(t.cm.display.input.setUneditable(c),t.content.appendChild(c)),t.pos+=r,t.trailingSpace=!1}function ep(t,r,l){var o=t.markedSpans,c=t.text,d=0;if(!o){for(var m=1;m<l.length;m+=2)r.addToken(r,c.slice(d,d=l[m]),tc(l[m+1],r.cm.options));return}for(var v=c.length,x=0,w=1,N="",P,W,E=0,B,X,ot,ft,dt;;){if(E==x){B=X=ot=W="",dt=null,ft=null,E=1/0;for(var ht=[],xt=void 0,Lt=0;Lt<o.length;++Lt){var Ct=o[Lt],Wt=Ct.marker;if(Wt.type=="bookmark"&&Ct.from==x&&Wt.widgetNode)ht.push(Wt);else if(Ct.from<=x&&(Ct.to==null||Ct.to>x||Wt.collapsed&&Ct.to==x&&Ct.from==x)){if(Ct.to!=null&&Ct.to!=x&&E>Ct.to&&(E=Ct.to,X=""),Wt.className&&(B+=" "+Wt.className),Wt.css&&(W=(W?W+";":"")+Wt.css),Wt.startStyle&&Ct.from==x&&(ot+=" "+Wt.startStyle),Wt.endStyle&&Ct.to==E&&(xt||(xt=[])).push(Wt.endStyle,Ct.to),Wt.title&&((dt||(dt={})).title=Wt.title),Wt.attributes)for(var se in Wt.attributes)(dt||(dt={}))[se]=Wt.attributes[se];Wt.collapsed&&(!ft||Jo(ft.marker,Wt)<0)&&(ft=Ct)}else Ct.from>x&&E>Ct.from&&(E=Ct.from)}if(xt)for(var Ce=0;Ce<xt.length;Ce+=2)xt[Ce+1]==E&&(X+=" "+xt[Ce]);if(!ft||ft.from==x)for(var ue=0;ue<ht.length;++ue)nc(r,0,ht[ue]);if(ft&&(ft.from||0)==x){if(nc(r,(ft.to==null?v+1:ft.to)-x,ft.marker,ft.from==null),ft.to==null)return;ft.to==x&&(ft=!1)}}if(x>=v)break;for(var qe=Math.min(v,E);;){if(N){var Ue=x+N.length;if(!ft){var ye=Ue>qe?N.slice(0,qe-x):N;r.addToken(r,ye,P?P+B:B,ot,x+ye.length==E?X:"",W,dt)}if(Ue>=qe){N=N.slice(qe-x),x=qe;break}x=Ue,ot=""}N=c.slice(d,d=l[w++]),P=tc(l[w++],r.cm.options)}}}function ic(t,r,l){this.line=r,this.rest=Yd(r),this.size=this.rest?Jt(at(this.rest))-l+1:1,this.node=this.text=null,this.hidden=Qn(t,r)}function Ws(t,r,l){for(var o=[],c,d=r;d<l;d=c){var m=new ic(t.doc,wt(t.doc,d),d);c=d+m.size,o.push(m)}return o}var ji=null;function np(t){ji?ji.ops.push(t):t.ownsGroup=ji={ops:[t],delayedCallbacks:[]}}function ip(t){var r=t.delayedCallbacks,l=0;do{for(;l<r.length;l++)r[l].call(null);for(var o=0;o<t.ops.length;o++){var c=t.ops[o];if(c.cursorActivityHandlers)for(;c.cursorActivityCalled<c.cursorActivityHandlers.length;)c.cursorActivityHandlers[c.cursorActivityCalled++].call(null,c.cm)}}while(l<r.length)}function rp(t,r){var l=t.ownsGroup;if(l)try{ip(l)}finally{ji=null,r(l)}}var Nr=null;function we(t,r){var l=Gt(t,r);if(l.length){var o=Array.prototype.slice.call(arguments,2),c;ji?c=ji.delayedCallbacks:Nr?c=Nr:(c=Nr=[],setTimeout(sp,0));for(var d=function(v){c.push(function(){return l[v].apply(null,o)})},m=0;m<l.length;++m)d(m)}}function sp(){var t=Nr;Nr=null;for(var r=0;r<t.length;++r)t[r]()}function rc(t,r,l,o){for(var c=0;c<r.changes.length;c++){var d=r.changes[c];d=="text"?ap(t,r):d=="gutter"?oc(t,r,l,o):d=="class"?ea(t,r):d=="widget"&&lp(t,r,o)}r.changes=null}function Mr(t){return t.node==t.text&&(t.node=I("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),p&&g<8&&(t.node.style.zIndex=2)),t.node}function op(t,r){var l=r.bgClass?r.bgClass+" "+(r.line.bgClass||""):r.line.bgClass;if(l&&(l+=" CodeMirror-linebackground"),r.background)l?r.background.className=l:(r.background.parentNode.removeChild(r.background),r.background=null);else if(l){var o=Mr(r);r.background=o.insertBefore(I("div",null,l),o.firstChild),t.display.input.setUneditable(r.background)}}function sc(t,r){var l=t.display.externalMeasured;return l&&l.line==r.line?(t.display.externalMeasured=null,r.measure=l.measure,l.built):ec(t,r)}function ap(t,r){var l=r.text.className,o=sc(t,r);r.text==r.node&&(r.node=o.pre),r.text.parentNode.replaceChild(o.pre,r.text),r.text=o.pre,o.bgClass!=r.bgClass||o.textClass!=r.textClass?(r.bgClass=o.bgClass,r.textClass=o.textClass,ea(t,r)):l&&(r.text.className=l)}function ea(t,r){op(t,r),r.line.wrapClass?Mr(r).className=r.line.wrapClass:r.node!=r.text&&(r.node.className="");var l=r.textClass?r.textClass+" "+(r.line.textClass||""):r.line.textClass;r.text.className=l||""}function oc(t,r,l,o){if(r.gutter&&(r.node.removeChild(r.gutter),r.gutter=null),r.gutterBackground&&(r.node.removeChild(r.gutterBackground),r.gutterBackground=null),r.line.gutterClass){var c=Mr(r);r.gutterBackground=I("div",null,"CodeMirror-gutter-background "+r.line.gutterClass,"left: "+(t.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px; width: "+o.gutterTotalWidth+"px"),t.display.input.setUneditable(r.gutterBackground),c.insertBefore(r.gutterBackground,r.text)}var d=r.line.gutterMarkers;if(t.options.lineNumbers||d){var m=Mr(r),v=r.gutter=I("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?o.fixedPos:-o.gutterTotalWidth)+"px");if(v.setAttribute("aria-hidden","true"),t.display.input.setUneditable(v),m.insertBefore(v,r.text),r.line.gutterClass&&(v.className+=" "+r.line.gutterClass),t.options.lineNumbers&&(!d||!d["CodeMirror-linenumbers"])&&(r.lineNumber=v.appendChild(I("div",Cr(t.options,l),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+o.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),d)for(var x=0;x<t.display.gutterSpecs.length;++x){var w=t.display.gutterSpecs[x].className,N=d.hasOwnProperty(w)&&d[w];N&&v.appendChild(I("div",[N],"CodeMirror-gutter-elt","left: "+o.gutterLeft[w]+"px; width: "+o.gutterWidth[w]+"px"))}}}function lp(t,r,l){r.alignable&&(r.alignable=null);for(var o=ct("CodeMirror-linewidget"),c=r.node.firstChild,d=void 0;c;c=d)d=c.nextSibling,o.test(c.className)&&r.node.removeChild(c);ac(t,r,l)}function cp(t,r,l,o){var c=sc(t,r);return r.text=r.node=c.pre,c.bgClass&&(r.bgClass=c.bgClass),c.textClass&&(r.textClass=c.textClass),ea(t,r),oc(t,r,l,o),ac(t,r,o),r.node}function ac(t,r,l){if(lc(t,r.line,r,l,!0),r.rest)for(var o=0;o<r.rest.length;o++)lc(t,r.rest[o],r,l,!1)}function lc(t,r,l,o,c){if(r.widgets)for(var d=Mr(l),m=0,v=r.widgets;m<v.length;++m){var x=v[m],w=I("div",[x.node],"CodeMirror-linewidget"+(x.className?" "+x.className:""));x.handleMouseEvents||w.setAttribute("cm-ignore-events","true"),up(x,w,l,o),t.display.input.setUneditable(w),c&&x.above?d.insertBefore(w,l.gutter||l.text):d.appendChild(w),we(x,"redraw")}}function up(t,r,l,o){if(t.noHScroll){(l.alignable||(l.alignable=[])).push(r);var c=o.wrapperWidth;r.style.left=o.fixedPos+"px",t.coverGutter||(c-=o.gutterTotalWidth,r.style.paddingLeft=o.gutterTotalWidth+"px"),r.style.width=c+"px"}t.coverGutter&&(r.style.zIndex=5,r.style.position="relative",t.noHScroll||(r.style.marginLeft=-o.gutterTotalWidth+"px"))}function Dr(t){if(t.height!=null)return t.height;var r=t.doc.cm;if(!r)return 0;if(!Mt(document.body,t.node)){var l="position: relative;";t.coverGutter&&(l+="margin-left: -"+r.display.gutters.offsetWidth+"px;"),t.noHScroll&&(l+="width: "+r.display.wrapper.clientWidth+"px;"),H(r.display.measure,I("div",[t.node],null,l))}return t.height=t.node.parentNode.offsetHeight}function Wn(t,r){for(var l=Jn(r);l!=t.wrapper;l=l.parentNode)if(!l||l.nodeType==1&&l.getAttribute("cm-ignore-events")=="true"||l.parentNode==t.sizer&&l!=t.mover)return!0}function zs(t){return t.lineSpace.offsetTop}function na(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function cc(t){if(t.cachedPaddingH)return t.cachedPaddingH;var r=H(t.measure,I("pre","x","CodeMirror-line-like")),l=window.getComputedStyle?window.getComputedStyle(r):r.currentStyle,o={left:parseInt(l.paddingLeft),right:parseInt(l.paddingRight)};return!isNaN(o.left)&&!isNaN(o.right)&&(t.cachedPaddingH=o),o}function Tn(t){return St-t.display.nativeBarWidth}function vi(t){return t.display.scroller.clientWidth-Tn(t)-t.display.barWidth}function ia(t){return t.display.scroller.clientHeight-Tn(t)-t.display.barHeight}function fp(t,r,l){var o=t.options.lineWrapping,c=o&&vi(t);if(!r.measure.heights||o&&r.measure.width!=c){var d=r.measure.heights=[];if(o){r.measure.width=c;for(var m=r.text.firstChild.getClientRects(),v=0;v<m.length-1;v++){var x=m[v],w=m[v+1];Math.abs(x.bottom-w.bottom)>2&&d.push((x.bottom+w.top)/2-l.top)}}d.push(l.bottom-l.top)}}function uc(t,r,l){if(t.line==r)return{map:t.measure.map,cache:t.measure.cache};if(t.rest){for(var o=0;o<t.rest.length;o++)if(t.rest[o]==r)return{map:t.measure.maps[o],cache:t.measure.caches[o]};for(var c=0;c<t.rest.length;c++)if(Jt(t.rest[c])>l)return{map:t.measure.maps[c],cache:t.measure.caches[c],before:!0}}}function hp(t,r){r=vn(r);var l=Jt(r),o=t.display.externalMeasured=new ic(t.doc,r,l);o.lineN=l;var c=o.built=ec(t,o);return o.text=c.pre,H(t.display.lineMeasure,c.pre),o}function fc(t,r,l,o){return Ln(t,Vi(t,r),l,o)}function ra(t,r){if(r>=t.display.viewFrom&&r<t.display.viewTo)return t.display.view[xi(t,r)];var l=t.display.externalMeasured;if(l&&r>=l.lineN&&r<l.lineN+l.size)return l}function Vi(t,r){var l=Jt(r),o=ra(t,l);o&&!o.text?o=null:o&&o.changes&&(rc(t,o,l,ca(t)),t.curOp.forceUpdate=!0),o||(o=hp(t,r));var c=uc(o,r,l);return{line:r,view:o,rect:null,map:c.map,cache:c.cache,before:c.before,hasHeights:!1}}function Ln(t,r,l,o,c){r.before&&(l=-1);var d=l+(o||""),m;return r.cache.hasOwnProperty(d)?m=r.cache[d]:(r.rect||(r.rect=r.view.text.getBoundingClientRect()),r.hasHeights||(fp(t,r.view,r.rect),r.hasHeights=!0),m=pp(t,r,l,o),m.bogus||(r.cache[d]=m)),{left:m.left,right:m.right,top:c?m.rtop:m.top,bottom:c?m.rbottom:m.bottom}}var hc={left:0,right:0,top:0,bottom:0};function dc(t,r,l){for(var o,c,d,m,v,x,w=0;w<t.length;w+=3)if(v=t[w],x=t[w+1],r<v?(c=0,d=1,m="left"):r<x?(c=r-v,d=c+1):(w==t.length-3||r==x&&t[w+3]>r)&&(d=x-v,c=d-1,r>=x&&(m="right")),c!=null){if(o=t[w+2],v==x&&l==(o.insertLeft?"left":"right")&&(m=l),l=="left"&&c==0)for(;w&&t[w-2]==t[w-3]&&t[w-1].insertLeft;)o=t[(w-=3)+2],m="left";if(l=="right"&&c==x-v)for(;w<t.length-3&&t[w+3]==t[w+4]&&!t[w+5].insertLeft;)o=t[(w+=3)+2],m="right";break}return{node:o,start:c,end:d,collapse:m,coverStart:v,coverEnd:x}}function dp(t,r){var l=hc;if(r=="left")for(var o=0;o<t.length&&(l=t[o]).left==l.right;o++);else for(var c=t.length-1;c>=0&&(l=t[c]).left==l.right;c--);return l}function pp(t,r,l,o){var c=dc(r.map,l,o),d=c.node,m=c.start,v=c.end,x=c.collapse,w;if(d.nodeType==3){for(var N=0;N<4;N++){for(;m&&In(r.line.text.charAt(c.coverStart+m));)--m;for(;c.coverStart+v<c.coverEnd&&In(r.line.text.charAt(c.coverStart+v));)++v;if(p&&g<9&&m==0&&v==c.coverEnd-c.coverStart?w=d.parentNode.getBoundingClientRect():w=dp(pt(d,m,v).getClientRects(),o),w.left||w.right||m==0)break;v=m,m=m-1,x="right"}p&&g<11&&(w=gp(t.display.measure,w))}else{m>0&&(x=o="right");var P;t.options.lineWrapping&&(P=d.getClientRects()).length>1?w=P[o=="right"?P.length-1:0]:w=d.getBoundingClientRect()}if(p&&g<9&&!m&&(!w||!w.left&&!w.right)){var W=d.parentNode.getClientRects()[0];W?w={left:W.left,right:W.left+Xi(t.display),top:W.top,bottom:W.bottom}:w=hc}for(var E=w.top-r.rect.top,B=w.bottom-r.rect.top,X=(E+B)/2,ot=r.view.measure.heights,ft=0;ft<ot.length-1&&!(X<ot[ft]);ft++);var dt=ft?ot[ft-1]:0,ht=ot[ft],xt={left:(x=="right"?w.right:w.left)-r.rect.left,right:(x=="left"?w.left:w.right)-r.rect.left,top:dt,bottom:ht};return!w.left&&!w.right&&(xt.bogus=!0),t.options.singleCursorHeightPerLine||(xt.rtop=E,xt.rbottom=B),xt}function gp(t,r){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Zn(t))return r;var l=screen.logicalXDPI/screen.deviceXDPI,o=screen.logicalYDPI/screen.deviceYDPI;return{left:r.left*l,right:r.right*l,top:r.top*o,bottom:r.bottom*o}}function pc(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var r=0;r<t.rest.length;r++)t.measure.caches[r]={}}function gc(t){t.display.externalMeasure=null,rt(t.display.lineMeasure);for(var r=0;r<t.display.view.length;r++)pc(t.display.view[r])}function Pr(t){gc(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function mc(){return S&&R?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function vc(){return S&&R?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function sa(t){var r=vn(t),l=r.widgets,o=0;if(l)for(var c=0;c<l.length;++c)l[c].above&&(o+=Dr(l[c]));return o}function Bs(t,r,l,o,c){if(!c){var d=sa(r);l.top+=d,l.bottom+=d}if(o=="line")return l;o||(o="local");var m=Hn(r);if(o=="local"?m+=zs(t.display):m-=t.display.viewOffset,o=="page"||o=="window"){var v=t.display.lineSpace.getBoundingClientRect();m+=v.top+(o=="window"?0:vc());var x=v.left+(o=="window"?0:mc());l.left+=x,l.right+=x}return l.top+=m,l.bottom+=m,l}function yc(t,r,l){if(l=="div")return r;var o=r.left,c=r.top;if(l=="page")o-=mc(),c-=vc();else if(l=="local"||!l){var d=t.display.sizer.getBoundingClientRect();o+=d.left,c+=d.top}var m=t.display.lineSpace.getBoundingClientRect();return{left:o-m.left,top:c-m.top}}function Us(t,r,l,o,c){return o||(o=wt(t.doc,r.line)),Bs(t,o,fc(t,o,r.ch,c),l)}function yn(t,r,l,o,c,d){o=o||wt(t.doc,r.line),c||(c=Vi(t,o));function m(B,X){var ot=Ln(t,c,B,X?"right":"left",d);return X?ot.left=ot.right:ot.right=ot.left,Bs(t,o,ot,l)}var v=K(o,t.doc.direction),x=r.ch,w=r.sticky;if(x>=o.text.length?(x=o.text.length,w="before"):x<=0&&(x=0,w="after"),!v)return m(w=="before"?x-1:x,w=="before");function N(B,X,ot){var ft=v[X],dt=ft.level==1;return m(ot?B-1:B,dt!=ot)}var P=vt(v,x,w),W=lt,E=N(x,P,w=="before");return W!=null&&(E.other=N(x,W,w!="before")),E}function bc(t,r){var l=0;r=yt(t.doc,r),t.options.lineWrapping||(l=Xi(t.display)*r.ch);var o=wt(t.doc,r.line),c=Hn(o)+zs(t.display);return{left:l,right:l,top:c,bottom:c+o.height}}function oa(t,r,l,o,c){var d=et(t,r,l);return d.xRel=c,o&&(d.outside=o),d}function aa(t,r,l){var o=t.doc;if(l+=t.display.viewOffset,l<0)return oa(o.first,0,null,-1,-1);var c=Sn(o,l),d=o.first+o.size-1;if(c>d)return oa(o.first+o.size-1,wt(o,d).text.length,null,1,1);r<0&&(r=0);for(var m=wt(o,c);;){var v=mp(t,m,c,r,l),x=jd(m,v.ch+(v.xRel>0||v.outside>0?1:0));if(!x)return v;var w=x.find(1);if(w.line==c)return w;m=wt(o,c=w.line)}}function xc(t,r,l,o){o-=sa(r);var c=r.text.length,d=F(function(m){return Ln(t,l,m-1).bottom<=o},c,0);return c=F(function(m){return Ln(t,l,m).top>o},d,c),{begin:d,end:c}}function _c(t,r,l,o){l||(l=Vi(t,r));var c=Bs(t,r,Ln(t,l,o),"line").top;return xc(t,r,l,c)}function la(t,r,l,o){return t.bottom<=l?!1:t.top>l?!0:(o?t.left:t.right)>r}function mp(t,r,l,o,c){c-=Hn(r);var d=Vi(t,r),m=sa(r),v=0,x=r.text.length,w=!0,N=K(r,t.doc.direction);if(N){var P=(t.options.lineWrapping?yp:vp)(t,r,l,d,N,o,c);w=P.level!=1,v=w?P.from:P.to-1,x=w?P.to:P.from-1}var W=null,E=null,B=F(function(Lt){var Ct=Ln(t,d,Lt);return Ct.top+=m,Ct.bottom+=m,la(Ct,o,c,!1)?(Ct.top<=c&&Ct.left<=o&&(W=Lt,E=Ct),!0):!1},v,x),X,ot,ft=!1;if(E){var dt=o-E.left<E.right-o,ht=dt==w;B=W+(ht?0:1),ot=ht?"after":"before",X=dt?E.left:E.right}else{!w&&(B==x||B==v)&&B++,ot=B==0?"after":B==r.text.length?"before":Ln(t,d,B-(w?1:0)).bottom+m<=c==w?"after":"before";var xt=yn(t,et(l,B,ot),"line",r,d);X=xt.left,ft=c<xt.top?-1:c>=xt.bottom?1:0}return B=En(r.text,B,1),oa(l,B,ot,ft,o-X)}function vp(t,r,l,o,c,d,m){var v=F(function(P){var W=c[P],E=W.level!=1;return la(yn(t,et(l,E?W.to:W.from,E?"before":"after"),"line",r,o),d,m,!0)},0,c.length-1),x=c[v];if(v>0){var w=x.level!=1,N=yn(t,et(l,w?x.from:x.to,w?"after":"before"),"line",r,o);la(N,d,m,!0)&&N.top>m&&(x=c[v-1])}return x}function yp(t,r,l,o,c,d,m){var v=xc(t,r,o,m),x=v.begin,w=v.end;/\s/.test(r.text.charAt(w-1))&&w--;for(var N=null,P=null,W=0;W<c.length;W++){var E=c[W];if(!(E.from>=w||E.to<=x)){var B=E.level!=1,X=Ln(t,o,B?Math.min(w,E.to)-1:Math.max(x,E.from)).right,ot=X<d?d-X+1e9:X-d;(!N||P>ot)&&(N=E,P=ot)}}return N||(N=c[c.length-1]),N.from<x&&(N={from:x,to:N.to,level:N.level}),N.to>w&&(N={from:N.from,to:w,level:N.level}),N}var yi;function Yi(t){if(t.cachedTextHeight!=null)return t.cachedTextHeight;if(yi==null){yi=I("pre",null,"CodeMirror-line-like");for(var r=0;r<49;++r)yi.appendChild(document.createTextNode("x")),yi.appendChild(I("br"));yi.appendChild(document.createTextNode("x"))}H(t.measure,yi);var l=yi.offsetHeight/50;return l>3&&(t.cachedTextHeight=l),rt(t.measure),l||1}function Xi(t){if(t.cachedCharWidth!=null)return t.cachedCharWidth;var r=I("span","xxxxxxxxxx"),l=I("pre",[r],"CodeMirror-line-like");H(t.measure,l);var o=r.getBoundingClientRect(),c=(o.right-o.left)/10;return c>2&&(t.cachedCharWidth=c),c||10}function ca(t){for(var r=t.display,l={},o={},c=r.gutters.clientLeft,d=r.gutters.firstChild,m=0;d;d=d.nextSibling,++m){var v=t.display.gutterSpecs[m].className;l[v]=d.offsetLeft+d.clientLeft+c,o[v]=d.clientWidth}return{fixedPos:ua(r),gutterTotalWidth:r.gutters.offsetWidth,gutterLeft:l,gutterWidth:o,wrapperWidth:r.wrapper.clientWidth}}function ua(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function wc(t){var r=Yi(t.display),l=t.options.lineWrapping,o=l&&Math.max(5,t.display.scroller.clientWidth/Xi(t.display)-3);return function(c){if(Qn(t.doc,c))return 0;var d=0;if(c.widgets)for(var m=0;m<c.widgets.length;m++)c.widgets[m].height&&(d+=c.widgets[m].height);return l?d+(Math.ceil(c.text.length/o)||1)*r:d+r}}function fa(t){var r=t.doc,l=wc(t);r.iter(function(o){var c=l(o);c!=o.height&&Ke(o,c)})}function bi(t,r,l,o){var c=t.display;if(!l&&Jn(r).getAttribute("cm-not-content")=="true")return null;var d,m,v=c.lineSpace.getBoundingClientRect();try{d=r.clientX-v.left,m=r.clientY-v.top}catch{return null}var x=aa(t,d,m),w;if(o&&x.xRel>0&&(w=wt(t.doc,x.line).text).length==x.ch){var N=Rt(w,w.length,t.options.tabSize)-w.length;x=et(x.line,Math.max(0,Math.round((d-cc(t.display).left)/Xi(t.display))-N))}return x}function xi(t,r){if(r>=t.display.viewTo||(r-=t.display.viewFrom,r<0))return null;for(var l=t.display.view,o=0;o<l.length;o++)if(r-=l[o].size,r<0)return o}function ze(t,r,l,o){r==null&&(r=t.doc.first),l==null&&(l=t.doc.first+t.doc.size),o||(o=0);var c=t.display;if(o&&l<c.viewTo&&(c.updateLineNumbers==null||c.updateLineNumbers>r)&&(c.updateLineNumbers=r),t.curOp.viewChanged=!0,r>=c.viewTo)Rn&&Zo(t.doc,r)<c.viewTo&&ei(t);else if(l<=c.viewFrom)Rn&&Ql(t.doc,l+o)>c.viewFrom?ei(t):(c.viewFrom+=o,c.viewTo+=o);else if(r<=c.viewFrom&&l>=c.viewTo)ei(t);else if(r<=c.viewFrom){var d=$s(t,l,l+o,1);d?(c.view=c.view.slice(d.index),c.viewFrom=d.lineN,c.viewTo+=o):ei(t)}else if(l>=c.viewTo){var m=$s(t,r,r,-1);m?(c.view=c.view.slice(0,m.index),c.viewTo=m.lineN):ei(t)}else{var v=$s(t,r,r,-1),x=$s(t,l,l+o,1);v&&x?(c.view=c.view.slice(0,v.index).concat(Ws(t,v.lineN,x.lineN)).concat(c.view.slice(x.index)),c.viewTo+=o):ei(t)}var w=c.externalMeasured;w&&(l<w.lineN?w.lineN+=o:r<w.lineN+w.size&&(c.externalMeasured=null))}function ti(t,r,l){t.curOp.viewChanged=!0;var o=t.display,c=t.display.externalMeasured;if(c&&r>=c.lineN&&r<c.lineN+c.size&&(o.externalMeasured=null),!(r<o.viewFrom||r>=o.viewTo)){var d=o.view[xi(t,r)];if(d.node!=null){var m=d.changes||(d.changes=[]);mt(m,l)==-1&&m.push(l)}}}function ei(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function $s(t,r,l,o){var c=xi(t,r),d,m=t.display.view;if(!Rn||l==t.doc.first+t.doc.size)return{index:c,lineN:l};for(var v=t.display.viewFrom,x=0;x<c;x++)v+=m[x].size;if(v!=r){if(o>0){if(c==m.length-1)return null;d=v+m[c].size-r,c++}else d=v-r;r+=d,l+=d}for(;Zo(t.doc,l)!=l;){if(c==(o<0?0:m.length-1))return null;l+=o*m[c-(o<0?1:0)].size,c+=o}return{index:c,lineN:l}}function bp(t,r,l){var o=t.display,c=o.view;c.length==0||r>=o.viewTo||l<=o.viewFrom?(o.view=Ws(t,r,l),o.viewFrom=r):(o.viewFrom>r?o.view=Ws(t,r,o.viewFrom).concat(o.view):o.viewFrom<r&&(o.view=o.view.slice(xi(t,r))),o.viewFrom=r,o.viewTo<l?o.view=o.view.concat(Ws(t,o.viewTo,l)):o.viewTo>l&&(o.view=o.view.slice(0,xi(t,l)))),o.viewTo=l}function kc(t){for(var r=t.display.view,l=0,o=0;o<r.length;o++){var c=r[o];!c.hidden&&(!c.node||c.changes)&&++l}return l}function Or(t){t.display.input.showSelection(t.display.input.prepareSelection())}function Sc(t,r){r===void 0&&(r=!0);var l=t.doc,o={},c=o.cursors=document.createDocumentFragment(),d=o.selection=document.createDocumentFragment(),m=t.options.$customCursor;m&&(r=!0);for(var v=0;v<l.sel.ranges.length;v++)if(!(!r&&v==l.sel.primIndex)){var x=l.sel.ranges[v];if(!(x.from().line>=t.display.viewTo||x.to().line<t.display.viewFrom)){var w=x.empty();if(m){var N=m(t,x);N&&ha(t,N,c)}else(w||t.options.showCursorWhenSelecting)&&ha(t,x.head,c);w||xp(t,x,d)}}return o}function ha(t,r,l){var o=yn(t,r,"div",null,null,!t.options.singleCursorHeightPerLine),c=l.appendChild(I("div"," ","CodeMirror-cursor"));if(c.style.left=o.left+"px",c.style.top=o.top+"px",c.style.height=Math.max(0,o.bottom-o.top)*t.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(t.getWrapperElement().className)){var d=Us(t,r,"div",null,null),m=d.right-d.left;c.style.width=(m>0?m:t.defaultCharWidth())+"px"}if(o.other){var v=l.appendChild(I("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));v.style.display="",v.style.left=o.other.left+"px",v.style.top=o.other.top+"px",v.style.height=(o.other.bottom-o.other.top)*.85+"px"}}function js(t,r){return t.top-r.top||t.left-r.left}function xp(t,r,l){var o=t.display,c=t.doc,d=document.createDocumentFragment(),m=cc(t.display),v=m.left,x=Math.max(o.sizerWidth,vi(t)-o.sizer.offsetLeft)-m.right,w=c.direction=="ltr";function N(ht,xt,Lt,Ct){xt<0&&(xt=0),xt=Math.round(xt),Ct=Math.round(Ct),d.appendChild(I("div",null,"CodeMirror-selected","position: absolute; left: "+ht+`px;
                             top: `+xt+"px; width: "+(Lt??x-ht)+`px;
                             height: `+(Ct-xt)+"px"))}function P(ht,xt,Lt){var Ct=wt(c,ht),Wt=Ct.text.length,se,Ce;function ue(ye,$e){return Us(t,et(ht,ye),"div",Ct,$e)}function qe(ye,$e,Le){var _e=_c(t,Ct,null,ye),be=$e=="ltr"==(Le=="after")?"left":"right",de=Le=="after"?_e.begin:_e.end-(/\s/.test(Ct.text.charAt(_e.end-1))?2:1);return ue(de,be)[be]}var Ue=K(Ct,c.direction);return tt(Ue,xt||0,Lt??Wt,function(ye,$e,Le,_e){var be=Le=="ltr",de=ue(ye,be?"left":"right"),je=ue($e-1,be?"right":"left"),or=xt==null&&ye==0,ai=Lt==null&&$e==Wt,Ie=_e==0,Nn=!Ue||_e==Ue.length-1;if(je.top-de.top<=3){var Te=(w?or:ai)&&Ie,Ha=(w?ai:or)&&Nn,Un=Te?v:(be?de:je).left,Ci=Ha?x:(be?je:de).right;N(Un,de.top,Ci-Un,de.bottom)}else{var Ti,Fe,ar,Wa;be?(Ti=w&&or&&Ie?v:de.left,Fe=w?x:qe(ye,Le,"before"),ar=w?v:qe($e,Le,"after"),Wa=w&&ai&&Nn?x:je.right):(Ti=w?qe(ye,Le,"before"):v,Fe=!w&&or&&Ie?x:de.right,ar=!w&&ai&&Nn?v:je.left,Wa=w?qe($e,Le,"after"):x),N(Ti,de.top,Fe-Ti,de.bottom),de.bottom<je.top&&N(v,de.bottom,null,je.top),N(ar,je.top,Wa-ar,je.bottom)}(!se||js(de,se)<0)&&(se=de),js(je,se)<0&&(se=je),(!Ce||js(de,Ce)<0)&&(Ce=de),js(je,Ce)<0&&(Ce=je)}),{start:se,end:Ce}}var W=r.from(),E=r.to();if(W.line==E.line)P(W.line,W.ch,E.ch);else{var B=wt(c,W.line),X=wt(c,E.line),ot=vn(B)==vn(X),ft=P(W.line,W.ch,ot?B.text.length+1:null).end,dt=P(E.line,ot?0:null,E.ch).start;ot&&(ft.top<dt.top-2?(N(ft.right,ft.top,null,ft.bottom),N(v,dt.top,dt.left,dt.bottom)):N(ft.right,ft.top,dt.left-ft.right,ft.bottom)),ft.bottom<dt.top&&N(v,ft.bottom,null,dt.top)}l.appendChild(d)}function da(t){if(t.state.focused){var r=t.display;clearInterval(r.blinker);var l=!0;r.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?r.blinker=setInterval(function(){t.hasFocus()||Ki(t),r.cursorDiv.style.visibility=(l=!l)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(r.cursorDiv.style.visibility="hidden")}}function Cc(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||ga(t))}function pa(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&Ki(t))},100)}function ga(t,r){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),t.options.readOnly!="nocursor"&&(t.state.focused||(Tt(t,"focus",t,r),t.state.focused=!0,$(t.display.wrapper,"CodeMirror-focused"),!t.curOp&&t.display.selForContextMenu!=t.doc.sel&&(t.display.input.reset(),b&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),da(t))}function Ki(t,r){t.state.delayingBlurEvent||(t.state.focused&&(Tt(t,"blur",t,r),t.state.focused=!1,Q(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function Vs(t){for(var r=t.display,l=r.lineDiv.offsetTop,o=Math.max(0,r.scroller.getBoundingClientRect().top),c=r.lineDiv.getBoundingClientRect().top,d=0,m=0;m<r.view.length;m++){var v=r.view[m],x=t.options.lineWrapping,w=void 0,N=0;if(!v.hidden){if(c+=v.line.height,p&&g<8){var P=v.node.offsetTop+v.node.offsetHeight;w=P-l,l=P}else{var W=v.node.getBoundingClientRect();w=W.bottom-W.top,!x&&v.text.firstChild&&(N=v.text.firstChild.getBoundingClientRect().right-W.left-1)}var E=v.line.height-w;if((E>.005||E<-.005)&&(c<o&&(d-=E),Ke(v.line,w),Tc(v.line),v.rest))for(var B=0;B<v.rest.length;B++)Tc(v.rest[B]);if(N>t.display.sizerWidth){var X=Math.ceil(N/Xi(t.display));X>t.display.maxLineLength&&(t.display.maxLineLength=X,t.display.maxLine=v.line,t.display.maxLineChanged=!0)}}}Math.abs(d)>2&&(r.scroller.scrollTop+=d)}function Tc(t){if(t.widgets)for(var r=0;r<t.widgets.length;++r){var l=t.widgets[r],o=l.node.parentNode;o&&(l.height=o.offsetHeight)}}function Ys(t,r,l){var o=l&&l.top!=null?Math.max(0,l.top):t.scroller.scrollTop;o=Math.floor(o-zs(t));var c=l&&l.bottom!=null?l.bottom:o+t.wrapper.clientHeight,d=Sn(r,o),m=Sn(r,c);if(l&&l.ensure){var v=l.ensure.from.line,x=l.ensure.to.line;v<d?(d=v,m=Sn(r,Hn(wt(r,v))+t.wrapper.clientHeight)):Math.min(x,r.lastLine())>=m&&(d=Sn(r,Hn(wt(r,x))-t.wrapper.clientHeight),m=x)}return{from:d,to:Math.max(m,d+1)}}function _p(t,r){if(!oe(t,"scrollCursorIntoView")){var l=t.display,o=l.sizer.getBoundingClientRect(),c=null;if(r.top+o.top<0?c=!0:r.bottom+o.top>(window.innerHeight||document.documentElement.clientHeight)&&(c=!1),c!=null&&!L){var d=I("div","​",null,`position: absolute;
                         top: `+(r.top-l.viewOffset-zs(t.display))+`px;
                         height: `+(r.bottom-r.top+Tn(t)+l.barHeight)+`px;
                         left: `+r.left+"px; width: "+Math.max(2,r.right-r.left)+"px;");t.display.lineSpace.appendChild(d),d.scrollIntoView(c),t.display.lineSpace.removeChild(d)}}}function wp(t,r,l,o){o==null&&(o=0);var c;!t.options.lineWrapping&&r==l&&(l=r.sticky=="before"?et(r.line,r.ch+1,"before"):r,r=r.ch?et(r.line,r.sticky=="before"?r.ch-1:r.ch,"after"):r);for(var d=0;d<5;d++){var m=!1,v=yn(t,r),x=!l||l==r?v:yn(t,l);c={left:Math.min(v.left,x.left),top:Math.min(v.top,x.top)-o,right:Math.max(v.left,x.left),bottom:Math.max(v.bottom,x.bottom)+o};var w=ma(t,c),N=t.doc.scrollTop,P=t.doc.scrollLeft;if(w.scrollTop!=null&&(Ir(t,w.scrollTop),Math.abs(t.doc.scrollTop-N)>1&&(m=!0)),w.scrollLeft!=null&&(_i(t,w.scrollLeft),Math.abs(t.doc.scrollLeft-P)>1&&(m=!0)),!m)break}return c}function kp(t,r){var l=ma(t,r);l.scrollTop!=null&&Ir(t,l.scrollTop),l.scrollLeft!=null&&_i(t,l.scrollLeft)}function ma(t,r){var l=t.display,o=Yi(t.display);r.top<0&&(r.top=0);var c=t.curOp&&t.curOp.scrollTop!=null?t.curOp.scrollTop:l.scroller.scrollTop,d=ia(t),m={};r.bottom-r.top>d&&(r.bottom=r.top+d);var v=t.doc.height+na(l),x=r.top<o,w=r.bottom>v-o;if(r.top<c)m.scrollTop=x?0:r.top;else if(r.bottom>c+d){var N=Math.min(r.top,(w?v:r.bottom)-d);N!=c&&(m.scrollTop=N)}var P=t.options.fixedGutter?0:l.gutters.offsetWidth,W=t.curOp&&t.curOp.scrollLeft!=null?t.curOp.scrollLeft:l.scroller.scrollLeft-P,E=vi(t)-l.gutters.offsetWidth,B=r.right-r.left>E;return B&&(r.right=r.left+E),r.left<10?m.scrollLeft=0:r.left<W?m.scrollLeft=Math.max(0,r.left+P-(B?0:10)):r.right>E+W-3&&(m.scrollLeft=r.right+(B?0:10)-E),m}function va(t,r){r!=null&&(Xs(t),t.curOp.scrollTop=(t.curOp.scrollTop==null?t.doc.scrollTop:t.curOp.scrollTop)+r)}function Gi(t){Xs(t);var r=t.getCursor();t.curOp.scrollToPos={from:r,to:r,margin:t.options.cursorScrollMargin}}function Ar(t,r,l){(r!=null||l!=null)&&Xs(t),r!=null&&(t.curOp.scrollLeft=r),l!=null&&(t.curOp.scrollTop=l)}function Sp(t,r){Xs(t),t.curOp.scrollToPos=r}function Xs(t){var r=t.curOp.scrollToPos;if(r){t.curOp.scrollToPos=null;var l=bc(t,r.from),o=bc(t,r.to);Lc(t,l,o,r.margin)}}function Lc(t,r,l,o){var c=ma(t,{left:Math.min(r.left,l.left),top:Math.min(r.top,l.top)-o,right:Math.max(r.right,l.right),bottom:Math.max(r.bottom,l.bottom)+o});Ar(t,c.scrollLeft,c.scrollTop)}function Ir(t,r){Math.abs(t.doc.scrollTop-r)<2||(a||ba(t,{top:r}),Nc(t,r,!0),a&&ba(t),Rr(t,100))}function Nc(t,r,l){r=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,r)),!(t.display.scroller.scrollTop==r&&!l)&&(t.doc.scrollTop=r,t.display.scrollbars.setScrollTop(r),t.display.scroller.scrollTop!=r&&(t.display.scroller.scrollTop=r))}function _i(t,r,l,o){r=Math.max(0,Math.min(r,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),!((l?r==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-r)<2)&&!o)&&(t.doc.scrollLeft=r,Ac(t),t.display.scroller.scrollLeft!=r&&(t.display.scroller.scrollLeft=r),t.display.scrollbars.setScrollLeft(r))}function Er(t){var r=t.display,l=r.gutters.offsetWidth,o=Math.round(t.doc.height+na(t.display));return{clientHeight:r.scroller.clientHeight,viewHeight:r.wrapper.clientHeight,scrollWidth:r.scroller.scrollWidth,clientWidth:r.scroller.clientWidth,viewWidth:r.wrapper.clientWidth,barLeft:t.options.fixedGutter?l:0,docHeight:o,scrollHeight:o+Tn(t)+r.barHeight,nativeBarWidth:r.nativeBarWidth,gutterWidth:l}}var wi=function(t,r,l){this.cm=l;var o=this.vert=I("div",[I("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),c=this.horiz=I("div",[I("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");o.tabIndex=c.tabIndex=-1,t(o),t(c),Y(o,"scroll",function(){o.clientHeight&&r(o.scrollTop,"vertical")}),Y(c,"scroll",function(){c.clientWidth&&r(c.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,p&&g<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};wi.prototype.update=function(t){var r=t.scrollWidth>t.clientWidth+1,l=t.scrollHeight>t.clientHeight+1,o=t.nativeBarWidth;if(l){this.vert.style.display="block",this.vert.style.bottom=r?o+"px":"0";var c=t.viewHeight-(r?o:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+c)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(r){this.horiz.style.display="block",this.horiz.style.right=l?o+"px":"0",this.horiz.style.left=t.barLeft+"px";var d=t.viewWidth-t.barLeft-(l?o:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+d)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(o==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:l?o:0,bottom:r?o:0}},wi.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},wi.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},wi.prototype.zeroWidthHack=function(){var t=J&&!D?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Ht,this.disableVert=new Ht},wi.prototype.enableZeroWidthBar=function(t,r,l){t.style.pointerEvents="auto";function o(){var c=t.getBoundingClientRect(),d=l=="vert"?document.elementFromPoint(c.right-1,(c.top+c.bottom)/2):document.elementFromPoint((c.right+c.left)/2,c.bottom-1);d!=t?t.style.pointerEvents="none":r.set(1e3,o)}r.set(1e3,o)},wi.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var Fr=function(){};Fr.prototype.update=function(){return{bottom:0,right:0}},Fr.prototype.setScrollLeft=function(){},Fr.prototype.setScrollTop=function(){},Fr.prototype.clear=function(){};function qi(t,r){r||(r=Er(t));var l=t.display.barWidth,o=t.display.barHeight;Mc(t,r);for(var c=0;c<4&&l!=t.display.barWidth||o!=t.display.barHeight;c++)l!=t.display.barWidth&&t.options.lineWrapping&&Vs(t),Mc(t,Er(t)),l=t.display.barWidth,o=t.display.barHeight}function Mc(t,r){var l=t.display,o=l.scrollbars.update(r);l.sizer.style.paddingRight=(l.barWidth=o.right)+"px",l.sizer.style.paddingBottom=(l.barHeight=o.bottom)+"px",l.heightForcer.style.borderBottom=o.bottom+"px solid transparent",o.right&&o.bottom?(l.scrollbarFiller.style.display="block",l.scrollbarFiller.style.height=o.bottom+"px",l.scrollbarFiller.style.width=o.right+"px"):l.scrollbarFiller.style.display="",o.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(l.gutterFiller.style.display="block",l.gutterFiller.style.height=o.bottom+"px",l.gutterFiller.style.width=r.gutterWidth+"px"):l.gutterFiller.style.display=""}var Dc={native:wi,null:Fr};function Pc(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&Q(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Dc[t.options.scrollbarStyle](function(r){t.display.wrapper.insertBefore(r,t.display.scrollbarFiller),Y(r,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),r.setAttribute("cm-not-content","true")},function(r,l){l=="horizontal"?_i(t,r):Ir(t,r)},t),t.display.scrollbars.addClass&&$(t.display.wrapper,t.display.scrollbars.addClass)}var Cp=0;function ki(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Cp,markArrays:null},np(t.curOp)}function Si(t){var r=t.curOp;r&&rp(r,function(l){for(var o=0;o<l.ops.length;o++)l.ops[o].cm.curOp=null;Tp(l)})}function Tp(t){for(var r=t.ops,l=0;l<r.length;l++)Lp(r[l]);for(var o=0;o<r.length;o++)Np(r[o]);for(var c=0;c<r.length;c++)Mp(r[c]);for(var d=0;d<r.length;d++)Dp(r[d]);for(var m=0;m<r.length;m++)Pp(r[m])}function Lp(t){var r=t.cm,l=r.display;Ap(r),t.updateMaxLine&&ta(r),t.mustUpdate=t.viewChanged||t.forceUpdate||t.scrollTop!=null||t.scrollToPos&&(t.scrollToPos.from.line<l.viewFrom||t.scrollToPos.to.line>=l.viewTo)||l.maxLineChanged&&r.options.lineWrapping,t.update=t.mustUpdate&&new Ks(r,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function Np(t){t.updatedDisplay=t.mustUpdate&&ya(t.cm,t.update)}function Mp(t){var r=t.cm,l=r.display;t.updatedDisplay&&Vs(r),t.barMeasure=Er(r),l.maxLineChanged&&!r.options.lineWrapping&&(t.adjustWidthTo=fc(r,l.maxLine,l.maxLine.text.length).left+3,r.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(l.scroller.clientWidth,l.sizer.offsetLeft+t.adjustWidthTo+Tn(r)+r.display.barWidth),t.maxScrollLeft=Math.max(0,l.sizer.offsetLeft+t.adjustWidthTo-vi(r))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=l.input.prepareSelection())}function Dp(t){var r=t.cm;t.adjustWidthTo!=null&&(r.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<r.doc.scrollLeft&&_i(r,Math.min(r.display.scroller.scrollLeft,t.maxScrollLeft),!0),r.display.maxLineChanged=!1);var l=t.focus&&t.focus==$t();t.preparedSelection&&r.display.input.showSelection(t.preparedSelection,l),(t.updatedDisplay||t.startHeight!=r.doc.height)&&qi(r,t.barMeasure),t.updatedDisplay&&_a(r,t.barMeasure),t.selectionChanged&&da(r),r.state.focused&&t.updateInput&&r.display.input.reset(t.typing),l&&Cc(t.cm)}function Pp(t){var r=t.cm,l=r.display,o=r.doc;if(t.updatedDisplay&&Oc(r,t.update),l.wheelStartX!=null&&(t.scrollTop!=null||t.scrollLeft!=null||t.scrollToPos)&&(l.wheelStartX=l.wheelStartY=null),t.scrollTop!=null&&Nc(r,t.scrollTop,t.forceScroll),t.scrollLeft!=null&&_i(r,t.scrollLeft,!0,!0),t.scrollToPos){var c=wp(r,yt(o,t.scrollToPos.from),yt(o,t.scrollToPos.to),t.scrollToPos.margin);_p(r,c)}var d=t.maybeHiddenMarkers,m=t.maybeUnhiddenMarkers;if(d)for(var v=0;v<d.length;++v)d[v].lines.length||Tt(d[v],"hide");if(m)for(var x=0;x<m.length;++x)m[x].lines.length&&Tt(m[x],"unhide");l.wrapper.offsetHeight&&(o.scrollTop=r.display.scroller.scrollTop),t.changeObjs&&Tt(r,"changes",r,t.changeObjs),t.update&&t.update.finish()}function Ge(t,r){if(t.curOp)return r();ki(t);try{return r()}finally{Si(t)}}function ke(t,r){return function(){if(t.curOp)return r.apply(t,arguments);ki(t);try{return r.apply(t,arguments)}finally{Si(t)}}}function Ee(t){return function(){if(this.curOp)return t.apply(this,arguments);ki(this);try{return t.apply(this,arguments)}finally{Si(this)}}}function Se(t){return function(){var r=this.cm;if(!r||r.curOp)return t.apply(this,arguments);ki(r);try{return t.apply(this,arguments)}finally{Si(r)}}}function Rr(t,r){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(r,kt(Op,t))}function Op(t){var r=t.doc;if(!(r.highlightFrontier>=t.display.viewTo)){var l=+new Date+t.options.workTime,o=Tr(t,r.highlightFrontier),c=[];r.iter(o.line,Math.min(r.first+r.size,t.display.viewTo+500),function(d){if(o.line>=t.display.viewFrom){var m=d.styles,v=d.text.length>t.options.maxHighlightLength?rn(r.mode,o.state):null,x=Wl(t,d,o,!0);v&&(o.state=v),d.styles=x.styles;var w=d.styleClasses,N=x.classes;N?d.styleClasses=N:w&&(d.styleClasses=null);for(var P=!m||m.length!=d.styles.length||w!=N&&(!w||!N||w.bgClass!=N.bgClass||w.textClass!=N.textClass),W=0;!P&&W<m.length;++W)P=m[W]!=d.styles[W];P&&c.push(o.line),d.stateAfter=o.save(),o.nextLine()}else d.text.length<=t.options.maxHighlightLength&&Ko(t,d.text,o),d.stateAfter=o.line%5==0?o.save():null,o.nextLine();if(+new Date>l)return Rr(t,t.options.workDelay),!0}),r.highlightFrontier=o.line,r.modeFrontier=Math.max(r.modeFrontier,o.line),c.length&&Ge(t,function(){for(var d=0;d<c.length;d++)ti(t,c[d],"text")})}}var Ks=function(t,r,l){var o=t.display;this.viewport=r,this.visible=Ys(o,t.doc,r),this.editorIsHidden=!o.wrapper.offsetWidth,this.wrapperHeight=o.wrapper.clientHeight,this.wrapperWidth=o.wrapper.clientWidth,this.oldDisplayWidth=vi(t),this.force=l,this.dims=ca(t),this.events=[]};Ks.prototype.signal=function(t,r){te(t,r)&&this.events.push(arguments)},Ks.prototype.finish=function(){for(var t=0;t<this.events.length;t++)Tt.apply(null,this.events[t])};function Ap(t){var r=t.display;!r.scrollbarsClipped&&r.scroller.offsetWidth&&(r.nativeBarWidth=r.scroller.offsetWidth-r.scroller.clientWidth,r.heightForcer.style.height=Tn(t)+"px",r.sizer.style.marginBottom=-r.nativeBarWidth+"px",r.sizer.style.borderRightWidth=Tn(t)+"px",r.scrollbarsClipped=!0)}function Ip(t){if(t.hasFocus())return null;var r=$t();if(!r||!Mt(t.display.lineDiv,r))return null;var l={activeElt:r};if(window.getSelection){var o=window.getSelection();o.anchorNode&&o.extend&&Mt(t.display.lineDiv,o.anchorNode)&&(l.anchorNode=o.anchorNode,l.anchorOffset=o.anchorOffset,l.focusNode=o.focusNode,l.focusOffset=o.focusOffset)}return l}function Ep(t){if(!(!t||!t.activeElt||t.activeElt==$t())&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&Mt(document.body,t.anchorNode)&&Mt(document.body,t.focusNode))){var r=window.getSelection(),l=document.createRange();l.setEnd(t.anchorNode,t.anchorOffset),l.collapse(!1),r.removeAllRanges(),r.addRange(l),r.extend(t.focusNode,t.focusOffset)}}function ya(t,r){var l=t.display,o=t.doc;if(r.editorIsHidden)return ei(t),!1;if(!r.force&&r.visible.from>=l.viewFrom&&r.visible.to<=l.viewTo&&(l.updateLineNumbers==null||l.updateLineNumbers>=l.viewTo)&&l.renderedView==l.view&&kc(t)==0)return!1;Ic(t)&&(ei(t),r.dims=ca(t));var c=o.first+o.size,d=Math.max(r.visible.from-t.options.viewportMargin,o.first),m=Math.min(c,r.visible.to+t.options.viewportMargin);l.viewFrom<d&&d-l.viewFrom<20&&(d=Math.max(o.first,l.viewFrom)),l.viewTo>m&&l.viewTo-m<20&&(m=Math.min(c,l.viewTo)),Rn&&(d=Zo(t.doc,d),m=Ql(t.doc,m));var v=d!=l.viewFrom||m!=l.viewTo||l.lastWrapHeight!=r.wrapperHeight||l.lastWrapWidth!=r.wrapperWidth;bp(t,d,m),l.viewOffset=Hn(wt(t.doc,l.viewFrom)),t.display.mover.style.top=l.viewOffset+"px";var x=kc(t);if(!v&&x==0&&!r.force&&l.renderedView==l.view&&(l.updateLineNumbers==null||l.updateLineNumbers>=l.viewTo))return!1;var w=Ip(t);return x>4&&(l.lineDiv.style.display="none"),Fp(t,l.updateLineNumbers,r.dims),x>4&&(l.lineDiv.style.display=""),l.renderedView=l.view,Ep(w),rt(l.cursorDiv),rt(l.selectionDiv),l.gutters.style.height=l.sizer.style.minHeight=0,v&&(l.lastWrapHeight=r.wrapperHeight,l.lastWrapWidth=r.wrapperWidth,Rr(t,400)),l.updateLineNumbers=null,!0}function Oc(t,r){for(var l=r.viewport,o=!0;;o=!1){if(!o||!t.options.lineWrapping||r.oldDisplayWidth==vi(t)){if(l&&l.top!=null&&(l={top:Math.min(t.doc.height+na(t.display)-ia(t),l.top)}),r.visible=Ys(t.display,t.doc,l),r.visible.from>=t.display.viewFrom&&r.visible.to<=t.display.viewTo)break}else o&&(r.visible=Ys(t.display,t.doc,l));if(!ya(t,r))break;Vs(t);var c=Er(t);Or(t),qi(t,c),_a(t,c),r.force=!1}r.signal(t,"update",t),(t.display.viewFrom!=t.display.reportedViewFrom||t.display.viewTo!=t.display.reportedViewTo)&&(r.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function ba(t,r){var l=new Ks(t,r);if(ya(t,l)){Vs(t),Oc(t,l);var o=Er(t);Or(t),qi(t,o),_a(t,o),l.finish()}}function Fp(t,r,l){var o=t.display,c=t.options.lineNumbers,d=o.lineDiv,m=d.firstChild;function v(B){var X=B.nextSibling;return b&&J&&t.display.currentWheelTarget==B?B.style.display="none":B.parentNode.removeChild(B),X}for(var x=o.view,w=o.viewFrom,N=0;N<x.length;N++){var P=x[N];if(!P.hidden)if(!P.node||P.node.parentNode!=d){var W=cp(t,P,w,l);d.insertBefore(W,m)}else{for(;m!=P.node;)m=v(m);var E=c&&r!=null&&r<=w&&P.lineNumber;P.changes&&(mt(P.changes,"gutter")>-1&&(E=!1),rc(t,P,w,l)),E&&(rt(P.lineNumber),P.lineNumber.appendChild(document.createTextNode(Cr(t.options,w)))),m=P.node.nextSibling}w+=P.size}for(;m;)m=v(m)}function xa(t){var r=t.gutters.offsetWidth;t.sizer.style.marginLeft=r+"px",we(t,"gutterChanged",t)}function _a(t,r){t.display.sizer.style.minHeight=r.docHeight+"px",t.display.heightForcer.style.top=r.docHeight+"px",t.display.gutters.style.height=r.docHeight+t.display.barHeight+Tn(t)+"px"}function Ac(t){var r=t.display,l=r.view;if(!(!r.alignWidgets&&(!r.gutters.firstChild||!t.options.fixedGutter))){for(var o=ua(r)-r.scroller.scrollLeft+t.doc.scrollLeft,c=r.gutters.offsetWidth,d=o+"px",m=0;m<l.length;m++)if(!l[m].hidden){t.options.fixedGutter&&(l[m].gutter&&(l[m].gutter.style.left=d),l[m].gutterBackground&&(l[m].gutterBackground.style.left=d));var v=l[m].alignable;if(v)for(var x=0;x<v.length;x++)v[x].style.left=d}t.options.fixedGutter&&(r.gutters.style.left=o+c+"px")}}function Ic(t){if(!t.options.lineNumbers)return!1;var r=t.doc,l=Cr(t.options,r.first+r.size-1),o=t.display;if(l.length!=o.lineNumChars){var c=o.measure.appendChild(I("div",[I("div",l)],"CodeMirror-linenumber CodeMirror-gutter-elt")),d=c.firstChild.offsetWidth,m=c.offsetWidth-d;return o.lineGutter.style.width="",o.lineNumInnerWidth=Math.max(d,o.lineGutter.offsetWidth-m)+1,o.lineNumWidth=o.lineNumInnerWidth+m,o.lineNumChars=o.lineNumInnerWidth?l.length:-1,o.lineGutter.style.width=o.lineNumWidth+"px",xa(t.display),!0}return!1}function wa(t,r){for(var l=[],o=!1,c=0;c<t.length;c++){var d=t[c],m=null;if(typeof d!="string"&&(m=d.style,d=d.className),d=="CodeMirror-linenumbers")if(r)o=!0;else continue;l.push({className:d,style:m})}return r&&!o&&l.push({className:"CodeMirror-linenumbers",style:null}),l}function Ec(t){var r=t.gutters,l=t.gutterSpecs;rt(r),t.lineGutter=null;for(var o=0;o<l.length;++o){var c=l[o],d=c.className,m=c.style,v=r.appendChild(I("div",null,"CodeMirror-gutter "+d));m&&(v.style.cssText=m),d=="CodeMirror-linenumbers"&&(t.lineGutter=v,v.style.width=(t.lineNumWidth||1)+"px")}r.style.display=l.length?"":"none",xa(t)}function Hr(t){Ec(t.display),ze(t),Ac(t)}function Rp(t,r,l,o){var c=this;this.input=l,c.scrollbarFiller=I("div",null,"CodeMirror-scrollbar-filler"),c.scrollbarFiller.setAttribute("cm-not-content","true"),c.gutterFiller=I("div",null,"CodeMirror-gutter-filler"),c.gutterFiller.setAttribute("cm-not-content","true"),c.lineDiv=C("div",null,"CodeMirror-code"),c.selectionDiv=I("div",null,null,"position: relative; z-index: 1"),c.cursorDiv=I("div",null,"CodeMirror-cursors"),c.measure=I("div",null,"CodeMirror-measure"),c.lineMeasure=I("div",null,"CodeMirror-measure"),c.lineSpace=C("div",[c.measure,c.lineMeasure,c.selectionDiv,c.cursorDiv,c.lineDiv],null,"position: relative; outline: none");var d=C("div",[c.lineSpace],"CodeMirror-lines");c.mover=I("div",[d],null,"position: relative"),c.sizer=I("div",[c.mover],"CodeMirror-sizer"),c.sizerWidth=null,c.heightForcer=I("div",null,null,"position: absolute; height: "+St+"px; width: 1px;"),c.gutters=I("div",null,"CodeMirror-gutters"),c.lineGutter=null,c.scroller=I("div",[c.sizer,c.heightForcer,c.gutters],"CodeMirror-scroll"),c.scroller.setAttribute("tabIndex","-1"),c.wrapper=I("div",[c.scrollbarFiller,c.gutterFiller,c.scroller],"CodeMirror"),c.wrapper.setAttribute("translate","no"),p&&g<8&&(c.gutters.style.zIndex=-1,c.scroller.style.paddingRight=0),!b&&!(a&&G)&&(c.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(c.wrapper):t(c.wrapper)),c.viewFrom=c.viewTo=r.first,c.reportedViewFrom=c.reportedViewTo=r.first,c.view=[],c.renderedView=null,c.externalMeasured=null,c.viewOffset=0,c.lastWrapHeight=c.lastWrapWidth=0,c.updateLineNumbers=null,c.nativeBarWidth=c.barHeight=c.barWidth=0,c.scrollbarsClipped=!1,c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null,c.alignWidgets=!1,c.cachedCharWidth=c.cachedTextHeight=c.cachedPaddingH=null,c.maxLine=null,c.maxLineLength=0,c.maxLineChanged=!1,c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null,c.shift=!1,c.selForContextMenu=null,c.activeTouch=null,c.gutterSpecs=wa(o.gutters,o.lineNumbers),Ec(c),l.init(c)}var Gs=0,zn=null;p?zn=-.53:a?zn=15:S?zn=-.7:M&&(zn=-1/3);function Fc(t){var r=t.wheelDeltaX,l=t.wheelDeltaY;return r==null&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(r=t.detail),l==null&&t.detail&&t.axis==t.VERTICAL_AXIS?l=t.detail:l==null&&(l=t.wheelDelta),{x:r,y:l}}function Hp(t){var r=Fc(t);return r.x*=zn,r.y*=zn,r}function Rc(t,r){var l=Fc(r),o=l.x,c=l.y,d=zn;r.deltaMode===0&&(o=r.deltaX,c=r.deltaY,d=1);var m=t.display,v=m.scroller,x=v.scrollWidth>v.clientWidth,w=v.scrollHeight>v.clientHeight;if(o&&x||c&&w){if(c&&J&&b){t:for(var N=r.target,P=m.view;N!=v;N=N.parentNode)for(var W=0;W<P.length;W++)if(P[W].node==N){t.display.currentWheelTarget=N;break t}}if(o&&!a&&!T&&d!=null){c&&w&&Ir(t,Math.max(0,v.scrollTop+c*d)),_i(t,Math.max(0,v.scrollLeft+o*d)),(!c||c&&w)&&Pe(r),m.wheelStartX=null;return}if(c&&d!=null){var E=c*d,B=t.doc.scrollTop,X=B+m.wrapper.clientHeight;E<0?B=Math.max(0,B+E-50):X=Math.min(t.doc.height,X+E+50),ba(t,{top:B,bottom:X})}Gs<20&&r.deltaMode!==0&&(m.wheelStartX==null?(m.wheelStartX=v.scrollLeft,m.wheelStartY=v.scrollTop,m.wheelDX=o,m.wheelDY=c,setTimeout(function(){if(m.wheelStartX!=null){var ot=v.scrollLeft-m.wheelStartX,ft=v.scrollTop-m.wheelStartY,dt=ft&&m.wheelDY&&ft/m.wheelDY||ot&&m.wheelDX&&ot/m.wheelDX;m.wheelStartX=m.wheelStartY=null,dt&&(zn=(zn*Gs+dt)/(Gs+1),++Gs)}},200)):(m.wheelDX+=o,m.wheelDY+=c))}}var on=function(t,r){this.ranges=t,this.primIndex=r};on.prototype.primary=function(){return this.ranges[this.primIndex]},on.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var r=0;r<this.ranges.length;r++){var l=this.ranges[r],o=t.ranges[r];if(!O(l.anchor,o.anchor)||!O(l.head,o.head))return!1}return!0},on.prototype.deepCopy=function(){for(var t=[],r=0;r<this.ranges.length;r++)t[r]=new Zt(U(this.ranges[r].anchor),U(this.ranges[r].head));return new on(t,this.primIndex)},on.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},on.prototype.contains=function(t,r){r||(r=t);for(var l=0;l<this.ranges.length;l++){var o=this.ranges[l];if(k(r,o.from())>=0&&k(t,o.to())<=0)return l}return-1};var Zt=function(t,r){this.anchor=t,this.head=r};Zt.prototype.from=function(){return Pt(this.anchor,this.head)},Zt.prototype.to=function(){return st(this.anchor,this.head)},Zt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function bn(t,r,l){var o=t&&t.options.selectionsMayTouch,c=r[l];r.sort(function(W,E){return k(W.from(),E.from())}),l=mt(r,c);for(var d=1;d<r.length;d++){var m=r[d],v=r[d-1],x=k(v.to(),m.from());if(o&&!m.empty()?x>0:x>=0){var w=Pt(v.from(),m.from()),N=st(v.to(),m.to()),P=v.empty()?m.from()==m.head:v.from()==v.head;d<=l&&--l,r.splice(--d,2,new Zt(P?N:w,P?w:N))}}return new on(r,l)}function ni(t,r){return new on([new Zt(t,r||t)],0)}function ii(t){return t.text?et(t.from.line+t.text.length-1,at(t.text).length+(t.text.length==1?t.from.ch:0)):t.to}function Hc(t,r){if(k(t,r.from)<0)return t;if(k(t,r.to)<=0)return ii(r);var l=t.line+r.text.length-(r.to.line-r.from.line)-1,o=t.ch;return t.line==r.to.line&&(o+=ii(r).ch-r.to.ch),et(l,o)}function ka(t,r){for(var l=[],o=0;o<t.sel.ranges.length;o++){var c=t.sel.ranges[o];l.push(new Zt(Hc(c.anchor,r),Hc(c.head,r)))}return bn(t.cm,l,t.sel.primIndex)}function Wc(t,r,l){return t.line==r.line?et(l.line,t.ch-r.ch+l.ch):et(l.line+(t.line-r.line),t.ch)}function Wp(t,r,l){for(var o=[],c=et(t.first,0),d=c,m=0;m<r.length;m++){var v=r[m],x=Wc(v.from,c,d),w=Wc(ii(v),c,d);if(c=v.to,d=w,l=="around"){var N=t.sel.ranges[m],P=k(N.head,N.anchor)<0;o[m]=new Zt(P?w:x,P?x:w)}else o[m]=new Zt(x,x)}return new on(o,t.sel.primIndex)}function Sa(t){t.doc.mode=Bi(t.options,t.doc.modeOption),Wr(t)}function Wr(t){t.doc.iter(function(r){r.stateAfter&&(r.stateAfter=null),r.styles&&(r.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,Rr(t,100),t.state.modeGen++,t.curOp&&ze(t)}function zc(t,r){return r.from.ch==0&&r.to.ch==0&&at(r.text)==""&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Ca(t,r,l,o){function c(dt){return l?l[dt]:null}function d(dt,ht,xt){Xd(dt,ht,xt,o),we(dt,"change",dt,r)}function m(dt,ht){for(var xt=[],Lt=dt;Lt<ht;++Lt)xt.push(new $i(w[Lt],c(Lt),o));return xt}var v=r.from,x=r.to,w=r.text,N=wt(t,v.line),P=wt(t,x.line),W=at(w),E=c(w.length-1),B=x.line-v.line;if(r.full)t.insert(0,m(0,w.length)),t.remove(w.length,t.size-w.length);else if(zc(t,r)){var X=m(0,w.length-1);d(P,P.text,E),B&&t.remove(v.line,B),X.length&&t.insert(v.line,X)}else if(N==P)if(w.length==1)d(N,N.text.slice(0,v.ch)+W+N.text.slice(x.ch),E);else{var ot=m(1,w.length-1);ot.push(new $i(W+N.text.slice(x.ch),E,o)),d(N,N.text.slice(0,v.ch)+w[0],c(0)),t.insert(v.line+1,ot)}else if(w.length==1)d(N,N.text.slice(0,v.ch)+w[0]+P.text.slice(x.ch),c(0)),t.remove(v.line+1,B);else{d(N,N.text.slice(0,v.ch)+w[0],c(0)),d(P,W+P.text.slice(x.ch),E);var ft=m(1,w.length-1);B>1&&t.remove(v.line+1,B-1),t.insert(v.line+1,ft)}we(t,"change",t,r)}function ri(t,r,l){function o(c,d,m){if(c.linked)for(var v=0;v<c.linked.length;++v){var x=c.linked[v];if(x.doc!=d){var w=m&&x.sharedHist;l&&!w||(r(x.doc,w),o(x.doc,c,w))}}}o(t,null,!0)}function Bc(t,r){if(r.cm)throw new Error("This document is already in use.");t.doc=r,r.cm=t,fa(t),Sa(t),Uc(t),t.options.direction=r.direction,t.options.lineWrapping||ta(t),t.options.mode=r.modeOption,ze(t)}function Uc(t){(t.doc.direction=="rtl"?$:Q)(t.display.lineDiv,"CodeMirror-rtl")}function zp(t){Ge(t,function(){Uc(t),ze(t)})}function qs(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function Ta(t,r){var l={from:U(r.from),to:ii(r),text:kn(t,r.from,r.to)};return Vc(t,l,r.from.line,r.to.line+1),ri(t,function(o){return Vc(o,l,r.from.line,r.to.line+1)},!0),l}function $c(t){for(;t.length;){var r=at(t);if(r.ranges)t.pop();else break}}function Bp(t,r){if(r)return $c(t.done),at(t.done);if(t.done.length&&!at(t.done).ranges)return at(t.done);if(t.done.length>1&&!t.done[t.done.length-2].ranges)return t.done.pop(),at(t.done)}function jc(t,r,l,o){var c=t.history;c.undone.length=0;var d=+new Date,m,v;if((c.lastOp==o||c.lastOrigin==r.origin&&r.origin&&(r.origin.charAt(0)=="+"&&c.lastModTime>d-(t.cm?t.cm.options.historyEventDelay:500)||r.origin.charAt(0)=="*"))&&(m=Bp(c,c.lastOp==o)))v=at(m.changes),k(r.from,r.to)==0&&k(r.from,v.to)==0?v.to=ii(r):m.changes.push(Ta(t,r));else{var x=at(c.done);for((!x||!x.ranges)&&Js(t.sel,c.done),m={changes:[Ta(t,r)],generation:c.generation},c.done.push(m);c.done.length>c.undoDepth;)c.done.shift(),c.done[0].ranges||c.done.shift()}c.done.push(l),c.generation=++c.maxGeneration,c.lastModTime=c.lastSelTime=d,c.lastOp=c.lastSelOp=o,c.lastOrigin=c.lastSelOrigin=r.origin,v||Tt(t,"historyAdded")}function Up(t,r,l,o){var c=r.charAt(0);return c=="*"||c=="+"&&l.ranges.length==o.ranges.length&&l.somethingSelected()==o.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}function $p(t,r,l,o){var c=t.history,d=o&&o.origin;l==c.lastSelOp||d&&c.lastSelOrigin==d&&(c.lastModTime==c.lastSelTime&&c.lastOrigin==d||Up(t,d,at(c.done),r))?c.done[c.done.length-1]=r:Js(r,c.done),c.lastSelTime=+new Date,c.lastSelOrigin=d,c.lastSelOp=l,o&&o.clearRedo!==!1&&$c(c.undone)}function Js(t,r){var l=at(r);l&&l.ranges&&l.equals(t)||r.push(t)}function Vc(t,r,l,o){var c=r["spans_"+t.id],d=0;t.iter(Math.max(t.first,l),Math.min(t.first+t.size,o),function(m){m.markedSpans&&((c||(c=r["spans_"+t.id]={}))[d]=m.markedSpans),++d})}function jp(t){if(!t)return null;for(var r,l=0;l<t.length;++l)t[l].marker.explicitlyCleared?r||(r=t.slice(0,l)):r&&r.push(t[l]);return r?r.length?r:null:t}function Vp(t,r){var l=r["spans_"+t.id];if(!l)return null;for(var o=[],c=0;c<r.text.length;++c)o.push(jp(l[c]));return o}function Yc(t,r){var l=Vp(t,r),o=qo(t,r);if(!l)return o;if(!o)return l;for(var c=0;c<l.length;++c){var d=l[c],m=o[c];if(d&&m)t:for(var v=0;v<m.length;++v){for(var x=m[v],w=0;w<d.length;++w)if(d[w].marker==x.marker)continue t;d.push(x)}else m&&(l[c]=m)}return l}function Ji(t,r,l){for(var o=[],c=0;c<t.length;++c){var d=t[c];if(d.ranges){o.push(l?on.prototype.deepCopy.call(d):d);continue}var m=d.changes,v=[];o.push({changes:v});for(var x=0;x<m.length;++x){var w=m[x],N=void 0;if(v.push({from:w.from,to:w.to,text:w.text}),r)for(var P in w)(N=P.match(/^spans_(\d+)$/))&&mt(r,Number(N[1]))>-1&&(at(v)[P]=w[P],delete w[P])}}return o}function La(t,r,l,o){if(o){var c=t.anchor;if(l){var d=k(r,c)<0;d!=k(l,c)<0?(c=r,r=l):d!=k(r,l)<0&&(r=l)}return new Zt(c,r)}else return new Zt(l||r,r)}function Zs(t,r,l,o,c){c==null&&(c=t.cm&&(t.cm.display.shift||t.extend)),Ae(t,new on([La(t.sel.primary(),r,l,c)],0),o)}function Xc(t,r,l){for(var o=[],c=t.cm&&(t.cm.display.shift||t.extend),d=0;d<t.sel.ranges.length;d++)o[d]=La(t.sel.ranges[d],r[d],null,c);var m=bn(t.cm,o,t.sel.primIndex);Ae(t,m,l)}function Na(t,r,l,o){var c=t.sel.ranges.slice(0);c[r]=l,Ae(t,bn(t.cm,c,t.sel.primIndex),o)}function Kc(t,r,l,o){Ae(t,ni(r,l),o)}function Yp(t,r,l){var o={ranges:r.ranges,update:function(c){this.ranges=[];for(var d=0;d<c.length;d++)this.ranges[d]=new Zt(yt(t,c[d].anchor),yt(t,c[d].head))},origin:l&&l.origin};return Tt(t,"beforeSelectionChange",t,o),t.cm&&Tt(t.cm,"beforeSelectionChange",t.cm,o),o.ranges!=r.ranges?bn(t.cm,o.ranges,o.ranges.length-1):r}function Gc(t,r,l){var o=t.history.done,c=at(o);c&&c.ranges?(o[o.length-1]=r,Qs(t,r,l)):Ae(t,r,l)}function Ae(t,r,l){Qs(t,r,l),$p(t,t.sel,t.cm?t.cm.curOp.id:NaN,l)}function Qs(t,r,l){(te(t,"beforeSelectionChange")||t.cm&&te(t.cm,"beforeSelectionChange"))&&(r=Yp(t,r,l));var o=l&&l.bias||(k(r.primary().head,t.sel.primary().head)<0?-1:1);qc(t,Zc(t,r,o,!0)),!(l&&l.scroll===!1)&&t.cm&&t.cm.getOption("readOnly")!="nocursor"&&Gi(t.cm)}function qc(t,r){r.equals(t.sel)||(t.sel=r,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,Xe(t.cm)),we(t,"cursorActivity",t))}function Jc(t){qc(t,Zc(t,t.sel,null,!1))}function Zc(t,r,l,o){for(var c,d=0;d<r.ranges.length;d++){var m=r.ranges[d],v=r.ranges.length==t.sel.ranges.length&&t.sel.ranges[d],x=to(t,m.anchor,v&&v.anchor,l,o),w=to(t,m.head,v&&v.head,l,o);(c||x!=m.anchor||w!=m.head)&&(c||(c=r.ranges.slice(0,d)),c[d]=new Zt(x,w))}return c?bn(t.cm,c,r.primIndex):r}function Zi(t,r,l,o,c){var d=wt(t,r.line);if(d.markedSpans)for(var m=0;m<d.markedSpans.length;++m){var v=d.markedSpans[m],x=v.marker,w="selectLeft"in x?!x.selectLeft:x.inclusiveLeft,N="selectRight"in x?!x.selectRight:x.inclusiveRight;if((v.from==null||(w?v.from<=r.ch:v.from<r.ch))&&(v.to==null||(N?v.to>=r.ch:v.to>r.ch))){if(c&&(Tt(x,"beforeCursorEnter"),x.explicitlyCleared))if(d.markedSpans){--m;continue}else break;if(!x.atomic)continue;if(l){var P=x.find(o<0?1:-1),W=void 0;if((o<0?N:w)&&(P=Qc(t,P,-o,P&&P.line==r.line?d:null)),P&&P.line==r.line&&(W=k(P,l))&&(o<0?W<0:W>0))return Zi(t,P,r,o,c)}var E=x.find(o<0?-1:1);return(o<0?w:N)&&(E=Qc(t,E,o,E.line==r.line?d:null)),E?Zi(t,E,r,o,c):null}}return r}function to(t,r,l,o,c){var d=o||1,m=Zi(t,r,l,d,c)||!c&&Zi(t,r,l,d,!0)||Zi(t,r,l,-d,c)||!c&&Zi(t,r,l,-d,!0);return m||(t.cantEdit=!0,et(t.first,0))}function Qc(t,r,l,o){return l<0&&r.ch==0?r.line>t.first?yt(t,et(r.line-1)):null:l>0&&r.ch==(o||wt(t,r.line)).text.length?r.line<t.first+t.size-1?et(r.line+1,0):null:new et(r.line,r.ch+l)}function tu(t){t.setSelection(et(t.firstLine(),0),et(t.lastLine()),Vt)}function eu(t,r,l){var o={canceled:!1,from:r.from,to:r.to,text:r.text,origin:r.origin,cancel:function(){return o.canceled=!0}};return l&&(o.update=function(c,d,m,v){c&&(o.from=yt(t,c)),d&&(o.to=yt(t,d)),m&&(o.text=m),v!==void 0&&(o.origin=v)}),Tt(t,"beforeChange",t,o),t.cm&&Tt(t.cm,"beforeChange",t.cm,o),o.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:o.from,to:o.to,text:o.text,origin:o.origin}}function Qi(t,r,l){if(t.cm){if(!t.cm.curOp)return ke(t.cm,Qi)(t,r,l);if(t.cm.state.suppressEdits)return}if(!((te(t,"beforeChange")||t.cm&&te(t.cm,"beforeChange"))&&(r=eu(t,r,!0),!r))){var o=Yl&&!l&&$d(t,r.from,r.to);if(o)for(var c=o.length-1;c>=0;--c)nu(t,{from:o[c].from,to:o[c].to,text:c?[""]:r.text,origin:r.origin});else nu(t,r)}}function nu(t,r){if(!(r.text.length==1&&r.text[0]==""&&k(r.from,r.to)==0)){var l=ka(t,r);jc(t,r,l,t.cm?t.cm.curOp.id:NaN),zr(t,r,l,qo(t,r));var o=[];ri(t,function(c,d){!d&&mt(o,c.history)==-1&&(ou(c.history,r),o.push(c.history)),zr(c,r,null,qo(c,r))})}}function eo(t,r,l){var o=t.cm&&t.cm.state.suppressEdits;if(!(o&&!l)){for(var c=t.history,d,m=t.sel,v=r=="undo"?c.done:c.undone,x=r=="undo"?c.undone:c.done,w=0;w<v.length&&(d=v[w],!(l?d.ranges&&!d.equals(t.sel):!d.ranges));w++);if(w!=v.length){for(c.lastOrigin=c.lastSelOrigin=null;;)if(d=v.pop(),d.ranges){if(Js(d,x),l&&!d.equals(t.sel)){Ae(t,d,{clearRedo:!1});return}m=d}else if(o){v.push(d);return}else break;var N=[];Js(m,x),x.push({changes:N,generation:c.generation}),c.generation=d.generation||++c.maxGeneration;for(var P=te(t,"beforeChange")||t.cm&&te(t.cm,"beforeChange"),W=function(X){var ot=d.changes[X];if(ot.origin=r,P&&!eu(t,ot,!1))return v.length=0,{};N.push(Ta(t,ot));var ft=X?ka(t,ot):at(v);zr(t,ot,ft,Yc(t,ot)),!X&&t.cm&&t.cm.scrollIntoView({from:ot.from,to:ii(ot)});var dt=[];ri(t,function(ht,xt){!xt&&mt(dt,ht.history)==-1&&(ou(ht.history,ot),dt.push(ht.history)),zr(ht,ot,null,Yc(ht,ot))})},E=d.changes.length-1;E>=0;--E){var B=W(E);if(B)return B.v}}}}function iu(t,r){if(r!=0&&(t.first+=r,t.sel=new on(Dt(t.sel.ranges,function(c){return new Zt(et(c.anchor.line+r,c.anchor.ch),et(c.head.line+r,c.head.ch))}),t.sel.primIndex),t.cm)){ze(t.cm,t.first,t.first-r,r);for(var l=t.cm.display,o=l.viewFrom;o<l.viewTo;o++)ti(t.cm,o,"gutter")}}function zr(t,r,l,o){if(t.cm&&!t.cm.curOp)return ke(t.cm,zr)(t,r,l,o);if(r.to.line<t.first){iu(t,r.text.length-1-(r.to.line-r.from.line));return}if(!(r.from.line>t.lastLine())){if(r.from.line<t.first){var c=r.text.length-1-(t.first-r.from.line);iu(t,c),r={from:et(t.first,0),to:et(r.to.line+c,r.to.ch),text:[at(r.text)],origin:r.origin}}var d=t.lastLine();r.to.line>d&&(r={from:r.from,to:et(d,wt(t,d).text.length),text:[r.text[0]],origin:r.origin}),r.removed=kn(t,r.from,r.to),l||(l=ka(t,r)),t.cm?Xp(t.cm,r,o):Ca(t,r,o),Qs(t,l,Vt),t.cantEdit&&to(t,et(t.firstLine(),0))&&(t.cantEdit=!1)}}function Xp(t,r,l){var o=t.doc,c=t.display,d=r.from,m=r.to,v=!1,x=d.line;t.options.lineWrapping||(x=Jt(vn(wt(o,d.line))),o.iter(x,m.line+1,function(E){if(E==c.maxLine)return v=!0,!0})),o.sel.contains(r.from,r.to)>-1&&Xe(t),Ca(o,r,l,wc(t)),t.options.lineWrapping||(o.iter(x,d.line+r.text.length,function(E){var B=Hs(E);B>c.maxLineLength&&(c.maxLine=E,c.maxLineLength=B,c.maxLineChanged=!0,v=!1)}),v&&(t.curOp.updateMaxLine=!0)),Fd(o,d.line),Rr(t,400);var w=r.text.length-(m.line-d.line)-1;r.full?ze(t):d.line==m.line&&r.text.length==1&&!zc(t.doc,r)?ti(t,d.line,"text"):ze(t,d.line,m.line+1,w);var N=te(t,"changes"),P=te(t,"change");if(P||N){var W={from:d,to:m,text:r.text,removed:r.removed,origin:r.origin};P&&we(t,"change",t,W),N&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(W)}t.display.selForContextMenu=null}function tr(t,r,l,o,c){var d;o||(o=l),k(o,l)<0&&(d=[o,l],l=d[0],o=d[1]),typeof r=="string"&&(r=t.splitLines(r)),Qi(t,{from:l,to:o,text:r,origin:c})}function ru(t,r,l,o){l<t.line?t.line+=o:r<t.line&&(t.line=r,t.ch=0)}function su(t,r,l,o){for(var c=0;c<t.length;++c){var d=t[c],m=!0;if(d.ranges){d.copied||(d=t[c]=d.deepCopy(),d.copied=!0);for(var v=0;v<d.ranges.length;v++)ru(d.ranges[v].anchor,r,l,o),ru(d.ranges[v].head,r,l,o);continue}for(var x=0;x<d.changes.length;++x){var w=d.changes[x];if(l<w.from.line)w.from=et(w.from.line+o,w.from.ch),w.to=et(w.to.line+o,w.to.ch);else if(r<=w.to.line){m=!1;break}}m||(t.splice(0,c+1),c=0)}}function ou(t,r){var l=r.from.line,o=r.to.line,c=r.text.length-(o-l)-1;su(t.done,l,o,c),su(t.undone,l,o,c)}function Br(t,r,l,o){var c=r,d=r;return typeof r=="number"?d=wt(t,Xt(t,r)):c=Jt(r),c==null?null:(o(d,c)&&t.cm&&ti(t.cm,c,l),d)}function Ur(t){this.lines=t,this.parent=null;for(var r=0,l=0;l<t.length;++l)t[l].parent=this,r+=t[l].height;this.height=r}Ur.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,r){for(var l=t,o=t+r;l<o;++l){var c=this.lines[l];this.height-=c.height,Kd(c),we(c,"delete")}this.lines.splice(t,r)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,r,l){this.height+=l,this.lines=this.lines.slice(0,t).concat(r).concat(this.lines.slice(t));for(var o=0;o<r.length;++o)r[o].parent=this},iterN:function(t,r,l){for(var o=t+r;t<o;++t)if(l(this.lines[t]))return!0}};function $r(t){this.children=t;for(var r=0,l=0,o=0;o<t.length;++o){var c=t[o];r+=c.chunkSize(),l+=c.height,c.parent=this}this.size=r,this.height=l,this.parent=null}$r.prototype={chunkSize:function(){return this.size},removeInner:function(t,r){this.size-=r;for(var l=0;l<this.children.length;++l){var o=this.children[l],c=o.chunkSize();if(t<c){var d=Math.min(r,c-t),m=o.height;if(o.removeInner(t,d),this.height-=m-o.height,c==d&&(this.children.splice(l--,1),o.parent=null),(r-=d)==0)break;t=0}else t-=c}if(this.size-r<25&&(this.children.length>1||!(this.children[0]instanceof Ur))){var v=[];this.collapse(v),this.children=[new Ur(v)],this.children[0].parent=this}},collapse:function(t){for(var r=0;r<this.children.length;++r)this.children[r].collapse(t)},insertInner:function(t,r,l){this.size+=r.length,this.height+=l;for(var o=0;o<this.children.length;++o){var c=this.children[o],d=c.chunkSize();if(t<=d){if(c.insertInner(t,r,l),c.lines&&c.lines.length>50){for(var m=c.lines.length%25+25,v=m;v<c.lines.length;){var x=new Ur(c.lines.slice(v,v+=25));c.height-=x.height,this.children.splice(++o,0,x),x.parent=this}c.lines=c.lines.slice(0,m),this.maybeSpill()}break}t-=d}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var r=t.children.splice(t.children.length-5,5),l=new $r(r);if(t.parent){t.size-=l.size,t.height-=l.height;var c=mt(t.parent.children,t);t.parent.children.splice(c+1,0,l)}else{var o=new $r(t.children);o.parent=t,t.children=[o,l],t=o}l.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,r,l){for(var o=0;o<this.children.length;++o){var c=this.children[o],d=c.chunkSize();if(t<d){var m=Math.min(r,d-t);if(c.iterN(t,m,l))return!0;if((r-=m)==0)break;t=0}else t-=d}}};var jr=function(t,r,l){if(l)for(var o in l)l.hasOwnProperty(o)&&(this[o]=l[o]);this.doc=t,this.node=r};jr.prototype.clear=function(){var t=this.doc.cm,r=this.line.widgets,l=this.line,o=Jt(l);if(!(o==null||!r)){for(var c=0;c<r.length;++c)r[c]==this&&r.splice(c--,1);r.length||(l.widgets=null);var d=Dr(this);Ke(l,Math.max(0,l.height-d)),t&&(Ge(t,function(){au(t,l,-d),ti(t,o,"widget")}),we(t,"lineWidgetCleared",t,this,o))}},jr.prototype.changed=function(){var t=this,r=this.height,l=this.doc.cm,o=this.line;this.height=null;var c=Dr(this)-r;c&&(Qn(this.doc,o)||Ke(o,o.height+c),l&&Ge(l,function(){l.curOp.forceUpdate=!0,au(l,o,c),we(l,"lineWidgetChanged",l,t,Jt(o))}))},tn(jr);function au(t,r,l){Hn(r)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&va(t,l)}function Kp(t,r,l,o){var c=new jr(t,l,o),d=t.cm;return d&&c.noHScroll&&(d.display.alignWidgets=!0),Br(t,r,"widget",function(m){var v=m.widgets||(m.widgets=[]);if(c.insertAt==null?v.push(c):v.splice(Math.min(v.length,Math.max(0,c.insertAt)),0,c),c.line=m,d&&!Qn(t,m)){var x=Hn(m)<t.scrollTop;Ke(m,m.height+Dr(c)),x&&va(d,c.height),d.curOp.forceUpdate=!0}return!0}),d&&we(d,"lineWidgetAdded",d,c,typeof r=="number"?r:Jt(r)),c}var lu=0,si=function(t,r){this.lines=[],this.type=r,this.doc=t,this.id=++lu};si.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,r=t&&!t.curOp;if(r&&ki(t),te(this,"clear")){var l=this.find();l&&we(this,"clear",l.from,l.to)}for(var o=null,c=null,d=0;d<this.lines.length;++d){var m=this.lines[d],v=Lr(m.markedSpans,this);t&&!this.collapsed?ti(t,Jt(m),"text"):t&&(v.to!=null&&(c=Jt(m)),v.from!=null&&(o=Jt(m))),m.markedSpans=Wd(m.markedSpans,v),v.from==null&&this.collapsed&&!Qn(this.doc,m)&&t&&Ke(m,Yi(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var x=0;x<this.lines.length;++x){var w=vn(this.lines[x]),N=Hs(w);N>t.display.maxLineLength&&(t.display.maxLine=w,t.display.maxLineLength=N,t.display.maxLineChanged=!0)}o!=null&&t&&this.collapsed&&ze(t,o,c+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&Jc(t.doc)),t&&we(t,"markerCleared",t,this,o,c),r&&Si(t),this.parent&&this.parent.clear()}},si.prototype.find=function(t,r){t==null&&this.type=="bookmark"&&(t=1);for(var l,o,c=0;c<this.lines.length;++c){var d=this.lines[c],m=Lr(d.markedSpans,this);if(m.from!=null&&(l=et(r?d:Jt(d),m.from),t==-1))return l;if(m.to!=null&&(o=et(r?d:Jt(d),m.to),t==1))return o}return l&&{from:l,to:o}},si.prototype.changed=function(){var t=this,r=this.find(-1,!0),l=this,o=this.doc.cm;!r||!o||Ge(o,function(){var c=r.line,d=Jt(r.line),m=ra(o,d);if(m&&(pc(m),o.curOp.selectionChanged=o.curOp.forceUpdate=!0),o.curOp.updateMaxLine=!0,!Qn(l.doc,c)&&l.height!=null){var v=l.height;l.height=null;var x=Dr(l)-v;x&&Ke(c,c.height+x)}we(o,"markerChanged",o,t)})},si.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var r=this.doc.cm.curOp;(!r.maybeHiddenMarkers||mt(r.maybeHiddenMarkers,this)==-1)&&(r.maybeUnhiddenMarkers||(r.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},si.prototype.detachLine=function(t){if(this.lines.splice(mt(this.lines,t),1),!this.lines.length&&this.doc.cm){var r=this.doc.cm.curOp;(r.maybeHiddenMarkers||(r.maybeHiddenMarkers=[])).push(this)}},tn(si);function er(t,r,l,o,c){if(o&&o.shared)return Gp(t,r,l,o,c);if(t.cm&&!t.cm.curOp)return ke(t.cm,er)(t,r,l,o,c);var d=new si(t,c),m=k(r,l);if(o&&Ot(o,d,!1),m>0||m==0&&d.clearWhenEmpty!==!1)return d;if(d.replacedWith&&(d.collapsed=!0,d.widgetNode=C("span",[d.replacedWith],"CodeMirror-widget"),o.handleMouseEvents||d.widgetNode.setAttribute("cm-ignore-events","true"),o.insertLeft&&(d.widgetNode.insertLeft=!0)),d.collapsed){if(Zl(t,r.line,r,l,d)||r.line!=l.line&&Zl(t,l.line,r,l,d))throw new Error("Inserting collapsed marker partially overlapping an existing one");Hd()}d.addToHistory&&jc(t,{from:r,to:l,origin:"markText"},t.sel,NaN);var v=r.line,x=t.cm,w;if(t.iter(v,l.line+1,function(P){x&&d.collapsed&&!x.options.lineWrapping&&vn(P)==x.display.maxLine&&(w=!0),d.collapsed&&v!=r.line&&Ke(P,0),zd(P,new Is(d,v==r.line?r.ch:null,v==l.line?l.ch:null),t.cm&&t.cm.curOp),++v}),d.collapsed&&t.iter(r.line,l.line+1,function(P){Qn(t,P)&&Ke(P,0)}),d.clearOnEnter&&Y(d,"beforeCursorEnter",function(){return d.clear()}),d.readOnly&&(Rd(),(t.history.done.length||t.history.undone.length)&&t.clearHistory()),d.collapsed&&(d.id=++lu,d.atomic=!0),x){if(w&&(x.curOp.updateMaxLine=!0),d.collapsed)ze(x,r.line,l.line+1);else if(d.className||d.startStyle||d.endStyle||d.css||d.attributes||d.title)for(var N=r.line;N<=l.line;N++)ti(x,N,"text");d.atomic&&Jc(x.doc),we(x,"markerAdded",x,d)}return d}var Vr=function(t,r){this.markers=t,this.primary=r;for(var l=0;l<t.length;++l)t[l].parent=this};Vr.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();we(this,"clear")}},Vr.prototype.find=function(t,r){return this.primary.find(t,r)},tn(Vr);function Gp(t,r,l,o,c){o=Ot(o),o.shared=!1;var d=[er(t,r,l,o,c)],m=d[0],v=o.widgetNode;return ri(t,function(x){v&&(o.widgetNode=v.cloneNode(!0)),d.push(er(x,yt(x,r),yt(x,l),o,c));for(var w=0;w<x.linked.length;++w)if(x.linked[w].isParent)return;m=at(d)}),new Vr(d,m)}function cu(t){return t.findMarks(et(t.first,0),t.clipPos(et(t.lastLine())),function(r){return r.parent})}function qp(t,r){for(var l=0;l<r.length;l++){var o=r[l],c=o.find(),d=t.clipPos(c.from),m=t.clipPos(c.to);if(k(d,m)){var v=er(t,d,m,o.primary,o.primary.type);o.markers.push(v),v.parent=o}}}function Jp(t){for(var r=function(o){var c=t[o],d=[c.primary.doc];ri(c.primary.doc,function(x){return d.push(x)});for(var m=0;m<c.markers.length;m++){var v=c.markers[m];mt(d,v.doc)==-1&&(v.parent=null,c.markers.splice(m--,1))}},l=0;l<t.length;l++)r(l)}var Zp=0,Be=function(t,r,l,o,c){if(!(this instanceof Be))return new Be(t,r,l,o,c);l==null&&(l=0),$r.call(this,[new Ur([new $i("",null)])]),this.first=l,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=l;var d=et(l,0);this.sel=ni(d),this.history=new qs(null),this.id=++Zp,this.modeOption=r,this.lineSep=o,this.direction=c=="rtl"?"rtl":"ltr",this.extend=!1,typeof t=="string"&&(t=this.splitLines(t)),Ca(this,{from:d,to:d,text:t}),Ae(this,ni(d),Vt)};Be.prototype=At($r.prototype,{constructor:Be,iter:function(t,r,l){l?this.iterN(t-this.first,r-t,l):this.iterN(this.first,this.first+this.size,t)},insert:function(t,r){for(var l=0,o=0;o<r.length;++o)l+=r[o].height;this.insertInner(t-this.first,r,l)},remove:function(t,r){this.removeInner(t-this.first,r)},getValue:function(t){var r=Sr(this,this.first,this.first+this.size);return t===!1?r:r.join(t||this.lineSeparator())},setValue:Se(function(t){var r=et(this.first,0),l=this.first+this.size-1;Qi(this,{from:r,to:et(l,wt(this,l).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Ar(this.cm,0,0),Ae(this,ni(r),Vt)}),replaceRange:function(t,r,l,o){r=yt(this,r),l=l?yt(this,l):r,tr(this,t,r,l,o)},getRange:function(t,r,l){var o=kn(this,yt(this,t),yt(this,r));return l===!1?o:l===""?o.join(""):o.join(l||this.lineSeparator())},getLine:function(t){var r=this.getLineHandle(t);return r&&r.text},getLineHandle:function(t){if(mi(this,t))return wt(this,t)},getLineNumber:function(t){return Jt(t)},getLineHandleVisualStart:function(t){return typeof t=="number"&&(t=wt(this,t)),vn(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return yt(this,t)},getCursor:function(t){var r=this.sel.primary(),l;return t==null||t=="head"?l=r.head:t=="anchor"?l=r.anchor:t=="end"||t=="to"||t===!1?l=r.to():l=r.from(),l},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Se(function(t,r,l){Kc(this,yt(this,typeof t=="number"?et(t,r||0):t),null,l)}),setSelection:Se(function(t,r,l){Kc(this,yt(this,t),yt(this,r||t),l)}),extendSelection:Se(function(t,r,l){Zs(this,yt(this,t),r&&yt(this,r),l)}),extendSelections:Se(function(t,r){Xc(this,sn(this,t),r)}),extendSelectionsBy:Se(function(t,r){var l=Dt(this.sel.ranges,t);Xc(this,sn(this,l),r)}),setSelections:Se(function(t,r,l){if(t.length){for(var o=[],c=0;c<t.length;c++)o[c]=new Zt(yt(this,t[c].anchor),yt(this,t[c].head||t[c].anchor));r==null&&(r=Math.min(t.length-1,this.sel.primIndex)),Ae(this,bn(this.cm,o,r),l)}}),addSelection:Se(function(t,r,l){var o=this.sel.ranges.slice(0);o.push(new Zt(yt(this,t),yt(this,r||t))),Ae(this,bn(this.cm,o,o.length-1),l)}),getSelection:function(t){for(var r=this.sel.ranges,l,o=0;o<r.length;o++){var c=kn(this,r[o].from(),r[o].to());l=l?l.concat(c):c}return t===!1?l:l.join(t||this.lineSeparator())},getSelections:function(t){for(var r=[],l=this.sel.ranges,o=0;o<l.length;o++){var c=kn(this,l[o].from(),l[o].to());t!==!1&&(c=c.join(t||this.lineSeparator())),r[o]=c}return r},replaceSelection:function(t,r,l){for(var o=[],c=0;c<this.sel.ranges.length;c++)o[c]=t;this.replaceSelections(o,r,l||"+input")},replaceSelections:Se(function(t,r,l){for(var o=[],c=this.sel,d=0;d<c.ranges.length;d++){var m=c.ranges[d];o[d]={from:m.from(),to:m.to(),text:this.splitLines(t[d]),origin:l}}for(var v=r&&r!="end"&&Wp(this,o,r),x=o.length-1;x>=0;x--)Qi(this,o[x]);v?Gc(this,v):this.cm&&Gi(this.cm)}),undo:Se(function(){eo(this,"undo")}),redo:Se(function(){eo(this,"redo")}),undoSelection:Se(function(){eo(this,"undo",!0)}),redoSelection:Se(function(){eo(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,r=0,l=0,o=0;o<t.done.length;o++)t.done[o].ranges||++r;for(var c=0;c<t.undone.length;c++)t.undone[c].ranges||++l;return{undo:r,redo:l}},clearHistory:function(){var t=this;this.history=new qs(this.history),ri(this,function(r){return r.history=t.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Ji(this.history.done),undone:Ji(this.history.undone)}},setHistory:function(t){var r=this.history=new qs(this.history);r.done=Ji(t.done.slice(0),null,!0),r.undone=Ji(t.undone.slice(0),null,!0)},setGutterMarker:Se(function(t,r,l){return Br(this,t,"gutter",function(o){var c=o.gutterMarkers||(o.gutterMarkers={});return c[r]=l,!l&&pn(c)&&(o.gutterMarkers=null),!0})}),clearGutter:Se(function(t){var r=this;this.iter(function(l){l.gutterMarkers&&l.gutterMarkers[t]&&Br(r,l,"gutter",function(){return l.gutterMarkers[t]=null,pn(l.gutterMarkers)&&(l.gutterMarkers=null),!0})})}),lineInfo:function(t){var r;if(typeof t=="number"){if(!mi(this,t)||(r=t,t=wt(this,t),!t))return null}else if(r=Jt(t),r==null)return null;return{line:r,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:Se(function(t,r,l){return Br(this,t,r=="gutter"?"gutter":"class",function(o){var c=r=="text"?"textClass":r=="background"?"bgClass":r=="gutter"?"gutterClass":"wrapClass";if(!o[c])o[c]=l;else{if(ct(l).test(o[c]))return!1;o[c]+=" "+l}return!0})}),removeLineClass:Se(function(t,r,l){return Br(this,t,r=="gutter"?"gutter":"class",function(o){var c=r=="text"?"textClass":r=="background"?"bgClass":r=="gutter"?"gutterClass":"wrapClass",d=o[c];if(d)if(l==null)o[c]=null;else{var m=d.match(ct(l));if(!m)return!1;var v=m.index+m[0].length;o[c]=d.slice(0,m.index)+(!m.index||v==d.length?"":" ")+d.slice(v)||null}else return!1;return!0})}),addLineWidget:Se(function(t,r,l){return Kp(this,t,r,l)}),removeLineWidget:function(t){t.clear()},markText:function(t,r,l){return er(this,yt(this,t),yt(this,r),l,l&&l.type||"range")},setBookmark:function(t,r){var l={replacedWith:r&&(r.nodeType==null?r.widget:r),insertLeft:r&&r.insertLeft,clearWhenEmpty:!1,shared:r&&r.shared,handleMouseEvents:r&&r.handleMouseEvents};return t=yt(this,t),er(this,t,t,l,"bookmark")},findMarksAt:function(t){t=yt(this,t);var r=[],l=wt(this,t.line).markedSpans;if(l)for(var o=0;o<l.length;++o){var c=l[o];(c.from==null||c.from<=t.ch)&&(c.to==null||c.to>=t.ch)&&r.push(c.marker.parent||c.marker)}return r},findMarks:function(t,r,l){t=yt(this,t),r=yt(this,r);var o=[],c=t.line;return this.iter(t.line,r.line+1,function(d){var m=d.markedSpans;if(m)for(var v=0;v<m.length;v++){var x=m[v];!(x.to!=null&&c==t.line&&t.ch>=x.to||x.from==null&&c!=t.line||x.from!=null&&c==r.line&&x.from>=r.ch)&&(!l||l(x.marker))&&o.push(x.marker.parent||x.marker)}++c}),o},getAllMarks:function(){var t=[];return this.iter(function(r){var l=r.markedSpans;if(l)for(var o=0;o<l.length;++o)l[o].from!=null&&t.push(l[o].marker)}),t},posFromIndex:function(t){var r,l=this.first,o=this.lineSeparator().length;return this.iter(function(c){var d=c.text.length+o;if(d>t)return r=t,!0;t-=d,++l}),yt(this,et(l,r))},indexFromPos:function(t){t=yt(this,t);var r=t.ch;if(t.line<this.first||t.ch<0)return 0;var l=this.lineSeparator().length;return this.iter(this.first,t.line,function(o){r+=o.text.length+l}),r},copy:function(t){var r=new Be(Sr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return r.scrollTop=this.scrollTop,r.scrollLeft=this.scrollLeft,r.sel=this.sel,r.extend=!1,t&&(r.history.undoDepth=this.history.undoDepth,r.setHistory(this.getHistory())),r},linkedDoc:function(t){t||(t={});var r=this.first,l=this.first+this.size;t.from!=null&&t.from>r&&(r=t.from),t.to!=null&&t.to<l&&(l=t.to);var o=new Be(Sr(this,r,l),t.mode||this.modeOption,r,this.lineSep,this.direction);return t.sharedHist&&(o.history=this.history),(this.linked||(this.linked=[])).push({doc:o,sharedHist:t.sharedHist}),o.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],qp(o,cu(this)),o},unlinkDoc:function(t){if(t instanceof ae&&(t=t.doc),this.linked)for(var r=0;r<this.linked.length;++r){var l=this.linked[r];if(l.doc==t){this.linked.splice(r,1),t.unlinkDoc(this),Jp(cu(this));break}}if(t.history==this.history){var o=[t.id];ri(t,function(c){return o.push(c.id)},!0),t.history=new qs(null),t.history.done=Ji(this.history.done,o),t.history.undone=Ji(this.history.undone,o)}},iterLinkedDocs:function(t){ri(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):xr(t)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Se(function(t){t!="rtl"&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(r){return r.order=null}),this.cm&&zp(this.cm))})}),Be.prototype.eachLine=Be.prototype.iter;var uu=0;function Qp(t){var r=this;if(fu(r),!(oe(r,t)||Wn(r.display,t))){Pe(t),p&&(uu=+new Date);var l=bi(r,t,!0),o=t.dataTransfer.files;if(!(!l||r.isReadOnly()))if(o&&o.length&&window.FileReader&&window.File)for(var c=o.length,d=Array(c),m=0,v=function(){++m==c&&ke(r,function(){l=yt(r.doc,l);var E={from:l,to:l,text:r.doc.splitLines(d.filter(function(B){return B!=null}).join(r.doc.lineSeparator())),origin:"paste"};Qi(r.doc,E),Gc(r.doc,ni(yt(r.doc,l),yt(r.doc,ii(E))))})()},x=function(E,B){if(r.options.allowDropFileTypes&&mt(r.options.allowDropFileTypes,E.type)==-1){v();return}var X=new FileReader;X.onerror=function(){return v()},X.onload=function(){var ot=X.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(ot)){v();return}d[B]=ot,v()},X.readAsText(E)},w=0;w<o.length;w++)x(o[w],w);else{if(r.state.draggingText&&r.doc.sel.contains(l)>-1){r.state.draggingText(t),setTimeout(function(){return r.display.input.focus()},20);return}try{var N=t.dataTransfer.getData("Text");if(N){var P;if(r.state.draggingText&&!r.state.draggingText.copy&&(P=r.listSelections()),Qs(r.doc,ni(l,l)),P)for(var W=0;W<P.length;++W)tr(r.doc,"",P[W].anchor,P[W].head,"drag");r.replaceSelection(N,"around","paste"),r.display.input.focus()}}catch{}}}}function tg(t,r){if(p&&(!t.state.draggingText||+new Date-uu<100)){gi(r);return}if(!(oe(t,r)||Wn(t.display,r))&&(r.dataTransfer.setData("Text",t.getSelection()),r.dataTransfer.effectAllowed="copyMove",r.dataTransfer.setDragImage&&!M)){var l=I("img",null,null,"position: fixed; left: 0; top: 0;");l.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",T&&(l.width=l.height=1,t.display.wrapper.appendChild(l),l._top=l.offsetTop),r.dataTransfer.setDragImage(l,0,0),T&&l.parentNode.removeChild(l)}}function eg(t,r){var l=bi(t,r);if(l){var o=document.createDocumentFragment();ha(t,l,o),t.display.dragCursor||(t.display.dragCursor=I("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),H(t.display.dragCursor,o)}}function fu(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function hu(t){if(document.getElementsByClassName){for(var r=document.getElementsByClassName("CodeMirror"),l=[],o=0;o<r.length;o++){var c=r[o].CodeMirror;c&&l.push(c)}l.length&&l[0].operation(function(){for(var d=0;d<l.length;d++)t(l[d])})}}var du=!1;function ng(){du||(ig(),du=!0)}function ig(){var t;Y(window,"resize",function(){t==null&&(t=setTimeout(function(){t=null,hu(rg)},100))}),Y(window,"blur",function(){return hu(Ki)})}function rg(t){var r=t.display;r.cachedCharWidth=r.cachedTextHeight=r.cachedPaddingH=null,r.scrollbarsClipped=!1,t.setSize()}for(var oi={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Yr=0;Yr<10;Yr++)oi[Yr+48]=oi[Yr+96]=String(Yr);for(var no=65;no<=90;no++)oi[no]=String.fromCharCode(no);for(var Xr=1;Xr<=12;Xr++)oi[Xr+111]=oi[Xr+63235]="F"+Xr;var Bn={};Bn.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Bn.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Bn.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Bn.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Bn.default=J?Bn.macDefault:Bn.pcDefault;function sg(t){var r=t.split(/-(?!$)/);t=r[r.length-1];for(var l,o,c,d,m=0;m<r.length-1;m++){var v=r[m];if(/^(cmd|meta|m)$/i.test(v))d=!0;else if(/^a(lt)?$/i.test(v))l=!0;else if(/^(c|ctrl|control)$/i.test(v))o=!0;else if(/^s(hift)?$/i.test(v))c=!0;else throw new Error("Unrecognized modifier name: "+v)}return l&&(t="Alt-"+t),o&&(t="Ctrl-"+t),d&&(t="Cmd-"+t),c&&(t="Shift-"+t),t}function og(t){var r={};for(var l in t)if(t.hasOwnProperty(l)){var o=t[l];if(/^(name|fallthrough|(de|at)tach)$/.test(l))continue;if(o=="..."){delete t[l];continue}for(var c=Dt(l.split(" "),sg),d=0;d<c.length;d++){var m=void 0,v=void 0;d==c.length-1?(v=c.join(" "),m=o):(v=c.slice(0,d+1).join(" "),m="...");var x=r[v];if(!x)r[v]=m;else if(x!=m)throw new Error("Inconsistent bindings for "+v)}delete t[l]}for(var w in r)t[w]=r[w];return t}function nr(t,r,l,o){r=io(r);var c=r.call?r.call(t,o):r[t];if(c===!1)return"nothing";if(c==="...")return"multi";if(c!=null&&l(c))return"handled";if(r.fallthrough){if(Object.prototype.toString.call(r.fallthrough)!="[object Array]")return nr(t,r.fallthrough,l,o);for(var d=0;d<r.fallthrough.length;d++){var m=nr(t,r.fallthrough[d],l,o);if(m)return m}}}function pu(t){var r=typeof t=="string"?t:oi[t.keyCode];return r=="Ctrl"||r=="Alt"||r=="Shift"||r=="Mod"}function gu(t,r,l){var o=t;return r.altKey&&o!="Alt"&&(t="Alt-"+t),(Z?r.metaKey:r.ctrlKey)&&o!="Ctrl"&&(t="Ctrl-"+t),(Z?r.ctrlKey:r.metaKey)&&o!="Mod"&&(t="Cmd-"+t),!l&&r.shiftKey&&o!="Shift"&&(t="Shift-"+t),t}function mu(t,r){if(T&&t.keyCode==34&&t.char)return!1;var l=oi[t.keyCode];return l==null||t.altGraphKey?!1:(t.keyCode==3&&t.code&&(l=t.code),gu(l,t,r))}function io(t){return typeof t=="string"?Bn[t]:t}function ir(t,r){for(var l=t.doc.sel.ranges,o=[],c=0;c<l.length;c++){for(var d=r(l[c]);o.length&&k(d.from,at(o).to)<=0;){var m=o.pop();if(k(m.from,d.from)<0){d.from=m.from;break}}o.push(d)}Ge(t,function(){for(var v=o.length-1;v>=0;v--)tr(t.doc,"",o[v].from,o[v].to,"+delete");Gi(t)})}function Ma(t,r,l){var o=En(t.text,r+l,l);return o<0||o>t.text.length?null:o}function Da(t,r,l){var o=Ma(t,r.ch,l);return o==null?null:new et(r.line,o,l<0?"after":"before")}function Pa(t,r,l,o,c){if(t){r.doc.direction=="rtl"&&(c=-c);var d=K(l,r.doc.direction);if(d){var m=c<0?at(d):d[0],v=c<0==(m.level==1),x=v?"after":"before",w;if(m.level>0||r.doc.direction=="rtl"){var N=Vi(r,l);w=c<0?l.text.length-1:0;var P=Ln(r,N,w).top;w=F(function(W){return Ln(r,N,W).top==P},c<0==(m.level==1)?m.from:m.to-1,w),x=="before"&&(w=Ma(l,w,1))}else w=c<0?m.to:m.from;return new et(o,w,x)}}return new et(o,c<0?l.text.length:0,c<0?"before":"after")}function ag(t,r,l,o){var c=K(r,t.doc.direction);if(!c)return Da(r,l,o);l.ch>=r.text.length?(l.ch=r.text.length,l.sticky="before"):l.ch<=0&&(l.ch=0,l.sticky="after");var d=vt(c,l.ch,l.sticky),m=c[d];if(t.doc.direction=="ltr"&&m.level%2==0&&(o>0?m.to>l.ch:m.from<l.ch))return Da(r,l,o);var v=function(ft,dt){return Ma(r,ft instanceof et?ft.ch:ft,dt)},x,w=function(ft){return t.options.lineWrapping?(x=x||Vi(t,r),_c(t,r,x,ft)):{begin:0,end:r.text.length}},N=w(l.sticky=="before"?v(l,-1):l.ch);if(t.doc.direction=="rtl"||m.level==1){var P=m.level==1==o<0,W=v(l,P?1:-1);if(W!=null&&(P?W<=m.to&&W<=N.end:W>=m.from&&W>=N.begin)){var E=P?"before":"after";return new et(l.line,W,E)}}var B=function(ft,dt,ht){for(var xt=function(se,Ce){return Ce?new et(l.line,v(se,1),"before"):new et(l.line,se,"after")};ft>=0&&ft<c.length;ft+=dt){var Lt=c[ft],Ct=dt>0==(Lt.level!=1),Wt=Ct?ht.begin:v(ht.end,-1);if(Lt.from<=Wt&&Wt<Lt.to||(Wt=Ct?Lt.from:v(Lt.to,-1),ht.begin<=Wt&&Wt<ht.end))return xt(Wt,Ct)}},X=B(d+o,o,N);if(X)return X;var ot=o>0?N.end:v(N.begin,-1);return ot!=null&&!(o>0&&ot==r.text.length)&&(X=B(o>0?0:c.length-1,o,w(ot)),X)?X:null}var Kr={selectAll:tu,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),Vt)},killLine:function(t){return ir(t,function(r){if(r.empty()){var l=wt(t.doc,r.head.line).text.length;return r.head.ch==l&&r.head.line<t.lastLine()?{from:r.head,to:et(r.head.line+1,0)}:{from:r.head,to:et(r.head.line,l)}}else return{from:r.from(),to:r.to()}})},deleteLine:function(t){return ir(t,function(r){return{from:et(r.from().line,0),to:yt(t.doc,et(r.to().line+1,0))}})},delLineLeft:function(t){return ir(t,function(r){return{from:et(r.from().line,0),to:r.from()}})},delWrappedLineLeft:function(t){return ir(t,function(r){var l=t.charCoords(r.head,"div").top+5,o=t.coordsChar({left:0,top:l},"div");return{from:o,to:r.from()}})},delWrappedLineRight:function(t){return ir(t,function(r){var l=t.charCoords(r.head,"div").top+5,o=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:l},"div");return{from:r.from(),to:o}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(et(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(et(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(r){return vu(t,r.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(r){return yu(t,r.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(r){return lg(t,r.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(r){var l=t.cursorCoords(r.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:l},"div")},jt)},goLineLeft:function(t){return t.extendSelectionsBy(function(r){var l=t.cursorCoords(r.head,"div").top+5;return t.coordsChar({left:0,top:l},"div")},jt)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(r){var l=t.cursorCoords(r.head,"div").top+5,o=t.coordsChar({left:0,top:l},"div");return o.ch<t.getLine(o.line).search(/\S/)?yu(t,r.head):o},jt)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("	")},insertSoftTab:function(t){for(var r=[],l=t.listSelections(),o=t.options.tabSize,c=0;c<l.length;c++){var d=l[c].from(),m=Rt(t.getLine(d.line),d.ch,o);r.push(q(o-m%o))}t.replaceSelections(r)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return Ge(t,function(){for(var r=t.listSelections(),l=[],o=0;o<r.length;o++)if(r[o].empty()){var c=r[o].head,d=wt(t.doc,c.line).text;if(d){if(c.ch==d.length&&(c=new et(c.line,c.ch-1)),c.ch>0)c=new et(c.line,c.ch+1),t.replaceRange(d.charAt(c.ch-1)+d.charAt(c.ch-2),et(c.line,c.ch-2),c,"+transpose");else if(c.line>t.doc.first){var m=wt(t.doc,c.line-1).text;m&&(c=new et(c.line,1),t.replaceRange(d.charAt(0)+t.doc.lineSeparator()+m.charAt(m.length-1),et(c.line-1,m.length-1),c,"+transpose"))}}l.push(new Zt(c,c))}t.setSelections(l)})},newlineAndIndent:function(t){return Ge(t,function(){for(var r=t.listSelections(),l=r.length-1;l>=0;l--)t.replaceRange(t.doc.lineSeparator(),r[l].anchor,r[l].head,"+input");r=t.listSelections();for(var o=0;o<r.length;o++)t.indentLine(r[o].from().line,null,!0);Gi(t)})},openLine:function(t){return t.replaceSelection(`
`,"start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function vu(t,r){var l=wt(t.doc,r),o=vn(l);return o!=l&&(r=Jt(o)),Pa(!0,t,o,r,1)}function lg(t,r){var l=wt(t.doc,r),o=Vd(l);return o!=l&&(r=Jt(o)),Pa(!0,t,l,r,-1)}function yu(t,r){var l=vu(t,r.line),o=wt(t.doc,l.line),c=K(o,t.doc.direction);if(!c||c[0].level==0){var d=Math.max(l.ch,o.text.search(/\S/)),m=r.line==l.line&&r.ch<=d&&r.ch;return et(l.line,m?0:d,l.sticky)}return l}function ro(t,r,l){if(typeof r=="string"&&(r=Kr[r],!r))return!1;t.display.input.ensurePolled();var o=t.display.shift,c=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),l&&(t.display.shift=!1),c=r(t)!=Et}finally{t.display.shift=o,t.state.suppressEdits=!1}return c}function cg(t,r,l){for(var o=0;o<t.state.keyMaps.length;o++){var c=nr(r,t.state.keyMaps[o],l,t);if(c)return c}return t.options.extraKeys&&nr(r,t.options.extraKeys,l,t)||nr(r,t.options.keyMap,l,t)}var ug=new Ht;function Gr(t,r,l,o){var c=t.state.keySeq;if(c){if(pu(r))return"handled";if(/\'$/.test(r)?t.state.keySeq=null:ug.set(50,function(){t.state.keySeq==c&&(t.state.keySeq=null,t.display.input.reset())}),bu(t,c+" "+r,l,o))return!0}return bu(t,r,l,o)}function bu(t,r,l,o){var c=cg(t,r,o);return c=="multi"&&(t.state.keySeq=r),c=="handled"&&we(t,"keyHandled",t,r,l),(c=="handled"||c=="multi")&&(Pe(l),da(t)),!!c}function xu(t,r){var l=mu(r,!0);return l?r.shiftKey&&!t.state.keySeq?Gr(t,"Shift-"+l,r,function(o){return ro(t,o,!0)})||Gr(t,l,r,function(o){if(typeof o=="string"?/^go[A-Z]/.test(o):o.motion)return ro(t,o)}):Gr(t,l,r,function(o){return ro(t,o)}):!1}function fg(t,r,l){return Gr(t,"'"+l+"'",r,function(o){return ro(t,o,!0)})}var Oa=null;function _u(t){var r=this;if(!(t.target&&t.target!=r.display.input.getField())&&(r.curOp.focus=$t(),!oe(r,t))){p&&g<11&&t.keyCode==27&&(t.returnValue=!1);var l=t.keyCode;r.display.shift=l==16||t.shiftKey;var o=xu(r,t);T&&(Oa=o?l:null,!o&&l==88&&!Os&&(J?t.metaKey:t.ctrlKey)&&r.replaceSelection("",null,"cut")),a&&!J&&!o&&l==46&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),l==18&&!/\bCodeMirror-crosshair\b/.test(r.display.lineDiv.className)&&hg(r)}}function hg(t){var r=t.display.lineDiv;$(r,"CodeMirror-crosshair");function l(o){(o.keyCode==18||!o.altKey)&&(Q(r,"CodeMirror-crosshair"),zt(document,"keyup",l),zt(document,"mouseover",l))}Y(document,"keyup",l),Y(document,"mouseover",l)}function wu(t){t.keyCode==16&&(this.doc.sel.shift=!1),oe(this,t)}function ku(t){var r=this;if(!(t.target&&t.target!=r.display.input.getField())&&!(Wn(r.display,t)||oe(r,t)||t.ctrlKey&&!t.altKey||J&&t.metaKey)){var l=t.keyCode,o=t.charCode;if(T&&l==Oa){Oa=null,Pe(t);return}if(!(T&&(!t.which||t.which<10)&&xu(r,t))){var c=String.fromCharCode(o??l);c!="\b"&&(fg(r,t,c)||r.display.input.onKeyPress(t))}}}var dg=400,Aa=function(t,r,l){this.time=t,this.pos=r,this.button=l};Aa.prototype.compare=function(t,r,l){return this.time+dg>t&&k(r,this.pos)==0&&l==this.button};var qr,Jr;function pg(t,r){var l=+new Date;return Jr&&Jr.compare(l,t,r)?(qr=Jr=null,"triple"):qr&&qr.compare(l,t,r)?(Jr=new Aa(l,t,r),qr=null,"double"):(qr=new Aa(l,t,r),Jr=null,"single")}function Su(t){var r=this,l=r.display;if(!(oe(r,t)||l.activeTouch&&l.input.supportsTouch())){if(l.input.ensurePolled(),l.shift=t.shiftKey,Wn(l,t)){b||(l.scroller.draggable=!1,setTimeout(function(){return l.scroller.draggable=!0},100));return}if(!Ia(r,t)){var o=bi(r,t),c=Ms(t),d=o?pg(o,c):"single";window.focus(),c==1&&r.state.selectingText&&r.state.selectingText(t),!(o&&gg(r,c,o,d,t))&&(c==1?o?vg(r,o,d,t):Jn(t)==l.scroller&&Pe(t):c==2?(o&&Zs(r.doc,o),setTimeout(function(){return l.input.focus()},20)):c==3&&(bt?r.display.input.onContextMenu(t):pa(r)))}}}function gg(t,r,l,o,c){var d="Click";return o=="double"?d="Double"+d:o=="triple"&&(d="Triple"+d),d=(r==1?"Left":r==2?"Middle":"Right")+d,Gr(t,gu(d,c),c,function(m){if(typeof m=="string"&&(m=Kr[m]),!m)return!1;var v=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),v=m(t,l)!=Et}finally{t.state.suppressEdits=!1}return v})}function mg(t,r,l){var o=t.getOption("configureMouse"),c=o?o(t,r,l):{};if(c.unit==null){var d=j?l.shiftKey&&l.metaKey:l.altKey;c.unit=d?"rectangle":r=="single"?"char":r=="double"?"word":"line"}return(c.extend==null||t.doc.extend)&&(c.extend=t.doc.extend||l.shiftKey),c.addNew==null&&(c.addNew=J?l.metaKey:l.ctrlKey),c.moveOnDrag==null&&(c.moveOnDrag=!(J?l.altKey:l.ctrlKey)),c}function vg(t,r,l,o){p?setTimeout(kt(Cc,t),0):t.curOp.focus=$t();var c=mg(t,l,o),d=t.doc.sel,m;t.options.dragDrop&&yr&&!t.isReadOnly()&&l=="single"&&(m=d.contains(r))>-1&&(k((m=d.ranges[m]).from(),r)<0||r.xRel>0)&&(k(m.to(),r)>0||r.xRel<0)?yg(t,o,r,c):bg(t,o,r,c)}function yg(t,r,l,o){var c=t.display,d=!1,m=ke(t,function(w){b&&(c.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:pa(t)),zt(c.wrapper.ownerDocument,"mouseup",m),zt(c.wrapper.ownerDocument,"mousemove",v),zt(c.scroller,"dragstart",x),zt(c.scroller,"drop",m),d||(Pe(w),o.addNew||Zs(t.doc,l,null,null,o.extend),b&&!M||p&&g==9?setTimeout(function(){c.wrapper.ownerDocument.body.focus({preventScroll:!0}),c.input.focus()},20):c.input.focus())}),v=function(w){d=d||Math.abs(r.clientX-w.clientX)+Math.abs(r.clientY-w.clientY)>=10},x=function(){return d=!0};b&&(c.scroller.draggable=!0),t.state.draggingText=m,m.copy=!o.moveOnDrag,Y(c.wrapper.ownerDocument,"mouseup",m),Y(c.wrapper.ownerDocument,"mousemove",v),Y(c.scroller,"dragstart",x),Y(c.scroller,"drop",m),t.state.delayingBlurEvent=!0,setTimeout(function(){return c.input.focus()},20),c.scroller.dragDrop&&c.scroller.dragDrop()}function Cu(t,r,l){if(l=="char")return new Zt(r,r);if(l=="word")return t.findWordAt(r);if(l=="line")return new Zt(et(r.line,0),yt(t.doc,et(r.line+1,0)));var o=l(t,r);return new Zt(o.from,o.to)}function bg(t,r,l,o){p&&pa(t);var c=t.display,d=t.doc;Pe(r);var m,v,x=d.sel,w=x.ranges;if(o.addNew&&!o.extend?(v=d.sel.contains(l),v>-1?m=w[v]:m=new Zt(l,l)):(m=d.sel.primary(),v=d.sel.primIndex),o.unit=="rectangle")o.addNew||(m=new Zt(l,l)),l=bi(t,r,!0,!0),v=-1;else{var N=Cu(t,l,o.unit);o.extend?m=La(m,N.anchor,N.head,o.extend):m=N}o.addNew?v==-1?(v=w.length,Ae(d,bn(t,w.concat([m]),v),{scroll:!1,origin:"*mouse"})):w.length>1&&w[v].empty()&&o.unit=="char"&&!o.extend?(Ae(d,bn(t,w.slice(0,v).concat(w.slice(v+1)),0),{scroll:!1,origin:"*mouse"}),x=d.sel):Na(d,v,m,dn):(v=0,Ae(d,new on([m],0),dn),x=d.sel);var P=l;function W(ht){if(k(P,ht)!=0)if(P=ht,o.unit=="rectangle"){for(var xt=[],Lt=t.options.tabSize,Ct=Rt(wt(d,l.line).text,l.ch,Lt),Wt=Rt(wt(d,ht.line).text,ht.ch,Lt),se=Math.min(Ct,Wt),Ce=Math.max(Ct,Wt),ue=Math.min(l.line,ht.line),qe=Math.min(t.lastLine(),Math.max(l.line,ht.line));ue<=qe;ue++){var Ue=wt(d,ue).text,ye=fe(Ue,se,Lt);se==Ce?xt.push(new Zt(et(ue,ye),et(ue,ye))):Ue.length>ye&&xt.push(new Zt(et(ue,ye),et(ue,fe(Ue,Ce,Lt))))}xt.length||xt.push(new Zt(l,l)),Ae(d,bn(t,x.ranges.slice(0,v).concat(xt),v),{origin:"*mouse",scroll:!1}),t.scrollIntoView(ht)}else{var $e=m,Le=Cu(t,ht,o.unit),_e=$e.anchor,be;k(Le.anchor,_e)>0?(be=Le.head,_e=Pt($e.from(),Le.anchor)):(be=Le.anchor,_e=st($e.to(),Le.head));var de=x.ranges.slice(0);de[v]=xg(t,new Zt(yt(d,_e),be)),Ae(d,bn(t,de,v),dn)}}var E=c.wrapper.getBoundingClientRect(),B=0;function X(ht){var xt=++B,Lt=bi(t,ht,!0,o.unit=="rectangle");if(Lt)if(k(Lt,P)!=0){t.curOp.focus=$t(),W(Lt);var Ct=Ys(c,d);(Lt.line>=Ct.to||Lt.line<Ct.from)&&setTimeout(ke(t,function(){B==xt&&X(ht)}),150)}else{var Wt=ht.clientY<E.top?-20:ht.clientY>E.bottom?20:0;Wt&&setTimeout(ke(t,function(){B==xt&&(c.scroller.scrollTop+=Wt,X(ht))}),50)}}function ot(ht){t.state.selectingText=!1,B=1/0,ht&&(Pe(ht),c.input.focus()),zt(c.wrapper.ownerDocument,"mousemove",ft),zt(c.wrapper.ownerDocument,"mouseup",dt),d.history.lastSelOrigin=null}var ft=ke(t,function(ht){ht.buttons===0||!Ms(ht)?ot(ht):X(ht)}),dt=ke(t,ot);t.state.selectingText=dt,Y(c.wrapper.ownerDocument,"mousemove",ft),Y(c.wrapper.ownerDocument,"mouseup",dt)}function xg(t,r){var l=r.anchor,o=r.head,c=wt(t.doc,l.line);if(k(l,o)==0&&l.sticky==o.sticky)return r;var d=K(c);if(!d)return r;var m=vt(d,l.ch,l.sticky),v=d[m];if(v.from!=l.ch&&v.to!=l.ch)return r;var x=m+(v.from==l.ch==(v.level!=1)?0:1);if(x==0||x==d.length)return r;var w;if(o.line!=l.line)w=(o.line-l.line)*(t.doc.direction=="ltr"?1:-1)>0;else{var N=vt(d,o.ch,o.sticky),P=N-m||(o.ch-l.ch)*(v.level==1?-1:1);N==x-1||N==x?w=P<0:w=P>0}var W=d[x+(w?-1:0)],E=w==(W.level==1),B=E?W.from:W.to,X=E?"after":"before";return l.ch==B&&l.sticky==X?r:new Zt(new et(l.line,B,X),o)}function Tu(t,r,l,o){var c,d;if(r.touches)c=r.touches[0].clientX,d=r.touches[0].clientY;else try{c=r.clientX,d=r.clientY}catch{return!1}if(c>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;o&&Pe(r);var m=t.display,v=m.lineDiv.getBoundingClientRect();if(d>v.bottom||!te(t,l))return en(r);d-=v.top-m.viewOffset;for(var x=0;x<t.display.gutterSpecs.length;++x){var w=m.gutters.childNodes[x];if(w&&w.getBoundingClientRect().right>=c){var N=Sn(t.doc,d),P=t.display.gutterSpecs[x];return Tt(t,l,t,N,P.className,r),en(r)}}}function Ia(t,r){return Tu(t,r,"gutterClick",!0)}function Lu(t,r){Wn(t.display,r)||_g(t,r)||oe(t,r,"contextmenu")||bt||t.display.input.onContextMenu(r)}function _g(t,r){return te(t,"gutterContextMenu")?Tu(t,r,"gutterContextMenu",!1):!1}function Nu(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Pr(t)}var rr={toString:function(){return"CodeMirror.Init"}},Mu={},so={};function wg(t){var r=t.optionHandlers;function l(o,c,d,m){t.defaults[o]=c,d&&(r[o]=m?function(v,x,w){w!=rr&&d(v,x,w)}:d)}t.defineOption=l,t.Init=rr,l("value","",function(o,c){return o.setValue(c)},!0),l("mode",null,function(o,c){o.doc.modeOption=c,Sa(o)},!0),l("indentUnit",2,Sa,!0),l("indentWithTabs",!1),l("smartIndent",!0),l("tabSize",4,function(o){Wr(o),Pr(o),ze(o)},!0),l("lineSeparator",null,function(o,c){if(o.doc.lineSep=c,!!c){var d=[],m=o.doc.first;o.doc.iter(function(x){for(var w=0;;){var N=x.text.indexOf(c,w);if(N==-1)break;w=N+c.length,d.push(et(m,N))}m++});for(var v=d.length-1;v>=0;v--)tr(o.doc,c,d[v],et(d[v].line,d[v].ch+c.length))}}),l("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(o,c,d){o.state.specialChars=new RegExp(c.source+(c.test("	")?"":"|	"),"g"),d!=rr&&o.refresh()}),l("specialCharPlaceholder",Jd,function(o){return o.refresh()},!0),l("electricChars",!0),l("inputStyle",G?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),l("spellcheck",!1,function(o,c){return o.getInputField().spellcheck=c},!0),l("autocorrect",!1,function(o,c){return o.getInputField().autocorrect=c},!0),l("autocapitalize",!1,function(o,c){return o.getInputField().autocapitalize=c},!0),l("rtlMoveVisually",!V),l("wholeLineUpdateBefore",!0),l("theme","default",function(o){Nu(o),Hr(o)},!0),l("keyMap","default",function(o,c,d){var m=io(c),v=d!=rr&&io(d);v&&v.detach&&v.detach(o,m),m.attach&&m.attach(o,v||null)}),l("extraKeys",null),l("configureMouse",null),l("lineWrapping",!1,Sg,!0),l("gutters",[],function(o,c){o.display.gutterSpecs=wa(c,o.options.lineNumbers),Hr(o)},!0),l("fixedGutter",!0,function(o,c){o.display.gutters.style.left=c?ua(o.display)+"px":"0",o.refresh()},!0),l("coverGutterNextToScrollbar",!1,function(o){return qi(o)},!0),l("scrollbarStyle","native",function(o){Pc(o),qi(o),o.display.scrollbars.setScrollTop(o.doc.scrollTop),o.display.scrollbars.setScrollLeft(o.doc.scrollLeft)},!0),l("lineNumbers",!1,function(o,c){o.display.gutterSpecs=wa(o.options.gutters,c),Hr(o)},!0),l("firstLineNumber",1,Hr,!0),l("lineNumberFormatter",function(o){return o},Hr,!0),l("showCursorWhenSelecting",!1,Or,!0),l("resetSelectionOnContextMenu",!0),l("lineWiseCopyCut",!0),l("pasteLinesPerSelection",!0),l("selectionsMayTouch",!1),l("readOnly",!1,function(o,c){c=="nocursor"&&(Ki(o),o.display.input.blur()),o.display.input.readOnlyChanged(c)}),l("screenReaderLabel",null,function(o,c){c=c===""?null:c,o.display.input.screenReaderLabelChanged(c)}),l("disableInput",!1,function(o,c){c||o.display.input.reset()},!0),l("dragDrop",!0,kg),l("allowDropFileTypes",null),l("cursorBlinkRate",530),l("cursorScrollMargin",0),l("cursorHeight",1,Or,!0),l("singleCursorHeightPerLine",!0,Or,!0),l("workTime",100),l("workDelay",100),l("flattenSpans",!0,Wr,!0),l("addModeClass",!1,Wr,!0),l("pollInterval",100),l("undoDepth",200,function(o,c){return o.doc.history.undoDepth=c}),l("historyEventDelay",1250),l("viewportMargin",10,function(o){return o.refresh()},!0),l("maxHighlightLength",1e4,Wr,!0),l("moveInputWithCursor",!0,function(o,c){c||o.display.input.resetPosition()}),l("tabindex",null,function(o,c){return o.display.input.getField().tabIndex=c||""}),l("autofocus",null),l("direction","ltr",function(o,c){return o.doc.setDirection(c)},!0),l("phrases",null)}function kg(t,r,l){var o=l&&l!=rr;if(!r!=!o){var c=t.display.dragFunctions,d=r?Y:zt;d(t.display.scroller,"dragstart",c.start),d(t.display.scroller,"dragenter",c.enter),d(t.display.scroller,"dragover",c.over),d(t.display.scroller,"dragleave",c.leave),d(t.display.scroller,"drop",c.drop)}}function Sg(t){t.options.lineWrapping?($(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(Q(t.display.wrapper,"CodeMirror-wrap"),ta(t)),fa(t),ze(t),Pr(t),setTimeout(function(){return qi(t)},100)}function ae(t,r){var l=this;if(!(this instanceof ae))return new ae(t,r);this.options=r=r?Ot(r):{},Ot(Mu,r,!1);var o=r.value;typeof o=="string"?o=new Be(o,r.mode,null,r.lineSeparator,r.direction):r.mode&&(o.modeOption=r.mode),this.doc=o;var c=new ae.inputStyles[r.inputStyle](this),d=this.display=new Rp(t,o,c,r);d.wrapper.CodeMirror=this,Nu(this),r.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Pc(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Ht,keySeq:null,specialChars:null},r.autofocus&&!G&&d.input.focus(),p&&g<11&&setTimeout(function(){return l.display.input.reset(!0)},20),Cg(this),ng(),ki(this),this.curOp.forceUpdate=!0,Bc(this,o),r.autofocus&&!G||this.hasFocus()?setTimeout(function(){l.hasFocus()&&!l.state.focused&&ga(l)},20):Ki(this);for(var m in so)so.hasOwnProperty(m)&&so[m](this,r[m],rr);Ic(this),r.finishInit&&r.finishInit(this);for(var v=0;v<Ea.length;++v)Ea[v](this);Si(this),b&&r.lineWrapping&&getComputedStyle(d.lineDiv).textRendering=="optimizelegibility"&&(d.lineDiv.style.textRendering="auto")}ae.defaults=Mu,ae.optionHandlers=so;function Cg(t){var r=t.display;Y(r.scroller,"mousedown",ke(t,Su)),p&&g<11?Y(r.scroller,"dblclick",ke(t,function(x){if(!oe(t,x)){var w=bi(t,x);if(!(!w||Ia(t,x)||Wn(t.display,x))){Pe(x);var N=t.findWordAt(w);Zs(t.doc,N.anchor,N.head)}}})):Y(r.scroller,"dblclick",function(x){return oe(t,x)||Pe(x)}),Y(r.scroller,"contextmenu",function(x){return Lu(t,x)}),Y(r.input.getField(),"contextmenu",function(x){r.scroller.contains(x.target)||Lu(t,x)});var l,o={end:0};function c(){r.activeTouch&&(l=setTimeout(function(){return r.activeTouch=null},1e3),o=r.activeTouch,o.end=+new Date)}function d(x){if(x.touches.length!=1)return!1;var w=x.touches[0];return w.radiusX<=1&&w.radiusY<=1}function m(x,w){if(w.left==null)return!0;var N=w.left-x.left,P=w.top-x.top;return N*N+P*P>20*20}Y(r.scroller,"touchstart",function(x){if(!oe(t,x)&&!d(x)&&!Ia(t,x)){r.input.ensurePolled(),clearTimeout(l);var w=+new Date;r.activeTouch={start:w,moved:!1,prev:w-o.end<=300?o:null},x.touches.length==1&&(r.activeTouch.left=x.touches[0].pageX,r.activeTouch.top=x.touches[0].pageY)}}),Y(r.scroller,"touchmove",function(){r.activeTouch&&(r.activeTouch.moved=!0)}),Y(r.scroller,"touchend",function(x){var w=r.activeTouch;if(w&&!Wn(r,x)&&w.left!=null&&!w.moved&&new Date-w.start<300){var N=t.coordsChar(r.activeTouch,"page"),P;!w.prev||m(w,w.prev)?P=new Zt(N,N):!w.prev.prev||m(w,w.prev.prev)?P=t.findWordAt(N):P=new Zt(et(N.line,0),yt(t.doc,et(N.line+1,0))),t.setSelection(P.anchor,P.head),t.focus(),Pe(x)}c()}),Y(r.scroller,"touchcancel",c),Y(r.scroller,"scroll",function(){r.scroller.clientHeight&&(Ir(t,r.scroller.scrollTop),_i(t,r.scroller.scrollLeft,!0),Tt(t,"scroll",t))}),Y(r.scroller,"mousewheel",function(x){return Rc(t,x)}),Y(r.scroller,"DOMMouseScroll",function(x){return Rc(t,x)}),Y(r.wrapper,"scroll",function(){return r.wrapper.scrollTop=r.wrapper.scrollLeft=0}),r.dragFunctions={enter:function(x){oe(t,x)||gi(x)},over:function(x){oe(t,x)||(eg(t,x),gi(x))},start:function(x){return tg(t,x)},drop:ke(t,Qp),leave:function(x){oe(t,x)||fu(t)}};var v=r.input.getField();Y(v,"keyup",function(x){return wu.call(t,x)}),Y(v,"keydown",ke(t,_u)),Y(v,"keypress",ke(t,ku)),Y(v,"focus",function(x){return ga(t,x)}),Y(v,"blur",function(x){return Ki(t,x)})}var Ea=[];ae.defineInitHook=function(t){return Ea.push(t)};function Zr(t,r,l,o){var c=t.doc,d;l==null&&(l="add"),l=="smart"&&(c.mode.indent?d=Tr(t,r).state:l="prev");var m=t.options.tabSize,v=wt(c,r),x=Rt(v.text,null,m);v.stateAfter&&(v.stateAfter=null);var w=v.text.match(/^\s*/)[0],N;if(!o&&!/\S/.test(v.text))N=0,l="not";else if(l=="smart"&&(N=c.mode.indent(d,v.text.slice(w.length),v.text),N==Et||N>150)){if(!o)return;l="prev"}l=="prev"?r>c.first?N=Rt(wt(c,r-1).text,null,m):N=0:l=="add"?N=x+t.options.indentUnit:l=="subtract"?N=x-t.options.indentUnit:typeof l=="number"&&(N=x+l),N=Math.max(0,N);var P="",W=0;if(t.options.indentWithTabs)for(var E=Math.floor(N/m);E;--E)W+=m,P+="	";if(W<N&&(P+=q(N-W)),P!=w)return tr(c,P,et(r,0),et(r,w.length),"+input"),v.stateAfter=null,!0;for(var B=0;B<c.sel.ranges.length;B++){var X=c.sel.ranges[B];if(X.head.line==r&&X.head.ch<w.length){var ot=et(r,w.length);Na(c,B,new Zt(ot,ot));break}}}var xn=null;function oo(t){xn=t}function Fa(t,r,l,o,c){var d=t.doc;t.display.shift=!1,o||(o=d.sel);var m=+new Date-200,v=c=="paste"||t.state.pasteIncoming>m,x=xr(r),w=null;if(v&&o.ranges.length>1)if(xn&&xn.text.join(`
`)==r){if(o.ranges.length%xn.text.length==0){w=[];for(var N=0;N<xn.text.length;N++)w.push(d.splitLines(xn.text[N]))}}else x.length==o.ranges.length&&t.options.pasteLinesPerSelection&&(w=Dt(x,function(ft){return[ft]}));for(var P=t.curOp.updateInput,W=o.ranges.length-1;W>=0;W--){var E=o.ranges[W],B=E.from(),X=E.to();E.empty()&&(l&&l>0?B=et(B.line,B.ch-l):t.state.overwrite&&!v?X=et(X.line,Math.min(wt(d,X.line).text.length,X.ch+at(x).length)):v&&xn&&xn.lineWise&&xn.text.join(`
`)==x.join(`
`)&&(B=X=et(B.line,0)));var ot={from:B,to:X,text:w?w[W%w.length]:x,origin:c||(v?"paste":t.state.cutIncoming>m?"cut":"+input")};Qi(t.doc,ot),we(t,"inputRead",t,ot)}r&&!v&&Pu(t,r),Gi(t),t.curOp.updateInput<2&&(t.curOp.updateInput=P),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Du(t,r){var l=t.clipboardData&&t.clipboardData.getData("Text");if(l)return t.preventDefault(),!r.isReadOnly()&&!r.options.disableInput&&Ge(r,function(){return Fa(r,l,0,null,"paste")}),!0}function Pu(t,r){if(!(!t.options.electricChars||!t.options.smartIndent))for(var l=t.doc.sel,o=l.ranges.length-1;o>=0;o--){var c=l.ranges[o];if(!(c.head.ch>100||o&&l.ranges[o-1].head.line==c.head.line)){var d=t.getModeAt(c.head),m=!1;if(d.electricChars){for(var v=0;v<d.electricChars.length;v++)if(r.indexOf(d.electricChars.charAt(v))>-1){m=Zr(t,c.head.line,"smart");break}}else d.electricInput&&d.electricInput.test(wt(t.doc,c.head.line).text.slice(0,c.head.ch))&&(m=Zr(t,c.head.line,"smart"));m&&we(t,"electricInput",t,c.head.line)}}}function Ou(t){for(var r=[],l=[],o=0;o<t.doc.sel.ranges.length;o++){var c=t.doc.sel.ranges[o].head.line,d={anchor:et(c,0),head:et(c+1,0)};l.push(d),r.push(t.getRange(d.anchor,d.head))}return{text:r,ranges:l}}function Au(t,r,l,o){t.setAttribute("autocorrect",l?"":"off"),t.setAttribute("autocapitalize",o?"":"off"),t.setAttribute("spellcheck",!!r)}function Iu(){var t=I("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),r=I("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return b?t.style.width="1000px":t.setAttribute("wrap","off"),A&&(t.style.border="1px solid black"),Au(t),r}function Tg(t){var r=t.optionHandlers,l=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(o,c){var d=this.options,m=d[o];d[o]==c&&o!="mode"||(d[o]=c,r.hasOwnProperty(o)&&ke(this,r[o])(this,c,m),Tt(this,"optionChange",this,o))},getOption:function(o){return this.options[o]},getDoc:function(){return this.doc},addKeyMap:function(o,c){this.state.keyMaps[c?"push":"unshift"](io(o))},removeKeyMap:function(o){for(var c=this.state.keyMaps,d=0;d<c.length;++d)if(c[d]==o||c[d].name==o)return c.splice(d,1),!0},addOverlay:Ee(function(o,c){var d=o.token?o:t.getMode(this.options,o);if(d.startState)throw new Error("Overlays may not be stateful.");It(this.state.overlays,{mode:d,modeSpec:o,opaque:c&&c.opaque,priority:c&&c.priority||0},function(m){return m.priority}),this.state.modeGen++,ze(this)}),removeOverlay:Ee(function(o){for(var c=this.state.overlays,d=0;d<c.length;++d){var m=c[d].modeSpec;if(m==o||typeof o=="string"&&m.name==o){c.splice(d,1),this.state.modeGen++,ze(this);return}}}),indentLine:Ee(function(o,c,d){typeof c!="string"&&typeof c!="number"&&(c==null?c=this.options.smartIndent?"smart":"prev":c=c?"add":"subtract"),mi(this.doc,o)&&Zr(this,o,c,d)}),indentSelection:Ee(function(o){for(var c=this.doc.sel.ranges,d=-1,m=0;m<c.length;m++){var v=c[m];if(v.empty())v.head.line>d&&(Zr(this,v.head.line,o,!0),d=v.head.line,m==this.doc.sel.primIndex&&Gi(this));else{var x=v.from(),w=v.to(),N=Math.max(d,x.line);d=Math.min(this.lastLine(),w.line-(w.ch?0:1))+1;for(var P=N;P<d;++P)Zr(this,P,o);var W=this.doc.sel.ranges;x.ch==0&&c.length==W.length&&W[m].from().ch>0&&Na(this.doc,m,new Zt(x,W[m].to()),Vt)}}}),getTokenAt:function(o,c){return $l(this,o,c)},getLineTokens:function(o,c){return $l(this,et(o),c,!0)},getTokenTypeAt:function(o){o=yt(this.doc,o);var c=zl(this,wt(this.doc,o.line)),d=0,m=(c.length-1)/2,v=o.ch,x;if(v==0)x=c[2];else for(;;){var w=d+m>>1;if((w?c[w*2-1]:0)>=v)m=w;else if(c[w*2+1]<v)d=w+1;else{x=c[w*2+2];break}}var N=x?x.indexOf("overlay "):-1;return N<0?x:N==0?null:x.slice(0,N-1)},getModeAt:function(o){var c=this.doc.mode;return c.innerMode?t.innerMode(c,this.getTokenAt(o).state).mode:c},getHelper:function(o,c){return this.getHelpers(o,c)[0]},getHelpers:function(o,c){var d=[];if(!l.hasOwnProperty(c))return d;var m=l[c],v=this.getModeAt(o);if(typeof v[c]=="string")m[v[c]]&&d.push(m[v[c]]);else if(v[c])for(var x=0;x<v[c].length;x++){var w=m[v[c][x]];w&&d.push(w)}else v.helperType&&m[v.helperType]?d.push(m[v.helperType]):m[v.name]&&d.push(m[v.name]);for(var N=0;N<m._global.length;N++){var P=m._global[N];P.pred(v,this)&&mt(d,P.val)==-1&&d.push(P.val)}return d},getStateAfter:function(o,c){var d=this.doc;return o=Xt(d,o??d.first+d.size-1),Tr(this,o+1,c).state},cursorCoords:function(o,c){var d,m=this.doc.sel.primary();return o==null?d=m.head:typeof o=="object"?d=yt(this.doc,o):d=o?m.from():m.to(),yn(this,d,c||"page")},charCoords:function(o,c){return Us(this,yt(this.doc,o),c||"page")},coordsChar:function(o,c){return o=yc(this,o,c||"page"),aa(this,o.left,o.top)},lineAtHeight:function(o,c){return o=yc(this,{top:o,left:0},c||"page").top,Sn(this.doc,o+this.display.viewOffset)},heightAtLine:function(o,c,d){var m=!1,v;if(typeof o=="number"){var x=this.doc.first+this.doc.size-1;o<this.doc.first?o=this.doc.first:o>x&&(o=x,m=!0),v=wt(this.doc,o)}else v=o;return Bs(this,v,{top:0,left:0},c||"page",d||m).top+(m?this.doc.height-Hn(v):0)},defaultTextHeight:function(){return Yi(this.display)},defaultCharWidth:function(){return Xi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(o,c,d,m,v){var x=this.display;o=yn(this,yt(this.doc,o));var w=o.bottom,N=o.left;if(c.style.position="absolute",c.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(c),x.sizer.appendChild(c),m=="over")w=o.top;else if(m=="above"||m=="near"){var P=Math.max(x.wrapper.clientHeight,this.doc.height),W=Math.max(x.sizer.clientWidth,x.lineSpace.clientWidth);(m=="above"||o.bottom+c.offsetHeight>P)&&o.top>c.offsetHeight?w=o.top-c.offsetHeight:o.bottom+c.offsetHeight<=P&&(w=o.bottom),N+c.offsetWidth>W&&(N=W-c.offsetWidth)}c.style.top=w+"px",c.style.left=c.style.right="",v=="right"?(N=x.sizer.clientWidth-c.offsetWidth,c.style.right="0px"):(v=="left"?N=0:v=="middle"&&(N=(x.sizer.clientWidth-c.offsetWidth)/2),c.style.left=N+"px"),d&&kp(this,{left:N,top:w,right:N+c.offsetWidth,bottom:w+c.offsetHeight})},triggerOnKeyDown:Ee(_u),triggerOnKeyPress:Ee(ku),triggerOnKeyUp:wu,triggerOnMouseDown:Ee(Su),execCommand:function(o){if(Kr.hasOwnProperty(o))return Kr[o].call(null,this)},triggerElectric:Ee(function(o){Pu(this,o)}),findPosH:function(o,c,d,m){var v=1;c<0&&(v=-1,c=-c);for(var x=yt(this.doc,o),w=0;w<c&&(x=Ra(this.doc,x,v,d,m),!x.hitSide);++w);return x},moveH:Ee(function(o,c){var d=this;this.extendSelectionsBy(function(m){return d.display.shift||d.doc.extend||m.empty()?Ra(d.doc,m.head,o,c,d.options.rtlMoveVisually):o<0?m.from():m.to()},jt)}),deleteH:Ee(function(o,c){var d=this.doc.sel,m=this.doc;d.somethingSelected()?m.replaceSelection("",null,"+delete"):ir(this,function(v){var x=Ra(m,v.head,o,c,!1);return o<0?{from:x,to:v.head}:{from:v.head,to:x}})}),findPosV:function(o,c,d,m){var v=1,x=m;c<0&&(v=-1,c=-c);for(var w=yt(this.doc,o),N=0;N<c;++N){var P=yn(this,w,"div");if(x==null?x=P.left:P.left=x,w=Eu(this,P,v,d),w.hitSide)break}return w},moveV:Ee(function(o,c){var d=this,m=this.doc,v=[],x=!this.display.shift&&!m.extend&&m.sel.somethingSelected();if(m.extendSelectionsBy(function(N){if(x)return o<0?N.from():N.to();var P=yn(d,N.head,"div");N.goalColumn!=null&&(P.left=N.goalColumn),v.push(P.left);var W=Eu(d,P,o,c);return c=="page"&&N==m.sel.primary()&&va(d,Us(d,W,"div").top-P.top),W},jt),v.length)for(var w=0;w<m.sel.ranges.length;w++)m.sel.ranges[w].goalColumn=v[w]}),findWordAt:function(o){var c=this.doc,d=wt(c,o.line).text,m=o.ch,v=o.ch;if(d){var x=this.getHelper(o,"wordChars");(o.sticky=="before"||v==d.length)&&m?--m:++v;for(var w=d.charAt(m),N=Ye(w,x)?function(P){return Ye(P,x)}:/\s/.test(w)?function(P){return/\s/.test(P)}:function(P){return!/\s/.test(P)&&!Ye(P)};m>0&&N(d.charAt(m-1));)--m;for(;v<d.length&&N(d.charAt(v));)++v}return new Zt(et(o.line,m),et(o.line,v))},toggleOverwrite:function(o){o!=null&&o==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?$(this.display.cursorDiv,"CodeMirror-overwrite"):Q(this.display.cursorDiv,"CodeMirror-overwrite"),Tt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==$t()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Ee(function(o,c){Ar(this,o,c)}),getScrollInfo:function(){var o=this.display.scroller;return{left:o.scrollLeft,top:o.scrollTop,height:o.scrollHeight-Tn(this)-this.display.barHeight,width:o.scrollWidth-Tn(this)-this.display.barWidth,clientHeight:ia(this),clientWidth:vi(this)}},scrollIntoView:Ee(function(o,c){o==null?(o={from:this.doc.sel.primary().head,to:null},c==null&&(c=this.options.cursorScrollMargin)):typeof o=="number"?o={from:et(o,0),to:null}:o.from==null&&(o={from:o,to:null}),o.to||(o.to=o.from),o.margin=c||0,o.from.line!=null?Sp(this,o):Lc(this,o.from,o.to,o.margin)}),setSize:Ee(function(o,c){var d=this,m=function(x){return typeof x=="number"||/^\d+$/.test(String(x))?x+"px":x};o!=null&&(this.display.wrapper.style.width=m(o)),c!=null&&(this.display.wrapper.style.height=m(c)),this.options.lineWrapping&&gc(this);var v=this.display.viewFrom;this.doc.iter(v,this.display.viewTo,function(x){if(x.widgets){for(var w=0;w<x.widgets.length;w++)if(x.widgets[w].noHScroll){ti(d,v,"widget");break}}++v}),this.curOp.forceUpdate=!0,Tt(this,"refresh",this)}),operation:function(o){return Ge(this,o)},startOperation:function(){return ki(this)},endOperation:function(){return Si(this)},refresh:Ee(function(){var o=this.display.cachedTextHeight;ze(this),this.curOp.forceUpdate=!0,Pr(this),Ar(this,this.doc.scrollLeft,this.doc.scrollTop),xa(this.display),(o==null||Math.abs(o-Yi(this.display))>.5||this.options.lineWrapping)&&fa(this),Tt(this,"refresh",this)}),swapDoc:Ee(function(o){var c=this.doc;return c.cm=null,this.state.selectingText&&this.state.selectingText(),Bc(this,o),Pr(this),this.display.input.reset(),Ar(this,o.scrollLeft,o.scrollTop),this.curOp.forceScroll=!0,we(this,"swapDoc",this,c),c}),phrase:function(o){var c=this.options.phrases;return c&&Object.prototype.hasOwnProperty.call(c,o)?c[o]:o},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},tn(t),t.registerHelper=function(o,c,d){l.hasOwnProperty(o)||(l[o]=t[o]={_global:[]}),l[o][c]=d},t.registerGlobalHelper=function(o,c,d,m){t.registerHelper(o,c,m),l[o]._global.push({pred:d,val:m})}}function Ra(t,r,l,o,c){var d=r,m=l,v=wt(t,r.line),x=c&&t.direction=="rtl"?-l:l;function w(){var dt=r.line+x;return dt<t.first||dt>=t.first+t.size?!1:(r=new et(dt,r.ch,r.sticky),v=wt(t,dt))}function N(dt){var ht;if(o=="codepoint"){var xt=v.text.charCodeAt(r.ch+(l>0?0:-1));if(isNaN(xt))ht=null;else{var Lt=l>0?xt>=55296&&xt<56320:xt>=56320&&xt<57343;ht=new et(r.line,Math.max(0,Math.min(v.text.length,r.ch+l*(Lt?2:1))),-l)}}else c?ht=ag(t.cm,v,r,l):ht=Da(v,r,l);if(ht==null)if(!dt&&w())r=Pa(c,t.cm,v,r.line,x);else return!1;else r=ht;return!0}if(o=="char"||o=="codepoint")N();else if(o=="column")N(!0);else if(o=="word"||o=="group")for(var P=null,W=o=="group",E=t.cm&&t.cm.getHelper(r,"wordChars"),B=!0;!(l<0&&!N(!B));B=!1){var X=v.text.charAt(r.ch)||`
`,ot=Ye(X,E)?"w":W&&X==`
`?"n":!W||/\s/.test(X)?null:"p";if(W&&!B&&!ot&&(ot="s"),P&&P!=ot){l<0&&(l=1,N(),r.sticky="after");break}if(ot&&(P=ot),l>0&&!N(!B))break}var ft=to(t,r,d,m,!0);return O(d,ft)&&(ft.hitSide=!0),ft}function Eu(t,r,l,o){var c=t.doc,d=r.left,m;if(o=="page"){var v=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),x=Math.max(v-.5*Yi(t.display),3);m=(l>0?r.bottom:r.top)+l*x}else o=="line"&&(m=l>0?r.bottom+3:r.top-3);for(var w;w=aa(t,d,m),!!w.outside;){if(l<0?m<=0:m>=c.height){w.hitSide=!0;break}m+=l*5}return w}var ne=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ht,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};ne.prototype.init=function(t){var r=this,l=this,o=l.cm,c=l.div=t.lineDiv;c.contentEditable=!0,Au(c,o.options.spellcheck,o.options.autocorrect,o.options.autocapitalize);function d(v){for(var x=v.target;x;x=x.parentNode){if(x==c)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(x.className))break}return!1}Y(c,"paste",function(v){!d(v)||oe(o,v)||Du(v,o)||g<=11&&setTimeout(ke(o,function(){return r.updateFromDOM()}),20)}),Y(c,"compositionstart",function(v){r.composing={data:v.data,done:!1}}),Y(c,"compositionupdate",function(v){r.composing||(r.composing={data:v.data,done:!1})}),Y(c,"compositionend",function(v){r.composing&&(v.data!=r.composing.data&&r.readFromDOMSoon(),r.composing.done=!0)}),Y(c,"touchstart",function(){return l.forceCompositionEnd()}),Y(c,"input",function(){r.composing||r.readFromDOMSoon()});function m(v){if(!(!d(v)||oe(o,v))){if(o.somethingSelected())oo({lineWise:!1,text:o.getSelections()}),v.type=="cut"&&o.replaceSelection("",null,"cut");else if(o.options.lineWiseCopyCut){var x=Ou(o);oo({lineWise:!0,text:x.text}),v.type=="cut"&&o.operation(function(){o.setSelections(x.ranges,0,Vt),o.replaceSelection("",null,"cut")})}else return;if(v.clipboardData){v.clipboardData.clearData();var w=xn.text.join(`
`);if(v.clipboardData.setData("Text",w),v.clipboardData.getData("Text")==w){v.preventDefault();return}}var N=Iu(),P=N.firstChild;o.display.lineSpace.insertBefore(N,o.display.lineSpace.firstChild),P.value=xn.text.join(`
`);var W=$t();ut(P),setTimeout(function(){o.display.lineSpace.removeChild(N),W.focus(),W==c&&l.showPrimarySelection()},50)}}Y(c,"copy",m),Y(c,"cut",m)},ne.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},ne.prototype.prepareSelection=function(){var t=Sc(this.cm,!1);return t.focus=$t()==this.div,t},ne.prototype.showSelection=function(t,r){!t||!this.cm.display.view.length||((t.focus||r)&&this.showPrimarySelection(),this.showMultipleSelections(t))},ne.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},ne.prototype.showPrimarySelection=function(){var t=this.getSelection(),r=this.cm,l=r.doc.sel.primary(),o=l.from(),c=l.to();if(r.display.viewTo==r.display.viewFrom||o.line>=r.display.viewTo||c.line<r.display.viewFrom){t.removeAllRanges();return}var d=ao(r,t.anchorNode,t.anchorOffset),m=ao(r,t.focusNode,t.focusOffset);if(!(d&&!d.bad&&m&&!m.bad&&k(Pt(d,m),o)==0&&k(st(d,m),c)==0)){var v=r.display.view,x=o.line>=r.display.viewFrom&&Fu(r,o)||{node:v[0].measure.map[2],offset:0},w=c.line<r.display.viewTo&&Fu(r,c);if(!w){var N=v[v.length-1].measure,P=N.maps?N.maps[N.maps.length-1]:N.map;w={node:P[P.length-1],offset:P[P.length-2]-P[P.length-3]}}if(!x||!w){t.removeAllRanges();return}var W=t.rangeCount&&t.getRangeAt(0),E;try{E=pt(x.node,x.offset,w.offset,w.node)}catch{}E&&(!a&&r.state.focused?(t.collapse(x.node,x.offset),E.collapsed||(t.removeAllRanges(),t.addRange(E))):(t.removeAllRanges(),t.addRange(E)),W&&t.anchorNode==null?t.addRange(W):a&&this.startGracePeriod()),this.rememberSelection()}},ne.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},ne.prototype.showMultipleSelections=function(t){H(this.cm.display.cursorDiv,t.cursors),H(this.cm.display.selectionDiv,t.selection)},ne.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},ne.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var r=t.getRangeAt(0).commonAncestorContainer;return Mt(this.div,r)},ne.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||$t()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},ne.prototype.blur=function(){this.div.blur()},ne.prototype.getField=function(){return this.div},ne.prototype.supportsTouch=function(){return!0},ne.prototype.receivedFocus=function(){var t=this,r=this;this.selectionInEditor()?setTimeout(function(){return t.pollSelection()},20):Ge(this.cm,function(){return r.cm.curOp.selectionChanged=!0});function l(){r.cm.state.focused&&(r.pollSelection(),r.polling.set(r.cm.options.pollInterval,l))}this.polling.set(this.cm.options.pollInterval,l)},ne.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},ne.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var t=this.getSelection(),r=this.cm;if(R&&S&&this.cm.display.gutterSpecs.length&&Lg(t.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var l=ao(r,t.anchorNode,t.anchorOffset),o=ao(r,t.focusNode,t.focusOffset);l&&o&&Ge(r,function(){Ae(r.doc,ni(l,o),Vt),(l.bad||o.bad)&&(r.curOp.selectionChanged=!0)})}}},ne.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t=this.cm,r=t.display,l=t.doc.sel.primary(),o=l.from(),c=l.to();if(o.ch==0&&o.line>t.firstLine()&&(o=et(o.line-1,wt(t.doc,o.line-1).length)),c.ch==wt(t.doc,c.line).text.length&&c.line<t.lastLine()&&(c=et(c.line+1,0)),o.line<r.viewFrom||c.line>r.viewTo-1)return!1;var d,m,v;o.line==r.viewFrom||(d=xi(t,o.line))==0?(m=Jt(r.view[0].line),v=r.view[0].node):(m=Jt(r.view[d].line),v=r.view[d-1].node.nextSibling);var x=xi(t,c.line),w,N;if(x==r.view.length-1?(w=r.viewTo-1,N=r.lineDiv.lastChild):(w=Jt(r.view[x+1].line)-1,N=r.view[x+1].node.previousSibling),!v)return!1;for(var P=t.doc.splitLines(Ng(t,v,N,m,w)),W=kn(t.doc,et(m,0),et(w,wt(t.doc,w).text.length));P.length>1&&W.length>1;)if(at(P)==at(W))P.pop(),W.pop(),w--;else if(P[0]==W[0])P.shift(),W.shift(),m++;else break;for(var E=0,B=0,X=P[0],ot=W[0],ft=Math.min(X.length,ot.length);E<ft&&X.charCodeAt(E)==ot.charCodeAt(E);)++E;for(var dt=at(P),ht=at(W),xt=Math.min(dt.length-(P.length==1?E:0),ht.length-(W.length==1?E:0));B<xt&&dt.charCodeAt(dt.length-B-1)==ht.charCodeAt(ht.length-B-1);)++B;if(P.length==1&&W.length==1&&m==o.line)for(;E&&E>o.ch&&dt.charCodeAt(dt.length-B-1)==ht.charCodeAt(ht.length-B-1);)E--,B++;P[P.length-1]=dt.slice(0,dt.length-B).replace(/^\u200b+/,""),P[0]=P[0].slice(E).replace(/\u200b+$/,"");var Lt=et(m,E),Ct=et(w,W.length?at(W).length-B:0);if(P.length>1||P[0]||k(Lt,Ct))return tr(t.doc,P,Lt,Ct,"+input"),!0},ne.prototype.ensurePolled=function(){this.forceCompositionEnd()},ne.prototype.reset=function(){this.forceCompositionEnd()},ne.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},ne.prototype.readFromDOMSoon=function(){var t=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing)if(t.composing.done)t.composing=null;else return;t.updateFromDOM()},80))},ne.prototype.updateFromDOM=function(){var t=this;(this.cm.isReadOnly()||!this.pollContent())&&Ge(this.cm,function(){return ze(t.cm)})},ne.prototype.setUneditable=function(t){t.contentEditable="false"},ne.prototype.onKeyPress=function(t){t.charCode==0||this.composing||(t.preventDefault(),this.cm.isReadOnly()||ke(this.cm,Fa)(this.cm,String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),0))},ne.prototype.readOnlyChanged=function(t){this.div.contentEditable=String(t!="nocursor")},ne.prototype.onContextMenu=function(){},ne.prototype.resetPosition=function(){},ne.prototype.needsContentAttribute=!0;function Fu(t,r){var l=ra(t,r.line);if(!l||l.hidden)return null;var o=wt(t.doc,r.line),c=uc(l,o,r.line),d=K(o,t.doc.direction),m="left";if(d){var v=vt(d,r.ch);m=v%2?"right":"left"}var x=dc(c.map,r.ch,m);return x.offset=x.collapse=="right"?x.end:x.start,x}function Lg(t){for(var r=t;r;r=r.parentNode)if(/CodeMirror-gutter-wrapper/.test(r.className))return!0;return!1}function sr(t,r){return r&&(t.bad=!0),t}function Ng(t,r,l,o,c){var d="",m=!1,v=t.doc.lineSeparator(),x=!1;function w(E){return function(B){return B.id==E}}function N(){m&&(d+=v,x&&(d+=v),m=x=!1)}function P(E){E&&(N(),d+=E)}function W(E){if(E.nodeType==1){var B=E.getAttribute("cm-text");if(B){P(B);return}var X=E.getAttribute("cm-marker"),ot;if(X){var ft=t.findMarks(et(o,0),et(c+1,0),w(+X));ft.length&&(ot=ft[0].find(0))&&P(kn(t.doc,ot.from,ot.to).join(v));return}if(E.getAttribute("contenteditable")=="false")return;var dt=/^(pre|div|p|li|table|br)$/i.test(E.nodeName);if(!/^br$/i.test(E.nodeName)&&E.textContent.length==0)return;dt&&N();for(var ht=0;ht<E.childNodes.length;ht++)W(E.childNodes[ht]);/^(pre|p)$/i.test(E.nodeName)&&(x=!0),dt&&(m=!0)}else E.nodeType==3&&P(E.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;W(r),r!=l;)r=r.nextSibling,x=!1;return d}function ao(t,r,l){var o;if(r==t.display.lineDiv){if(o=t.display.lineDiv.childNodes[l],!o)return sr(t.clipPos(et(t.display.viewTo-1)),!0);r=null,l=0}else for(o=r;;o=o.parentNode){if(!o||o==t.display.lineDiv)return null;if(o.parentNode&&o.parentNode==t.display.lineDiv)break}for(var c=0;c<t.display.view.length;c++){var d=t.display.view[c];if(d.node==o)return Mg(d,r,l)}}function Mg(t,r,l){var o=t.text.firstChild,c=!1;if(!r||!Mt(o,r))return sr(et(Jt(t.line),0),!0);if(r==o&&(c=!0,r=o.childNodes[l],l=0,!r)){var d=t.rest?at(t.rest):t.line;return sr(et(Jt(d),d.text.length),c)}var m=r.nodeType==3?r:null,v=r;for(!m&&r.childNodes.length==1&&r.firstChild.nodeType==3&&(m=r.firstChild,l&&(l=m.nodeValue.length));v.parentNode!=o;)v=v.parentNode;var x=t.measure,w=x.maps;function N(ot,ft,dt){for(var ht=-1;ht<(w?w.length:0);ht++)for(var xt=ht<0?x.map:w[ht],Lt=0;Lt<xt.length;Lt+=3){var Ct=xt[Lt+2];if(Ct==ot||Ct==ft){var Wt=Jt(ht<0?t.line:t.rest[ht]),se=xt[Lt]+dt;return(dt<0||Ct!=ot)&&(se=xt[Lt+(dt?1:0)]),et(Wt,se)}}}var P=N(m,v,l);if(P)return sr(P,c);for(var W=v.nextSibling,E=m?m.nodeValue.length-l:0;W;W=W.nextSibling){if(P=N(W,W.firstChild,0),P)return sr(et(P.line,P.ch-E),c);E+=W.textContent.length}for(var B=v.previousSibling,X=l;B;B=B.previousSibling){if(P=N(B,B.firstChild,-1),P)return sr(et(P.line,P.ch+X),c);X+=B.textContent.length}}var me=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new Ht,this.hasSelection=!1,this.composing=null};me.prototype.init=function(t){var r=this,l=this,o=this.cm;this.createField(t);var c=this.textarea;t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),A&&(c.style.width="0px"),Y(c,"input",function(){p&&g>=9&&r.hasSelection&&(r.hasSelection=null),l.poll()}),Y(c,"paste",function(m){oe(o,m)||Du(m,o)||(o.state.pasteIncoming=+new Date,l.fastPoll())});function d(m){if(!oe(o,m)){if(o.somethingSelected())oo({lineWise:!1,text:o.getSelections()});else if(o.options.lineWiseCopyCut){var v=Ou(o);oo({lineWise:!0,text:v.text}),m.type=="cut"?o.setSelections(v.ranges,null,Vt):(l.prevInput="",c.value=v.text.join(`
`),ut(c))}else return;m.type=="cut"&&(o.state.cutIncoming=+new Date)}}Y(c,"cut",d),Y(c,"copy",d),Y(t.scroller,"paste",function(m){if(!(Wn(t,m)||oe(o,m))){if(!c.dispatchEvent){o.state.pasteIncoming=+new Date,l.focus();return}var v=new Event("paste");v.clipboardData=m.clipboardData,c.dispatchEvent(v)}}),Y(t.lineSpace,"selectstart",function(m){Wn(t,m)||Pe(m)}),Y(c,"compositionstart",function(){var m=o.getCursor("from");l.composing&&l.composing.range.clear(),l.composing={start:m,range:o.markText(m,o.getCursor("to"),{className:"CodeMirror-composing"})}}),Y(c,"compositionend",function(){l.composing&&(l.poll(),l.composing.range.clear(),l.composing=null)})},me.prototype.createField=function(t){this.wrapper=Iu(),this.textarea=this.wrapper.firstChild},me.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},me.prototype.prepareSelection=function(){var t=this.cm,r=t.display,l=t.doc,o=Sc(t);if(t.options.moveInputWithCursor){var c=yn(t,l.sel.primary().head,"div"),d=r.wrapper.getBoundingClientRect(),m=r.lineDiv.getBoundingClientRect();o.teTop=Math.max(0,Math.min(r.wrapper.clientHeight-10,c.top+m.top-d.top)),o.teLeft=Math.max(0,Math.min(r.wrapper.clientWidth-10,c.left+m.left-d.left))}return o},me.prototype.showSelection=function(t){var r=this.cm,l=r.display;H(l.cursorDiv,t.cursors),H(l.selectionDiv,t.selection),t.teTop!=null&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},me.prototype.reset=function(t){if(!(this.contextMenuPending||this.composing)){var r=this.cm;if(r.somethingSelected()){this.prevInput="";var l=r.getSelection();this.textarea.value=l,r.state.focused&&ut(this.textarea),p&&g>=9&&(this.hasSelection=l)}else t||(this.prevInput=this.textarea.value="",p&&g>=9&&(this.hasSelection=null))}},me.prototype.getField=function(){return this.textarea},me.prototype.supportsTouch=function(){return!1},me.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!G||$t()!=this.textarea))try{this.textarea.focus()}catch{}},me.prototype.blur=function(){this.textarea.blur()},me.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},me.prototype.receivedFocus=function(){this.slowPoll()},me.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},me.prototype.fastPoll=function(){var t=!1,r=this;r.pollingFast=!0;function l(){var o=r.poll();!o&&!t?(t=!0,r.polling.set(60,l)):(r.pollingFast=!1,r.slowPoll())}r.polling.set(20,l)},me.prototype.poll=function(){var t=this,r=this.cm,l=this.textarea,o=this.prevInput;if(this.contextMenuPending||!r.state.focused||Ps(l)&&!o&&!this.composing||r.isReadOnly()||r.options.disableInput||r.state.keySeq)return!1;var c=l.value;if(c==o&&!r.somethingSelected())return!1;if(p&&g>=9&&this.hasSelection===c||J&&/[\uf700-\uf7ff]/.test(c))return r.display.input.reset(),!1;if(r.doc.sel==r.display.selForContextMenu){var d=c.charCodeAt(0);if(d==8203&&!o&&(o="​"),d==8666)return this.reset(),this.cm.execCommand("undo")}for(var m=0,v=Math.min(o.length,c.length);m<v&&o.charCodeAt(m)==c.charCodeAt(m);)++m;return Ge(r,function(){Fa(r,c.slice(m),o.length-m,null,t.composing?"*compose":null),c.length>1e3||c.indexOf(`
`)>-1?l.value=t.prevInput="":t.prevInput=c,t.composing&&(t.composing.range.clear(),t.composing.range=r.markText(t.composing.start,r.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},me.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},me.prototype.onKeyPress=function(){p&&g>=9&&(this.hasSelection=null),this.fastPoll()},me.prototype.onContextMenu=function(t){var r=this,l=r.cm,o=l.display,c=r.textarea;r.contextMenuPending&&r.contextMenuPending();var d=bi(l,t),m=o.scroller.scrollTop;if(!d||T)return;var v=l.options.resetSelectionOnContextMenu;v&&l.doc.sel.contains(d)==-1&&ke(l,Ae)(l.doc,ni(d),Vt);var x=c.style.cssText,w=r.wrapper.style.cssText,N=r.wrapper.offsetParent.getBoundingClientRect();r.wrapper.style.cssText="position: static",c.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(t.clientY-N.top-5)+"px; left: "+(t.clientX-N.left-5)+`px;
      z-index: 1000; background: `+(p?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var P;b&&(P=window.scrollY),o.input.focus(),b&&window.scrollTo(null,P),o.input.reset(),l.somethingSelected()||(c.value=r.prevInput=" "),r.contextMenuPending=E,o.selForContextMenu=l.doc.sel,clearTimeout(o.detectingSelectAll);function W(){if(c.selectionStart!=null){var X=l.somethingSelected(),ot="​"+(X?c.value:"");c.value="⇚",c.value=ot,r.prevInput=X?"":"​",c.selectionStart=1,c.selectionEnd=ot.length,o.selForContextMenu=l.doc.sel}}function E(){if(r.contextMenuPending==E&&(r.contextMenuPending=!1,r.wrapper.style.cssText=w,c.style.cssText=x,p&&g<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=m),c.selectionStart!=null)){(!p||p&&g<9)&&W();var X=0,ot=function(){o.selForContextMenu==l.doc.sel&&c.selectionStart==0&&c.selectionEnd>0&&r.prevInput=="​"?ke(l,tu)(l):X++<10?o.detectingSelectAll=setTimeout(ot,500):(o.selForContextMenu=null,o.input.reset())};o.detectingSelectAll=setTimeout(ot,200)}}if(p&&g>=9&&W(),bt){gi(t);var B=function(){zt(window,"mouseup",B),setTimeout(E,20)};Y(window,"mouseup",B)}else setTimeout(E,50)},me.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled=t=="nocursor",this.textarea.readOnly=!!t},me.prototype.setUneditable=function(){},me.prototype.needsContentAttribute=!1;function Dg(t,r){if(r=r?Ot(r):{},r.value=t.value,!r.tabindex&&t.tabIndex&&(r.tabindex=t.tabIndex),!r.placeholder&&t.placeholder&&(r.placeholder=t.placeholder),r.autofocus==null){var l=$t();r.autofocus=l==t||t.getAttribute("autofocus")!=null&&l==document.body}function o(){t.value=v.getValue()}var c;if(t.form&&(Y(t.form,"submit",o),!r.leaveSubmitMethodAlone)){var d=t.form;c=d.submit;try{var m=d.submit=function(){o(),d.submit=c,d.submit(),d.submit=m}}catch{}}r.finishInit=function(x){x.save=o,x.getTextArea=function(){return t},x.toTextArea=function(){x.toTextArea=isNaN,o(),t.parentNode.removeChild(x.getWrapperElement()),t.style.display="",t.form&&(zt(t.form,"submit",o),!r.leaveSubmitMethodAlone&&typeof t.form.submit=="function"&&(t.form.submit=c))}},t.style.display="none";var v=ae(function(x){return t.parentNode.insertBefore(x,t.nextSibling)},r);return v}function Pg(t){t.off=zt,t.on=Y,t.wheelEventPixels=Hp,t.Doc=Be,t.splitLines=xr,t.countColumn=Rt,t.findColumn=fe,t.isWordChar=Kt,t.Pass=Et,t.signal=Tt,t.Line=$i,t.changeEnd=ii,t.scrollbarModel=Dc,t.Pos=et,t.cmpPos=k,t.modes=an,t.mimeModes=nn,t.resolveMode=zi,t.getMode=Bi,t.modeExtensions=gn,t.extendMode=mn,t.copyState=rn,t.startState=kr,t.innerMode=wr,t.commands=Kr,t.keyMap=Bn,t.keyName=mu,t.isModifierKey=pu,t.lookupKey=nr,t.normalizeKeyMap=og,t.StringStream=he,t.SharedTextMarker=Vr,t.TextMarker=si,t.LineWidget=jr,t.e_preventDefault=Pe,t.e_stopPropagation=Wi,t.e_stop=gi,t.addClass=$,t.contains=Mt,t.rmClass=Q,t.keyNames=oi}wg(ae),Tg(ae);var Og="iter insert remove copy getEditor constructor".split(" ");for(var lo in Be.prototype)Be.prototype.hasOwnProperty(lo)&&mt(Og,lo)<0&&(ae.prototype[lo]=function(t){return function(){return t.apply(this.doc,arguments)}}(Be.prototype[lo]));return tn(Be),ae.inputStyles={textarea:me,contenteditable:ne},ae.defineMode=function(t){!ae.defaults.mode&&t!="null"&&(ae.defaults.mode=t),As.apply(this,arguments)},ae.defineMIME=Fn,ae.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),ae.defineMIME("text/plain","null"),ae.defineExtension=function(t,r){ae.prototype[t]=r},ae.defineDocExtension=function(t,r){Be.prototype[t]=r},ae.fromTextArea=Dg,Pg(ae),ae.version="5.65.2",ae})}(To)),To.exports}var am=Rh();const Ts=sm(am);var Gu={exports:{}},qu;function lm(){return qu||(qu=1,function(i,e){(function(n){n(Rh())})(function(n){n.defineMode("javascript",function(s,a){var u=s.indentUnit,f=a.statementIndent,h=a.jsonld,p=a.json||h,g=a.trackScope!==!1,b=a.typescript,_=a.wordCharacters||/[\w$\xa1-\uffff]/,S=function(){function k(Oe){return{type:Oe,style:"keyword"}}var O=k("keyword a"),U=k("keyword b"),st=k("keyword c"),Pt=k("keyword d"),Xt=k("operator"),yt={type:"atom",style:"atom"};return{if:k("if"),while:O,with:O,else:U,do:U,try:U,finally:U,return:Pt,break:Pt,continue:Pt,new:k("new"),delete:st,void:st,throw:st,debugger:k("debugger"),var:k("var"),const:k("var"),let:k("var"),function:k("function"),catch:k("catch"),for:k("for"),switch:k("switch"),case:k("case"),default:k("default"),in:Xt,typeof:Xt,instanceof:Xt,true:yt,false:yt,null:yt,undefined:yt,NaN:yt,Infinity:yt,this:k("this"),class:k("class"),super:k("atom"),yield:st,export:k("export"),import:k("import"),extends:st,await:st}}(),T=/[+\-*&%=<>!?|~^@]/,M=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function D(k){for(var O=!1,U,st=!1;(U=k.next())!=null;){if(!O){if(U=="/"&&!st)return;U=="["?st=!0:st&&U=="]"&&(st=!1)}O=!O&&U=="\\"}}var L,A;function R(k,O,U){return L=k,A=U,O}function G(k,O){var U=k.next();if(U=='"'||U=="'")return O.tokenize=J(U),O.tokenize(k,O);if(U=="."&&k.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return R("number","number");if(U=="."&&k.match(".."))return R("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(U))return R(U);if(U=="="&&k.eat(">"))return R("=>","operator");if(U=="0"&&k.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return R("number","number");if(/\d/.test(U))return k.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),R("number","number");if(U=="/")return k.eat("*")?(O.tokenize=j,j(k,O)):k.eat("/")?(k.skipToEnd(),R("comment","comment")):et(k,O,1)?(D(k),k.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),R("regexp","string-2")):(k.eat("="),R("operator","operator",k.current()));if(U=="`")return O.tokenize=V,V(k,O);if(U=="#"&&k.peek()=="!")return k.skipToEnd(),R("meta","meta");if(U=="#"&&k.eatWhile(_))return R("variable","property");if(U=="<"&&k.match("!--")||U=="-"&&k.match("->")&&!/\S/.test(k.string.slice(0,k.start)))return k.skipToEnd(),R("comment","comment");if(T.test(U))return(U!=">"||!O.lexical||O.lexical.type!=">")&&(k.eat("=")?(U=="!"||U=="=")&&k.eat("="):/[<>*+\-|&?]/.test(U)&&(k.eat(U),U==">"&&k.eat(U))),U=="?"&&k.eat(".")?R("."):R("operator","operator",k.current());if(_.test(U)){k.eatWhile(_);var st=k.current();if(O.lastType!="."){if(S.propertyIsEnumerable(st)){var Pt=S[st];return R(Pt.type,Pt.style,st)}if(st=="async"&&k.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return R("async","keyword",st)}return R("variable","variable",st)}}function J(k){return function(O,U){var st=!1,Pt;if(h&&O.peek()=="@"&&O.match(M))return U.tokenize=G,R("jsonld-keyword","meta");for(;(Pt=O.next())!=null&&!(Pt==k&&!st);)st=!st&&Pt=="\\";return st||(U.tokenize=G),R("string","string")}}function j(k,O){for(var U=!1,st;st=k.next();){if(st=="/"&&U){O.tokenize=G;break}U=st=="*"}return R("comment","comment")}function V(k,O){for(var U=!1,st;(st=k.next())!=null;){if(!U&&(st=="`"||st=="$"&&k.eat("{"))){O.tokenize=G;break}U=!U&&st=="\\"}return R("quasi","string-2",k.current())}var it="([{}])";function Z(k,O){O.fatArrowAt&&(O.fatArrowAt=null);var U=k.string.indexOf("=>",k.start);if(!(U<0)){if(b){var st=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(k.string.slice(k.start,U));st&&(U=st.index)}for(var Pt=0,Xt=!1,yt=U-1;yt>=0;--yt){var Oe=k.string.charAt(yt),sn=it.indexOf(Oe);if(sn>=0&&sn<3){if(!Pt){++yt;break}if(--Pt==0){Oe=="("&&(Xt=!0);break}}else if(sn>=3&&sn<6)++Pt;else if(_.test(Oe))Xt=!0;else if(/["'\/`]/.test(Oe))for(;;--yt){if(yt==0)return;var Ui=k.string.charAt(yt-1);if(Ui==Oe&&k.string.charAt(yt-2)!="\\"){yt--;break}}else if(Xt&&!Pt){++yt;break}}Xt&&!Pt&&(O.fatArrowAt=yt)}}var bt={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function ct(k,O,U,st,Pt,Xt){this.indented=k,this.column=O,this.type=U,this.prev=Pt,this.info=Xt,st!=null&&(this.align=st)}function Q(k,O){if(!g)return!1;for(var U=k.localVars;U;U=U.next)if(U.name==O)return!0;for(var st=k.context;st;st=st.prev)for(var U=st.vars;U;U=U.next)if(U.name==O)return!0}function rt(k,O,U,st,Pt){var Xt=k.cc;for(H.state=k,H.stream=Pt,H.marked=null,H.cc=Xt,H.style=O,k.lexical.hasOwnProperty("align")||(k.lexical.align=!0);;){var yt=Xt.length?Xt.pop():p?jt:Vt;if(yt(U,st)){for(;Xt.length&&Xt[Xt.length-1].lex;)Xt.pop()();return H.marked?H.marked:U=="variable"&&Q(k,st)?"variable-2":O}}}var H={state:null,column:null,marked:null,cc:null};function I(){for(var k=arguments.length-1;k>=0;k--)H.cc.push(arguments[k])}function C(){return I.apply(null,arguments),!0}function pt(k,O){for(var U=O;U;U=U.next)if(U.name==k)return!0;return!1}function Mt(k){var O=H.state;if(H.marked="def",!!g){if(O.context){if(O.lexical.info=="var"&&O.context&&O.context.block){var U=$t(k,O.context);if(U!=null){O.context=U;return}}else if(!pt(k,O.localVars)){O.localVars=new ut(k,O.localVars);return}}a.globalVars&&!pt(k,O.globalVars)&&(O.globalVars=new ut(k,O.globalVars))}}function $t(k,O){if(O)if(O.block){var U=$t(k,O.prev);return U?U==O.prev?O:new gt(U,O.vars,!0):null}else return pt(k,O.vars)?O:new gt(O.prev,new ut(k,O.vars),!1);else return null}function $(k){return k=="public"||k=="private"||k=="protected"||k=="abstract"||k=="readonly"}function gt(k,O,U){this.prev=k,this.vars=O,this.block=U}function ut(k,O){this.name=k,this.next=O}var kt=new ut("this",new ut("arguments",null));function Ot(){H.state.context=new gt(H.state.context,H.state.localVars,!1),H.state.localVars=kt}function Rt(){H.state.context=new gt(H.state.context,H.state.localVars,!0),H.state.localVars=null}Ot.lex=Rt.lex=!0;function Ht(){H.state.localVars=H.state.context.vars,H.state.context=H.state.context.prev}Ht.lex=!0;function mt(k,O){var U=function(){var st=H.state,Pt=st.indented;if(st.lexical.type=="stat")Pt=st.lexical.indented;else for(var Xt=st.lexical;Xt&&Xt.type==")"&&Xt.align;Xt=Xt.prev)Pt=Xt.indented;st.lexical=new ct(Pt,H.stream.column(),k,null,st.lexical,O)};return U.lex=!0,U}function St(){var k=H.state;k.lexical.prev&&(k.lexical.type==")"&&(k.indented=k.lexical.indented),k.lexical=k.lexical.prev)}St.lex=!0;function Et(k){function O(U){return U==k?C():k==";"||U=="}"||U==")"||U=="]"?I():C(O)}return O}function Vt(k,O){return k=="var"?C(mt("vardef",O),yr,Et(";"),St):k=="keyword a"?C(mt("form"),Ve,Vt,St):k=="keyword b"?C(mt("form"),Vt,St):k=="keyword d"?H.stream.match(/^\s*$/,!1)?C():C(mt("stat"),at,Et(";"),St):k=="debugger"?C(Et(";")):k=="{"?C(mt("}"),Rt,K,St,Ht):k==";"?C():k=="if"?(H.state.lexical.info=="else"&&H.state.cc[H.state.cc.length-1]==St&&H.state.cc.pop()(),C(mt("form"),Ve,Vt,St,Ps)):k=="function"?C(an):k=="for"?C(mt("form"),Rt,Os,Vt,Ht,St):k=="class"||b&&O=="interface"?(H.marked="keyword",C(mt("form",k=="class"?k:O),Bi,St)):k=="variable"?b&&O=="declare"?(H.marked="keyword",C(Vt)):b&&(O=="module"||O=="enum"||O=="type")&&H.stream.match(/^\s*\w/,!1)?(H.marked="keyword",O=="enum"?C(Sn):O=="type"?C(As,Et("operator"),Tt,Et(";")):C(mt("form"),We,Et("{"),mt("}"),K,St,St)):b&&O=="namespace"?(H.marked="keyword",C(mt("form"),jt,Vt,St)):b&&O=="abstract"?(H.marked="keyword",C(Vt)):C(mt("stat"),In):k=="switch"?C(mt("form"),Ve,Et("{"),mt("}","switch"),Rt,K,St,St,Ht):k=="case"?C(jt,Et(":")):k=="default"?C(Et(":")):k=="catch"?C(mt("form"),Ot,dn,Vt,St,Ht):k=="export"?C(mt("stat"),wr,St):k=="import"?C(mt("stat"),he,St):k=="async"?C(Vt):O=="@"?C(jt,Vt):I(mt("stat"),jt,Et(";"),St)}function dn(k){if(k=="(")return C(Fn,Et(")"))}function jt(k,O){return q(k,O,!1)}function fe(k,O){return q(k,O,!0)}function Ve(k){return k!="("?I():C(mt(")"),at,Et(")"),St)}function q(k,O,U){if(H.state.fatArrowAt==H.stream.start){var st=U?Kt:Qt;if(k=="(")return C(Ot,mt(")"),vt(Fn,")"),St,Et("=>"),st,Ht);if(k=="variable")return I(Ot,We,Et("=>"),st,Ht)}var Pt=U?It:Dt;return bt.hasOwnProperty(k)?C(Pt):k=="function"?C(an,Pt):k=="class"||b&&O=="interface"?(H.marked="keyword",C(mt("form"),zi,St)):k=="keyword c"||k=="async"?C(U?fe:jt):k=="("?C(mt(")"),at,Et(")"),St,Pt):k=="operator"||k=="spread"?C(U?fe:jt):k=="["?C(mt("]"),Jt,St,Pt):k=="{"?z(F,"}",null,Pt):k=="quasi"?I(Yt,Pt):k=="new"?C(Ye(U)):C()}function at(k){return k.match(/[;\}\)\],]/)?I():I(jt)}function Dt(k,O){return k==","?C(at):It(k,O,!1)}function It(k,O,U){var st=U==!1?Dt:It,Pt=U==!1?jt:fe;if(k=="=>")return C(Ot,U?Kt:Qt,Ht);if(k=="operator")return/\+\+|--/.test(O)||b&&O=="!"?C(st):b&&O=="<"&&H.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?C(mt(">"),vt(Tt,">"),St,st):O=="?"?C(jt,Et(":"),Pt):C(Pt);if(k=="quasi")return I(Yt,st);if(k!=";"){if(k=="(")return z(fe,")","call",st);if(k==".")return C(En,st);if(k=="[")return C(mt("]"),at,Et("]"),St,st);if(b&&O=="as")return H.marked="keyword",C(Tt,st);if(k=="regexp")return H.state.lastType=H.marked="operator",H.stream.backUp(H.stream.pos-H.stream.start-1),C(Pt)}}function Yt(k,O){return k!="quasi"?I():O.slice(O.length-2)!="${"?C(Yt):C(at,At)}function At(k){if(k=="}")return H.marked="string-2",H.state.tokenize=V,C(Yt)}function Qt(k){return Z(H.stream,H.state),I(k=="{"?Vt:jt)}function Kt(k){return Z(H.stream,H.state),I(k=="{"?Vt:fe)}function Ye(k){return function(O){return O=="."?C(k?pi:pn):O=="variable"&&b?C(gi,k?It:Dt):I(k?fe:jt)}}function pn(k,O){if(O=="target")return H.marked="keyword",C(Dt)}function pi(k,O){if(O=="target")return H.marked="keyword",C(It)}function In(k){return k==":"?C(St,Vt):I(Dt,Et(";"),St)}function En(k){if(k=="variable")return H.marked="property",C()}function F(k,O){if(k=="async")return H.marked="property",C(F);if(k=="variable"||H.style=="keyword"){if(H.marked="property",O=="get"||O=="set")return C(tt);var U;return b&&H.state.fatArrowAt==H.stream.start&&(U=H.stream.match(/^\s*:\s*/,!1))&&(H.state.fatArrowAt=H.stream.pos+U[0].length),C(lt)}else{if(k=="number"||k=="string")return H.marked=h?"property":H.style+" property",C(lt);if(k=="jsonld-keyword")return C(lt);if(b&&$(O))return H.marked="keyword",C(F);if(k=="[")return C(jt,_t,Et("]"),lt);if(k=="spread")return C(fe,lt);if(O=="*")return H.marked="keyword",C(F);if(k==":")return I(lt)}}function tt(k){return k!="variable"?I(lt):(H.marked="property",C(an))}function lt(k){if(k==":")return C(fe);if(k=="(")return I(an)}function vt(k,O,U){function st(Pt,Xt){if(U?U.indexOf(Pt)>-1:Pt==","){var yt=H.state.lexical;return yt.info=="call"&&(yt.pos=(yt.pos||0)+1),C(function(Oe,sn){return Oe==O||sn==O?I():I(k)},st)}return Pt==O||Xt==O?C():U&&U.indexOf(";")>-1?I(k):C(Et(O))}return function(Pt,Xt){return Pt==O||Xt==O?C():I(k,st)}}function z(k,O,U){for(var st=3;st<arguments.length;st++)H.cc.push(arguments[st]);return C(mt(O,U),vt(k,O),St)}function K(k){return k=="}"?C():I(Vt,K)}function _t(k,O){if(b){if(k==":")return C(Tt);if(O=="?")return C(_t)}}function Y(k,O){if(b&&(k==":"||O=="in"))return C(Tt)}function Gt(k){if(b&&k==":")return H.stream.match(/^\s*\w+\s+is\b/,!1)?C(jt,zt,Tt):C(Tt)}function zt(k,O){if(O=="is")return H.marked="keyword",C()}function Tt(k,O){if(O=="keyof"||O=="typeof"||O=="infer"||O=="readonly")return H.marked="keyword",C(O=="typeof"?fe:Tt);if(k=="variable"||O=="void")return H.marked="type",C(en);if(O=="|"||O=="&")return C(Tt);if(k=="string"||k=="number"||k=="atom")return C(en);if(k=="[")return C(mt("]"),vt(Tt,"]",","),St,en);if(k=="{")return C(mt("}"),Xe,St,en);if(k=="(")return C(vt(Wi,")"),oe,en);if(k=="<")return C(vt(Tt,">"),Tt);if(k=="quasi")return I(tn,en)}function oe(k){if(k=="=>")return C(Tt)}function Xe(k){return k.match(/[\}\)\]]/)?C():k==","||k==";"?C(Xe):I(te,Xe)}function te(k,O){if(k=="variable"||H.style=="keyword")return H.marked="property",C(te);if(O=="?"||k=="number"||k=="string")return C(te);if(k==":")return C(Tt);if(k=="[")return C(Et("variable"),Y,Et("]"),te);if(k=="(")return I(nn,te);if(!k.match(/[;\}\)\],]/))return C()}function tn(k,O){return k!="quasi"?I():O.slice(O.length-2)!="${"?C(tn):C(Tt,Pe)}function Pe(k){if(k=="}")return H.marked="string-2",H.state.tokenize=V,C(tn)}function Wi(k,O){return k=="variable"&&H.stream.match(/^\s*[?:]/,!1)||O=="?"?C(Wi):k==":"?C(Tt):k=="spread"?C(Wi):I(Tt)}function en(k,O){if(O=="<")return C(mt(">"),vt(Tt,">"),St,en);if(O=="|"||k=="."||O=="&")return C(Tt);if(k=="[")return C(Tt,Et("]"),en);if(O=="extends"||O=="implements")return H.marked="keyword",C(Tt);if(O=="?")return C(Tt,Et(":"),Tt)}function gi(k,O){if(O=="<")return C(mt(">"),vt(Tt,">"),St,en)}function Jn(){return I(Tt,Ms)}function Ms(k,O){if(O=="=")return C(Tt)}function yr(k,O){return O=="enum"?(H.marked="keyword",C(Sn)):I(We,_t,wn,xr)}function We(k,O){if(b&&$(O))return H.marked="keyword",C(We);if(k=="variable")return Mt(O),C();if(k=="spread")return C(We);if(k=="[")return z(br,"]");if(k=="{")return z(Ds,"}")}function Ds(k,O){return k=="variable"&&!H.stream.match(/^\s*:/,!1)?(Mt(O),C(wn)):(k=="variable"&&(H.marked="property"),k=="spread"?C(We):k=="}"?I():k=="["?C(jt,Et("]"),Et(":"),Ds):C(Et(":"),We,wn))}function br(){return I(We,wn)}function wn(k,O){if(O=="=")return C(fe)}function xr(k){if(k==",")return C(yr)}function Ps(k,O){if(k=="keyword b"&&O=="else")return C(mt("form","else"),Vt,St)}function Os(k,O){if(O=="await")return C(Os);if(k=="(")return C(mt(")"),_r,St)}function _r(k){return k=="var"?C(yr,Zn):k=="variable"?C(Zn):I(Zn)}function Zn(k,O){return k==")"?C():k==";"?C(Zn):O=="in"||O=="of"?(H.marked="keyword",C(jt,Zn)):I(jt,Zn)}function an(k,O){if(O=="*")return H.marked="keyword",C(an);if(k=="variable")return Mt(O),C(an);if(k=="(")return C(Ot,mt(")"),vt(Fn,")"),St,Gt,Vt,Ht);if(b&&O=="<")return C(mt(">"),vt(Jn,">"),St,an)}function nn(k,O){if(O=="*")return H.marked="keyword",C(nn);if(k=="variable")return Mt(O),C(nn);if(k=="(")return C(Ot,mt(")"),vt(Fn,")"),St,Gt,Ht);if(b&&O=="<")return C(mt(">"),vt(Jn,">"),St,nn)}function As(k,O){if(k=="keyword"||k=="variable")return H.marked="type",C(As);if(O=="<")return C(mt(">"),vt(Jn,">"),St)}function Fn(k,O){return O=="@"&&C(jt,Fn),k=="spread"?C(Fn):b&&$(O)?(H.marked="keyword",C(Fn)):b&&k=="this"?C(_t,wn):I(We,_t,wn)}function zi(k,O){return k=="variable"?Bi(k,O):gn(k,O)}function Bi(k,O){if(k=="variable")return Mt(O),C(gn)}function gn(k,O){if(O=="<")return C(mt(">"),vt(Jn,">"),St,gn);if(O=="extends"||O=="implements"||b&&k==",")return O=="implements"&&(H.marked="keyword"),C(b?Tt:jt,gn);if(k=="{")return C(mt("}"),mn,St)}function mn(k,O){if(k=="async"||k=="variable"&&(O=="static"||O=="get"||O=="set"||b&&$(O))&&H.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return H.marked="keyword",C(mn);if(k=="variable"||H.style=="keyword")return H.marked="property",C(rn,mn);if(k=="number"||k=="string")return C(rn,mn);if(k=="[")return C(jt,_t,Et("]"),rn,mn);if(O=="*")return H.marked="keyword",C(mn);if(b&&k=="(")return I(nn,mn);if(k==";"||k==",")return C(mn);if(k=="}")return C();if(O=="@")return C(jt,mn)}function rn(k,O){if(O=="!"||O=="?")return C(rn);if(k==":")return C(Tt,wn);if(O=="=")return C(fe);var U=H.state.lexical.prev,st=U&&U.info=="interface";return I(st?nn:an)}function wr(k,O){return O=="*"?(H.marked="keyword",C(Ke,Et(";"))):O=="default"?(H.marked="keyword",C(jt,Et(";"))):k=="{"?C(vt(kr,"}"),Ke,Et(";")):I(Vt)}function kr(k,O){if(O=="as")return H.marked="keyword",C(Et("variable"));if(k=="variable")return I(fe,kr)}function he(k){return k=="string"?C():k=="("?I(jt):k=="."?I(Dt):I(wt,kn,Ke)}function wt(k,O){return k=="{"?z(wt,"}"):(k=="variable"&&Mt(O),O=="*"&&(H.marked="keyword"),C(Sr))}function kn(k){if(k==",")return C(wt,kn)}function Sr(k,O){if(O=="as")return H.marked="keyword",C(wt)}function Ke(k,O){if(O=="from")return H.marked="keyword",C(jt)}function Jt(k){return k=="]"?C():I(vt(fe,"]"))}function Sn(){return I(mt("form"),We,Et("{"),mt("}"),vt(mi,"}"),St,St)}function mi(){return I(We,wn)}function Cr(k,O){return k.lastType=="operator"||k.lastType==","||T.test(O.charAt(0))||/[,.]/.test(O.charAt(0))}function et(k,O,U){return O.tokenize==G&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(O.lastType)||O.lastType=="quasi"&&/\{\s*$/.test(k.string.slice(0,k.pos-(U||0)))}return{startState:function(k){var O={tokenize:G,lastType:"sof",cc:[],lexical:new ct((k||0)-u,0,"block",!1),localVars:a.localVars,context:a.localVars&&new gt(null,null,!1),indented:k||0};return a.globalVars&&typeof a.globalVars=="object"&&(O.globalVars=a.globalVars),O},token:function(k,O){if(k.sol()&&(O.lexical.hasOwnProperty("align")||(O.lexical.align=!1),O.indented=k.indentation(),Z(k,O)),O.tokenize!=j&&k.eatSpace())return null;var U=O.tokenize(k,O);return L=="comment"?U:(O.lastType=L=="operator"&&(A=="++"||A=="--")?"incdec":L,rt(O,U,L,A,k))},indent:function(k,O){if(k.tokenize==j||k.tokenize==V)return n.Pass;if(k.tokenize!=G)return 0;var U=O&&O.charAt(0),st=k.lexical,Pt;if(!/^\s*else\b/.test(O))for(var Xt=k.cc.length-1;Xt>=0;--Xt){var yt=k.cc[Xt];if(yt==St)st=st.prev;else if(yt!=Ps&&yt!=Ht)break}for(;(st.type=="stat"||st.type=="form")&&(U=="}"||(Pt=k.cc[k.cc.length-1])&&(Pt==Dt||Pt==It)&&!/^[,\.=+\-*:?[\(]/.test(O));)st=st.prev;f&&st.type==")"&&st.prev.type=="stat"&&(st=st.prev);var Oe=st.type,sn=U==Oe;return Oe=="vardef"?st.indented+(k.lastType=="operator"||k.lastType==","?st.info.length+1:0):Oe=="form"&&U=="{"?st.indented:Oe=="form"?st.indented+u:Oe=="stat"?st.indented+(Cr(k,O)?f||u:0):st.info=="switch"&&!sn&&a.doubleIndentSwitch!=!1?st.indented+(/^(?:case|default)\b/.test(O)?u:2*u):st.align?st.column+(sn?0:1):st.indented+(sn?0:u)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:p?null:"/*",blockCommentEnd:p?null:"*/",blockCommentContinue:p?null:" * ",lineComment:p?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:p?"json":"javascript",jsonldMode:h,jsonMode:p,expressionAllowed:et,skipExpression:function(k){rt(k,"atom","atom","true",new n.StringStream("",2,null))}}}),n.registerHelper("wordChars","javascript",/[\w$]/),n.defineMIME("text/javascript","javascript"),n.defineMIME("text/ecmascript","javascript"),n.defineMIME("application/javascript","javascript"),n.defineMIME("application/x-javascript","javascript"),n.defineMIME("application/ecmascript","javascript"),n.defineMIME("application/json",{name:"javascript",json:!0}),n.defineMIME("application/x-json",{name:"javascript",json:!0}),n.defineMIME("application/manifest+json",{name:"javascript",json:!0}),n.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),n.defineMIME("text/typescript",{name:"javascript",typescript:!0}),n.defineMIME("application/typescript",{name:"javascript",typescript:!0})})}()),Gu.exports}lm();const cm=[{label:"1 Minute",value:60},{label:"5 Minutes",value:300},{label:"15 Minutes",value:900},{label:"30 Minutes",value:1800},{label:"1 Hour",value:3600},{label:"3 Hours",value:10800},{label:"6 Hours",value:21600},{label:"12 Hours",value:43200},{label:"1 Day",value:86400},{label:"1 Week",value:604800}],um=({isDarkMode:i})=>{const[e,n]=nt([]),[s,a]=nt(null),[u,f]=nt(!0),[h,p]=nt(null),g=ge(null),b=ge(null),[_,S]=nt(!1),[T,M]=nt(""),[D,L]=nt(""),[A,R]=nt(!1),[G,J]=nt(null),j=async()=>{try{const $=await Nt.getTaskList();n($),p(null)}catch($){console.error("Tasks yüklenemedi:",$),p("Failed to load tasks")}finally{f(!1)}},V=async $=>{try{if(s&&D!==s.script&&!window.confirm("You have unsaved changes. Do you want to discard them?"))return;const gt=await Nt.getTaskDetail($);a(gt),L(gt.script||""),M(""),S(!1),R(!1)}catch(gt){console.error("Task detayı alınamadı:",gt)}},it=async($,gt)=>{try{await Nt.updateTask($,{enabled:gt}),a(ut=>({...ut,enabled:gt,script:D})),n(e.map(ut=>ut.id===$?{...ut,enabled:gt}:ut))}catch(ut){console.error("Task enable/disable edilemedi:",ut),a(kt=>({...kt,enabled:!gt,script:D}))}},Z=async($,gt)=>{try{const ut=parseInt(gt);await Nt.updateTask($,{frequency:ut}),a(kt=>({...kt,frequency:ut,script:D})),n(e.map(kt=>kt.id===$?{...kt,frequency:ut}:kt))}catch(ut){console.error("Frequency güncellenemedi:",ut)}},bt=async($,gt)=>{try{await Nt.updateTask($,{logs:gt}),a(ut=>({...ut,logs:gt,script:D})),n(e.map(ut=>ut.id===$?{...ut,logs:gt}:ut))}catch(ut){console.error("Log ayarı güncellenemedi:",ut),a(kt=>({...kt,logs:!gt,script:D}))}};Ut(()=>{(async()=>{await Promise.all([j(),$t()])})();const gt=setInterval($t,3e3);return()=>clearInterval(gt)},[]),Ut(()=>{if(s&&g.current){b.current&&b.current.toTextArea(),b.current=Ts.fromTextArea(g.current,{mode:"haxe",theme:i?"monokai":"default",lineNumbers:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0,readOnly:!1,autofocus:!0}),L(s.script||""),b.current.setValue(s.script||"");const $=gt=>{const ut=gt.getValue();L(ut)};return b.current.on("change",$),()=>{b.current&&(b.current.off("change",$),b.current.toTextArea(),b.current=null)}}},[s,i]);const ct=$=>$?new Date($).toLocaleString():"Never",Q=async()=>{try{const $=D;a(gt=>({...gt,output:""})),await Nt.executeScriptStream($,gt=>{a(ut=>({...ut,output:ut.output?ut.output+gt:gt,script:D}))})}catch($){console.error("Script çalıştırılamadı:",$),a(gt=>({...gt,output:`Error: ${$.message}`,script:D}))}},rt=async()=>{try{await Nt.updateTask(s.id,{script:D}),a($=>({...$,script:D,output:"Task saved successfully!"})),n(e.map($=>$.id===s.id?{...$,script:D}:$))}catch($){console.error("Script kaydedilemedi:",$);let gt=$.message;gt.includes("rulescript:")&&(gt=gt.split(`
`)[0].replace("rulescript:","Line ").replace("Unexpected token:","Syntax error:")),a(ut=>({...ut,output:`Error saving task: ${gt}`}))}},H=()=>{M(s.name),S(!0)},I=async()=>{try{await Nt.updateTask(s.id,{name:T}),a($=>({...$,name:T,script:D})),n(e.map($=>$.id===s.id?{...$,name:T}:$)),S(!1)}catch($){console.error("İsim güncellenemedi:",$)}},C=async()=>{try{const $=await Nt.createTask("New Task");n([...e,$]),a($)}catch($){console.error("Task oluşturulamadı:",$)}},pt=async($,gt)=>{if(gt.stopPropagation(),!!window.confirm("Are you sure you want to delete this task?"))try{(await Nt.deleteTask($)).success&&(n(kt=>kt.filter(Ot=>Ot.id!==$)),(s==null?void 0:s.id)===$&&(a(null),L(""),b.current&&b.current.setValue("")))}catch(ut){console.error("Task silinemedi:",ut),alert("Failed to delete task: "+ut.message)}},Mt=async()=>{if(s)try{R(!0),a($=>({...$,logContent:"",output:$.output})),await Nt.streamTaskLog(s.id,$=>{a(gt=>({...gt,logContent:(gt.logContent||"")+$}))})}catch($){console.error("Loglar alınamadı:",$),a(gt=>({...gt,logContent:`Error loading logs: ${$.message}`}))}},$t=async()=>{try{const $=await Nt.getTaskStatus(),gt=$.find(ut=>ut.status===1);if(J(gt||null),n(ut=>ut.map(kt=>{const Ot=$.find(Rt=>Rt.id===kt.id);return Ot?{...kt,lastRun:Ot.lastRun,status:Ot.status}:kt})),s){const ut=$.find(kt=>kt.id===s.id);ut&&a(kt=>({...kt,lastRun:ut.lastRun,status:ut.status,script:D}))}}catch($){console.error("Task status alınamadı:",$),J(null)}};return y("div",{className:`scheduler ${i?"dark":""}`,children:[y("div",{className:"task-list",children:[y("div",{className:"task-list-header",children:[y("h2",{children:"Tasks"}),y("div",{className:"task-list-actions",children:[y("button",{className:"create-task icon",onClick:C,title:"Create New Task",children:"+"}),y("button",{onClick:j,className:"refresh-button icon",title:"Refresh Tasks",children:"🔄"})]})]}),u?y("div",{className:"loading",children:"Loading tasks..."}):h?y("div",{className:"error",children:h}):y("div",{className:"task-items",children:e.map($=>y("div",{className:`task-item ${(s==null?void 0:s.id)===$.id?"selected":""} ${(G==null?void 0:G.id)===$.id?"running":""}`,onClick:()=>V($.id),children:[y("div",{className:"task-item-header",children:[y("span",{className:"task-name",children:$.name}),y("div",{className:"task-item-actions",children:[y("label",{className:"task-enabled-toggle",onClick:gt=>gt.stopPropagation(),children:[y("input",{type:"checkbox",checked:$.enabled,onChange:gt=>{gt.stopPropagation(),it($.id,!$.enabled)}}),y("span",{className:"checkmark"})]}),y("button",{className:"delete-task",onClick:gt=>pt($.id,gt),title:"Delete Task",children:"×"})]})]}),y("div",{className:"task-item-footer",children:y("span",{className:"task-last-run",children:["Last Run: ",ct($.lastRun)]})})]},$.id))})]}),y("div",{className:"task-detail",children:s?y(Me,{children:[y("div",{className:"task-header",children:_?y("div",{className:"name-edit",children:[y("input",{type:"text",value:T,onChange:$=>M($.target.value),onKeyDown:$=>{$.key==="Enter"&&I(),$.key==="Escape"&&S(!1)},autoFocus:!0}),y("button",{className:"name-save",onClick:I,children:"✓"}),y("button",{className:"name-cancel",onClick:()=>S(!1),children:"✕"})]}):y("h2",{onClick:H,children:s.name})}),y("div",{className:"script-section",children:[y("div",{className:"script-header",children:[y("h3",{children:"Script"}),y("div",{className:"script-actions",children:[y("button",{className:"script-button try",onClick:Q,children:"Try"}),y("button",{className:"script-button save",onClick:rt,children:"Save"}),y("button",{className:"script-button logs",onClick:Mt,children:"Logs"})]})]}),y("div",{className:"editor-container",children:y("textarea",{ref:g})}),s.output&&y("div",{className:"script-output",children:[y("div",{className:"output-header",children:[y("h3",{children:"Output"}),y("button",{className:"close-output",onClick:()=>a($=>({...$,output:null})),children:"×"})]}),y("pre",{className:"output-content",children:s.output})]}),A&&s.logContent&&y("div",{className:"script-output logs",children:[y("div",{className:"output-header",children:[y("h3",{children:"Logs"}),y("button",{className:"close-output",onClick:()=>{R(!1),a($=>({...$,logContent:null}))},children:"×"})]}),y("pre",{className:"output-content",children:s.logContent})]})]}),y("div",{className:"detail-section",children:[y("div",{className:"detail-row",children:[y("span",{children:"Status:"}),y("span",{className:`status-${s.status}`,children:s.enabled?"Enabled":"Disabled"})]}),y("div",{className:"detail-row",children:[y("span",{children:"Created:"}),y("span",{children:ct(s.createdAt)})]}),y("div",{className:"detail-row",children:[y("span",{children:"Last Run:"}),y("span",{children:ct(s.lastRun)})]}),y("div",{className:"detail-row",children:[y("span",{children:"Frequency:"}),y("select",{className:"frequency-select",value:s.frequency,onChange:$=>Z(s.id,$.target.value),children:cm.map($=>y("option",{value:$.value,children:$.label},$.value))})]}),y("div",{className:"detail-row",children:[y("span",{children:"Success/Failed:"}),y("span",{children:[s.success,"/",s.failed]})]}),y("div",{className:"detail-row",children:[y("span",{children:"Save Logs:"}),y("label",{className:"task-logs-toggle",children:[y("input",{type:"checkbox",checked:s.logs,onChange:()=>bt(s.id,!s.logs)}),y("span",{className:"checkmark"})]})]})]})]}):y("div",{className:"no-selection",children:"Select a task to view details"})})]})},Ju={tr:{run:"▶ Execute",placeholder:"// Write your HScript code here",executedCode:"Çalıştırılan kod:",result:"Sonuç:"},en:{run:"▶ Run",placeholder:"// Write your HScript code here",executedCode:"Executed code:",result:"Result:"}},fm=({isDarkMode:i,language:e="en"})=>{const[n,s]=nt('sceKernelSendNotificationRequest("Hello World");'),[a,u]=nt(""),f=ge(null),h=ge(null),p=Ju[e]||Ju.en;return Ut(()=>{if(!h.current&&f.current){const b=document.createElement("textarea");f.current.appendChild(b),h.current=Ts.fromTextArea(b,{value:n,mode:"haxe",theme:i?"monokai":"default",lineNumbers:!0,matchBrackets:!0,indentUnit:4,indentWithTabs:!0,placeholder:p.placeholder}),h.current.on("change",_=>{s(_.getValue())}),h.current.setValue(n)}return()=>{h.current&&(h.current.toTextArea(),h.current=null)}},[]),Ut(()=>{h.current&&h.current.setOption("theme",i?"monokai":"default")},[i]),y("div",{className:`script-editor ${i?"dark":""}`,children:y("div",{className:"script-content",children:[y("div",{className:"editor-container",ref:f}),y("div",{className:"script-output",children:[y("div",{className:"output-toolbar",children:y("button",{className:"run-btn",onClick:async()=>{u("");try{await Nt.executeScriptStream(n,b=>{u(_=>_+b)})}catch(b){u("Error: "+b.message)}},children:p.run})}),y("div",{className:"output-content",children:y("pre",{children:typeof a=="string"?a:JSON.stringify(a,null,2)})})]})]})})},hm=({isDarkMode:i,onOpenWindow:e})=>{const[n,s]=nt([]),[a,u]=nt(!0),[f,h]=nt(null),[p,g]=nt(""),[b,_]=nt(!1),S=async(L="")=>{try{u(!0);const A=L?await Nt.searchRemoteScripts(L):await Nt.getRemoteScripts();s(A),h(null)}catch(A){console.error("Failed to fetch scripts:",A),h("Failed to load scripts. Please try again later.")}finally{u(!1),_(!1)}};Ut(()=>{S()},[]);const T=L=>{L.preventDefault(),_(!0),S(p)},M=L=>{e({app:"scriptDetail",title:L.name,props:{scriptKey:L.key,scriptName:L.name,authorName:L.authorName,authorSrc:L.authorSrc}})},D=L=>{L.currentTarget instanceof HTMLImageElement&&(L.currentTarget.onerror=null,L.currentTarget.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23f0f0f0'/%3E%3Ctext x='50' y='50' font-family='Arial' font-size='20' text-anchor='middle' alignment-baseline='middle' fill='%23999'%3ENo Image%3C/text%3E%3C/svg%3E")};return a?y("div",{className:`script-store ${i?"dark":""}`,children:y("div",{className:"script-store-loading",children:[y("div",{className:"loading-spinner"}),y("p",{children:"Loading scripts..."})]})}):f?y("div",{className:`script-store ${i?"dark":""}`,children:y("div",{className:"script-store-error",children:[y("p",{children:f}),y("button",{className:"retry-button",onClick:()=>{h(null),S()},children:"Retry"})]})}):y("div",{className:`script-store ${i?"dark":""}`,children:[y("div",{className:"script-store-header",children:[y("div",{className:"header-left",children:[y("h2",{children:"Script Store"}),y("p",{children:"Browse and run community scripts"})]}),y("div",{className:"header-right",children:y("form",{onSubmit:T,className:"search-form",children:[y("input",{type:"text",placeholder:"Search scripts...",value:p,onChange:L=>g(L.currentTarget.value),className:"search-input"}),y("button",{type:"submit",className:"search-button",disabled:b,children:b?"Searching...":"Search"})]})})]}),y("div",{className:"script-grid",children:n.length===0?y("div",{className:"no-scripts-message",children:p?`No scripts found for "${p}"`:"No scripts available at the moment."}):n.map(L=>y("div",{className:"script-card",onClick:()=>M(L),children:[y("div",{className:"script-image",children:y("img",{src:Nt.getScriptImageUrl(L.key),alt:L.name,onError:D})}),y("div",{className:"script-info",children:[y("h3",{children:L.name}),y("a",{href:L.authorSrc,className:"script-author",onClick:A=>{A.preventDefault(),A.stopPropagation(),window.open(L.authorSrc,"_blank","noopener,noreferrer")},children:L.authorName})]})]},L.key))})]})},dm=({isDarkMode:i,scriptKey:e,scriptName:n,authorName:s,authorSrc:a})=>{const[u,f]=nt(!1),[h,p]=nt(""),[g,b]=nt(null),[_,S]=nt(null),[T,M]=nt(!0),D=ge(null),L=ge(null);Ut(()=>{(async()=>{try{M(!0),S({key:e,name:n,authorName:s,authorSrc:a}),b(null)}catch(J){console.error("Failed to fetch script details:",J),b("Failed to load script details. Please try again later.")}finally{M(!1)}})()},[e,n,s,a]),Ut(()=>()=>{L.current&&clearInterval(L.current)},[]);const A=async()=>{try{f(!0),p(""),b(null),L.current=setInterval(async()=>{try{await Nt.sendHeartbeat()}catch(G){console.error("Heartbeat error:",G),L.current&&(clearInterval(L.current),L.current=null)}},1e3),await Nt.executeRemoteScriptStream(e,G=>{p(J=>J+G),D.current&&(D.current.scrollTop=D.current.scrollHeight)}),L.current&&(clearInterval(L.current),L.current=null)}catch(G){console.error("Script execution failed:",G),b(G.message||"Script execution failed"),L.current&&(clearInterval(L.current),L.current=null)}finally{f(!1)}},R=()=>{window.open(`https://github.com/barisyild/airpsx.com/blob/master/scripts/${e}/${e}.hx`,"_blank")};return T?y("div",{className:`script-detail ${i?"dark":""}`,children:y("div",{className:"script-detail-loading",children:[y("div",{className:"loading-spinner"}),y("p",{children:"Loading script details..."})]})}):g&&!_?y("div",{className:`script-detail ${i?"dark":""}`,children:y("div",{className:"script-detail-error",children:[y("p",{children:g}),y("button",{className:"retry-button",onClick:()=>window.location.reload(),children:"Retry"})]})}):y("div",{className:`script-detail ${i?"dark":""}`,children:[y("div",{className:"script-detail-header",children:[y("div",{className:"script-detail-info",children:[y("div",{className:"script-detail-image",children:y("img",{src:Nt.getScriptImageUrl(e),alt:n,onError:G=>{G.currentTarget instanceof HTMLImageElement&&(G.currentTarget.onerror=null,G.currentTarget.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23f0f0f0'/%3E%3Ctext x='50' y='50' font-family='Arial' font-size='20' text-anchor='middle' alignment-baseline='middle' fill='%23999'%3ENo Image%3C/text%3E%3C/svg%3E")}})}),y("div",{className:"script-detail-text",children:[y("h2",{children:n}),y("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"author-link",children:s}),y("div",{className:"source-code-link",onClick:R,children:[y("span",{className:"code-icon",children:"</>"})," View source on GitHub"]})]})]}),y("div",{className:"script-detail-actions",children:y("button",{className:`execute-button ${u?"executing":""}`,onClick:A,disabled:u,children:u?"Executing...":"Execute Script"})})]}),y("div",{className:"script-detail-output-container",children:[y("div",{className:"output-header",children:[y("h3",{children:"Output"}),h&&y("button",{className:"clear-button",onClick:()=>p(""),disabled:u,children:"Clear"})]}),y("div",{className:"script-output",ref:D,children:[g&&y("div",{className:"script-error",children:g}),h?y("pre",{children:h}):y("div",{className:"no-output",children:g?"Execution failed. Try again?":"Execute the script to see output here."})]})]})]})};function Hh(i,e){for(var n in e)i[n]=e[n];return i}function nl(i,e){for(var n in i)if(n!=="__source"&&!(n in e))return!0;for(var s in e)if(s!=="__source"&&i[s]!==e[s])return!0;return!1}function Wh(i,e){var n=e(),s=nt({t:{__:n,u:e}}),a=s[0].t,u=s[1];return Cs(function(){a.__=n,a.u=e,Ba(a)&&u({t:a})},[i,n,e]),Ut(function(){return Ba(a)&&u({t:a}),i(function(){Ba(a)&&u({t:a})})},[i]),n}function Ba(i){var e,n,s=i.u,a=i.__;try{var u=s();return!((e=a)===(n=u)&&(e!==0||1/e==1/n)||e!=e&&n!=n)}catch{return!0}}function zh(i){i()}function Bh(i){return i}function Uh(){return[!1,zh]}var $h=Cs;function il(i,e){this.props=i,this.context=e}function pm(i,e){function n(a){var u=this.props.ref,f=u==a.ref;return!f&&u&&(u.call?u(null):u.current=null),e?!e(this.props,a)||!f:nl(this.props,a)}function s(a){return this.shouldComponentUpdate=n,Gn(i,a)}return s.displayName="Memo("+(i.displayName||i.name)+")",s.prototype.isReactComponent=!0,s.__f=!0,s}(il.prototype=new On).isPureReactComponent=!0,il.prototype.shouldComponentUpdate=function(i,e){return nl(this.props,i)||nl(this.state,e)};var Zu=Bt.__b;Bt.__b=function(i){i.type&&i.type.__f&&i.ref&&(i.props.ref=i.ref,i.ref=null),Zu&&Zu(i)};var gm=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function wl(i){function e(n){var s=Hh({},n);return delete s.ref,i(s,n.ref||null)}return e.$$typeof=gm,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(i.displayName||i.name)+")",e}var Qu=function(i,e){return i==null?null:Kn(Kn(i).map(e))},mm={map:Qu,forEach:Qu,count:function(i){return i?Kn(i).length:0},only:function(i){var e=Kn(i);if(e.length!==1)throw"Children.only";return e[0]},toArray:Kn},vm=Bt.__e;Bt.__e=function(i,e,n,s){if(i.then){for(var a,u=e;u=u.__;)if((a=u.__c)&&a.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),a.__c(i,e)}vm(i,e,n,s)};var tf=Bt.unmount;function jh(i,e,n){return i&&(i.__c&&i.__c.__H&&(i.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),i.__c.__H=null),(i=Hh({},i)).__c!=null&&(i.__c.__P===n&&(i.__c.__P=e),i.__c=null),i.__k=i.__k&&i.__k.map(function(s){return jh(s,e,n)})),i}function Vh(i,e,n){return i&&n&&(i.__v=null,i.__k=i.__k&&i.__k.map(function(s){return Vh(s,e,n)}),i.__c&&i.__c.__P===e&&(i.__e&&n.appendChild(i.__e),i.__c.__e=!0,i.__c.__P=n)),i}function Lo(){this.__u=0,this.o=null,this.__b=null}function Yh(i){var e=i.__.__c;return e&&e.__a&&e.__a(i)}function ym(i){var e,n,s;function a(u){if(e||(e=i()).then(function(f){n=f.default||f},function(f){s=f}),s)throw s;if(!n)throw e;return Gn(n,u)}return a.displayName="Lazy",a.__f=!0,a}function rs(){this.i=null,this.l=null}Bt.unmount=function(i){var e=i.__c;e&&e.__R&&e.__R(),e&&32&i.__u&&(i.type=null),tf&&tf(i)},(Lo.prototype=new On).__c=function(i,e){var n=e.__c,s=this;s.o==null&&(s.o=[]),s.o.push(n);var a=Yh(s.__v),u=!1,f=function(){u||(u=!0,n.__R=null,a?a(h):h())};n.__R=f;var h=function(){if(!--s.__u){if(s.state.__a){var p=s.state.__a;s.__v.__k[0]=Vh(p,p.__c.__P,p.__c.__O)}var g;for(s.setState({__a:s.__b=null});g=s.o.pop();)g.forceUpdate()}};s.__u++||32&e.__u||s.setState({__a:s.__b=s.__v.__k[0]}),i.then(f,f)},Lo.prototype.componentWillUnmount=function(){this.o=[]},Lo.prototype.render=function(i,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=jh(this.__b,n,s.__O=s.__P)}this.__b=null}var a=e.__a&&Gn(Me,null,i.fallback);return a&&(a.__u&=-33),[Gn(Me,null,e.__a?null:i.children),a]};var ef=function(i,e,n){if(++n[1]===n[0]&&i.l.delete(e),i.props.revealOrder&&(i.props.revealOrder[0]!=="t"||!i.l.size))for(n=i.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;i.i=n=n[2]}};function bm(i){return this.getChildContext=function(){return i.context},i.children}function xm(i){var e=this,n=i.h;e.componentWillUnmount=function(){Fi(null,e.v),e.v=null,e.h=null},e.h&&e.h!==n&&e.componentWillUnmount(),e.v||(e.h=n,e.v={nodeType:1,parentNode:n,childNodes:[],contains:function(){return!0},appendChild:function(s){this.childNodes.push(s),e.h.appendChild(s)},insertBefore:function(s,a){this.childNodes.push(s),e.h.insertBefore(s,a)},removeChild:function(s){this.childNodes.splice(this.childNodes.indexOf(s)>>>1,1),e.h.removeChild(s)}}),Fi(Gn(bm,{context:e.context},i.__v),e.v)}function _m(i,e){var n=Gn(xm,{__v:i,h:e});return n.containerInfo=e,n}(rs.prototype=new On).__a=function(i){var e=this,n=Yh(e.__v),s=e.l.get(i);return s[0]++,function(a){var u=function(){e.props.revealOrder?(s.push(a),ef(e,i,s)):a()};n?n(u):u()}},rs.prototype.render=function(i){this.i=null,this.l=new Map;var e=Kn(i.children);i.revealOrder&&i.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return i.children},rs.prototype.componentDidUpdate=rs.prototype.componentDidMount=function(){var i=this;this.l.forEach(function(e,n){ef(i,n,e)})};var Xh=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,wm=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,km=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Sm=/[A-Z0-9]/g,Cm=typeof document<"u",Tm=function(i){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(i)};function Lm(i,e,n){return e.__k==null&&(e.textContent=""),Fi(i,e),typeof n=="function"&&n(),i?i.__c:null}function Nm(i,e,n){return Nh(i,e),typeof n=="function"&&n(),i?i.__c:null}On.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(i){Object.defineProperty(On.prototype,i,{configurable:!0,get:function(){return this["UNSAFE_"+i]},set:function(e){Object.defineProperty(this,i,{configurable:!0,writable:!0,value:e})}})});var nf=Bt.event;function Mm(){}function Dm(){return this.cancelBubble}function Pm(){return this.defaultPrevented}Bt.event=function(i){return nf&&(i=nf(i)),i.persist=Mm,i.isPropagationStopped=Dm,i.isDefaultPrevented=Pm,i.nativeEvent=i};var kl,Om={enumerable:!1,configurable:!0,get:function(){return this.class}},rf=Bt.vnode;Bt.vnode=function(i){typeof i.type=="string"&&function(e){var n=e.props,s=e.type,a={},u=s.indexOf("-")===-1;for(var f in n){var h=n[f];if(!(f==="value"&&"defaultValue"in n&&h==null||Cm&&f==="children"&&s==="noscript"||f==="class"||f==="className")){var p=f.toLowerCase();f==="defaultValue"&&"value"in n&&n.value==null?f="value":f==="download"&&h===!0?h="":p==="translate"&&h==="no"?h=!1:p[0]==="o"&&p[1]==="n"?p==="ondoubleclick"?f="ondblclick":p!=="onchange"||s!=="input"&&s!=="textarea"||Tm(n.type)?p==="onfocus"?f="onfocusin":p==="onblur"?f="onfocusout":km.test(f)&&(f=p):p=f="oninput":u&&wm.test(f)?f=f.replace(Sm,"-$&").toLowerCase():h===null&&(h=void 0),p==="oninput"&&a[f=p]&&(f="oninputCapture"),a[f]=h}}s=="select"&&a.multiple&&Array.isArray(a.value)&&(a.value=Kn(n.children).forEach(function(g){g.props.selected=a.value.indexOf(g.props.value)!=-1})),s=="select"&&a.defaultValue!=null&&(a.value=Kn(n.children).forEach(function(g){g.props.selected=a.multiple?a.defaultValue.indexOf(g.props.value)!=-1:a.defaultValue==g.props.value})),n.class&&!n.className?(a.class=n.class,Object.defineProperty(a,"className",Om)):(n.className&&!n.class||n.class&&n.className)&&(a.class=a.className=n.className),e.props=a}(i),i.$$typeof=Xh,rf&&rf(i)};var sf=Bt.__r;Bt.__r=function(i){sf&&sf(i),kl=i.__c};var of=Bt.diffed;Bt.diffed=function(i){of&&of(i);var e=i.props,n=i.__e;n!=null&&i.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value),kl=null};var Am={ReactCurrentDispatcher:{current:{readContext:function(i){return kl.__n[i.__c].props.value},useCallback:Ph,useContext:Oh,useDebugValue:Ah,useDeferredValue:Bh,useEffect:Ut,useId:Ih,useImperativeHandle:Dh,useInsertionEffect:$h,useLayoutEffect:Cs,useMemo:$o,useReducer:xl,useRef:ge,useState:nt,useSyncExternalStore:Wh,useTransition:Uh}}};function Im(i){return Gn.bind(null,i)}function jo(i){return!!i&&i.$$typeof===Xh}function Em(i){return jo(i)&&i.type===Me}function Fm(i){return!!i&&!!i.displayName&&(typeof i.displayName=="string"||i.displayName instanceof String)&&i.displayName.startsWith("Memo(")}function Rm(i){return jo(i)?Bg.apply(null,arguments):i}function Hm(i){return!!i.__k&&(Fi(null,i),!0)}function Wm(i){return i&&(i.base||i.nodeType===1&&i)||null}var zm=function(i,e){return i(e)},Bm=function(i,e){return i(e)},Um=Me,$m=jo,Kh={useState:nt,useId:Ih,useReducer:xl,useEffect:Ut,useLayoutEffect:Cs,useInsertionEffect:$h,useTransition:Uh,useDeferredValue:Bh,useSyncExternalStore:Wh,startTransition:zh,useRef:ge,useImperativeHandle:Dh,useMemo:$o,useCallback:Ph,useContext:Oh,useDebugValue:Ah,version:"18.3.1",Children:mm,render:Lm,hydrate:Nm,unmountComponentAtNode:Hm,createPortal:_m,createElement:Gn,createContext:Ug,createFactory:Im,cloneElement:Rm,createRef:Fg,Fragment:Me,isValidElement:jo,isElement:$m,isFragment:Em,isMemo:Fm,findDOMNode:Wm,Component:On,PureComponent:il,memo:pm,forwardRef:wl,flushSync:Bm,unstable_batchedUpdates:zm,StrictMode:Um,Suspense:Lo,SuspenseList:rs,lazy:ym,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:Am};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ls(i){return i+.5|0}const ui=(i,e,n)=>Math.max(Math.min(i,n),e);function ss(i){return ui(Ls(i*2.55),0,255)}function fi(i){return ui(Ls(i*255),0,255)}function Yn(i){return ui(Ls(i/2.55)/100,0,1)}function af(i){return ui(Ls(i*100),0,100)}const ln={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},rl=[..."0123456789ABCDEF"],jm=i=>rl[i&15],Vm=i=>rl[(i&240)>>4]+rl[i&15],uo=i=>(i&240)>>4===(i&15),Ym=i=>uo(i.r)&&uo(i.g)&&uo(i.b)&&uo(i.a);function Xm(i){var e=i.length,n;return i[0]==="#"&&(e===4||e===5?n={r:255&ln[i[1]]*17,g:255&ln[i[2]]*17,b:255&ln[i[3]]*17,a:e===5?ln[i[4]]*17:255}:(e===7||e===9)&&(n={r:ln[i[1]]<<4|ln[i[2]],g:ln[i[3]]<<4|ln[i[4]],b:ln[i[5]]<<4|ln[i[6]],a:e===9?ln[i[7]]<<4|ln[i[8]]:255})),n}const Km=(i,e)=>i<255?e(i):"";function Gm(i){var e=Ym(i)?jm:Vm;return i?"#"+e(i.r)+e(i.g)+e(i.b)+Km(i.a,e):void 0}const qm=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Gh(i,e,n){const s=e*Math.min(n,1-n),a=(u,f=(u+i/30)%12)=>n-s*Math.max(Math.min(f-3,9-f,1),-1);return[a(0),a(8),a(4)]}function Jm(i,e,n){const s=(a,u=(a+i/60)%6)=>n-n*e*Math.max(Math.min(u,4-u,1),0);return[s(5),s(3),s(1)]}function Zm(i,e,n){const s=Gh(i,1,.5);let a;for(e+n>1&&(a=1/(e+n),e*=a,n*=a),a=0;a<3;a++)s[a]*=1-e-n,s[a]+=e;return s}function Qm(i,e,n,s,a){return i===a?(e-n)/s+(e<n?6:0):e===a?(n-i)/s+2:(i-e)/s+4}function Sl(i){const n=i.r/255,s=i.g/255,a=i.b/255,u=Math.max(n,s,a),f=Math.min(n,s,a),h=(u+f)/2;let p,g,b;return u!==f&&(b=u-f,g=h>.5?b/(2-u-f):b/(u+f),p=Qm(n,s,a,b,u),p=p*60+.5),[p|0,g||0,h]}function Cl(i,e,n,s){return(Array.isArray(e)?i(e[0],e[1],e[2]):i(e,n,s)).map(fi)}function Tl(i,e,n){return Cl(Gh,i,e,n)}function tv(i,e,n){return Cl(Zm,i,e,n)}function ev(i,e,n){return Cl(Jm,i,e,n)}function qh(i){return(i%360+360)%360}function nv(i){const e=qm.exec(i);let n=255,s;if(!e)return;e[5]!==s&&(n=e[6]?ss(+e[5]):fi(+e[5]));const a=qh(+e[2]),u=+e[3]/100,f=+e[4]/100;return e[1]==="hwb"?s=tv(a,u,f):e[1]==="hsv"?s=ev(a,u,f):s=Tl(a,u,f),{r:s[0],g:s[1],b:s[2],a:n}}function iv(i,e){var n=Sl(i);n[0]=qh(n[0]+e),n=Tl(n),i.r=n[0],i.g=n[1],i.b=n[2]}function rv(i){if(!i)return;const e=Sl(i),n=e[0],s=af(e[1]),a=af(e[2]);return i.a<255?`hsla(${n}, ${s}%, ${a}%, ${Yn(i.a)})`:`hsl(${n}, ${s}%, ${a}%)`}const lf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},cf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function sv(){const i={},e=Object.keys(cf),n=Object.keys(lf);let s,a,u,f,h;for(s=0;s<e.length;s++){for(f=h=e[s],a=0;a<n.length;a++)u=n[a],h=h.replace(u,lf[u]);u=parseInt(cf[f],16),i[h]=[u>>16&255,u>>8&255,u&255]}return i}let fo;function ov(i){fo||(fo=sv(),fo.transparent=[0,0,0,0]);const e=fo[i.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const av=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function lv(i){const e=av.exec(i);let n=255,s,a,u;if(e){if(e[7]!==s){const f=+e[7];n=e[8]?ss(f):ui(f*255,0,255)}return s=+e[1],a=+e[3],u=+e[5],s=255&(e[2]?ss(s):ui(s,0,255)),a=255&(e[4]?ss(a):ui(a,0,255)),u=255&(e[6]?ss(u):ui(u,0,255)),{r:s,g:a,b:u,a:n}}}function cv(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${Yn(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const Ua=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,cr=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function uv(i,e,n){const s=cr(Yn(i.r)),a=cr(Yn(i.g)),u=cr(Yn(i.b));return{r:fi(Ua(s+n*(cr(Yn(e.r))-s))),g:fi(Ua(a+n*(cr(Yn(e.g))-a))),b:fi(Ua(u+n*(cr(Yn(e.b))-u))),a:i.a+n*(e.a-i.a)}}function ho(i,e,n){if(i){let s=Sl(i);s[e]=Math.max(0,Math.min(s[e]+s[e]*n,e===0?360:1)),s=Tl(s),i.r=s[0],i.g=s[1],i.b=s[2]}}function Jh(i,e){return i&&Object.assign(e||{},i)}function uf(i){var e={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(e={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(e.a=fi(i[3]))):(e=Jh(i,{r:0,g:0,b:0,a:1}),e.a=fi(e.a)),e}function fv(i){return i.charAt(0)==="r"?lv(i):nv(i)}class ys{constructor(e){if(e instanceof ys)return e;const n=typeof e;let s;n==="object"?s=uf(e):n==="string"&&(s=Xm(e)||ov(e)||fv(e)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var e=Jh(this._rgb);return e&&(e.a=Yn(e.a)),e}set rgb(e){this._rgb=uf(e)}rgbString(){return this._valid?cv(this._rgb):void 0}hexString(){return this._valid?Gm(this._rgb):void 0}hslString(){return this._valid?rv(this._rgb):void 0}mix(e,n){if(e){const s=this.rgb,a=e.rgb;let u;const f=n===u?.5:n,h=2*f-1,p=s.a-a.a,g=((h*p===-1?h:(h+p)/(1+h*p))+1)/2;u=1-g,s.r=255&g*s.r+u*a.r+.5,s.g=255&g*s.g+u*a.g+.5,s.b=255&g*s.b+u*a.b+.5,s.a=f*s.a+(1-f)*a.a,this.rgb=s}return this}interpolate(e,n){return e&&(this._rgb=uv(this._rgb,e._rgb,n)),this}clone(){return new ys(this.rgb)}alpha(e){return this._rgb.a=fi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Ls(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ho(this._rgb,2,e),this}darken(e){return ho(this._rgb,2,-e),this}saturate(e){return ho(this._rgb,1,e),this}desaturate(e){return ho(this._rgb,1,-e),this}rotate(e){return iv(this._rgb,e),this}}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function $n(){}const hv=(()=>{let i=0;return()=>i++})();function ve(i){return i==null}function Ne(i){if(Array.isArray&&Array.isArray(i))return!0;const e=Object.prototype.toString.call(i);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ee(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function fn(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function Mn(i,e){return fn(i)?i:e}function qt(i,e){return typeof i>"u"?e:i}const dv=(i,e)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*e:+i;function le(i,e,n){if(i&&typeof i.call=="function")return i.apply(n,e)}function re(i,e,n,s){let a,u,f;if(Ne(i))for(u=i.length,a=0;a<u;a++)e.call(n,i[a],a);else if(ee(i))for(f=Object.keys(i),u=f.length,a=0;a<u;a++)e.call(n,i[f[a]],f[a])}function Io(i,e){let n,s,a,u;if(!i||!e||i.length!==e.length)return!1;for(n=0,s=i.length;n<s;++n)if(a=i[n],u=e[n],a.datasetIndex!==u.datasetIndex||a.index!==u.index)return!1;return!0}function Eo(i){if(Ne(i))return i.map(Eo);if(ee(i)){const e=Object.create(null),n=Object.keys(i),s=n.length;let a=0;for(;a<s;++a)e[n[a]]=Eo(i[n[a]]);return e}return i}function Zh(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function pv(i,e,n,s){if(!Zh(i))return;const a=e[i],u=n[i];ee(a)&&ee(u)?bs(a,u,s):e[i]=Eo(u)}function bs(i,e,n){const s=Ne(e)?e:[e],a=s.length;if(!ee(i))return i;n=n||{};const u=n.merger||pv;let f;for(let h=0;h<a;++h){if(f=s[h],!ee(f))continue;const p=Object.keys(f);for(let g=0,b=p.length;g<b;++g)u(p[g],i,f,n)}return i}function fs(i,e){return bs(i,e,{merger:gv})}function gv(i,e,n){if(!Zh(i))return;const s=e[i],a=n[i];ee(s)&&ee(a)?fs(s,a):Object.prototype.hasOwnProperty.call(e,i)||(e[i]=Eo(a))}const ff={"":i=>i,x:i=>i.x,y:i=>i.y};function mv(i){const e=i.split("."),n=[];let s="";for(const a of e)s+=a,s.endsWith("\\")?s=s.slice(0,-1)+".":(n.push(s),s="");return n}function vv(i){const e=mv(i);return n=>{for(const s of e){if(s==="")break;n=n&&n[s]}return n}}function Fo(i,e){return(ff[e]||(ff[e]=vv(e)))(i)}function Ll(i){return i.charAt(0).toUpperCase()+i.slice(1)}const Ro=i=>typeof i<"u",di=i=>typeof i=="function",hf=(i,e)=>{if(i.size!==e.size)return!1;for(const n of i)if(!e.has(n))return!1;return!0};function yv(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const De=Math.PI,An=2*De,bv=An+De,Ho=Number.POSITIVE_INFINITY,xv=De/180,_n=De/2,Li=De/4,df=De*2/3,sl=Math.log10,dr=Math.sign;function hs(i,e,n){return Math.abs(i-e)<n}function pf(i){const e=Math.round(i);i=hs(i,e,i/1e3)?e:i;const n=Math.pow(10,Math.floor(sl(i))),s=i/n;return(s<=1?1:s<=2?2:s<=5?5:10)*n}function _v(i){const e=[],n=Math.sqrt(i);let s;for(s=1;s<n;s++)i%s===0&&(e.push(s),e.push(i/s));return n===(n|0)&&e.push(n),e.sort((a,u)=>a-u).pop(),e}function xs(i){return!isNaN(parseFloat(i))&&isFinite(i)}function wv(i,e){const n=Math.round(i);return n-e<=i&&n+e>=i}function kv(i,e,n){let s,a,u;for(s=0,a=i.length;s<a;s++)u=i[s][n],isNaN(u)||(e.min=Math.min(e.min,u),e.max=Math.max(e.max,u))}function Ai(i){return i*(De/180)}function Sv(i){return i*(180/De)}function gf(i){if(!fn(i))return;let e=1,n=0;for(;Math.round(i*e)/e!==i;)e*=10,n++;return n}function Cv(i,e){const n=e.x-i.x,s=e.y-i.y,a=Math.sqrt(n*n+s*s);let u=Math.atan2(s,n);return u<-.5*De&&(u+=An),{angle:u,distance:a}}function ol(i,e){return Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2))}function Tv(i,e){return(i-e+bv)%An-De}function ci(i){return(i%An+An)%An}function Qh(i,e,n,s){const a=ci(i),u=ci(e),f=ci(n),h=ci(u-a),p=ci(f-a),g=ci(a-u),b=ci(a-f);return a===u||a===f||s&&u===f||h>p&&g<b}function cn(i,e,n){return Math.max(e,Math.min(n,i))}function Lv(i){return cn(i,-32768,32767)}function os(i,e,n,s=1e-6){return i>=Math.min(e,n)-s&&i<=Math.max(e,n)+s}function Nl(i,e,n){n=n||(f=>i[f]<e);let s=i.length-1,a=0,u;for(;s-a>1;)u=a+s>>1,n(u)?a=u:s=u;return{lo:a,hi:s}}const Ii=(i,e,n,s)=>Nl(i,n,s?a=>{const u=i[a][e];return u<n||u===n&&i[a+1][e]===n}:a=>i[a][e]<n),Nv=(i,e,n)=>Nl(i,n,s=>i[s][e]>=n);function Mv(i,e,n){let s=0,a=i.length;for(;s<a&&i[s]<e;)s++;for(;a>s&&i[a-1]>n;)a--;return s>0||a<i.length?i.slice(s,a):i}const td=["push","pop","shift","splice","unshift"];function Dv(i,e){if(i._chartjs){i._chartjs.listeners.push(e);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),td.forEach(n=>{const s="_onData"+Ll(n),a=i[n];Object.defineProperty(i,n,{configurable:!0,enumerable:!1,value(...u){const f=a.apply(this,u);return i._chartjs.listeners.forEach(h=>{typeof h[s]=="function"&&h[s](...u)}),f}})})}function mf(i,e){const n=i._chartjs;if(!n)return;const s=n.listeners,a=s.indexOf(e);a!==-1&&s.splice(a,1),!(s.length>0)&&(td.forEach(u=>{delete i[u]}),delete i._chartjs)}function Pv(i){const e=new Set(i);return e.size===i.length?i:Array.from(e)}const ed=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function nd(i,e){let n=[],s=!1;return function(...a){n=a,s||(s=!0,ed.call(window,()=>{s=!1,i.apply(e,n)}))}}function Ov(i,e){let n;return function(...s){return e?(clearTimeout(n),n=setTimeout(i,e,s)):i.apply(this,s),e}}const Ml=i=>i==="start"?"left":i==="end"?"right":"center",Re=(i,e,n)=>i==="start"?e:i==="end"?n:(e+n)/2,Av=(i,e,n,s)=>i===(s?"left":"right")?n:i==="center"?(e+n)/2:e;function Iv(i,e,n){const s=e.length;let a=0,u=s;if(i._sorted){const{iScale:f,_parsed:h}=i,p=f.axis,{min:g,max:b,minDefined:_,maxDefined:S}=f.getUserBounds();_&&(a=cn(Math.min(Ii(h,p,g).lo,n?s:Ii(e,p,f.getPixelForValue(g)).lo),0,s-1)),S?u=cn(Math.max(Ii(h,f.axis,b,!0).hi+1,n?0:Ii(e,p,f.getPixelForValue(b),!0).hi+1),a,s)-a:u=s-a}return{start:a,count:u}}function Ev(i){const{xScale:e,yScale:n,_scaleRanges:s}=i,a={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!s)return i._scaleRanges=a,!0;const u=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==n.min||s.ymax!==n.max;return Object.assign(s,a),u}const po=i=>i===0||i===1,vf=(i,e,n)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-e)*An/n)),yf=(i,e,n)=>Math.pow(2,-10*i)*Math.sin((i-e)*An/n)+1,ds={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*_n)+1,easeOutSine:i=>Math.sin(i*_n),easeInOutSine:i=>-.5*(Math.cos(De*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>po(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>po(i)?i:vf(i,.075,.3),easeOutElastic:i=>po(i)?i:yf(i,.075,.3),easeInOutElastic(i){return po(i)?i:i<.5?.5*vf(i*2,.1125,.45):.5+.5*yf(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let e=1.70158;return(i/=.5)<1?.5*(i*i*(((e*=1.525)+1)*i-e)):.5*((i-=2)*i*(((e*=1.525)+1)*i+e)+2)},easeInBounce:i=>1-ds.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?ds.easeInBounce(i*2)*.5:ds.easeOutBounce(i*2-1)*.5+.5};function Dl(i){if(i&&typeof i=="object"){const e=i.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function bf(i){return Dl(i)?i:new ys(i)}function $a(i){return Dl(i)?i:new ys(i).saturate(.5).darken(.1).hexString()}const Fv=["x","y","borderWidth","radius","tension"],Rv=["color","borderColor","backgroundColor"];function Hv(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),i.set("animations",{colors:{type:"color",properties:Rv},numbers:{type:"number",properties:Fv}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Wv(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const xf=new Map;function zv(i,e){e=e||{};const n=i+JSON.stringify(e);let s=xf.get(n);return s||(s=new Intl.NumberFormat(i,e),xf.set(n,s)),s}function id(i,e,n){return zv(e,n).format(i)}const rd={values(i){return Ne(i)?i:""+i},numeric(i,e,n){if(i===0)return"0";const s=this.chart.options.locale;let a,u=i;if(n.length>1){const g=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(g<1e-4||g>1e15)&&(a="scientific"),u=Bv(i,n)}const f=sl(Math.abs(u)),h=isNaN(f)?1:Math.max(Math.min(-1*Math.floor(f),20),0),p={notation:a,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(p,this.options.ticks.format),id(i,s,p)},logarithmic(i,e,n){if(i===0)return"0";const s=n[e].significand||i/Math.pow(10,Math.floor(sl(i)));return[1,2,3,5,10,15].includes(s)||e>.8*n.length?rd.numeric.call(this,i,e,n):""}};function Bv(i,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&i!==Math.floor(i)&&(n=i-Math.floor(i)),n}var sd={formatters:rd};function Uv(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:sd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Ri=Object.create(null),al=Object.create(null);function ps(i,e){if(!e)return i;const n=e.split(".");for(let s=0,a=n.length;s<a;++s){const u=n[s];i=i[u]||(i[u]=Object.create(null))}return i}function ja(i,e,n){return typeof e=="string"?bs(ps(i,e),n):bs(ps(i,""),e)}class $v{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,a)=>$a(a.backgroundColor),this.hoverBorderColor=(s,a)=>$a(a.borderColor),this.hoverColor=(s,a)=>$a(a.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return ja(this,e,n)}get(e){return ps(this,e)}describe(e,n){return ja(al,e,n)}override(e,n){return ja(Ri,e,n)}route(e,n,s,a){const u=ps(this,e),f=ps(this,s),h="_"+n;Object.defineProperties(u,{[h]:{value:u[n],writable:!0},[n]:{enumerable:!0,get(){const p=this[h],g=f[a];return ee(p)?Object.assign({},g,p):qt(p,g)},set(p){this[h]=p}}})}apply(e){e.forEach(n=>n(this))}}var xe=new $v({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Hv,Wv,Uv]);function jv(i){return!i||ve(i.size)||ve(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function _f(i,e,n,s,a){let u=e[a];return u||(u=e[a]=i.measureText(a).width,n.push(a)),u>s&&(s=u),s}function Ni(i,e,n){const s=i.currentDevicePixelRatio,a=n!==0?Math.max(n/2,.5):0;return Math.round((e-a)*s)/s+a}function wf(i,e){!e&&!i||(e=e||i.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,i.width,i.height),e.restore())}function ll(i,e,n,s){od(i,e,n,s,null)}function od(i,e,n,s,a){let u,f,h,p,g,b,_,S;const T=e.pointStyle,M=e.rotation,D=e.radius;let L=(M||0)*xv;if(T&&typeof T=="object"&&(u=T.toString(),u==="[object HTMLImageElement]"||u==="[object HTMLCanvasElement]")){i.save(),i.translate(n,s),i.rotate(L),i.drawImage(T,-T.width/2,-T.height/2,T.width,T.height),i.restore();return}if(!(isNaN(D)||D<=0)){switch(i.beginPath(),T){default:a?i.ellipse(n,s,a/2,D,0,0,An):i.arc(n,s,D,0,An),i.closePath();break;case"triangle":b=a?a/2:D,i.moveTo(n+Math.sin(L)*b,s-Math.cos(L)*D),L+=df,i.lineTo(n+Math.sin(L)*b,s-Math.cos(L)*D),L+=df,i.lineTo(n+Math.sin(L)*b,s-Math.cos(L)*D),i.closePath();break;case"rectRounded":g=D*.516,p=D-g,f=Math.cos(L+Li)*p,_=Math.cos(L+Li)*(a?a/2-g:p),h=Math.sin(L+Li)*p,S=Math.sin(L+Li)*(a?a/2-g:p),i.arc(n-_,s-h,g,L-De,L-_n),i.arc(n+S,s-f,g,L-_n,L),i.arc(n+_,s+h,g,L,L+_n),i.arc(n-S,s+f,g,L+_n,L+De),i.closePath();break;case"rect":if(!M){p=Math.SQRT1_2*D,b=a?a/2:p,i.rect(n-b,s-p,2*b,2*p);break}L+=Li;case"rectRot":_=Math.cos(L)*(a?a/2:D),f=Math.cos(L)*D,h=Math.sin(L)*D,S=Math.sin(L)*(a?a/2:D),i.moveTo(n-_,s-h),i.lineTo(n+S,s-f),i.lineTo(n+_,s+h),i.lineTo(n-S,s+f),i.closePath();break;case"crossRot":L+=Li;case"cross":_=Math.cos(L)*(a?a/2:D),f=Math.cos(L)*D,h=Math.sin(L)*D,S=Math.sin(L)*(a?a/2:D),i.moveTo(n-_,s-h),i.lineTo(n+_,s+h),i.moveTo(n+S,s-f),i.lineTo(n-S,s+f);break;case"star":_=Math.cos(L)*(a?a/2:D),f=Math.cos(L)*D,h=Math.sin(L)*D,S=Math.sin(L)*(a?a/2:D),i.moveTo(n-_,s-h),i.lineTo(n+_,s+h),i.moveTo(n+S,s-f),i.lineTo(n-S,s+f),L+=Li,_=Math.cos(L)*(a?a/2:D),f=Math.cos(L)*D,h=Math.sin(L)*D,S=Math.sin(L)*(a?a/2:D),i.moveTo(n-_,s-h),i.lineTo(n+_,s+h),i.moveTo(n+S,s-f),i.lineTo(n-S,s+f);break;case"line":f=a?a/2:Math.cos(L)*D,h=Math.sin(L)*D,i.moveTo(n-f,s-h),i.lineTo(n+f,s+h);break;case"dash":i.moveTo(n,s),i.lineTo(n+Math.cos(L)*(a?a/2:D),s+Math.sin(L)*D);break;case!1:i.closePath();break}i.fill(),e.borderWidth>0&&i.stroke()}}function _s(i,e,n){return n=n||.5,!e||i&&i.x>e.left-n&&i.x<e.right+n&&i.y>e.top-n&&i.y<e.bottom+n}function Pl(i,e){i.save(),i.beginPath(),i.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),i.clip()}function Ol(i){i.restore()}function Vv(i,e,n,s,a){if(!e)return i.lineTo(n.x,n.y);if(a==="middle"){const u=(e.x+n.x)/2;i.lineTo(u,e.y),i.lineTo(u,n.y)}else a==="after"!=!!s?i.lineTo(e.x,n.y):i.lineTo(n.x,e.y);i.lineTo(n.x,n.y)}function Yv(i,e,n,s){if(!e)return i.lineTo(n.x,n.y);i.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?n.cp2x:n.cp1x,s?n.cp2y:n.cp1y,n.x,n.y)}function Xv(i,e){e.translation&&i.translate(e.translation[0],e.translation[1]),ve(e.rotation)||i.rotate(e.rotation),e.color&&(i.fillStyle=e.color),e.textAlign&&(i.textAlign=e.textAlign),e.textBaseline&&(i.textBaseline=e.textBaseline)}function Kv(i,e,n,s,a){if(a.strikethrough||a.underline){const u=i.measureText(s),f=e-u.actualBoundingBoxLeft,h=e+u.actualBoundingBoxRight,p=n-u.actualBoundingBoxAscent,g=n+u.actualBoundingBoxDescent,b=a.strikethrough?(p+g)/2:g;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=a.decorationWidth||2,i.moveTo(f,b),i.lineTo(h,b),i.stroke()}}function Gv(i,e){const n=i.fillStyle;i.fillStyle=e.color,i.fillRect(e.left,e.top,e.width,e.height),i.fillStyle=n}function ws(i,e,n,s,a,u={}){const f=Ne(e)?e:[e],h=u.strokeWidth>0&&u.strokeColor!=="";let p,g;for(i.save(),i.font=a.string,Xv(i,u),p=0;p<f.length;++p)g=f[p],u.backdrop&&Gv(i,u.backdrop),h&&(u.strokeColor&&(i.strokeStyle=u.strokeColor),ve(u.strokeWidth)||(i.lineWidth=u.strokeWidth),i.strokeText(g,n,s,u.maxWidth)),i.fillText(g,n,s,u.maxWidth),Kv(i,n,s,g,u),s+=Number(a.lineHeight);i.restore()}function cl(i,e){const{x:n,y:s,w:a,h:u,radius:f}=e;i.arc(n+f.topLeft,s+f.topLeft,f.topLeft,1.5*De,De,!0),i.lineTo(n,s+u-f.bottomLeft),i.arc(n+f.bottomLeft,s+u-f.bottomLeft,f.bottomLeft,De,_n,!0),i.lineTo(n+a-f.bottomRight,s+u),i.arc(n+a-f.bottomRight,s+u-f.bottomRight,f.bottomRight,_n,0,!0),i.lineTo(n+a,s+f.topRight),i.arc(n+a-f.topRight,s+f.topRight,f.topRight,0,-_n,!0),i.lineTo(n+f.topLeft,s)}const qv=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Jv=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Zv(i,e){const n=(""+i).match(qv);if(!n||n[1]==="normal")return e*1.2;switch(i=+n[2],n[3]){case"px":return i;case"%":i/=100;break}return e*i}const Qv=i=>+i||0;function ad(i,e){const n={},s=ee(e),a=s?Object.keys(e):e,u=ee(i)?s?f=>qt(i[f],i[e[f]]):f=>i[f]:()=>i;for(const f of a)n[f]=Qv(u(f));return n}function ty(i){return ad(i,{top:"y",right:"x",bottom:"y",left:"x"})}function gs(i){return ad(i,["topLeft","topRight","bottomLeft","bottomRight"])}function hn(i){const e=ty(i);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function He(i,e){i=i||{},e=e||xe.font;let n=qt(i.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let s=qt(i.style,e.style);s&&!(""+s).match(Jv)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const a={family:qt(i.family,e.family),lineHeight:Zv(qt(i.lineHeight,e.lineHeight),n),size:n,style:s,weight:qt(i.weight,e.weight),string:""};return a.string=jv(a),a}function go(i,e,n,s){let a,u,f;for(a=0,u=i.length;a<u;++a)if(f=i[a],f!==void 0&&f!==void 0)return f}function ey(i,e,n){const{min:s,max:a}=i,u=dv(e,(a-s)/2),f=(h,p)=>n&&h===0?0:h+p;return{min:f(s,-Math.abs(u)),max:f(a,u)}}function Hi(i,e){return Object.assign(Object.create(i),e)}function Al(i,e=[""],n,s,a=()=>i[0]){const u=n||i;typeof s>"u"&&(s=fd("_fallback",i));const f={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:u,_fallback:s,_getTarget:a,override:h=>Al([h,...i],e,u,s)};return new Proxy(f,{deleteProperty(h,p){return delete h[p],delete h._keys,delete i[0][p],!0},get(h,p){return cd(h,p,()=>cy(p,e,i,h))},getOwnPropertyDescriptor(h,p){return Reflect.getOwnPropertyDescriptor(h._scopes[0],p)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(h,p){return Sf(h).includes(p)},ownKeys(h){return Sf(h)},set(h,p,g){const b=h._storage||(h._storage=a());return h[p]=b[p]=g,delete h._keys,!0}})}function pr(i,e,n,s){const a={_cacheable:!1,_proxy:i,_context:e,_subProxy:n,_stack:new Set,_descriptors:ld(i,s),setContext:u=>pr(i,u,n,s),override:u=>pr(i.override(u),e,n,s)};return new Proxy(a,{deleteProperty(u,f){return delete u[f],delete i[f],!0},get(u,f,h){return cd(u,f,()=>iy(u,f,h))},getOwnPropertyDescriptor(u,f){return u._descriptors.allKeys?Reflect.has(i,f)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,f)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(u,f){return Reflect.has(i,f)},ownKeys(){return Reflect.ownKeys(i)},set(u,f,h){return i[f]=h,delete u[f],!0}})}function ld(i,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:s=e.indexable,_allKeys:a=e.allKeys}=i;return{allKeys:a,scriptable:n,indexable:s,isScriptable:di(n)?n:()=>n,isIndexable:di(s)?s:()=>s}}const ny=(i,e)=>i?i+Ll(e):e,Il=(i,e)=>ee(e)&&i!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function cd(i,e,n){if(Object.prototype.hasOwnProperty.call(i,e)||e==="constructor")return i[e];const s=n();return i[e]=s,s}function iy(i,e,n){const{_proxy:s,_context:a,_subProxy:u,_descriptors:f}=i;let h=s[e];return di(h)&&f.isScriptable(e)&&(h=ry(e,h,i,n)),Ne(h)&&h.length&&(h=sy(e,h,i,f.isIndexable)),Il(e,h)&&(h=pr(h,a,u&&u[e],f)),h}function ry(i,e,n,s){const{_proxy:a,_context:u,_subProxy:f,_stack:h}=n;if(h.has(i))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+i);h.add(i);let p=e(u,f||s);return h.delete(i),Il(i,p)&&(p=El(a._scopes,a,i,p)),p}function sy(i,e,n,s){const{_proxy:a,_context:u,_subProxy:f,_descriptors:h}=n;if(typeof u.index<"u"&&s(i))return e[u.index%e.length];if(ee(e[0])){const p=e,g=a._scopes.filter(b=>b!==p);e=[];for(const b of p){const _=El(g,a,i,b);e.push(pr(_,u,f&&f[i],h))}}return e}function ud(i,e,n){return di(i)?i(e,n):i}const oy=(i,e)=>i===!0?e:typeof i=="string"?Fo(e,i):void 0;function ay(i,e,n,s,a){for(const u of e){const f=oy(n,u);if(f){i.add(f);const h=ud(f._fallback,n,a);if(typeof h<"u"&&h!==n&&h!==s)return h}else if(f===!1&&typeof s<"u"&&n!==s)return null}return!1}function El(i,e,n,s){const a=e._rootScopes,u=ud(e._fallback,n,s),f=[...i,...a],h=new Set;h.add(s);let p=kf(h,f,n,u||n,s);return p===null||typeof u<"u"&&u!==n&&(p=kf(h,f,u,p,s),p===null)?!1:Al(Array.from(h),[""],a,u,()=>ly(e,n,s))}function kf(i,e,n,s,a){for(;n;)n=ay(i,e,n,s,a);return n}function ly(i,e,n){const s=i._getTarget();e in s||(s[e]={});const a=s[e];return Ne(a)&&ee(n)?n:a||{}}function cy(i,e,n,s){let a;for(const u of e)if(a=fd(ny(u,i),n),typeof a<"u")return Il(i,a)?El(n,s,i,a):a}function fd(i,e){for(const n of e){if(!n)continue;const s=n[i];if(typeof s<"u")return s}}function Sf(i){let e=i._keys;return e||(e=i._keys=uy(i._scopes)),e}function uy(i){const e=new Set;for(const n of i)for(const s of Object.keys(n).filter(a=>!a.startsWith("_")))e.add(s);return Array.from(e)}const fy=Number.EPSILON||1e-14,gr=(i,e)=>e<i.length&&!i[e].skip&&i[e],hd=i=>i==="x"?"y":"x";function hy(i,e,n,s){const a=i.skip?e:i,u=e,f=n.skip?e:n,h=ol(u,a),p=ol(f,u);let g=h/(h+p),b=p/(h+p);g=isNaN(g)?0:g,b=isNaN(b)?0:b;const _=s*g,S=s*b;return{previous:{x:u.x-_*(f.x-a.x),y:u.y-_*(f.y-a.y)},next:{x:u.x+S*(f.x-a.x),y:u.y+S*(f.y-a.y)}}}function dy(i,e,n){const s=i.length;let a,u,f,h,p,g=gr(i,0);for(let b=0;b<s-1;++b)if(p=g,g=gr(i,b+1),!(!p||!g)){if(hs(e[b],0,fy)){n[b]=n[b+1]=0;continue}a=n[b]/e[b],u=n[b+1]/e[b],h=Math.pow(a,2)+Math.pow(u,2),!(h<=9)&&(f=3/Math.sqrt(h),n[b]=a*f*e[b],n[b+1]=u*f*e[b])}}function py(i,e,n="x"){const s=hd(n),a=i.length;let u,f,h,p=gr(i,0);for(let g=0;g<a;++g){if(f=h,h=p,p=gr(i,g+1),!h)continue;const b=h[n],_=h[s];f&&(u=(b-f[n])/3,h[`cp1${n}`]=b-u,h[`cp1${s}`]=_-u*e[g]),p&&(u=(p[n]-b)/3,h[`cp2${n}`]=b+u,h[`cp2${s}`]=_+u*e[g])}}function gy(i,e="x"){const n=hd(e),s=i.length,a=Array(s).fill(0),u=Array(s);let f,h,p,g=gr(i,0);for(f=0;f<s;++f)if(h=p,p=g,g=gr(i,f+1),!!p){if(g){const b=g[e]-p[e];a[f]=b!==0?(g[n]-p[n])/b:0}u[f]=h?g?dr(a[f-1])!==dr(a[f])?0:(a[f-1]+a[f])/2:a[f-1]:a[f]}dy(i,a,u),py(i,u,e)}function mo(i,e,n){return Math.max(Math.min(i,n),e)}function my(i,e){let n,s,a,u,f,h=_s(i[0],e);for(n=0,s=i.length;n<s;++n)f=u,u=h,h=n<s-1&&_s(i[n+1],e),u&&(a=i[n],f&&(a.cp1x=mo(a.cp1x,e.left,e.right),a.cp1y=mo(a.cp1y,e.top,e.bottom)),h&&(a.cp2x=mo(a.cp2x,e.left,e.right),a.cp2y=mo(a.cp2y,e.top,e.bottom)))}function vy(i,e,n,s,a){let u,f,h,p;if(e.spanGaps&&(i=i.filter(g=>!g.skip)),e.cubicInterpolationMode==="monotone")gy(i,a);else{let g=s?i[i.length-1]:i[0];for(u=0,f=i.length;u<f;++u)h=i[u],p=hy(g,h,i[Math.min(u+1,f-(s?0:1))%f],e.tension),h.cp1x=p.previous.x,h.cp1y=p.previous.y,h.cp2x=p.next.x,h.cp2y=p.next.y,g=h}e.capBezierPoints&&my(i,n)}function Fl(){return typeof window<"u"&&typeof document<"u"}function Rl(i){let e=i.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Wo(i,e,n){let s;return typeof i=="string"?(s=parseInt(i,10),i.indexOf("%")!==-1&&(s=s/100*e.parentNode[n])):s=i,s}const Vo=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function yy(i,e){return Vo(i).getPropertyValue(e)}const by=["top","right","bottom","left"];function Ei(i,e,n){const s={};n=n?"-"+n:"";for(let a=0;a<4;a++){const u=by[a];s[u]=parseFloat(i[e+"-"+u+n])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const xy=(i,e,n)=>(i>0||e>0)&&(!n||!n.shadowRoot);function _y(i,e){const n=i.touches,s=n&&n.length?n[0]:i,{offsetX:a,offsetY:u}=s;let f=!1,h,p;if(xy(a,u,i.target))h=a,p=u;else{const g=e.getBoundingClientRect();h=s.clientX-g.left,p=s.clientY-g.top,f=!0}return{x:h,y:p,box:f}}function Di(i,e){if("native"in i)return i;const{canvas:n,currentDevicePixelRatio:s}=e,a=Vo(n),u=a.boxSizing==="border-box",f=Ei(a,"padding"),h=Ei(a,"border","width"),{x:p,y:g,box:b}=_y(i,n),_=f.left+(b&&h.left),S=f.top+(b&&h.top);let{width:T,height:M}=e;return u&&(T-=f.width+h.width,M-=f.height+h.height),{x:Math.round((p-_)/T*n.width/s),y:Math.round((g-S)/M*n.height/s)}}function wy(i,e,n){let s,a;if(e===void 0||n===void 0){const u=i&&Rl(i);if(!u)e=i.clientWidth,n=i.clientHeight;else{const f=u.getBoundingClientRect(),h=Vo(u),p=Ei(h,"border","width"),g=Ei(h,"padding");e=f.width-g.width-p.width,n=f.height-g.height-p.height,s=Wo(h.maxWidth,u,"clientWidth"),a=Wo(h.maxHeight,u,"clientHeight")}}return{width:e,height:n,maxWidth:s||Ho,maxHeight:a||Ho}}const vo=i=>Math.round(i*10)/10;function ky(i,e,n,s){const a=Vo(i),u=Ei(a,"margin"),f=Wo(a.maxWidth,i,"clientWidth")||Ho,h=Wo(a.maxHeight,i,"clientHeight")||Ho,p=wy(i,e,n);let{width:g,height:b}=p;if(a.boxSizing==="content-box"){const S=Ei(a,"border","width"),T=Ei(a,"padding");g-=T.width+S.width,b-=T.height+S.height}return g=Math.max(0,g-u.width),b=Math.max(0,s?g/s:b-u.height),g=vo(Math.min(g,f,p.maxWidth)),b=vo(Math.min(b,h,p.maxHeight)),g&&!b&&(b=vo(g/2)),(e!==void 0||n!==void 0)&&s&&p.height&&b>p.height&&(b=p.height,g=vo(Math.floor(b*s))),{width:g,height:b}}function Cf(i,e,n){const s=e||1,a=Math.floor(i.height*s),u=Math.floor(i.width*s);i.height=Math.floor(i.height),i.width=Math.floor(i.width);const f=i.canvas;return f.style&&(n||!f.style.height&&!f.style.width)&&(f.style.height=`${i.height}px`,f.style.width=`${i.width}px`),i.currentDevicePixelRatio!==s||f.height!==a||f.width!==u?(i.currentDevicePixelRatio=s,f.height=a,f.width=u,i.ctx.setTransform(s,0,0,s,0,0),!0):!1}const Sy=function(){let i=!1;try{const e={get passive(){return i=!0,!1}};Fl()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return i}();function Tf(i,e){const n=yy(i,e),s=n&&n.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Pi(i,e,n,s){return{x:i.x+n*(e.x-i.x),y:i.y+n*(e.y-i.y)}}function Cy(i,e,n,s){return{x:i.x+n*(e.x-i.x),y:s==="middle"?n<.5?i.y:e.y:s==="after"?n<1?i.y:e.y:n>0?e.y:i.y}}function Ty(i,e,n,s){const a={x:i.cp2x,y:i.cp2y},u={x:e.cp1x,y:e.cp1y},f=Pi(i,a,n),h=Pi(a,u,n),p=Pi(u,e,n),g=Pi(f,h,n),b=Pi(h,p,n);return Pi(g,b,n)}const Ly=function(i,e){return{x(n){return i+i+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,s){return n-s},leftForLtr(n,s){return n-s}}},Ny=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,e){return i+e},leftForLtr(i,e){return i}}};function ur(i,e,n){return i?Ly(e,n):Ny()}function dd(i,e){let n,s;(e==="ltr"||e==="rtl")&&(n=i.canvas.style,s=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),i.prevTextDirection=s)}function pd(i,e){e!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",e[0],e[1]))}function gd(i){return i==="angle"?{between:Qh,compare:Tv,normalize:ci}:{between:os,compare:(e,n)=>e-n,normalize:e=>e}}function Lf({start:i,end:e,count:n,loop:s,style:a}){return{start:i%n,end:e%n,loop:s&&(e-i+1)%n===0,style:a}}function My(i,e,n){const{property:s,start:a,end:u}=n,{between:f,normalize:h}=gd(s),p=e.length;let{start:g,end:b,loop:_}=i,S,T;if(_){for(g+=p,b+=p,S=0,T=p;S<T&&f(h(e[g%p][s]),a,u);++S)g--,b--;g%=p,b%=p}return b<g&&(b+=p),{start:g,end:b,loop:_,style:i.style}}function Dy(i,e,n){if(!n)return[i];const{property:s,start:a,end:u}=n,f=e.length,{compare:h,between:p,normalize:g}=gd(s),{start:b,end:_,loop:S,style:T}=My(i,e,n),M=[];let D=!1,L=null,A,R,G;const J=()=>p(a,G,A)&&h(a,G)!==0,j=()=>h(u,A)===0||p(u,G,A),V=()=>D||J(),it=()=>!D||j();for(let Z=b,bt=b;Z<=_;++Z)R=e[Z%f],!R.skip&&(A=g(R[s]),A!==G&&(D=p(A,a,u),L===null&&V()&&(L=h(A,a)===0?Z:bt),L!==null&&it()&&(M.push(Lf({start:L,end:Z,loop:S,count:f,style:T})),L=null),bt=Z,G=A));return L!==null&&M.push(Lf({start:L,end:_,loop:S,count:f,style:T})),M}function Py(i,e){const n=[],s=i.segments;for(let a=0;a<s.length;a++){const u=Dy(s[a],i.points,e);u.length&&n.push(...u)}return n}function Oy(i,e,n,s){let a=0,u=e-1;if(n&&!s)for(;a<e&&!i[a].skip;)a++;for(;a<e&&i[a].skip;)a++;for(a%=e,n&&(u+=a);u>a&&i[u%e].skip;)u--;return u%=e,{start:a,end:u}}function Ay(i,e,n,s){const a=i.length,u=[];let f=e,h=i[e],p;for(p=e+1;p<=n;++p){const g=i[p%a];g.skip||g.stop?h.skip||(s=!1,u.push({start:e%a,end:(p-1)%a,loop:s}),e=f=g.stop?p:null):(f=p,h.skip&&(e=p)),h=g}return f!==null&&u.push({start:e%a,end:f%a,loop:s}),u}function Iy(i,e){const n=i.points,s=i.options.spanGaps,a=n.length;if(!a)return[];const u=!!i._loop,{start:f,end:h}=Oy(n,a,u,s);if(s===!0)return Nf(i,[{start:f,end:h,loop:u}],n,e);const p=h<f?h+a:h,g=!!i._fullLoop&&f===0&&h===a-1;return Nf(i,Ay(n,f,p,g),n,e)}function Nf(i,e,n,s){return!s||!s.setContext||!n?e:Ey(i,e,n,s)}function Ey(i,e,n,s){const a=i._chart.getContext(),u=Mf(i.options),{_datasetIndex:f,options:{spanGaps:h}}=i,p=n.length,g=[];let b=u,_=e[0].start,S=_;function T(M,D,L,A){const R=h?-1:1;if(M!==D){for(M+=p;n[M%p].skip;)M-=R;for(;n[D%p].skip;)D+=R;M%p!==D%p&&(g.push({start:M%p,end:D%p,loop:L,style:A}),b=A,_=D%p)}}for(const M of e){_=h?_:M.start;let D=n[_%p],L;for(S=_+1;S<=M.end;S++){const A=n[S%p];L=Mf(s.setContext(Hi(a,{type:"segment",p0:D,p1:A,p0DataIndex:(S-1)%p,p1DataIndex:S%p,datasetIndex:f}))),Fy(L,b)&&T(_,S-1,M.loop,b),D=A,b=L}_<S-1&&T(_,S-1,M.loop,b)}return g}function Mf(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function Fy(i,e){if(!e)return!1;const n=[],s=function(a,u){return Dl(u)?(n.includes(u)||n.push(u),n.indexOf(u)):u};return JSON.stringify(i,s)!==JSON.stringify(e,s)}/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class Ry{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,s,a){const u=n.listeners[a],f=n.duration;u.forEach(h=>h({chart:e,initial:n.initial,numSteps:f,currentStep:Math.min(s-n.start,f)}))}_refresh(){this._request||(this._running=!0,this._request=ed.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((s,a)=>{if(!s.running||!s.items.length)return;const u=s.items;let f=u.length-1,h=!1,p;for(;f>=0;--f)p=u[f],p._active?(p._total>s.duration&&(s.duration=p._total),p.tick(e),h=!0):(u[f]=u[u.length-1],u.pop());h&&(a.draw(),this._notify(a,s,e,"progress")),u.length||(s.running=!1,this._notify(a,s,e,"complete"),s.initial=!1),n+=u.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let s=n.get(e);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,s)),s}listen(e,n,s){this._getAnims(e).listeners[n].push(s)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((s,a)=>Math.max(s,a._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const s=n.items;let a=s.length-1;for(;a>=0;--a)s[a].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var jn=new Ry;const Df="transparent",Hy={boolean(i,e,n){return n>.5?e:i},color(i,e,n){const s=bf(i||Df),a=s.valid&&bf(e||Df);return a&&a.valid?a.mix(s,n).hexString():e},number(i,e,n){return i+(e-i)*n}};class Wy{constructor(e,n,s,a){const u=n[s];a=go([e.to,a,u,e.from]);const f=go([e.from,u,a]);this._active=!0,this._fn=e.fn||Hy[e.type||typeof f],this._easing=ds[e.easing]||ds.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=s,this._from=f,this._to=a,this._promises=void 0}active(){return this._active}update(e,n,s){if(this._active){this._notify(!1);const a=this._target[this._prop],u=s-this._start,f=this._duration-u;this._start=s,this._duration=Math.floor(Math.max(f,e.duration)),this._total+=u,this._loop=!!e.loop,this._to=go([e.to,n,a,e.from]),this._from=go([e.from,a,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,s=this._duration,a=this._prop,u=this._from,f=this._loop,h=this._to;let p;if(this._active=u!==h&&(f||n<s),!this._active){this._target[a]=h,this._notify(!0);return}if(n<0){this._target[a]=u;return}p=n/s%2,p=f&&p>1?2-p:p,p=this._easing(Math.min(1,Math.max(0,p))),this._target[a]=this._fn(u,h,p)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,s)=>{e.push({res:n,rej:s})})}_notify(e){const n=e?"res":"rej",s=this._promises||[];for(let a=0;a<s.length;a++)s[a][n]()}}class md{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!ee(e))return;const n=Object.keys(xe.animation),s=this._properties;Object.getOwnPropertyNames(e).forEach(a=>{const u=e[a];if(!ee(u))return;const f={};for(const h of n)f[h]=u[h];(Ne(u.properties)&&u.properties||[a]).forEach(h=>{(h===a||!s.has(h))&&s.set(h,f)})})}_animateOptions(e,n){const s=n.options,a=By(e,s);if(!a)return[];const u=this._createAnimations(a,s);return s.$shared&&zy(e.options.$animations,s).then(()=>{e.options=s},()=>{}),u}_createAnimations(e,n){const s=this._properties,a=[],u=e.$animations||(e.$animations={}),f=Object.keys(n),h=Date.now();let p;for(p=f.length-1;p>=0;--p){const g=f[p];if(g.charAt(0)==="$")continue;if(g==="options"){a.push(...this._animateOptions(e,n));continue}const b=n[g];let _=u[g];const S=s.get(g);if(_)if(S&&_.active()){_.update(S,b,h);continue}else _.cancel();if(!S||!S.duration){e[g]=b;continue}u[g]=_=new Wy(S,e,g,b),a.push(_)}return a}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const s=this._createAnimations(e,n);if(s.length)return jn.add(this._chart,s),!0}}function zy(i,e){const n=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const u=i[s[a]];u&&u.active()&&n.push(u.wait())}return Promise.all(n)}function By(i,e){if(!e)return;let n=i.options;if(!n){i.options=e;return}return n.$shared&&(i.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function Pf(i,e){const n=i&&i.options||{},s=n.reverse,a=n.min===void 0?e:0,u=n.max===void 0?e:0;return{start:s?u:a,end:s?a:u}}function Uy(i,e,n){if(n===!1)return!1;const s=Pf(i,n),a=Pf(e,n);return{top:a.end,right:s.end,bottom:a.start,left:s.start}}function $y(i){let e,n,s,a;return ee(i)?(e=i.top,n=i.right,s=i.bottom,a=i.left):e=n=s=a=i,{top:e,right:n,bottom:s,left:a,disabled:i===!1}}function vd(i,e){const n=[],s=i._getSortedDatasetMetas(e);let a,u;for(a=0,u=s.length;a<u;++a)n.push(s[a].index);return n}function Of(i,e,n,s={}){const a=i.keys,u=s.mode==="single";let f,h,p,g;if(e===null)return;let b=!1;for(f=0,h=a.length;f<h;++f){if(p=+a[f],p===n){if(b=!0,s.all)continue;break}g=i.values[p],fn(g)&&(u||e===0||dr(e)===dr(g))&&(e+=g)}return!b&&!s.all?0:e}function jy(i,e){const{iScale:n,vScale:s}=e,a=n.axis==="x"?"x":"y",u=s.axis==="x"?"x":"y",f=Object.keys(i),h=new Array(f.length);let p,g,b;for(p=0,g=f.length;p<g;++p)b=f[p],h[p]={[a]:b,[u]:i[b]};return h}function Va(i,e){const n=i&&i.options.stacked;return n||n===void 0&&e.stack!==void 0}function Vy(i,e,n){return`${i.id}.${e.id}.${n.stack||n.type}`}function Yy(i){const{min:e,max:n,minDefined:s,maxDefined:a}=i.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:a?n:Number.POSITIVE_INFINITY}}function Xy(i,e,n){const s=i[e]||(i[e]={});return s[n]||(s[n]={})}function Af(i,e,n,s){for(const a of e.getMatchingVisibleMetas(s).reverse()){const u=i[a.index];if(n&&u>0||!n&&u<0)return a.index}return null}function If(i,e){const{chart:n,_cachedMeta:s}=i,a=n._stacks||(n._stacks={}),{iScale:u,vScale:f,index:h}=s,p=u.axis,g=f.axis,b=Vy(u,f,s),_=e.length;let S;for(let T=0;T<_;++T){const M=e[T],{[p]:D,[g]:L}=M,A=M._stacks||(M._stacks={});S=A[g]=Xy(a,b,D),S[h]=L,S._top=Af(S,f,!0,s.type),S._bottom=Af(S,f,!1,s.type);const R=S._visualValues||(S._visualValues={});R[h]=L}}function Ya(i,e){const n=i.scales;return Object.keys(n).filter(s=>n[s].axis===e).shift()}function Ky(i,e){return Hi(i,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Gy(i,e,n){return Hi(i,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Qr(i,e){const n=i.controller.index,s=i.vScale&&i.vScale.axis;if(s){e=e||i._parsed;for(const a of e){const u=a._stacks;if(!u||u[s]===void 0||u[s][n]===void 0)return;delete u[s][n],u[s]._visualValues!==void 0&&u[s]._visualValues[n]!==void 0&&delete u[s]._visualValues[n]}}}const Xa=i=>i==="reset"||i==="none",Ef=(i,e)=>e?i:Object.assign({},i),qy=(i,e,n)=>i&&!e.hidden&&e._stacked&&{keys:vd(n,!0),values:null};class ms{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Va(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Qr(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,s=this.getDataset(),a=(_,S,T,M)=>_==="x"?S:_==="r"?M:T,u=n.xAxisID=qt(s.xAxisID,Ya(e,"x")),f=n.yAxisID=qt(s.yAxisID,Ya(e,"y")),h=n.rAxisID=qt(s.rAxisID,Ya(e,"r")),p=n.indexAxis,g=n.iAxisID=a(p,u,f,h),b=n.vAxisID=a(p,f,u,h);n.xScale=this.getScaleForId(u),n.yScale=this.getScaleForId(f),n.rScale=this.getScaleForId(h),n.iScale=this.getScaleForId(g),n.vScale=this.getScaleForId(b)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&mf(this._data,this),e._stacked&&Qr(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(ee(n)){const a=this._cachedMeta;this._data=jy(n,a)}else if(s!==n){if(s){mf(s,this);const a=this._cachedMeta;Qr(a),a._parsed=[]}n&&Object.isExtensible(n)&&Dv(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,s=this.getDataset();let a=!1;this._dataCheck();const u=n._stacked;n._stacked=Va(n.vScale,n),n.stack!==s.stack&&(a=!0,Qr(n),n.stack=s.stack),this._resyncElements(e),(a||u!==n._stacked)&&(If(this,n._parsed),n._stacked=Va(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:s,_data:a}=this,{iScale:u,_stacked:f}=s,h=u.axis;let p=e===0&&n===a.length?!0:s._sorted,g=e>0&&s._parsed[e-1],b,_,S;if(this._parsing===!1)s._parsed=a,s._sorted=!0,S=a;else{Ne(a[e])?S=this.parseArrayData(s,a,e,n):ee(a[e])?S=this.parseObjectData(s,a,e,n):S=this.parsePrimitiveData(s,a,e,n);const T=()=>_[h]===null||g&&_[h]<g[h];for(b=0;b<n;++b)s._parsed[b+e]=_=S[b],p&&(T()&&(p=!1),g=_);s._sorted=p}f&&If(this,S)}parsePrimitiveData(e,n,s,a){const{iScale:u,vScale:f}=e,h=u.axis,p=f.axis,g=u.getLabels(),b=u===f,_=new Array(a);let S,T,M;for(S=0,T=a;S<T;++S)M=S+s,_[S]={[h]:b||u.parse(g[M],M),[p]:f.parse(n[M],M)};return _}parseArrayData(e,n,s,a){const{xScale:u,yScale:f}=e,h=new Array(a);let p,g,b,_;for(p=0,g=a;p<g;++p)b=p+s,_=n[b],h[p]={x:u.parse(_[0],b),y:f.parse(_[1],b)};return h}parseObjectData(e,n,s,a){const{xScale:u,yScale:f}=e,{xAxisKey:h="x",yAxisKey:p="y"}=this._parsing,g=new Array(a);let b,_,S,T;for(b=0,_=a;b<_;++b)S=b+s,T=n[S],g[b]={x:u.parse(Fo(T,h),S),y:f.parse(Fo(T,p),S)};return g}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){const a=this.chart,u=this._cachedMeta,f=n[e.axis],h={keys:vd(a,!0),values:n._stacks[e.axis]._visualValues};return Of(h,f,u.index,{mode:s})}updateRangeFromParsed(e,n,s,a){const u=s[n.axis];let f=u===null?NaN:u;const h=a&&s._stacks[n.axis];a&&h&&(a.values=h,f=Of(a,u,this._cachedMeta.index)),e.min=Math.min(e.min,f),e.max=Math.max(e.max,f)}getMinMax(e,n){const s=this._cachedMeta,a=s._parsed,u=s._sorted&&e===s.iScale,f=a.length,h=this._getOtherScale(e),p=qy(n,s,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:b,max:_}=Yy(h);let S,T;function M(){T=a[S];const D=T[h.axis];return!fn(T[e.axis])||b>D||_<D}for(S=0;S<f&&!(!M()&&(this.updateRangeFromParsed(g,e,T,p),u));++S);if(u){for(S=f-1;S>=0;--S)if(!M()){this.updateRangeFromParsed(g,e,T,p);break}}return g}getAllParsedValues(e){const n=this._cachedMeta._parsed,s=[];let a,u,f;for(a=0,u=n.length;a<u;++a)f=n[a][e.axis],fn(f)&&s.push(f);return s}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,s=n.iScale,a=n.vScale,u=this.getParsed(e);return{label:s?""+s.getLabelForValue(u[s.axis]):"",value:a?""+a.getLabelForValue(u[a.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=$y(qt(this.options.clip,Uy(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,s=this._cachedMeta,a=s.data||[],u=n.chartArea,f=[],h=this._drawStart||0,p=this._drawCount||a.length-h,g=this.options.drawActiveElementsOnTop;let b;for(s.dataset&&s.dataset.draw(e,u,h,p),b=h;b<h+p;++b){const _=a[b];_.hidden||(_.active&&g?f.push(_):_.draw(e,u))}for(b=0;b<f.length;++b)f[b].draw(e,u)}getStyle(e,n){const s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){const a=this.getDataset();let u;if(e>=0&&e<this._cachedMeta.data.length){const f=this._cachedMeta.data[e];u=f.$context||(f.$context=Gy(this.getContext(),e,f)),u.parsed=this.getParsed(e),u.raw=a.data[e],u.index=u.dataIndex=e}else u=this.$context||(this.$context=Ky(this.chart.getContext(),this.index)),u.dataset=a,u.index=u.datasetIndex=this.index;return u.active=!!n,u.mode=s,u}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){const a=n==="active",u=this._cachedDataOpts,f=e+"-"+n,h=u[f],p=this.enableOptionSharing&&Ro(s);if(h)return Ef(h,p);const g=this.chart.config,b=g.datasetElementScopeKeys(this._type,e),_=a?[`${e}Hover`,"hover",e,""]:[e,""],S=g.getOptionScopes(this.getDataset(),b),T=Object.keys(xe.elements[e]),M=()=>this.getContext(s,a,n),D=g.resolveNamedOptions(S,T,M,_);return D.$shared&&(D.$shared=p,u[f]=Object.freeze(Ef(D,p))),D}_resolveAnimations(e,n,s){const a=this.chart,u=this._cachedDataOpts,f=`animation-${n}`,h=u[f];if(h)return h;let p;if(a.options.animation!==!1){const b=this.chart.config,_=b.datasetAnimationScopeKeys(this._type,n),S=b.getOptionScopes(this.getDataset(),_);p=b.createResolver(S,this.getContext(e,s,n))}const g=new md(a,p&&p.animations);return p&&p._cacheable&&(u[f]=Object.freeze(g)),g}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Xa(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const s=this.resolveDataElementOptions(e,n),a=this._sharedOptions,u=this.getSharedOptions(s),f=this.includeOptions(n,u)||u!==a;return this.updateSharedOptions(u,n,s),{sharedOptions:u,includeOptions:f}}updateElement(e,n,s,a){Xa(a)?Object.assign(e,s):this._resolveAnimations(n,a).update(e,s)}updateSharedOptions(e,n,s){e&&!Xa(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,a){e.active=a;const u=this.getStyle(n,a);this._resolveAnimations(n,s,a).update(e,{options:!a&&this.getSharedOptions(u)||u})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,s=this._cachedMeta.data;for(const[h,p,g]of this._syncList)this[h](p,g);this._syncList=[];const a=s.length,u=n.length,f=Math.min(u,a);f&&this.parse(0,f),u>a?this._insertElements(a,u-a,e):u<a&&this._removeElements(u,a-u)}_insertElements(e,n,s=!0){const a=this._cachedMeta,u=a.data,f=e+n;let h;const p=g=>{for(g.length+=n,h=g.length-1;h>=f;h--)g[h]=g[h-n]};for(p(u),h=e;h<f;++h)u[h]=new this.dataElementType;this._parsing&&p(a._parsed),this.parse(e,n),s&&this.updateElements(u,e,n,"reset")}updateElements(e,n,s,a){}_removeElements(e,n){const s=this._cachedMeta;if(this._parsing){const a=s._parsed.splice(e,n);s._stacked&&Qr(s,a)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,s,a]=e;this[n](s,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ft(ms,"defaults",{}),Ft(ms,"datasetElementType",null),Ft(ms,"dataElementType",null);class No extends ms{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:s,data:a=[],_dataset:u}=n,f=this.chart._animationsDisabled;let{start:h,count:p}=Iv(n,a,f);this._drawStart=h,this._drawCount=p,Ev(n)&&(h=0,p=a.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!u._decimated,s.points=a;const g=this.resolveDatasetElementOptions(e);this.options.showLine||(g.borderWidth=0),g.segment=this.options.segment,this.updateElement(s,void 0,{animated:!f,options:g},e),this.updateElements(a,h,p,e)}updateElements(e,n,s,a){const u=a==="reset",{iScale:f,vScale:h,_stacked:p,_dataset:g}=this._cachedMeta,{sharedOptions:b,includeOptions:_}=this._getSharedOptions(n,a),S=f.axis,T=h.axis,{spanGaps:M,segment:D}=this.options,L=xs(M)?M:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||u||a==="none",R=n+s,G=e.length;let J=n>0&&this.getParsed(n-1);for(let j=0;j<G;++j){const V=e[j],it=A?V:{};if(j<n||j>=R){it.skip=!0;continue}const Z=this.getParsed(j),bt=ve(Z[T]),ct=it[S]=f.getPixelForValue(Z[S],j),Q=it[T]=u||bt?h.getBasePixel():h.getPixelForValue(p?this.applyStack(h,Z,p):Z[T],j);it.skip=isNaN(ct)||isNaN(Q)||bt,it.stop=j>0&&Math.abs(Z[S]-J[S])>L,D&&(it.parsed=Z,it.raw=g.data[j]),_&&(it.options=b||this.resolveDataElementOptions(j,V.active?"active":a)),A||this.updateElement(V,j,it,a),J=Z}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,a=e.data||[];if(!a.length)return s;const u=a[0].size(this.resolveDataElementOptions(0)),f=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(s,u,f)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ft(No,"id","line"),Ft(No,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ft(No,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Mi(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Hl{constructor(e){Ft(this,"options");this.options=e||{}}static override(e){Object.assign(Hl.prototype,e)}init(){}formats(){return Mi()}parse(){return Mi()}format(){return Mi()}add(){return Mi()}diff(){return Mi()}startOf(){return Mi()}endOf(){return Mi()}}var Jy={_date:Hl};function Zy(i,e,n,s){const{controller:a,data:u,_sorted:f}=i,h=a._cachedMeta.iScale;if(h&&e===h.axis&&e!=="r"&&f&&u.length){const p=h._reversePixels?Nv:Ii;if(s){if(a._sharedOptions){const g=u[0],b=typeof g.getRange=="function"&&g.getRange(e);if(b){const _=p(u,e,n-b),S=p(u,e,n+b);return{lo:_.lo,hi:S.hi}}}}else return p(u,e,n)}return{lo:0,hi:u.length-1}}function Ns(i,e,n,s,a){const u=i.getSortedVisibleDatasetMetas(),f=n[e];for(let h=0,p=u.length;h<p;++h){const{index:g,data:b}=u[h],{lo:_,hi:S}=Zy(u[h],e,f,a);for(let T=_;T<=S;++T){const M=b[T];M.skip||s(M,g,T)}}}function Qy(i){const e=i.indexOf("x")!==-1,n=i.indexOf("y")!==-1;return function(s,a){const u=e?Math.abs(s.x-a.x):0,f=n?Math.abs(s.y-a.y):0;return Math.sqrt(Math.pow(u,2)+Math.pow(f,2))}}function Ka(i,e,n,s,a){const u=[];return!a&&!i.isPointInArea(e)||Ns(i,n,e,function(h,p,g){!a&&!_s(h,i.chartArea,0)||h.inRange(e.x,e.y,s)&&u.push({element:h,datasetIndex:p,index:g})},!0),u}function t0(i,e,n,s){let a=[];function u(f,h,p){const{startAngle:g,endAngle:b}=f.getProps(["startAngle","endAngle"],s),{angle:_}=Cv(f,{x:e.x,y:e.y});Qh(_,g,b)&&a.push({element:f,datasetIndex:h,index:p})}return Ns(i,n,e,u),a}function e0(i,e,n,s,a,u){let f=[];const h=Qy(n);let p=Number.POSITIVE_INFINITY;function g(b,_,S){const T=b.inRange(e.x,e.y,a);if(s&&!T)return;const M=b.getCenterPoint(a);if(!(!!u||i.isPointInArea(M))&&!T)return;const L=h(e,M);L<p?(f=[{element:b,datasetIndex:_,index:S}],p=L):L===p&&f.push({element:b,datasetIndex:_,index:S})}return Ns(i,n,e,g),f}function Ga(i,e,n,s,a,u){return!u&&!i.isPointInArea(e)?[]:n==="r"&&!s?t0(i,e,n,a):e0(i,e,n,s,a,u)}function Ff(i,e,n,s,a){const u=[],f=n==="x"?"inXRange":"inYRange";let h=!1;return Ns(i,n,e,(p,g,b)=>{p[f]&&p[f](e[n],a)&&(u.push({element:p,datasetIndex:g,index:b}),h=h||p.inRange(e.x,e.y,a))}),s&&!h?[]:u}var n0={evaluateInteractionItems:Ns,modes:{index(i,e,n,s){const a=Di(e,i),u=n.axis||"x",f=n.includeInvisible||!1,h=n.intersect?Ka(i,a,u,s,f):Ga(i,a,u,!1,s,f),p=[];return h.length?(i.getSortedVisibleDatasetMetas().forEach(g=>{const b=h[0].index,_=g.data[b];_&&!_.skip&&p.push({element:_,datasetIndex:g.index,index:b})}),p):[]},dataset(i,e,n,s){const a=Di(e,i),u=n.axis||"xy",f=n.includeInvisible||!1;let h=n.intersect?Ka(i,a,u,s,f):Ga(i,a,u,!1,s,f);if(h.length>0){const p=h[0].datasetIndex,g=i.getDatasetMeta(p).data;h=[];for(let b=0;b<g.length;++b)h.push({element:g[b],datasetIndex:p,index:b})}return h},point(i,e,n,s){const a=Di(e,i),u=n.axis||"xy",f=n.includeInvisible||!1;return Ka(i,a,u,s,f)},nearest(i,e,n,s){const a=Di(e,i),u=n.axis||"xy",f=n.includeInvisible||!1;return Ga(i,a,u,n.intersect,s,f)},x(i,e,n,s){const a=Di(e,i);return Ff(i,a,"x",n.intersect,s)},y(i,e,n,s){const a=Di(e,i);return Ff(i,a,"y",n.intersect,s)}}};const yd=["left","top","right","bottom"];function ts(i,e){return i.filter(n=>n.pos===e)}function Rf(i,e){return i.filter(n=>yd.indexOf(n.pos)===-1&&n.box.axis===e)}function es(i,e){return i.sort((n,s)=>{const a=e?s:n,u=e?n:s;return a.weight===u.weight?a.index-u.index:a.weight-u.weight})}function i0(i){const e=[];let n,s,a,u,f,h;for(n=0,s=(i||[]).length;n<s;++n)a=i[n],{position:u,options:{stack:f,stackWeight:h=1}}=a,e.push({index:n,box:a,pos:u,horizontal:a.isHorizontal(),weight:a.weight,stack:f&&u+f,stackWeight:h});return e}function r0(i){const e={};for(const n of i){const{stack:s,pos:a,stackWeight:u}=n;if(!s||!yd.includes(a))continue;const f=e[s]||(e[s]={count:0,placed:0,weight:0,size:0});f.count++,f.weight+=u}return e}function s0(i,e){const n=r0(i),{vBoxMaxWidth:s,hBoxMaxHeight:a}=e;let u,f,h;for(u=0,f=i.length;u<f;++u){h=i[u];const{fullSize:p}=h.box,g=n[h.stack],b=g&&h.stackWeight/g.weight;h.horizontal?(h.width=b?b*s:p&&e.availableWidth,h.height=a):(h.width=s,h.height=b?b*a:p&&e.availableHeight)}return n}function o0(i){const e=i0(i),n=es(e.filter(g=>g.box.fullSize),!0),s=es(ts(e,"left"),!0),a=es(ts(e,"right")),u=es(ts(e,"top"),!0),f=es(ts(e,"bottom")),h=Rf(e,"x"),p=Rf(e,"y");return{fullSize:n,leftAndTop:s.concat(u),rightAndBottom:a.concat(p).concat(f).concat(h),chartArea:ts(e,"chartArea"),vertical:s.concat(a).concat(p),horizontal:u.concat(f).concat(h)}}function Hf(i,e,n,s){return Math.max(i[n],e[n])+Math.max(i[s],e[s])}function bd(i,e){i.top=Math.max(i.top,e.top),i.left=Math.max(i.left,e.left),i.bottom=Math.max(i.bottom,e.bottom),i.right=Math.max(i.right,e.right)}function a0(i,e,n,s){const{pos:a,box:u}=n,f=i.maxPadding;if(!ee(a)){n.size&&(i[a]-=n.size);const _=s[n.stack]||{size:0,count:1};_.size=Math.max(_.size,n.horizontal?u.height:u.width),n.size=_.size/_.count,i[a]+=n.size}u.getPadding&&bd(f,u.getPadding());const h=Math.max(0,e.outerWidth-Hf(f,i,"left","right")),p=Math.max(0,e.outerHeight-Hf(f,i,"top","bottom")),g=h!==i.w,b=p!==i.h;return i.w=h,i.h=p,n.horizontal?{same:g,other:b}:{same:b,other:g}}function l0(i){const e=i.maxPadding;function n(s){const a=Math.max(e[s]-i[s],0);return i[s]+=a,a}i.y+=n("top"),i.x+=n("left"),n("right"),n("bottom")}function c0(i,e){const n=e.maxPadding;function s(a){const u={left:0,top:0,right:0,bottom:0};return a.forEach(f=>{u[f]=Math.max(e[f],n[f])}),u}return s(i?["left","right"]:["top","bottom"])}function as(i,e,n,s){const a=[];let u,f,h,p,g,b;for(u=0,f=i.length,g=0;u<f;++u){h=i[u],p=h.box,p.update(h.width||e.w,h.height||e.h,c0(h.horizontal,e));const{same:_,other:S}=a0(e,n,h,s);g|=_&&a.length,b=b||S,p.fullSize||a.push(h)}return g&&as(a,e,n,s)||b}function yo(i,e,n,s,a){i.top=n,i.left=e,i.right=e+s,i.bottom=n+a,i.width=s,i.height=a}function Wf(i,e,n,s){const a=n.padding;let{x:u,y:f}=e;for(const h of i){const p=h.box,g=s[h.stack]||{count:1,placed:0,weight:1},b=h.stackWeight/g.weight||1;if(h.horizontal){const _=e.w*b,S=g.size||p.height;Ro(g.start)&&(f=g.start),p.fullSize?yo(p,a.left,f,n.outerWidth-a.right-a.left,S):yo(p,e.left+g.placed,f,_,S),g.start=f,g.placed+=_,f=p.bottom}else{const _=e.h*b,S=g.size||p.width;Ro(g.start)&&(u=g.start),p.fullSize?yo(p,u,a.top,S,n.outerHeight-a.bottom-a.top):yo(p,u,e.top+g.placed,S,_),g.start=u,g.placed+=_,u=p.right}}e.x=u,e.y=f}var un={addBox(i,e){i.boxes||(i.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},i.boxes.push(e)},removeBox(i,e){const n=i.boxes?i.boxes.indexOf(e):-1;n!==-1&&i.boxes.splice(n,1)},configure(i,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(i,e,n,s){if(!i)return;const a=hn(i.options.layout.padding),u=Math.max(e-a.width,0),f=Math.max(n-a.height,0),h=o0(i.boxes),p=h.vertical,g=h.horizontal;re(i.boxes,D=>{typeof D.beforeLayout=="function"&&D.beforeLayout()});const b=p.reduce((D,L)=>L.box.options&&L.box.options.display===!1?D:D+1,0)||1,_=Object.freeze({outerWidth:e,outerHeight:n,padding:a,availableWidth:u,availableHeight:f,vBoxMaxWidth:u/2/b,hBoxMaxHeight:f/2}),S=Object.assign({},a);bd(S,hn(s));const T=Object.assign({maxPadding:S,w:u,h:f,x:a.left,y:a.top},a),M=s0(p.concat(g),_);as(h.fullSize,T,_,M),as(p,T,_,M),as(g,T,_,M)&&as(p,T,_,M),l0(T),Wf(h.leftAndTop,T,_,M),T.x+=T.w,T.y+=T.h,Wf(h.rightAndBottom,T,_,M),i.chartArea={left:T.left,top:T.top,right:T.left+T.w,bottom:T.top+T.h,height:T.h,width:T.w},re(h.chartArea,D=>{const L=D.box;Object.assign(L,i.chartArea),L.update(T.w,T.h,{left:0,top:0,right:0,bottom:0})})}};class xd{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,s){}removeEventListener(e,n,s){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,s,a){return n=Math.max(0,n||e.width),s=s||e.height,{width:n,height:Math.max(0,a?Math.floor(n/a):s)}}isAttached(e){return!0}updateConfig(e){}}class u0 extends xd{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Mo="$chartjs",f0={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},zf=i=>i===null||i==="";function h0(i,e){const n=i.style,s=i.getAttribute("height"),a=i.getAttribute("width");if(i[Mo]={initial:{height:s,width:a,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",zf(a)){const u=Tf(i,"width");u!==void 0&&(i.width=u)}if(zf(s))if(i.style.height==="")i.height=i.width/(e||2);else{const u=Tf(i,"height");u!==void 0&&(i.height=u)}return i}const _d=Sy?{passive:!0}:!1;function d0(i,e,n){i&&i.addEventListener(e,n,_d)}function p0(i,e,n){i&&i.canvas&&i.canvas.removeEventListener(e,n,_d)}function g0(i,e){const n=f0[i.type]||i.type,{x:s,y:a}=Di(i,e);return{type:n,chart:e,native:i,x:s!==void 0?s:null,y:a!==void 0?a:null}}function zo(i,e){for(const n of i)if(n===e||n.contains(e))return!0}function m0(i,e,n){const s=i.canvas,a=new MutationObserver(u=>{let f=!1;for(const h of u)f=f||zo(h.addedNodes,s),f=f&&!zo(h.removedNodes,s);f&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}function v0(i,e,n){const s=i.canvas,a=new MutationObserver(u=>{let f=!1;for(const h of u)f=f||zo(h.removedNodes,s),f=f&&!zo(h.addedNodes,s);f&&n()});return a.observe(document,{childList:!0,subtree:!0}),a}const ks=new Map;let Bf=0;function wd(){const i=window.devicePixelRatio;i!==Bf&&(Bf=i,ks.forEach((e,n)=>{n.currentDevicePixelRatio!==i&&e()}))}function y0(i,e){ks.size||window.addEventListener("resize",wd),ks.set(i,e)}function b0(i){ks.delete(i),ks.size||window.removeEventListener("resize",wd)}function x0(i,e,n){const s=i.canvas,a=s&&Rl(s);if(!a)return;const u=nd((h,p)=>{const g=a.clientWidth;n(h,p),g<a.clientWidth&&n()},window),f=new ResizeObserver(h=>{const p=h[0],g=p.contentRect.width,b=p.contentRect.height;g===0&&b===0||u(g,b)});return f.observe(a),y0(i,u),f}function qa(i,e,n){n&&n.disconnect(),e==="resize"&&b0(i)}function _0(i,e,n){const s=i.canvas,a=nd(u=>{i.ctx!==null&&n(g0(u,i))},i);return d0(s,e,a),a}class w0 extends xd{acquireContext(e,n){const s=e&&e.getContext&&e.getContext("2d");return s&&s.canvas===e?(h0(e,n),s):null}releaseContext(e){const n=e.canvas;if(!n[Mo])return!1;const s=n[Mo].initial;["height","width"].forEach(u=>{const f=s[u];ve(f)?n.removeAttribute(u):n.setAttribute(u,f)});const a=s.style||{};return Object.keys(a).forEach(u=>{n.style[u]=a[u]}),n.width=n.width,delete n[Mo],!0}addEventListener(e,n,s){this.removeEventListener(e,n);const a=e.$proxies||(e.$proxies={}),f={attach:m0,detach:v0,resize:x0}[n]||_0;a[n]=f(e,n,s)}removeEventListener(e,n){const s=e.$proxies||(e.$proxies={}),a=s[n];if(!a)return;({attach:qa,detach:qa,resize:qa}[n]||p0)(e,n,a),s[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,s,a){return ky(e,n,s,a)}isAttached(e){const n=e&&Rl(e);return!!(n&&n.isConnected)}}function k0(i){return!Fl()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?u0:w0}class qn{constructor(){Ft(this,"x");Ft(this,"y");Ft(this,"active",!1);Ft(this,"options");Ft(this,"$animations")}tooltipPosition(e){const{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}hasValue(){return xs(this.x)&&xs(this.y)}getProps(e,n){const s=this.$animations;if(!n||!s)return this;const a={};return e.forEach(u=>{a[u]=s[u]&&s[u].active()?s[u]._to:this[u]}),a}}Ft(qn,"defaults",{}),Ft(qn,"defaultRoutes");function S0(i,e){const n=i.options.ticks,s=C0(i),a=Math.min(n.maxTicksLimit||s,s),u=n.major.enabled?L0(e):[],f=u.length,h=u[0],p=u[f-1],g=[];if(f>a)return N0(e,g,u,f/a),g;const b=T0(u,e,a);if(f>0){let _,S;const T=f>1?Math.round((p-h)/(f-1)):null;for(bo(e,g,b,ve(T)?0:h-T,h),_=0,S=f-1;_<S;_++)bo(e,g,b,u[_],u[_+1]);return bo(e,g,b,p,ve(T)?e.length:p+T),g}return bo(e,g,b),g}function C0(i){const e=i.options.offset,n=i._tickSize(),s=i._length/n+(e?0:1),a=i._maxLength/n;return Math.floor(Math.min(s,a))}function T0(i,e,n){const s=M0(i),a=e.length/n;if(!s)return Math.max(a,1);const u=_v(s);for(let f=0,h=u.length-1;f<h;f++){const p=u[f];if(p>a)return p}return Math.max(a,1)}function L0(i){const e=[];let n,s;for(n=0,s=i.length;n<s;n++)i[n].major&&e.push(n);return e}function N0(i,e,n,s){let a=0,u=n[0],f;for(s=Math.ceil(s),f=0;f<i.length;f++)f===u&&(e.push(i[f]),a++,u=n[a*s])}function bo(i,e,n,s,a){const u=qt(s,0),f=Math.min(qt(a,i.length),i.length);let h=0,p,g,b;for(n=Math.ceil(n),a&&(p=a-s,n=p/Math.floor(p/n)),b=u;b<0;)h++,b=Math.round(u+h*n);for(g=Math.max(u,0);g<f;g++)g===b&&(e.push(i[g]),h++,b=Math.round(u+h*n))}function M0(i){const e=i.length;let n,s;if(e<2)return!1;for(s=i[0],n=1;n<e;++n)if(i[n]-i[n-1]!==s)return!1;return s}const D0=i=>i==="left"?"right":i==="right"?"left":i,Uf=(i,e,n)=>e==="top"||e==="left"?i[e]+n:i[e]-n,$f=(i,e)=>Math.min(e||i,i);function jf(i,e){const n=[],s=i.length/e,a=i.length;let u=0;for(;u<a;u+=s)n.push(i[Math.floor(u)]);return n}function P0(i,e,n){const s=i.ticks.length,a=Math.min(e,s-1),u=i._startPixel,f=i._endPixel,h=1e-6;let p=i.getPixelForTick(a),g;if(!(n&&(s===1?g=Math.max(p-u,f-p):e===0?g=(i.getPixelForTick(1)-p)/2:g=(p-i.getPixelForTick(a-1))/2,p+=a<e?g:-g,p<u-h||p>f+h)))return p}function O0(i,e){re(i,n=>{const s=n.gc,a=s.length/2;let u;if(a>e){for(u=0;u<a;++u)delete n.data[s[u]];s.splice(0,a)}})}function ns(i){return i.drawTicks?i.tickLength:0}function Vf(i,e){if(!i.display)return 0;const n=He(i.font,e),s=hn(i.padding);return(Ne(i.text)?i.text.length:1)*n.lineHeight+s.height}function A0(i,e){return Hi(i,{scale:e,type:"scale"})}function I0(i,e,n){return Hi(i,{tick:n,index:e,type:"tick"})}function E0(i,e,n){let s=Ml(i);return(n&&e!=="right"||!n&&e==="right")&&(s=D0(s)),s}function F0(i,e,n,s){const{top:a,left:u,bottom:f,right:h,chart:p}=i,{chartArea:g,scales:b}=p;let _=0,S,T,M;const D=f-a,L=h-u;if(i.isHorizontal()){if(T=Re(s,u,h),ee(n)){const A=Object.keys(n)[0],R=n[A];M=b[A].getPixelForValue(R)+D-e}else n==="center"?M=(g.bottom+g.top)/2+D-e:M=Uf(i,n,e);S=h-u}else{if(ee(n)){const A=Object.keys(n)[0],R=n[A];T=b[A].getPixelForValue(R)-L+e}else n==="center"?T=(g.left+g.right)/2-L+e:T=Uf(i,n,e);M=Re(s,f,a),_=n==="left"?-_n:_n}return{titleX:T,titleY:M,maxWidth:S,rotation:_}}class vr extends qn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:s,_suggestedMax:a}=this;return e=Mn(e,Number.POSITIVE_INFINITY),n=Mn(n,Number.NEGATIVE_INFINITY),s=Mn(s,Number.POSITIVE_INFINITY),a=Mn(a,Number.NEGATIVE_INFINITY),{min:Mn(e,s),max:Mn(n,a),minDefined:fn(e),maxDefined:fn(n)}}getMinMax(e){let{min:n,max:s,minDefined:a,maxDefined:u}=this.getUserBounds(),f;if(a&&u)return{min:n,max:s};const h=this.getMatchingVisibleMetas();for(let p=0,g=h.length;p<g;++p)f=h[p].controller.getMinMax(this,e),a||(n=Math.min(n,f.min)),u||(s=Math.max(s,f.max));return n=u&&n>s?s:n,s=a&&n>s?n:s,{min:Mn(n,Mn(s,n)),max:Mn(s,Mn(n,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){le(this.options.beforeUpdate,[this])}update(e,n,s){const{beginAtZero:a,grace:u,ticks:f}=this.options,h=f.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=ey(this,u,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const p=h<this.ticks.length;this._convertTicksToLabels(p?jf(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),f.display&&(f.autoSkip||f.source==="auto")&&(this.ticks=S0(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),p&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,s;this.isHorizontal()?(n=this.left,s=this.right):(n=this.top,s=this.bottom,e=!e),this._startPixel=n,this._endPixel=s,this._reversePixels=e,this._length=s-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){le(this.options.afterUpdate,[this])}beforeSetDimensions(){le(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){le(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),le(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){le(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let s,a,u;for(s=0,a=e.length;s<a;s++)u=e[s],u.label=le(n.callback,[u.value,s,e],this)}afterTickToLabelConversion(){le(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){le(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,s=$f(this.ticks.length,e.ticks.maxTicksLimit),a=n.minRotation||0,u=n.maxRotation;let f=a,h,p,g;if(!this._isVisible()||!n.display||a>=u||s<=1||!this.isHorizontal()){this.labelRotation=a;return}const b=this._getLabelSizes(),_=b.widest.width,S=b.highest.height,T=cn(this.chart.width-_,0,this.maxWidth);h=e.offset?this.maxWidth/s:T/(s-1),_+6>h&&(h=T/(s-(e.offset?.5:1)),p=this.maxHeight-ns(e.grid)-n.padding-Vf(e.title,this.chart.options.font),g=Math.sqrt(_*_+S*S),f=Sv(Math.min(Math.asin(cn((b.highest.height+6)/h,-1,1)),Math.asin(cn(p/g,-1,1))-Math.asin(cn(S/g,-1,1)))),f=Math.max(a,Math.min(u,f))),this.labelRotation=f}afterCalculateLabelRotation(){le(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){le(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:s,title:a,grid:u}}=this,f=this._isVisible(),h=this.isHorizontal();if(f){const p=Vf(a,n.options.font);if(h?(e.width=this.maxWidth,e.height=ns(u)+p):(e.height=this.maxHeight,e.width=ns(u)+p),s.display&&this.ticks.length){const{first:g,last:b,widest:_,highest:S}=this._getLabelSizes(),T=s.padding*2,M=Ai(this.labelRotation),D=Math.cos(M),L=Math.sin(M);if(h){const A=s.mirror?0:L*_.width+D*S.height;e.height=Math.min(this.maxHeight,e.height+A+T)}else{const A=s.mirror?0:D*_.width+L*S.height;e.width=Math.min(this.maxWidth,e.width+A+T)}this._calculatePadding(g,b,L,D)}}this._handleMargins(),h?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,s,a){const{ticks:{align:u,padding:f},position:h}=this.options,p=this.labelRotation!==0,g=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const b=this.getPixelForTick(0)-this.left,_=this.right-this.getPixelForTick(this.ticks.length-1);let S=0,T=0;p?g?(S=a*e.width,T=s*n.height):(S=s*e.height,T=a*n.width):u==="start"?T=n.width:u==="end"?S=e.width:u!=="inner"&&(S=e.width/2,T=n.width/2),this.paddingLeft=Math.max((S-b+f)*this.width/(this.width-b),0),this.paddingRight=Math.max((T-_+f)*this.width/(this.width-_),0)}else{let b=n.height/2,_=e.height/2;u==="start"?(b=0,_=e.height):u==="end"&&(b=n.height,_=0),this.paddingTop=b+f,this.paddingBottom=_+f}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){le(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,s;for(n=0,s=e.length;n<s;n++)ve(e[n].label)&&(e.splice(n,1),s--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let s=this.ticks;n<s.length&&(s=jf(s,n)),this._labelSizes=e=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,s){const{ctx:a,_longestTextCache:u}=this,f=[],h=[],p=Math.floor(n/$f(n,s));let g=0,b=0,_,S,T,M,D,L,A,R,G,J,j;for(_=0;_<n;_+=p){if(M=e[_].label,D=this._resolveTickFontOptions(_),a.font=L=D.string,A=u[L]=u[L]||{data:{},gc:[]},R=D.lineHeight,G=J=0,!ve(M)&&!Ne(M))G=_f(a,A.data,A.gc,G,M),J=R;else if(Ne(M))for(S=0,T=M.length;S<T;++S)j=M[S],!ve(j)&&!Ne(j)&&(G=_f(a,A.data,A.gc,G,j),J+=R);f.push(G),h.push(J),g=Math.max(G,g),b=Math.max(J,b)}O0(u,n);const V=f.indexOf(g),it=h.indexOf(b),Z=bt=>({width:f[bt]||0,height:h[bt]||0});return{first:Z(0),last:Z(n-1),widest:Z(V),highest:Z(it),widths:f,heights:h}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return Lv(this._alignToPixels?Ni(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const s=n[e];return s.$context||(s.$context=I0(this.getContext(),e,s))}return this.$context||(this.$context=A0(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ai(this.labelRotation),s=Math.abs(Math.cos(n)),a=Math.abs(Math.sin(n)),u=this._getLabelSizes(),f=e.autoSkipPadding||0,h=u?u.widest.width+f:0,p=u?u.highest.height+f:0;return this.isHorizontal()?p*s>h*a?h/s:p/a:p*a<h*s?p/s:h/a}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,s=this.chart,a=this.options,{grid:u,position:f,border:h}=a,p=u.offset,g=this.isHorizontal(),_=this.ticks.length+(p?1:0),S=ns(u),T=[],M=h.setContext(this.getContext()),D=M.display?M.width:0,L=D/2,A=function(pt){return Ni(s,pt,D)};let R,G,J,j,V,it,Z,bt,ct,Q,rt,H;if(f==="top")R=A(this.bottom),it=this.bottom-S,bt=R-L,Q=A(e.top)+L,H=e.bottom;else if(f==="bottom")R=A(this.top),Q=e.top,H=A(e.bottom)-L,it=R+L,bt=this.top+S;else if(f==="left")R=A(this.right),V=this.right-S,Z=R-L,ct=A(e.left)+L,rt=e.right;else if(f==="right")R=A(this.left),ct=e.left,rt=A(e.right)-L,V=R+L,Z=this.left+S;else if(n==="x"){if(f==="center")R=A((e.top+e.bottom)/2+.5);else if(ee(f)){const pt=Object.keys(f)[0],Mt=f[pt];R=A(this.chart.scales[pt].getPixelForValue(Mt))}Q=e.top,H=e.bottom,it=R+L,bt=it+S}else if(n==="y"){if(f==="center")R=A((e.left+e.right)/2);else if(ee(f)){const pt=Object.keys(f)[0],Mt=f[pt];R=A(this.chart.scales[pt].getPixelForValue(Mt))}V=R-L,Z=V-S,ct=e.left,rt=e.right}const I=qt(a.ticks.maxTicksLimit,_),C=Math.max(1,Math.ceil(_/I));for(G=0;G<_;G+=C){const pt=this.getContext(G),Mt=u.setContext(pt),$t=h.setContext(pt),$=Mt.lineWidth,gt=Mt.color,ut=$t.dash||[],kt=$t.dashOffset,Ot=Mt.tickWidth,Rt=Mt.tickColor,Ht=Mt.tickBorderDash||[],mt=Mt.tickBorderDashOffset;J=P0(this,G,p),J!==void 0&&(j=Ni(s,J,$),g?V=Z=ct=rt=j:it=bt=Q=H=j,T.push({tx1:V,ty1:it,tx2:Z,ty2:bt,x1:ct,y1:Q,x2:rt,y2:H,width:$,color:gt,borderDash:ut,borderDashOffset:kt,tickWidth:Ot,tickColor:Rt,tickBorderDash:Ht,tickBorderDashOffset:mt}))}return this._ticksLength=_,this._borderValue=R,T}_computeLabelItems(e){const n=this.axis,s=this.options,{position:a,ticks:u}=s,f=this.isHorizontal(),h=this.ticks,{align:p,crossAlign:g,padding:b,mirror:_}=u,S=ns(s.grid),T=S+b,M=_?-b:T,D=-Ai(this.labelRotation),L=[];let A,R,G,J,j,V,it,Z,bt,ct,Q,rt,H="middle";if(a==="top")V=this.bottom-M,it=this._getXAxisLabelAlignment();else if(a==="bottom")V=this.top+M,it=this._getXAxisLabelAlignment();else if(a==="left"){const C=this._getYAxisLabelAlignment(S);it=C.textAlign,j=C.x}else if(a==="right"){const C=this._getYAxisLabelAlignment(S);it=C.textAlign,j=C.x}else if(n==="x"){if(a==="center")V=(e.top+e.bottom)/2+T;else if(ee(a)){const C=Object.keys(a)[0],pt=a[C];V=this.chart.scales[C].getPixelForValue(pt)+T}it=this._getXAxisLabelAlignment()}else if(n==="y"){if(a==="center")j=(e.left+e.right)/2-T;else if(ee(a)){const C=Object.keys(a)[0],pt=a[C];j=this.chart.scales[C].getPixelForValue(pt)}it=this._getYAxisLabelAlignment(S).textAlign}n==="y"&&(p==="start"?H="top":p==="end"&&(H="bottom"));const I=this._getLabelSizes();for(A=0,R=h.length;A<R;++A){G=h[A],J=G.label;const C=u.setContext(this.getContext(A));Z=this.getPixelForTick(A)+u.labelOffset,bt=this._resolveTickFontOptions(A),ct=bt.lineHeight,Q=Ne(J)?J.length:1;const pt=Q/2,Mt=C.color,$t=C.textStrokeColor,$=C.textStrokeWidth;let gt=it;f?(j=Z,it==="inner"&&(A===R-1?gt=this.options.reverse?"left":"right":A===0?gt=this.options.reverse?"right":"left":gt="center"),a==="top"?g==="near"||D!==0?rt=-Q*ct+ct/2:g==="center"?rt=-I.highest.height/2-pt*ct+ct:rt=-I.highest.height+ct/2:g==="near"||D!==0?rt=ct/2:g==="center"?rt=I.highest.height/2-pt*ct:rt=I.highest.height-Q*ct,_&&(rt*=-1),D!==0&&!C.showLabelBackdrop&&(j+=ct/2*Math.sin(D))):(V=Z,rt=(1-Q)*ct/2);let ut;if(C.showLabelBackdrop){const kt=hn(C.backdropPadding),Ot=I.heights[A],Rt=I.widths[A];let Ht=rt-kt.top,mt=0-kt.left;switch(H){case"middle":Ht-=Ot/2;break;case"bottom":Ht-=Ot;break}switch(it){case"center":mt-=Rt/2;break;case"right":mt-=Rt;break;case"inner":A===R-1?mt-=Rt:A>0&&(mt-=Rt/2);break}ut={left:mt,top:Ht,width:Rt+kt.width,height:Ot+kt.height,color:C.backdropColor}}L.push({label:J,font:bt,textOffset:rt,options:{rotation:D,color:Mt,strokeColor:$t,strokeWidth:$,textAlign:gt,textBaseline:H,translation:[j,V],backdrop:ut}})}return L}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ai(this.labelRotation))return e==="top"?"left":"right";let a="center";return n.align==="start"?a="left":n.align==="end"?a="right":n.align==="inner"&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:s,mirror:a,padding:u}}=this.options,f=this._getLabelSizes(),h=e+u,p=f.widest.width;let g,b;return n==="left"?a?(b=this.right+u,s==="near"?g="left":s==="center"?(g="center",b+=p/2):(g="right",b+=p)):(b=this.right-h,s==="near"?g="right":s==="center"?(g="center",b-=p/2):(g="left",b=this.left)):n==="right"?a?(b=this.left+u,s==="near"?g="right":s==="center"?(g="center",b-=p/2):(g="left",b-=p)):(b=this.left+h,s==="near"?g="left":s==="center"?(g="center",b+=p/2):(g="right",b=this.right)):g="right",{textAlign:g,x:b}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:s,top:a,width:u,height:f}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(s,a,u,f),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const a=this.ticks.findIndex(u=>u.value===e);return a>=0?n.setContext(this.getContext(a)).lineWidth:0}drawGrid(e){const n=this.options.grid,s=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let u,f;const h=(p,g,b)=>{!b.width||!b.color||(s.save(),s.lineWidth=b.width,s.strokeStyle=b.color,s.setLineDash(b.borderDash||[]),s.lineDashOffset=b.borderDashOffset,s.beginPath(),s.moveTo(p.x,p.y),s.lineTo(g.x,g.y),s.stroke(),s.restore())};if(n.display)for(u=0,f=a.length;u<f;++u){const p=a[u];n.drawOnChartArea&&h({x:p.x1,y:p.y1},{x:p.x2,y:p.y2},p),n.drawTicks&&h({x:p.tx1,y:p.ty1},{x:p.tx2,y:p.ty2},{color:p.tickColor,width:p.tickWidth,borderDash:p.tickBorderDash,borderDashOffset:p.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:s,grid:a}}=this,u=s.setContext(this.getContext()),f=s.display?u.width:0;if(!f)return;const h=a.setContext(this.getContext(0)).lineWidth,p=this._borderValue;let g,b,_,S;this.isHorizontal()?(g=Ni(e,this.left,f)-f/2,b=Ni(e,this.right,h)+h/2,_=S=p):(_=Ni(e,this.top,f)-f/2,S=Ni(e,this.bottom,h)+h/2,g=b=p),n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.beginPath(),n.moveTo(g,_),n.lineTo(b,S),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const s=this.ctx,a=this._computeLabelArea();a&&Pl(s,a);const u=this.getLabelItems(e);for(const f of u){const h=f.options,p=f.font,g=f.label,b=f.textOffset;ws(s,g,0,b,p,h)}a&&Ol(s)}drawTitle(){const{ctx:e,options:{position:n,title:s,reverse:a}}=this;if(!s.display)return;const u=He(s.font),f=hn(s.padding),h=s.align;let p=u.lineHeight/2;n==="bottom"||n==="center"||ee(n)?(p+=f.bottom,Ne(s.text)&&(p+=u.lineHeight*(s.text.length-1))):p+=f.top;const{titleX:g,titleY:b,maxWidth:_,rotation:S}=F0(this,p,n,h);ws(e,s.text,0,0,u,{color:s.color,maxWidth:_,rotation:S,textAlign:E0(h,n,a),textBaseline:"middle",translation:[g,b]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,s=qt(e.grid&&e.grid.z,-1),a=qt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==vr.prototype.draw?[{z:n,draw:u=>{this.draw(u)}}]:[{z:s,draw:u=>{this.drawBackground(),this.drawGrid(u),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:n,draw:u=>{this.drawLabels(u)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",a=[];let u,f;for(u=0,f=n.length;u<f;++u){const h=n[u];h[s]===this.id&&(!e||h.type===e)&&a.push(h)}return a}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return He(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class xo{constructor(e,n,s){this.type=e,this.scope=n,this.override=s,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let s;W0(n)&&(s=this.register(n));const a=this.items,u=e.id,f=this.scope+"."+u;if(!u)throw new Error("class does not have id: "+e);return u in a||(a[u]=e,R0(e,f,s),this.override&&xe.override(e.id,e.overrides)),f}get(e){return this.items[e]}unregister(e){const n=this.items,s=e.id,a=this.scope;s in n&&delete n[s],a&&s in xe[a]&&(delete xe[a][s],this.override&&delete Ri[s])}}function R0(i,e,n){const s=bs(Object.create(null),[n?xe.get(n):{},xe.get(e),i.defaults]);xe.set(e,s),i.defaultRoutes&&H0(e,i.defaultRoutes),i.descriptors&&xe.describe(e,i.descriptors)}function H0(i,e){Object.keys(e).forEach(n=>{const s=n.split("."),a=s.pop(),u=[i].concat(s).join("."),f=e[n].split("."),h=f.pop(),p=f.join(".");xe.route(u,a,p,h)})}function W0(i){return"id"in i&&"defaults"in i}class z0{constructor(){this.controllers=new xo(ms,"datasets",!0),this.elements=new xo(qn,"elements"),this.plugins=new xo(Object,"plugins"),this.scales=new xo(vr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,s){[...n].forEach(a=>{const u=s||this._getRegistryForType(a);s||u.isForType(a)||u===this.plugins&&a.id?this._exec(e,u,a):re(a,f=>{const h=s||this._getRegistryForType(f);this._exec(e,h,f)})})}_exec(e,n,s){const a=Ll(e);le(s["before"+a],[],s),n[e](s),le(s["after"+a],[],s)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const s=this._typedRegistries[n];if(s.isForType(e))return s}return this.plugins}_get(e,n,s){const a=n.get(e);if(a===void 0)throw new Error('"'+e+'" is not a registered '+s+".");return a}}var Pn=new z0;class B0{constructor(){this._init=[]}notify(e,n,s,a){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const u=a?this._descriptors(e).filter(a):this._descriptors(e),f=this._notify(u,e,n,s);return n==="afterDestroy"&&(this._notify(u,e,"stop"),this._notify(this._init,e,"uninstall")),f}_notify(e,n,s,a){a=a||{};for(const u of e){const f=u.plugin,h=f[s],p=[n,a,u.options];if(le(h,p,f)===!1&&a.cancelable)return!1}return!0}invalidate(){ve(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const s=e&&e.config,a=qt(s.options&&s.options.plugins,{}),u=U0(s);return a===!1&&!n?[]:j0(e,u,a,n)}_notifyStateChanges(e){const n=this._oldCache||[],s=this._cache,a=(u,f)=>u.filter(h=>!f.some(p=>h.plugin.id===p.plugin.id));this._notify(a(n,s),e,"stop"),this._notify(a(s,n),e,"start")}}function U0(i){const e={},n=[],s=Object.keys(Pn.plugins.items);for(let u=0;u<s.length;u++)n.push(Pn.getPlugin(s[u]));const a=i.plugins||[];for(let u=0;u<a.length;u++){const f=a[u];n.indexOf(f)===-1&&(n.push(f),e[f.id]=!0)}return{plugins:n,localIds:e}}function $0(i,e){return!e&&i===!1?null:i===!0?{}:i}function j0(i,{plugins:e,localIds:n},s,a){const u=[],f=i.getContext();for(const h of e){const p=h.id,g=$0(s[p],a);g!==null&&u.push({plugin:h,options:V0(i.config,{plugin:h,local:n[p]},g,f)})}return u}function V0(i,{plugin:e,local:n},s,a){const u=i.pluginScopeKeys(e),f=i.getOptionScopes(s,u);return n&&e.defaults&&f.push(e.defaults),i.createResolver(f,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ul(i,e){const n=xe.datasets[i]||{};return((e.datasets||{})[i]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Y0(i,e){let n=i;return i==="_index_"?n=e:i==="_value_"&&(n=e==="x"?"y":"x"),n}function X0(i,e){return i===e?"_index_":"_value_"}function Yf(i){if(i==="x"||i==="y"||i==="r")return i}function K0(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function fl(i,...e){if(Yf(i))return i;for(const n of e){const s=n.axis||K0(n.position)||i.length>1&&Yf(i[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function Xf(i,e,n){if(n[e+"AxisID"]===i)return{axis:e}}function G0(i,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(s=>s.xAxisID===i||s.yAxisID===i);if(n.length)return Xf(i,"x",n[0])||Xf(i,"y",n[0])}return{}}function q0(i,e){const n=Ri[i.type]||{scales:{}},s=e.scales||{},a=ul(i.type,e),u=Object.create(null);return Object.keys(s).forEach(f=>{const h=s[f];if(!ee(h))return console.error(`Invalid scale configuration for scale: ${f}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${f}`);const p=fl(f,h,G0(f,i),xe.scales[h.type]),g=X0(p,a),b=n.scales||{};u[f]=fs(Object.create(null),[{axis:p},h,b[p],b[g]])}),i.data.datasets.forEach(f=>{const h=f.type||i.type,p=f.indexAxis||ul(h,e),b=(Ri[h]||{}).scales||{};Object.keys(b).forEach(_=>{const S=Y0(_,p),T=f[S+"AxisID"]||S;u[T]=u[T]||Object.create(null),fs(u[T],[{axis:S},s[T],b[_]])})}),Object.keys(u).forEach(f=>{const h=u[f];fs(h,[xe.scales[h.type],xe.scale])}),u}function kd(i){const e=i.options||(i.options={});e.plugins=qt(e.plugins,{}),e.scales=q0(i,e)}function Sd(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function J0(i){return i=i||{},i.data=Sd(i.data),kd(i),i}const Kf=new Map,Cd=new Set;function _o(i,e){let n=Kf.get(i);return n||(n=e(),Kf.set(i,n),Cd.add(n)),n}const is=(i,e,n)=>{const s=Fo(e,n);s!==void 0&&i.add(s)};class Z0{constructor(e){this._config=J0(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Sd(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),kd(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return _o(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return _o(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return _o(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,s=this.type;return _o(`${s}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const s=this._scopeCache;let a=s.get(e);return(!a||n)&&(a=new Map,s.set(e,a)),a}getOptionScopes(e,n,s){const{options:a,type:u}=this,f=this._cachedScopes(e,s),h=f.get(n);if(h)return h;const p=new Set;n.forEach(b=>{e&&(p.add(e),b.forEach(_=>is(p,e,_))),b.forEach(_=>is(p,a,_)),b.forEach(_=>is(p,Ri[u]||{},_)),b.forEach(_=>is(p,xe,_)),b.forEach(_=>is(p,al,_))});const g=Array.from(p);return g.length===0&&g.push(Object.create(null)),Cd.has(n)&&f.set(n,g),g}chartOptionScopes(){const{options:e,type:n}=this;return[e,Ri[n]||{},xe.datasets[n]||{},{type:n},xe,al]}resolveNamedOptions(e,n,s,a=[""]){const u={$shared:!0},{resolver:f,subPrefixes:h}=Gf(this._resolverCache,e,a);let p=f;if(tb(f,n)){u.$shared=!1,s=di(s)?s():s;const g=this.createResolver(e,s,h);p=pr(f,s,g)}for(const g of n)u[g]=p[g];return u}createResolver(e,n,s=[""],a){const{resolver:u}=Gf(this._resolverCache,e,s);return ee(n)?pr(u,n,void 0,a):u}}function Gf(i,e,n){let s=i.get(e);s||(s=new Map,i.set(e,s));const a=n.join();let u=s.get(a);return u||(u={resolver:Al(e,n),subPrefixes:n.filter(h=>!h.toLowerCase().includes("hover"))},s.set(a,u)),u}const Q0=i=>ee(i)&&Object.getOwnPropertyNames(i).some(e=>di(i[e]));function tb(i,e){const{isScriptable:n,isIndexable:s}=ld(i);for(const a of e){const u=n(a),f=s(a),h=(f||u)&&i[a];if(u&&(di(h)||Q0(h))||f&&Ne(h))return!0}return!1}var eb="4.4.7";const nb=["top","bottom","left","right","chartArea"];function qf(i,e){return i==="top"||i==="bottom"||nb.indexOf(i)===-1&&e==="x"}function Jf(i,e){return function(n,s){return n[i]===s[i]?n[e]-s[e]:n[i]-s[i]}}function Zf(i){const e=i.chart,n=e.options.animation;e.notifyPlugins("afterRender"),le(n&&n.onComplete,[i],e)}function ib(i){const e=i.chart,n=e.options.animation;le(n&&n.onProgress,[i],e)}function Td(i){return Fl()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const Do={},Qf=i=>{const e=Td(i);return Object.values(Do).filter(n=>n.canvas===e).pop()};function rb(i,e,n){const s=Object.keys(i);for(const a of s){const u=+a;if(u>=e){const f=i[a];delete i[a],(n>0||u>e)&&(i[u+n]=f)}}}function sb(i,e,n,s){return!n||i.type==="mouseout"?null:s?e:i}function wo(i,e,n){return i.options.clip?i[n]:e[n]}function ob(i,e){const{xScale:n,yScale:s}=i;return n&&s?{left:wo(n,e,"left"),right:wo(n,e,"right"),top:wo(s,e,"top"),bottom:wo(s,e,"bottom")}:e}var li;let Yo=(li=class{static register(...e){Pn.add(...e),th()}static unregister(...e){Pn.remove(...e),th()}constructor(e,n){const s=this.config=new Z0(n),a=Td(e),u=Qf(a);if(u)throw new Error("Canvas is already in use. Chart with ID '"+u.id+"' must be destroyed before the canvas with ID '"+u.canvas.id+"' can be reused.");const f=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||k0(a)),this.platform.updateConfig(s);const h=this.platform.acquireContext(a,f.aspectRatio),p=h&&h.canvas,g=p&&p.height,b=p&&p.width;if(this.id=hv(),this.ctx=h,this.canvas=p,this.width=b,this.height=g,this._options=f,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new B0,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Ov(_=>this.update(_),f.resizeDelay||0),this._dataChanges=[],Do[this.id]=this,!h||!p){console.error("Failed to create chart: can't acquire context from the given item");return}jn.listen(this,"complete",Zf),jn.listen(this,"progress",ib),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:s,height:a,_aspectRatio:u}=this;return ve(e)?n&&u?u:a?s/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Pn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Cf(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return wf(this.canvas,this.ctx),this}stop(){return jn.stop(this),this}resize(e,n){jn.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const s=this.options,a=this.canvas,u=s.maintainAspectRatio&&this.aspectRatio,f=this.platform.getMaximumSize(a,e,n,u),h=s.devicePixelRatio||this.platform.getDevicePixelRatio(),p=this.width?"resize":"attach";this.width=f.width,this.height=f.height,this._aspectRatio=this.aspectRatio,Cf(this,h,!0)&&(this.notifyPlugins("resize",{size:f}),le(s.onResize,[this,f],this),this.attached&&this._doResize(p)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};re(n,(s,a)=>{s.id=a})}buildOrUpdateScales(){const e=this.options,n=e.scales,s=this.scales,a=Object.keys(s).reduce((f,h)=>(f[h]=!1,f),{});let u=[];n&&(u=u.concat(Object.keys(n).map(f=>{const h=n[f],p=fl(f,h),g=p==="r",b=p==="x";return{options:h,dposition:g?"chartArea":b?"bottom":"left",dtype:g?"radialLinear":b?"category":"linear"}}))),re(u,f=>{const h=f.options,p=h.id,g=fl(p,h),b=qt(h.type,f.dtype);(h.position===void 0||qf(h.position,g)!==qf(f.dposition))&&(h.position=f.dposition),a[p]=!0;let _=null;if(p in s&&s[p].type===b)_=s[p];else{const S=Pn.getScale(b);_=new S({id:p,type:b,ctx:this.ctx,chart:this}),s[_.id]=_}_.init(h,e)}),re(a,(f,h)=>{f||delete s[h]}),re(s,f=>{un.configure(this,f,f.options),un.addBox(this,f)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,s=e.length;if(e.sort((a,u)=>a.index-u.index),s>n){for(let a=n;a<s;++a)this._destroyDatasetMeta(a);e.splice(n,s-n)}this._sortedMetasets=e.slice(0).sort(Jf("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((s,a)=>{n.filter(u=>u===s._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let s,a;for(this._removeUnreferencedMetasets(),s=0,a=n.length;s<a;s++){const u=n[s];let f=this.getDatasetMeta(s);const h=u.type||this.config.type;if(f.type&&f.type!==h&&(this._destroyDatasetMeta(s),f=this.getDatasetMeta(s)),f.type=h,f.indexAxis=u.indexAxis||ul(h,this.options),f.order=u.order||0,f.index=s,f.label=""+u.label,f.visible=this.isDatasetVisible(s),f.controller)f.controller.updateIndex(s),f.controller.linkScales();else{const p=Pn.getController(h),{datasetElementType:g,dataElementType:b}=xe.datasets[h];Object.assign(p,{dataElementType:Pn.getElement(b),datasetElementType:g&&Pn.getElement(g)}),f.controller=new p(this,s),e.push(f.controller)}}return this._updateMetasets(),e}_resetElements(){re(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const s=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const u=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let f=0;for(let g=0,b=this.data.datasets.length;g<b;g++){const{controller:_}=this.getDatasetMeta(g),S=!a&&u.indexOf(_)===-1;_.buildOrUpdateElements(S),f=Math.max(+_.getMaxOverflow(),f)}f=this._minPadding=s.layout.autoPadding?f:0,this._updateLayout(f),a||re(u,g=>{g.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Jf("z","_idx"));const{_active:h,_lastEvent:p}=this;p?this._eventHandler(p,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){re(this.scales,e=>{un.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),s=new Set(e.events);(!hf(n,s)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:s,start:a,count:u}of n){const f=s==="_removeElements"?-u:u;rb(e,a,f)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,s=u=>new Set(e.filter(f=>f[0]===u).map((f,h)=>h+","+f.splice(1).join(","))),a=s(0);for(let u=1;u<n;u++)if(!hf(a,s(u)))return;return Array.from(a).map(u=>u.split(",")).map(u=>({method:u[1],start:+u[2],count:+u[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;un.update(this,this.width,this.height,e);const n=this.chartArea,s=n.width<=0||n.height<=0;this._layers=[],re(this.boxes,a=>{s&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,u)=>{a._idx=u}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,s=this.data.datasets.length;n<s;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,s=this.data.datasets.length;n<s;++n)this._updateDataset(n,di(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const s=this.getDatasetMeta(e),a={meta:s,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(s.controller._update(n),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(jn.has(this)?this.attached&&!jn.running(this)&&jn.start(this):(this.draw(),Zf({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:s,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,s=[];let a,u;for(a=0,u=n.length;a<u;++a){const f=n[a];(!e||f.visible)&&s.push(f)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,s=e._clip,a=!s.disabled,u=ob(e,this.chartArea),f={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",f)!==!1&&(a&&Pl(n,{left:s.left===!1?0:u.left-s.left,right:s.right===!1?this.width:u.right+s.right,top:s.top===!1?0:u.top-s.top,bottom:s.bottom===!1?this.height:u.bottom+s.bottom}),e.controller.draw(),a&&Ol(n),f.cancelable=!1,this.notifyPlugins("afterDatasetDraw",f))}isPointInArea(e){return _s(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,s,a){const u=n0.modes[n];return typeof u=="function"?u(this,e,s,a):[]}getDatasetMeta(e){const n=this.data.datasets[e],s=this._metasets;let a=s.filter(u=>u&&u._dataset===n).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},s.push(a)),a}getContext(){return this.$context||(this.$context=Hi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const s=this.getDatasetMeta(e);return typeof s.hidden=="boolean"?!s.hidden:!n.hidden}setDatasetVisibility(e,n){const s=this.getDatasetMeta(e);s.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,s){const a=s?"show":"hide",u=this.getDatasetMeta(e),f=u.controller._resolveAnimations(void 0,a);Ro(n)?(u.data[n].hidden=!s,this.update()):(this.setDatasetVisibility(e,s),f.update(u,{visible:s}),this.update(h=>h.datasetIndex===e?a:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),jn.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),wf(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Do[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,s=(u,f)=>{n.addEventListener(this,u,f),e[u]=f},a=(u,f,h)=>{u.offsetX=f,u.offsetY=h,this._eventHandler(u)};re(this.options.events,u=>s(u,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,s=(p,g)=>{n.addEventListener(this,p,g),e[p]=g},a=(p,g)=>{e[p]&&(n.removeEventListener(this,p,g),delete e[p])},u=(p,g)=>{this.canvas&&this.resize(p,g)};let f;const h=()=>{a("attach",h),this.attached=!0,this.resize(),s("resize",u),s("detach",f)};f=()=>{this.attached=!1,a("resize",u),this._stop(),this._resize(0,0),s("attach",h)},n.isAttached(this.canvas)?h():f()}unbindEvents(){re(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},re(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,s){const a=s?"set":"remove";let u,f,h,p;for(n==="dataset"&&(u=this.getDatasetMeta(e[0].datasetIndex),u.controller["_"+a+"DatasetHoverStyle"]()),h=0,p=e.length;h<p;++h){f=e[h];const g=f&&this.getDatasetMeta(f.datasetIndex).controller;g&&g[a+"HoverStyle"](f.element,f.datasetIndex,f.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],s=e.map(({datasetIndex:u,index:f})=>{const h=this.getDatasetMeta(u);if(!h)throw new Error("No dataset found at index "+u);return{datasetIndex:u,element:h.data[f],index:f}});!Io(s,n)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,n))}notifyPlugins(e,n,s){return this._plugins.notify(this,e,n,s)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,s){const a=this.options.hover,u=(p,g)=>p.filter(b=>!g.some(_=>b.datasetIndex===_.datasetIndex&&b.index===_.index)),f=u(n,e),h=s?e:u(e,n);f.length&&this.updateHoverStyle(f,a.mode,!1),h.length&&a.mode&&this.updateHoverStyle(h,a.mode,!0)}_eventHandler(e,n){const s={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},a=f=>(f.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",s,a)===!1)return;const u=this._handleEvent(e,n,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,a),(u||s.changed)&&this.render(),this}_handleEvent(e,n,s){const{_active:a=[],options:u}=this,f=n,h=this._getActiveElements(e,a,s,f),p=yv(e),g=sb(e,this._lastEvent,s,p);s&&(this._lastEvent=null,le(u.onHover,[e,h,this],this),p&&le(u.onClick,[e,h,this],this));const b=!Io(h,a);return(b||n)&&(this._active=h,this._updateHoverStyles(h,a,n)),this._lastEvent=g,b}_getActiveElements(e,n,s,a){if(e.type==="mouseout")return[];if(!s)return n;const u=this.options.hover;return this.getElementsAtEventForMode(e,u.mode,u,a)}},Ft(li,"defaults",xe),Ft(li,"instances",Do),Ft(li,"overrides",Ri),Ft(li,"registry",Pn),Ft(li,"version",eb),Ft(li,"getChart",Qf),li);function th(){return re(Yo.instances,i=>i._plugins.invalidate())}function Ld(i,e,n=e){i.lineCap=qt(n.borderCapStyle,e.borderCapStyle),i.setLineDash(qt(n.borderDash,e.borderDash)),i.lineDashOffset=qt(n.borderDashOffset,e.borderDashOffset),i.lineJoin=qt(n.borderJoinStyle,e.borderJoinStyle),i.lineWidth=qt(n.borderWidth,e.borderWidth),i.strokeStyle=qt(n.borderColor,e.borderColor)}function ab(i,e,n){i.lineTo(n.x,n.y)}function lb(i){return i.stepped?Vv:i.tension||i.cubicInterpolationMode==="monotone"?Yv:ab}function Nd(i,e,n={}){const s=i.length,{start:a=0,end:u=s-1}=n,{start:f,end:h}=e,p=Math.max(a,f),g=Math.min(u,h),b=a<f&&u<f||a>h&&u>h;return{count:s,start:p,loop:e.loop,ilen:g<p&&!b?s+g-p:g-p}}function cb(i,e,n,s){const{points:a,options:u}=e,{count:f,start:h,loop:p,ilen:g}=Nd(a,n,s),b=lb(u);let{move:_=!0,reverse:S}=s||{},T,M,D;for(T=0;T<=g;++T)M=a[(h+(S?g-T:T))%f],!M.skip&&(_?(i.moveTo(M.x,M.y),_=!1):b(i,D,M,S,u.stepped),D=M);return p&&(M=a[(h+(S?g:0))%f],b(i,D,M,S,u.stepped)),!!p}function ub(i,e,n,s){const a=e.points,{count:u,start:f,ilen:h}=Nd(a,n,s),{move:p=!0,reverse:g}=s||{};let b=0,_=0,S,T,M,D,L,A;const R=J=>(f+(g?h-J:J))%u,G=()=>{D!==L&&(i.lineTo(b,L),i.lineTo(b,D),i.lineTo(b,A))};for(p&&(T=a[R(0)],i.moveTo(T.x,T.y)),S=0;S<=h;++S){if(T=a[R(S)],T.skip)continue;const J=T.x,j=T.y,V=J|0;V===M?(j<D?D=j:j>L&&(L=j),b=(_*b+J)/++_):(G(),i.lineTo(J,j),M=V,_=0,D=L=j),A=j}G()}function hl(i){const e=i.options,n=e.borderDash&&e.borderDash.length;return!i._decimated&&!i._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?ub:cb}function fb(i){return i.stepped?Cy:i.tension||i.cubicInterpolationMode==="monotone"?Ty:Pi}function hb(i,e,n,s){let a=e._path;a||(a=e._path=new Path2D,e.path(a,n,s)&&a.closePath()),Ld(i,e.options),i.stroke(a)}function db(i,e,n,s){const{segments:a,options:u}=e,f=hl(e);for(const h of a)Ld(i,u,h.style),i.beginPath(),f(i,e,h,{start:n,end:n+s-1})&&i.closePath(),i.stroke()}const pb=typeof Path2D=="function";function gb(i,e,n,s){pb&&!e.options.segment?hb(i,e,n,s):db(i,e,n,s)}class ls extends qn{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const a=s.spanGaps?this._loop:this._fullLoop;vy(this._points,s,e,a,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Iy(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){const s=this.options,a=e[n],u=this.points,f=Py(this,{property:n,start:a,end:a});if(!f.length)return;const h=[],p=fb(s);let g,b;for(g=0,b=f.length;g<b;++g){const{start:_,end:S}=f[g],T=u[_],M=u[S];if(T===M){h.push(T);continue}const D=Math.abs((a-T[n])/(M[n]-T[n])),L=p(T,M,D,s.stepped);L[n]=e[n],h.push(L)}return h.length===1?h[0]:h}pathSegment(e,n,s){return hl(this)(e,this,n,s)}path(e,n,s){const a=this.segments,u=hl(this);let f=this._loop;n=n||0,s=s||this.points.length-n;for(const h of a)f&=u(e,this,h,{start:n,end:n+s-1});return!!f}draw(e,n,s,a){const u=this.options||{};(this.points||[]).length&&u.borderWidth&&(e.save(),gb(e,this,s,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ft(ls,"id","line"),Ft(ls,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ft(ls,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ft(ls,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function eh(i,e,n,s){const a=i.options,{[n]:u}=i.getProps([n],s);return Math.abs(e-u)<a.radius+a.hitRadius}class Po extends qn{constructor(n){super();Ft(this,"parsed");Ft(this,"skip");Ft(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,s,a){const u=this.options,{x:f,y:h}=this.getProps(["x","y"],a);return Math.pow(n-f,2)+Math.pow(s-h,2)<Math.pow(u.hitRadius+u.radius,2)}inXRange(n,s){return eh(this,n,"x",s)}inYRange(n,s){return eh(this,n,"y",s)}getCenterPoint(n){const{x:s,y:a}=this.getProps(["x","y"],n);return{x:s,y:a}}size(n){n=n||this.options||{};let s=n.radius||0;s=Math.max(s,s&&n.hoverRadius||0);const a=s&&n.borderWidth||0;return(s+a)*2}draw(n,s){const a=this.options;this.skip||a.radius<.1||!_s(this,s,this.size(a)/2)||(n.strokeStyle=a.borderColor,n.lineWidth=a.borderWidth,n.fillStyle=a.backgroundColor,ll(n,a,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Ft(Po,"id","point"),Ft(Po,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ft(Po,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const nh=(i,e)=>{let{boxHeight:n=e,boxWidth:s=e}=i;return i.usePointStyle&&(n=Math.min(n,e),s=i.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:n,itemHeight:Math.max(e,n)}},mb=(i,e)=>i!==null&&e!==null&&i.datasetIndex===e.datasetIndex&&i.index===e.index;class ih extends qn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,s){this.maxWidth=e,this.maxHeight=n,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=le(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(s=>e.filter(s,this.chart.data))),e.sort&&(n=n.sort((s,a)=>e.sort(s,a,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const s=e.labels,a=He(s.font),u=a.size,f=this._computeTitleHeight(),{boxWidth:h,itemHeight:p}=nh(s,u);let g,b;n.font=a.string,this.isHorizontal()?(g=this.maxWidth,b=this._fitRows(f,u,h,p)+10):(b=this.maxHeight,g=this._fitCols(f,a,h,p)+10),this.width=Math.min(g,e.maxWidth||this.maxWidth),this.height=Math.min(b,e.maxHeight||this.maxHeight)}_fitRows(e,n,s,a){const{ctx:u,maxWidth:f,options:{labels:{padding:h}}}=this,p=this.legendHitBoxes=[],g=this.lineWidths=[0],b=a+h;let _=e;u.textAlign="left",u.textBaseline="middle";let S=-1,T=-b;return this.legendItems.forEach((M,D)=>{const L=s+n/2+u.measureText(M.text).width;(D===0||g[g.length-1]+L+2*h>f)&&(_+=b,g[g.length-(D>0?0:1)]=0,T+=b,S++),p[D]={left:0,top:T,row:S,width:L,height:a},g[g.length-1]+=L+h}),_}_fitCols(e,n,s,a){const{ctx:u,maxHeight:f,options:{labels:{padding:h}}}=this,p=this.legendHitBoxes=[],g=this.columnSizes=[],b=f-e;let _=h,S=0,T=0,M=0,D=0;return this.legendItems.forEach((L,A)=>{const{itemWidth:R,itemHeight:G}=vb(s,n,u,L,a);A>0&&T+G+2*h>b&&(_+=S+h,g.push({width:S,height:T}),M+=S+h,D++,S=T=0),p[A]={left:M,top:T,col:D,width:R,height:G},S=Math.max(S,R),T+=G+h}),_+=S,g.push({width:S,height:T}),_}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:s,labels:{padding:a},rtl:u}}=this,f=ur(u,this.left,this.width);if(this.isHorizontal()){let h=0,p=Re(s,this.left+a,this.right-this.lineWidths[h]);for(const g of n)h!==g.row&&(h=g.row,p=Re(s,this.left+a,this.right-this.lineWidths[h])),g.top+=this.top+e+a,g.left=f.leftForLtr(f.x(p),g.width),p+=g.width+a}else{let h=0,p=Re(s,this.top+e+a,this.bottom-this.columnSizes[h].height);for(const g of n)g.col!==h&&(h=g.col,p=Re(s,this.top+e+a,this.bottom-this.columnSizes[h].height)),g.top=p,g.left+=this.left+a,g.left=f.leftForLtr(f.x(g.left),g.width),p+=g.height+a}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Pl(e,this),this._draw(),Ol(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:s,ctx:a}=this,{align:u,labels:f}=e,h=xe.color,p=ur(e.rtl,this.left,this.width),g=He(f.font),{padding:b}=f,_=g.size,S=_/2;let T;this.drawTitle(),a.textAlign=p.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=g.string;const{boxWidth:M,boxHeight:D,itemHeight:L}=nh(f,_),A=function(V,it,Z){if(isNaN(M)||M<=0||isNaN(D)||D<0)return;a.save();const bt=qt(Z.lineWidth,1);if(a.fillStyle=qt(Z.fillStyle,h),a.lineCap=qt(Z.lineCap,"butt"),a.lineDashOffset=qt(Z.lineDashOffset,0),a.lineJoin=qt(Z.lineJoin,"miter"),a.lineWidth=bt,a.strokeStyle=qt(Z.strokeStyle,h),a.setLineDash(qt(Z.lineDash,[])),f.usePointStyle){const ct={radius:D*Math.SQRT2/2,pointStyle:Z.pointStyle,rotation:Z.rotation,borderWidth:bt},Q=p.xPlus(V,M/2),rt=it+S;od(a,ct,Q,rt,f.pointStyleWidth&&M)}else{const ct=it+Math.max((_-D)/2,0),Q=p.leftForLtr(V,M),rt=gs(Z.borderRadius);a.beginPath(),Object.values(rt).some(H=>H!==0)?cl(a,{x:Q,y:ct,w:M,h:D,radius:rt}):a.rect(Q,ct,M,D),a.fill(),bt!==0&&a.stroke()}a.restore()},R=function(V,it,Z){ws(a,Z.text,V,it+L/2,g,{strikethrough:Z.hidden,textAlign:p.textAlign(Z.textAlign)})},G=this.isHorizontal(),J=this._computeTitleHeight();G?T={x:Re(u,this.left+b,this.right-s[0]),y:this.top+b+J,line:0}:T={x:this.left+b,y:Re(u,this.top+J+b,this.bottom-n[0].height),line:0},dd(this.ctx,e.textDirection);const j=L+b;this.legendItems.forEach((V,it)=>{a.strokeStyle=V.fontColor,a.fillStyle=V.fontColor;const Z=a.measureText(V.text).width,bt=p.textAlign(V.textAlign||(V.textAlign=f.textAlign)),ct=M+S+Z;let Q=T.x,rt=T.y;p.setWidth(this.width),G?it>0&&Q+ct+b>this.right&&(rt=T.y+=j,T.line++,Q=T.x=Re(u,this.left+b,this.right-s[T.line])):it>0&&rt+j>this.bottom&&(Q=T.x=Q+n[T.line].width+b,T.line++,rt=T.y=Re(u,this.top+J+b,this.bottom-n[T.line].height));const H=p.x(Q);if(A(H,rt,V),Q=Av(bt,Q+M+S,G?Q+ct:this.right,e.rtl),R(p.x(Q),rt,V),G)T.x+=ct+b;else if(typeof V.text!="string"){const I=g.lineHeight;T.y+=Md(V,I)+b}else T.y+=j}),pd(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,s=He(n.font),a=hn(n.padding);if(!n.display)return;const u=ur(e.rtl,this.left,this.width),f=this.ctx,h=n.position,p=s.size/2,g=a.top+p;let b,_=this.left,S=this.width;if(this.isHorizontal())S=Math.max(...this.lineWidths),b=this.top+g,_=Re(e.align,_,this.right-S);else{const M=this.columnSizes.reduce((D,L)=>Math.max(D,L.height),0);b=g+Re(e.align,this.top,this.bottom-M-e.labels.padding-this._computeTitleHeight())}const T=Re(h,_,_+S);f.textAlign=u.textAlign(Ml(h)),f.textBaseline="middle",f.strokeStyle=n.color,f.fillStyle=n.color,f.font=s.string,ws(f,n.text,T,b,s)}_computeTitleHeight(){const e=this.options.title,n=He(e.font),s=hn(e.padding);return e.display?n.lineHeight+s.height:0}_getLegendItemAt(e,n){let s,a,u;if(os(e,this.left,this.right)&&os(n,this.top,this.bottom)){for(u=this.legendHitBoxes,s=0;s<u.length;++s)if(a=u[s],os(e,a.left,a.left+a.width)&&os(n,a.top,a.top+a.height))return this.legendItems[s]}return null}handleEvent(e){const n=this.options;if(!xb(e.type,n))return;const s=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const a=this._hoveredItem,u=mb(a,s);a&&!u&&le(n.onLeave,[e,a,this],this),this._hoveredItem=s,s&&!u&&le(n.onHover,[e,s,this],this)}else s&&le(n.onClick,[e,s,this],this)}}function vb(i,e,n,s,a){const u=yb(s,i,e,n),f=bb(a,s,e.lineHeight);return{itemWidth:u,itemHeight:f}}function yb(i,e,n,s){let a=i.text;return a&&typeof a!="string"&&(a=a.reduce((u,f)=>u.length>f.length?u:f)),e+n.size/2+s.measureText(a).width}function bb(i,e,n){let s=i;return typeof e.text!="string"&&(s=Md(e,n)),s}function Md(i,e){const n=i.text?i.text.length:0;return e*n}function xb(i,e){return!!((i==="mousemove"||i==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(i==="click"||i==="mouseup"))}var _b={id:"legend",_element:ih,start(i,e,n){const s=i.legend=new ih({ctx:i.ctx,options:n,chart:i});un.configure(i,s,n),un.addBox(i,s)},stop(i){un.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,e,n){const s=i.legend;un.configure(i,s,n),s.options=n},afterUpdate(i){const e=i.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(i,e){e.replay||i.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,e,n){const s=e.datasetIndex,a=n.chart;a.isDatasetVisible(s)?(a.hide(s),e.hidden=!0):(a.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const e=i.data.datasets,{labels:{usePointStyle:n,pointStyle:s,textAlign:a,color:u,useBorderRadius:f,borderRadius:h}}=i.legend.options;return i._getSortedDatasetMetas().map(p=>{const g=p.controller.getStyle(n?0:void 0),b=hn(g.borderWidth);return{text:e[p.index].label,fillStyle:g.backgroundColor,fontColor:u,hidden:!p.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(b.width+b.height)/4,strokeStyle:g.borderColor,pointStyle:s||g.pointStyle,rotation:g.rotation,textAlign:a||g.textAlign,borderRadius:f&&(h||g.borderRadius),datasetIndex:p.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class Dd extends qn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const a=Ne(s.text)?s.text.length:1;this._padding=hn(s.padding);const u=a*He(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=u:this.width=u}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:s,bottom:a,right:u,options:f}=this,h=f.align;let p=0,g,b,_;return this.isHorizontal()?(b=Re(h,s,u),_=n+e,g=u-s):(f.position==="left"?(b=s+e,_=Re(h,a,n),p=De*-.5):(b=u-e,_=Re(h,n,a),p=De*.5),g=a-n),{titleX:b,titleY:_,maxWidth:g,rotation:p}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const s=He(n.font),u=s.lineHeight/2+this._padding.top,{titleX:f,titleY:h,maxWidth:p,rotation:g}=this._drawArgs(u);ws(e,n.text,0,0,s,{color:n.color,maxWidth:p,rotation:g,textAlign:Ml(n.align),textBaseline:"middle",translation:[f,h]})}}function wb(i,e){const n=new Dd({ctx:i.ctx,options:e,chart:i});un.configure(i,n,e),un.addBox(i,n),i.titleBlock=n}var kb={id:"title",_element:Dd,start(i,e,n){wb(i,n)},stop(i){const e=i.titleBlock;un.removeBox(i,e),delete i.titleBlock},beforeUpdate(i,e,n){const s=i.titleBlock;un.configure(i,s,n),s.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const cs={average(i){if(!i.length)return!1;let e,n,s=new Set,a=0,u=0;for(e=0,n=i.length;e<n;++e){const h=i[e].element;if(h&&h.hasValue()){const p=h.tooltipPosition();s.add(p.x),a+=p.y,++u}}return u===0||s.size===0?!1:{x:[...s].reduce((h,p)=>h+p)/s.size,y:a/u}},nearest(i,e){if(!i.length)return!1;let n=e.x,s=e.y,a=Number.POSITIVE_INFINITY,u,f,h;for(u=0,f=i.length;u<f;++u){const p=i[u].element;if(p&&p.hasValue()){const g=p.getCenterPoint(),b=ol(e,g);b<a&&(a=b,h=p)}}if(h){const p=h.tooltipPosition();n=p.x,s=p.y}return{x:n,y:s}}};function Dn(i,e){return e&&(Ne(e)?Array.prototype.push.apply(i,e):i.push(e)),i}function Vn(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function Sb(i,e){const{element:n,datasetIndex:s,index:a}=e,u=i.getDatasetMeta(s).controller,{label:f,value:h}=u.getLabelAndValue(a);return{chart:i,label:f,parsed:u.getParsed(a),raw:i.data.datasets[s].data[a],formattedValue:h,dataset:u.getDataset(),dataIndex:a,datasetIndex:s,element:n}}function rh(i,e){const n=i.chart.ctx,{body:s,footer:a,title:u}=i,{boxWidth:f,boxHeight:h}=e,p=He(e.bodyFont),g=He(e.titleFont),b=He(e.footerFont),_=u.length,S=a.length,T=s.length,M=hn(e.padding);let D=M.height,L=0,A=s.reduce((J,j)=>J+j.before.length+j.lines.length+j.after.length,0);if(A+=i.beforeBody.length+i.afterBody.length,_&&(D+=_*g.lineHeight+(_-1)*e.titleSpacing+e.titleMarginBottom),A){const J=e.displayColors?Math.max(h,p.lineHeight):p.lineHeight;D+=T*J+(A-T)*p.lineHeight+(A-1)*e.bodySpacing}S&&(D+=e.footerMarginTop+S*b.lineHeight+(S-1)*e.footerSpacing);let R=0;const G=function(J){L=Math.max(L,n.measureText(J).width+R)};return n.save(),n.font=g.string,re(i.title,G),n.font=p.string,re(i.beforeBody.concat(i.afterBody),G),R=e.displayColors?f+2+e.boxPadding:0,re(s,J=>{re(J.before,G),re(J.lines,G),re(J.after,G)}),R=0,n.font=b.string,re(i.footer,G),n.restore(),L+=M.width,{width:L,height:D}}function Cb(i,e){const{y:n,height:s}=e;return n<s/2?"top":n>i.height-s/2?"bottom":"center"}function Tb(i,e,n,s){const{x:a,width:u}=s,f=n.caretSize+n.caretPadding;if(i==="left"&&a+u+f>e.width||i==="right"&&a-u-f<0)return!0}function Lb(i,e,n,s){const{x:a,width:u}=n,{width:f,chartArea:{left:h,right:p}}=i;let g="center";return s==="center"?g=a<=(h+p)/2?"left":"right":a<=u/2?g="left":a>=f-u/2&&(g="right"),Tb(g,i,e,n)&&(g="center"),g}function sh(i,e,n){const s=n.yAlign||e.yAlign||Cb(i,n);return{xAlign:n.xAlign||e.xAlign||Lb(i,e,n,s),yAlign:s}}function Nb(i,e){let{x:n,width:s}=i;return e==="right"?n-=s:e==="center"&&(n-=s/2),n}function Mb(i,e,n){let{y:s,height:a}=i;return e==="top"?s+=n:e==="bottom"?s-=a+n:s-=a/2,s}function oh(i,e,n,s){const{caretSize:a,caretPadding:u,cornerRadius:f}=i,{xAlign:h,yAlign:p}=n,g=a+u,{topLeft:b,topRight:_,bottomLeft:S,bottomRight:T}=gs(f);let M=Nb(e,h);const D=Mb(e,p,g);return p==="center"?h==="left"?M+=g:h==="right"&&(M-=g):h==="left"?M-=Math.max(b,S)+a:h==="right"&&(M+=Math.max(_,T)+a),{x:cn(M,0,s.width-e.width),y:cn(D,0,s.height-e.height)}}function ko(i,e,n){const s=hn(n.padding);return e==="center"?i.x+i.width/2:e==="right"?i.x+i.width-s.right:i.x+s.left}function ah(i){return Dn([],Vn(i))}function Db(i,e,n){return Hi(i,{tooltip:e,tooltipItems:n,type:"tooltip"})}function lh(i,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?i.override(n):i}const Pd={beforeTitle:$n,title(i){if(i.length>0){const e=i[0],n=e.chart.data.labels,s=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return n[e.dataIndex]}return""},afterTitle:$n,beforeBody:$n,beforeLabel:$n,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let e=i.dataset.label||"";e&&(e+=": ");const n=i.formattedValue;return ve(n)||(e+=n),e},labelColor(i){const n=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const n=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:$n,afterBody:$n,beforeFooter:$n,footer:$n,afterFooter:$n};function Je(i,e,n,s){const a=i[e].call(n,s);return typeof a>"u"?Pd[e].call(n,s):a}class dl extends qn{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,s=this.options.setContext(this.getContext()),a=s.enabled&&n.options.animation&&s.animations,u=new md(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(u)),u}getContext(){return this.$context||(this.$context=Db(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:s}=n,a=Je(s,"beforeTitle",this,e),u=Je(s,"title",this,e),f=Je(s,"afterTitle",this,e);let h=[];return h=Dn(h,Vn(a)),h=Dn(h,Vn(u)),h=Dn(h,Vn(f)),h}getBeforeBody(e,n){return ah(Je(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:s}=n,a=[];return re(e,u=>{const f={before:[],lines:[],after:[]},h=lh(s,u);Dn(f.before,Vn(Je(h,"beforeLabel",this,u))),Dn(f.lines,Je(h,"label",this,u)),Dn(f.after,Vn(Je(h,"afterLabel",this,u))),a.push(f)}),a}getAfterBody(e,n){return ah(Je(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:s}=n,a=Je(s,"beforeFooter",this,e),u=Je(s,"footer",this,e),f=Je(s,"afterFooter",this,e);let h=[];return h=Dn(h,Vn(a)),h=Dn(h,Vn(u)),h=Dn(h,Vn(f)),h}_createItems(e){const n=this._active,s=this.chart.data,a=[],u=[],f=[];let h=[],p,g;for(p=0,g=n.length;p<g;++p)h.push(Sb(this.chart,n[p]));return e.filter&&(h=h.filter((b,_,S)=>e.filter(b,_,S,s))),e.itemSort&&(h=h.sort((b,_)=>e.itemSort(b,_,s))),re(h,b=>{const _=lh(e.callbacks,b);a.push(Je(_,"labelColor",this,b)),u.push(Je(_,"labelPointStyle",this,b)),f.push(Je(_,"labelTextColor",this,b))}),this.labelColors=a,this.labelPointStyles=u,this.labelTextColors=f,this.dataPoints=h,h}update(e,n){const s=this.options.setContext(this.getContext()),a=this._active;let u,f=[];if(!a.length)this.opacity!==0&&(u={opacity:0});else{const h=cs[s.position].call(this,a,this._eventPosition);f=this._createItems(s),this.title=this.getTitle(f,s),this.beforeBody=this.getBeforeBody(f,s),this.body=this.getBody(f,s),this.afterBody=this.getAfterBody(f,s),this.footer=this.getFooter(f,s);const p=this._size=rh(this,s),g=Object.assign({},h,p),b=sh(this.chart,s,g),_=oh(s,g,b,this.chart);this.xAlign=b.xAlign,this.yAlign=b.yAlign,u={opacity:1,x:_.x,y:_.y,width:p.width,height:p.height,caretX:h.x,caretY:h.y}}this._tooltipItems=f,this.$context=void 0,u&&this._resolveAnimations().update(this,u),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,a){const u=this.getCaretPosition(e,s,a);n.lineTo(u.x1,u.y1),n.lineTo(u.x2,u.y2),n.lineTo(u.x3,u.y3)}getCaretPosition(e,n,s){const{xAlign:a,yAlign:u}=this,{caretSize:f,cornerRadius:h}=s,{topLeft:p,topRight:g,bottomLeft:b,bottomRight:_}=gs(h),{x:S,y:T}=e,{width:M,height:D}=n;let L,A,R,G,J,j;return u==="center"?(J=T+D/2,a==="left"?(L=S,A=L-f,G=J+f,j=J-f):(L=S+M,A=L+f,G=J-f,j=J+f),R=L):(a==="left"?A=S+Math.max(p,b)+f:a==="right"?A=S+M-Math.max(g,_)-f:A=this.caretX,u==="top"?(G=T,J=G-f,L=A-f,R=A+f):(G=T+D,J=G+f,L=A+f,R=A-f),j=G),{x1:L,x2:A,x3:R,y1:G,y2:J,y3:j}}drawTitle(e,n,s){const a=this.title,u=a.length;let f,h,p;if(u){const g=ur(s.rtl,this.x,this.width);for(e.x=ko(this,s.titleAlign,s),n.textAlign=g.textAlign(s.titleAlign),n.textBaseline="middle",f=He(s.titleFont),h=s.titleSpacing,n.fillStyle=s.titleColor,n.font=f.string,p=0;p<u;++p)n.fillText(a[p],g.x(e.x),e.y+f.lineHeight/2),e.y+=f.lineHeight+h,p+1===u&&(e.y+=s.titleMarginBottom-h)}}_drawColorBox(e,n,s,a,u){const f=this.labelColors[s],h=this.labelPointStyles[s],{boxHeight:p,boxWidth:g}=u,b=He(u.bodyFont),_=ko(this,"left",u),S=a.x(_),T=p<b.lineHeight?(b.lineHeight-p)/2:0,M=n.y+T;if(u.usePointStyle){const D={radius:Math.min(g,p)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},L=a.leftForLtr(S,g)+g/2,A=M+p/2;e.strokeStyle=u.multiKeyBackground,e.fillStyle=u.multiKeyBackground,ll(e,D,L,A),e.strokeStyle=f.borderColor,e.fillStyle=f.backgroundColor,ll(e,D,L,A)}else{e.lineWidth=ee(f.borderWidth)?Math.max(...Object.values(f.borderWidth)):f.borderWidth||1,e.strokeStyle=f.borderColor,e.setLineDash(f.borderDash||[]),e.lineDashOffset=f.borderDashOffset||0;const D=a.leftForLtr(S,g),L=a.leftForLtr(a.xPlus(S,1),g-2),A=gs(f.borderRadius);Object.values(A).some(R=>R!==0)?(e.beginPath(),e.fillStyle=u.multiKeyBackground,cl(e,{x:D,y:M,w:g,h:p,radius:A}),e.fill(),e.stroke(),e.fillStyle=f.backgroundColor,e.beginPath(),cl(e,{x:L,y:M+1,w:g-2,h:p-2,radius:A}),e.fill()):(e.fillStyle=u.multiKeyBackground,e.fillRect(D,M,g,p),e.strokeRect(D,M,g,p),e.fillStyle=f.backgroundColor,e.fillRect(L,M+1,g-2,p-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){const{body:a}=this,{bodySpacing:u,bodyAlign:f,displayColors:h,boxHeight:p,boxWidth:g,boxPadding:b}=s,_=He(s.bodyFont);let S=_.lineHeight,T=0;const M=ur(s.rtl,this.x,this.width),D=function(Z){n.fillText(Z,M.x(e.x+T),e.y+S/2),e.y+=S+u},L=M.textAlign(f);let A,R,G,J,j,V,it;for(n.textAlign=f,n.textBaseline="middle",n.font=_.string,e.x=ko(this,L,s),n.fillStyle=s.bodyColor,re(this.beforeBody,D),T=h&&L!=="right"?f==="center"?g/2+b:g+2+b:0,J=0,V=a.length;J<V;++J){for(A=a[J],R=this.labelTextColors[J],n.fillStyle=R,re(A.before,D),G=A.lines,h&&G.length&&(this._drawColorBox(n,e,J,M,s),S=Math.max(_.lineHeight,p)),j=0,it=G.length;j<it;++j)D(G[j]),S=_.lineHeight;re(A.after,D)}T=0,S=_.lineHeight,re(this.afterBody,D),e.y-=u}drawFooter(e,n,s){const a=this.footer,u=a.length;let f,h;if(u){const p=ur(s.rtl,this.x,this.width);for(e.x=ko(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=p.textAlign(s.footerAlign),n.textBaseline="middle",f=He(s.footerFont),n.fillStyle=s.footerColor,n.font=f.string,h=0;h<u;++h)n.fillText(a[h],p.x(e.x),e.y+f.lineHeight/2),e.y+=f.lineHeight+s.footerSpacing}}drawBackground(e,n,s,a){const{xAlign:u,yAlign:f}=this,{x:h,y:p}=e,{width:g,height:b}=s,{topLeft:_,topRight:S,bottomLeft:T,bottomRight:M}=gs(a.cornerRadius);n.fillStyle=a.backgroundColor,n.strokeStyle=a.borderColor,n.lineWidth=a.borderWidth,n.beginPath(),n.moveTo(h+_,p),f==="top"&&this.drawCaret(e,n,s,a),n.lineTo(h+g-S,p),n.quadraticCurveTo(h+g,p,h+g,p+S),f==="center"&&u==="right"&&this.drawCaret(e,n,s,a),n.lineTo(h+g,p+b-M),n.quadraticCurveTo(h+g,p+b,h+g-M,p+b),f==="bottom"&&this.drawCaret(e,n,s,a),n.lineTo(h+T,p+b),n.quadraticCurveTo(h,p+b,h,p+b-T),f==="center"&&u==="left"&&this.drawCaret(e,n,s,a),n.lineTo(h,p+_),n.quadraticCurveTo(h,p,h+_,p),n.closePath(),n.fill(),a.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,s=this.$animations,a=s&&s.x,u=s&&s.y;if(a||u){const f=cs[e.position].call(this,this._active,this._eventPosition);if(!f)return;const h=this._size=rh(this,e),p=Object.assign({},f,this._size),g=sh(n,e,p),b=oh(e,p,g,n);(a._to!==b.x||u._to!==b.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=h.width,this.height=h.height,this.caretX=f.x,this.caretY=f.y,this._resolveAnimations().update(this,b))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(n);const a={width:this.width,height:this.height},u={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const f=hn(n.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&h&&(e.save(),e.globalAlpha=s,this.drawBackground(u,e,a,n),dd(e,n.textDirection),u.y+=f.top,this.drawTitle(u,e,n),this.drawBody(u,e,n),this.drawFooter(u,e,n),pd(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const s=this._active,a=e.map(({datasetIndex:h,index:p})=>{const g=this.chart.getDatasetMeta(h);if(!g)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:g.data[p],index:p}}),u=!Io(s,a),f=this._positionChanged(a,n);(u||f)&&(this._active=a,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,u=this._active||[],f=this._getActiveElements(e,u,n,s),h=this._positionChanged(f,e),p=n||!Io(f,u)||h;return p&&(this._active=f,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),p}_getActiveElements(e,n,s,a){const u=this.options;if(e.type==="mouseout")return[];if(!a)return n.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const f=this.chart.getElementsAtEventForMode(e,u.mode,u,s);return u.reverse&&f.reverse(),f}_positionChanged(e,n){const{caretX:s,caretY:a,options:u}=this,f=cs[u.position].call(this,e,n);return f!==!1&&(s!==f.x||a!==f.y)}}Ft(dl,"positioners",cs);var Pb={id:"tooltip",_element:dl,positioners:cs,afterInit(i,e,n){n&&(i.tooltip=new dl({chart:i,options:n}))},beforeUpdate(i,e,n){i.tooltip&&i.tooltip.initialize(n)},reset(i,e,n){i.tooltip&&i.tooltip.initialize(n)},afterDraw(i){const e=i.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(i.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",n)}},afterEvent(i,e){if(i.tooltip){const n=e.replay;i.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,e)=>e.bodyFont.size,boxWidth:(i,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Pd},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Ob=(i,e,n,s)=>(typeof e=="string"?(n=i.push(e)-1,s.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Ab(i,e,n,s){const a=i.indexOf(e);if(a===-1)return Ob(i,e,n,s);const u=i.lastIndexOf(e);return a!==u?n:a}const Ib=(i,e)=>i===null?null:cn(Math.round(i),0,e);function ch(i){const e=this.getLabels();return i>=0&&i<e.length?e[i]:i}class pl extends vr{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const s=this.getLabels();for(const{index:a,label:u}of n)s[a]===u&&s.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(ve(e))return null;const s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:Ab(s,e,qt(n,e),this._addedLabels),Ib(n,s.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:s,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(a=this.getLabels().length-1)),this.min=s,this.max=a}buildTicks(){const e=this.min,n=this.max,s=this.options.offset,a=[];let u=this.getLabels();u=e===0&&n===u.length-1?u:u.slice(e,n+1),this._valueRange=Math.max(u.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let f=e;f<=n;f++)a.push({value:f});return a}getLabelForValue(e){return ch.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ft(pl,"id","category"),Ft(pl,"defaults",{ticks:{callback:ch}});function Eb(i,e){const n=[],{bounds:a,step:u,min:f,max:h,precision:p,count:g,maxTicks:b,maxDigits:_,includeBounds:S}=i,T=u||1,M=b-1,{min:D,max:L}=e,A=!ve(f),R=!ve(h),G=!ve(g),J=(L-D)/(_+1);let j=pf((L-D)/M/T)*T,V,it,Z,bt;if(j<1e-14&&!A&&!R)return[{value:D},{value:L}];bt=Math.ceil(L/j)-Math.floor(D/j),bt>M&&(j=pf(bt*j/M/T)*T),ve(p)||(V=Math.pow(10,p),j=Math.ceil(j*V)/V),a==="ticks"?(it=Math.floor(D/j)*j,Z=Math.ceil(L/j)*j):(it=D,Z=L),A&&R&&u&&wv((h-f)/u,j/1e3)?(bt=Math.round(Math.min((h-f)/j,b)),j=(h-f)/bt,it=f,Z=h):G?(it=A?f:it,Z=R?h:Z,bt=g-1,j=(Z-it)/bt):(bt=(Z-it)/j,hs(bt,Math.round(bt),j/1e3)?bt=Math.round(bt):bt=Math.ceil(bt));const ct=Math.max(gf(j),gf(it));V=Math.pow(10,ve(p)?ct:p),it=Math.round(it*V)/V,Z=Math.round(Z*V)/V;let Q=0;for(A&&(S&&it!==f?(n.push({value:f}),it<f&&Q++,hs(Math.round((it+Q*j)*V)/V,f,uh(f,J,i))&&Q++):it<f&&Q++);Q<bt;++Q){const rt=Math.round((it+Q*j)*V)/V;if(R&&rt>h)break;n.push({value:rt})}return R&&S&&Z!==h?n.length&&hs(n[n.length-1].value,h,uh(h,J,i))?n[n.length-1].value=h:n.push({value:h}):(!R||Z===h)&&n.push({value:Z}),n}function uh(i,e,{horizontal:n,minRotation:s}){const a=Ai(s),u=(n?Math.sin(a):Math.cos(a))||.001,f=.75*e*(""+i).length;return Math.min(e/u,f)}class Fb extends vr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return ve(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:s}=this.getUserBounds();let{min:a,max:u}=this;const f=p=>a=n?a:p,h=p=>u=s?u:p;if(e){const p=dr(a),g=dr(u);p<0&&g<0?h(0):p>0&&g>0&&f(0)}if(a===u){let p=u===0?1:Math.abs(u*.05);h(u+p),e||f(a-p)}this.min=a,this.max=u}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:s}=e,a;return s?(a=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,a>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${a} ticks. Limiting to 1000.`),a=1e3)):(a=this.computeTickLimit(),n=n||11),n&&(a=Math.min(n,a)),a}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let s=this.getTickLimit();s=Math.max(2,s);const a={maxTicks:s,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},u=this._range||this,f=Eb(a,u);return e.bounds==="ticks"&&kv(f,this,"value"),e.reverse?(f.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),f}configure(){const e=this.ticks;let n=this.min,s=this.max;if(super.configure(),this.options.offset&&e.length){const a=(s-n)/Math.max(e.length-1,1)/2;n-=a,s+=a}this._startValue=n,this._endValue=s,this._valueRange=s-n}getLabelForValue(e){return id(e,this.chart.options.locale,this.options.ticks.format)}}class gl extends Fb{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=fn(e)?e:0,this.max=fn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,s=Ai(this.options.ticks.minRotation),a=(e?Math.sin(s):Math.cos(s))||.001,u=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,u.lineHeight/a))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ft(gl,"id","linear"),Ft(gl,"defaults",{ticks:{callback:sd.formatters.numeric}});const Xo={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Qe=Object.keys(Xo);function fh(i,e){return i-e}function hh(i,e){if(ve(e))return null;const n=i._adapter,{parser:s,round:a,isoWeekday:u}=i._parseOpts;let f=e;return typeof s=="function"&&(f=s(f)),fn(f)||(f=typeof s=="string"?n.parse(f,s):n.parse(f)),f===null?null:(a&&(f=a==="week"&&(xs(u)||u===!0)?n.startOf(f,"isoWeek",u):n.startOf(f,a)),+f)}function dh(i,e,n,s){const a=Qe.length;for(let u=Qe.indexOf(i);u<a-1;++u){const f=Xo[Qe[u]],h=f.steps?f.steps:Number.MAX_SAFE_INTEGER;if(f.common&&Math.ceil((n-e)/(h*f.size))<=s)return Qe[u]}return Qe[a-1]}function Rb(i,e,n,s,a){for(let u=Qe.length-1;u>=Qe.indexOf(n);u--){const f=Qe[u];if(Xo[f].common&&i._adapter.diff(a,s,f)>=e-1)return f}return Qe[n?Qe.indexOf(n):0]}function Hb(i){for(let e=Qe.indexOf(i)+1,n=Qe.length;e<n;++e)if(Xo[Qe[e]].common)return Qe[e]}function ph(i,e,n){if(!n)i[e]=!0;else if(n.length){const{lo:s,hi:a}=Nl(n,e),u=n[s]>=e?n[s]:n[a];i[u]=!0}}function Wb(i,e,n,s){const a=i._adapter,u=+a.startOf(e[0].value,s),f=e[e.length-1].value;let h,p;for(h=u;h<=f;h=+a.add(h,1,s))p=n[h],p>=0&&(e[p].major=!0);return e}function gh(i,e,n){const s=[],a={},u=e.length;let f,h;for(f=0;f<u;++f)h=e[f],a[h]=f,s.push({value:h,major:!1});return u===0||!n?s:Wb(i,s,a,n)}class Bo extends vr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const s=e.time||(e.time={}),a=this._adapter=new Jy._date(e.adapters.date);a.init(n),fs(s.displayFormats,a.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:hh(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,s=e.time.unit||"day";let{min:a,max:u,minDefined:f,maxDefined:h}=this.getUserBounds();function p(g){!f&&!isNaN(g.min)&&(a=Math.min(a,g.min)),!h&&!isNaN(g.max)&&(u=Math.max(u,g.max))}(!f||!h)&&(p(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&p(this.getMinMax(!1))),a=fn(a)&&!isNaN(a)?a:+n.startOf(Date.now(),s),u=fn(u)&&!isNaN(u)?u:+n.endOf(Date.now(),s)+1,this.min=Math.min(a,u-1),this.max=Math.max(a+1,u)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){const e=this.options,n=e.time,s=e.ticks,a=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const u=this.min,f=this.max,h=Mv(a,u,f);return this._unit=n.unit||(s.autoSkip?dh(n.minUnit,this.min,this.max,this._getLabelCapacity(u)):Rb(this,h.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Hb(this._unit),this.initOffsets(a),e.reverse&&h.reverse(),gh(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,a,u;this.options.offset&&e.length&&(a=this.getDecimalForValue(e[0]),e.length===1?n=1-a:n=(this.getDecimalForValue(e[1])-a)/2,u=this.getDecimalForValue(e[e.length-1]),e.length===1?s=u:s=(u-this.getDecimalForValue(e[e.length-2]))/2);const f=e.length<3?.5:.25;n=cn(n,0,f),s=cn(s,0,f),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){const e=this._adapter,n=this.min,s=this.max,a=this.options,u=a.time,f=u.unit||dh(u.minUnit,n,s,this._getLabelCapacity(n)),h=qt(a.ticks.stepSize,1),p=f==="week"?u.isoWeekday:!1,g=xs(p)||p===!0,b={};let _=n,S,T;if(g&&(_=+e.startOf(_,"isoWeek",p)),_=+e.startOf(_,g?"day":f),e.diff(s,n,f)>1e5*h)throw new Error(n+" and "+s+" are too far apart with stepSize of "+h+" "+f);const M=a.ticks.source==="data"&&this.getDataTimestamps();for(S=_,T=0;S<s;S=+e.add(S,h,f),T++)ph(b,S,M);return(S===s||a.bounds==="ticks"||T===1)&&ph(b,S,M),Object.keys(b).sort(fh).map(D=>+D)}getLabelForValue(e){const n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){const a=this.options.time.displayFormats,u=this._unit,f=n||a[u];return this._adapter.format(e,f)}_tickFormatFunction(e,n,s,a){const u=this.options,f=u.ticks.callback;if(f)return le(f,[e,n,s],this);const h=u.time.displayFormats,p=this._unit,g=this._majorUnit,b=p&&h[p],_=g&&h[g],S=s[n],T=g&&_&&S&&S.major;return this._adapter.format(e,a||(T?_:b))}generateTickLabels(e){let n,s,a;for(n=0,s=e.length;n<s;++n)a=e[n],a.label=this._tickFormatFunction(a.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,s=this.ctx.measureText(e).width,a=Ai(this.isHorizontal()?n.maxRotation:n.minRotation),u=Math.cos(a),f=Math.sin(a),h=this._resolveTickFontOptions(0).size;return{w:s*u+h*f,h:s*f+h*u}}_getLabelCapacity(e){const n=this.options.time,s=n.displayFormats,a=s[n.unit]||s.millisecond,u=this._tickFormatFunction(e,0,gh(this,[e],this._majorUnit),a),f=this._getLabelSize(u),h=Math.floor(this.isHorizontal()?this.width/f.w:this.height/f.h)-1;return h>0?h:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(n=0,s=a.length;n<s;++n)e=e.concat(a[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,s;if(e.length)return e;const a=this.getLabels();for(n=0,s=a.length;n<s;++n)e.push(hh(this,a[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Pv(e.sort(fh))}}Ft(Bo,"id","time"),Ft(Bo,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function So(i,e,n){let s=0,a=i.length-1,u,f,h,p;n?(e>=i[s].pos&&e<=i[a].pos&&({lo:s,hi:a}=Ii(i,"pos",e)),{pos:u,time:h}=i[s],{pos:f,time:p}=i[a]):(e>=i[s].time&&e<=i[a].time&&({lo:s,hi:a}=Ii(i,"time",e)),{time:u,pos:h}=i[s],{time:f,pos:p}=i[a]);const g=f-u;return g?h+(p-h)*(e-u)/g:h}class mh extends Bo{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=So(n,this.min),this._tableRange=So(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:s}=this,a=[],u=[];let f,h,p,g,b;for(f=0,h=e.length;f<h;++f)g=e[f],g>=n&&g<=s&&a.push(g);if(a.length<2)return[{time:n,pos:0},{time:s,pos:1}];for(f=0,h=a.length;f<h;++f)b=a[f+1],p=a[f-1],g=a[f],Math.round((b+p)/2)!==g&&u.push({time:g,pos:f/(h-1)});return u}_generate(){const e=this.min,n=this.max;let s=super.getDataTimestamps();return(!s.includes(e)||!s.length)&&s.splice(0,0,e),(!s.includes(n)||s.length===1)&&s.push(n),s.sort((a,u)=>a-u)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),s=this.getLabelTimestamps();return n.length&&s.length?e=this.normalize(n.concat(s)):e=n.length?n:s,e=this._cache.all=e,e}getDecimalForValue(e){return(So(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return So(this._table,s*this._tableRange+this._minPos,!0)}}Ft(mh,"id","timeseries"),Ft(mh,"defaults",Bo.defaults);const Od="label";function vh(i,e){typeof i=="function"?i(e):i&&(i.current=e)}function zb(i,e){const n=i.options;n&&e&&Object.assign(n,e)}function Ad(i,e){i.labels=e}function Id(i,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Od;const s=[];i.datasets=e.map(a=>{const u=i.datasets.find(f=>f[n]===a[n]);return!u||!a.data||s.includes(u)?{...a}:(s.push(u),Object.assign(u,a),u)})}function Bb(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Od;const n={labels:[],datasets:[]};return Ad(n,i.labels),Id(n,i.datasets,e),n}function Ub(i,e){const{height:n=150,width:s=300,redraw:a=!1,datasetIdKey:u,type:f,data:h,options:p,plugins:g=[],fallbackContent:b,updateMode:_,...S}=i,T=ge(null),M=ge(null),D=()=>{T.current&&(M.current=new Yo(T.current,{type:f,data:Bb(h,u),options:p&&{...p},plugins:g}),vh(e,M.current))},L=()=>{vh(e,null),M.current&&(M.current.destroy(),M.current=null)};return Ut(()=>{!a&&M.current&&p&&zb(M.current,p)},[a,p]),Ut(()=>{!a&&M.current&&Ad(M.current.config.data,h.labels)},[a,h.labels]),Ut(()=>{!a&&M.current&&h.datasets&&Id(M.current.config.data,h.datasets,u)},[a,h.datasets]),Ut(()=>{M.current&&(a?(L(),setTimeout(D)):M.current.update(_))},[a,p,h.labels,h.datasets,_]),Ut(()=>{M.current&&(L(),setTimeout(D))},[f]),Ut(()=>(D(),()=>L()),[]),Kh.createElement("canvas",{ref:T,role:"img",height:n,width:s,...S},b)}const $b=wl(Ub);function jb(i,e){return Yo.register(e),wl((n,s)=>Kh.createElement($b,{...n,ref:s,type:i}))}const Vb=jb("line",No);Yo.register(pl,gl,Po,ls,kb,Pb,_b);const Yb=({isDarkMode:i})=>{const[e,n]=nt([]),[s,a]=nt(!0),[u,f]=nt(null),h=async()=>{try{const S=await Nt.getSystemStats();n(S),f(null)}catch(S){console.error("Stats yüklenemedi:",S),f("Failed to load statistics")}finally{a(!1)}};Ut(()=>{h();const S=setInterval(h,6e4);return()=>clearInterval(S)},[]);const p=S=>{const T=S.filter(L=>L.titleID),M=S.filter(L=>!L.titleID),D=L=>({frequency:L.reduce((A,R)=>A+R.frequency,0)/(L.length||1)/1e6,temperature:L.reduce((A,R)=>A+R.temperature,0)/(L.length||1),socTemp:L.reduce((A,R)=>A+R.socSensorTemperature,0)/(L.length||1)});return{game:D(T),idle:D(M)}},g={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{position:"top",labels:{color:i?"#fff":"#666"}},tooltip:{mode:"index",intersect:!1}},scales:{y:{type:"linear",display:!0,position:"left",grid:{color:i?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:i?"#fff":"#666"}},y1:{type:"linear",display:!0,position:"right",grid:{drawOnChartArea:!1},ticks:{color:i?"#fff":"#666"}},x:{grid:{color:i?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)"},ticks:{color:i?"#fff":"#666"}}}},b={labels:e.map(S=>new Date(S.timestamp).toLocaleTimeString()),datasets:[{label:"CPU Frequency (MHz)",data:e.map(S=>S.frequency/1e6),borderColor:"#3498db",backgroundColor:"rgba(52, 152, 219, 0.5)",yAxisID:"y"},{label:"CPU Temperature (°C)",data:e.map(S=>S.temperature),borderColor:"#e74c3c",backgroundColor:"rgba(231, 76, 60, 0.5)",yAxisID:"y1"},{label:"SoC Temperature (°C)",data:e.map(S=>S.socSensorTemperature),borderColor:"#f1c40f",backgroundColor:"rgba(241, 196, 15, 0.5)",yAxisID:"y1"}]},_=p(e);return y("div",{className:`statistics ${i?"dark":""}`,children:s?y("div",{className:"statistics-loading",children:"Loading statistics..."}):u?y("div",{className:"statistics-error",children:u}):y("div",{className:"statistics-content",children:[y("div",{className:"chart-container",children:y(Vb,{options:g,data:b})}),y("div",{className:"stats-averages",children:[y("div",{className:"averages-group",children:[y("h3",{children:"System Idle Averages"}),y("div",{className:"averages-grid",children:[y("div",{className:"average-item",children:[y("span",{children:"CPU Frequency"}),y("strong",{children:[_.idle.frequency.toFixed(0)," MHz"]})]}),y("div",{className:"average-item",children:[y("span",{children:"CPU Temperature"}),y("strong",{children:[_.idle.temperature.toFixed(1),"°C"]})]}),y("div",{className:"average-item",children:[y("span",{children:"SoC Temperature"}),y("strong",{children:[_.idle.socTemp.toFixed(1),"°C"]})]})]})]}),y("div",{className:"averages-group",children:[y("h3",{children:"Gaming Averages"}),y("div",{className:"averages-grid",children:[y("div",{className:"average-item",children:[y("span",{children:"CPU Frequency"}),y("strong",{children:[_.game.frequency.toFixed(0)," MHz"]})]}),y("div",{className:"average-item",children:[y("span",{children:"CPU Temperature"}),y("strong",{children:[_.game.temperature.toFixed(1),"°C"]})]}),y("div",{className:"average-item",children:[y("span",{children:"SoC Temperature"}),y("strong",{children:[_.game.socTemp.toFixed(1),"°C"]})]})]})]})]})]})})};class Oo{static getConfig(e){return this.windows[e]}static getDesktopItems(){return[...Object.values(this.windows).filter(e=>e.visible!==!1).map((e,n)=>({id:n+1,name:e.title,type:e.id,app:e.id,icon:e.icon})),{id:Object.values(this.windows).length+1,name:"GitHub",type:"link",app:"link",icon:"🐙",url:"https://github.com/barisyild/airpsx"}]}static getComponent(e){var n;return(n=this.windows[e])==null?void 0:n.component}}Ft(Oo,"windows",{fileManager:{id:"fileManager",title:"File Manager",icon:"📁",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,component:Qg},processList:{id:"processList",title:"Process List",icon:"📊",defaultWidth:700,defaultHeight:500,minWidth:300,minHeight:200,component:im},scriptEditor:{id:"scriptEditor",title:"Script Editor",icon:"📝",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,component:fm},scriptStore:{id:"scriptStore",title:"Script Store",icon:"📦",defaultWidth:850,defaultHeight:600,minWidth:400,minHeight:300,component:hm},systemInfo:{id:"systemInfo",title:"System Info",icon:"🖥️",defaultWidth:600,defaultHeight:400,minWidth:300,minHeight:200,component:Fh},statistics:{id:"statistics",title:"Statistics",icon:"📈",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,component:Yb},applications:{id:"applications",title:"Applications",icon:"🎮",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,component:Jg},profiles:{id:"profiles",title:"Profiles",icon:"👤",defaultWidth:700,defaultHeight:500,minWidth:300,minHeight:200,component:rm},scheduler:{id:"scheduler",title:"Scheduler",icon:"⏰",defaultWidth:900,defaultHeight:700,minWidth:500,minHeight:400,component:um},mediaGallery:{id:"mediaGallery",title:"Media Gallery",icon:"🖼️",defaultWidth:900,defaultHeight:700,minWidth:400,minHeight:300,component:tm},mediaPlayer:{id:"mediaPlayer",title:"Media Player",icon:"🎬",defaultWidth:800,defaultHeight:500,minWidth:400,minHeight:300,visible:!1,component:em},imageViewer:{id:"imageViewer",title:"Image Viewer",icon:"🖼️",defaultWidth:800,defaultHeight:600,minWidth:400,minHeight:300,visible:!1,component:nm},scriptDetail:{id:"scriptDetail",title:"Script Detail",icon:"📝",defaultWidth:700,defaultHeight:500,minWidth:400,minHeight:350,visible:!1,component:dm}});const Xb=({onAccept:i,isDarkMode:e})=>y("div",{className:`disclaimer-overlay ${e?"dark":""}`,children:y("div",{className:"disclaimer-modal",children:[y("h2",{children:"Disclaimer"}),y("div",{className:"disclaimer-content",children:["This software operates based on the data provided by users and the actions performed. Unexpected actions by users, improper use, or unforeseen circumstances may cause the console to behave unexpectedly or become bricked.",y("br",{}),y("br",{}),"The developer cannot be held responsible for any data loss, service interruptions, or other adverse outcomes that may occur during the use of the software.",y("br",{})," By using this software, you agree to this disclaimer of liability. We would like to explicitly state that this software does not support piracy and cannot be used for such purposes. The use of the software for illegal activities is strictly prohibited, and the developer accepts no responsibility for such misuse.",y("br",{}),y("br",{}),"In certain cases, improper use of this software may render your hardware inoperable ('bricked'). The developer is not liable for such outcomes."]}),y("div",{className:"disclaimer-actions",children:y("button",{onClick:i,children:"I Accept"})})]})}),Kb=()=>{const[i]=nt(Oo.getDesktopItems()),[e,n]=nt([]),[s,a]=nt(null),[u,f]=nt({show:!1,x:0,y:0,item:null}),[h,p]=nt(()=>{const q=localStorage.getItem("theme");return q?q==="dark":!0}),[g,b]=nt([]),[_,S]=nt(null),[T,M]=nt(!0),[D,L]=nt("tr"),[A,R]=nt({id:null,time:0,clickCount:0}),[G,J]=nt(new Set),[j,V]=nt(-1),[it,Z]=nt(!1),[bt,ct]=nt(()=>document.cookie.includes("disclaimerAccepted=true")),[Q,rt]=nt({uploading:!1,progress:0,error:null,success:!1}),[H,I]=nt(!1),[C,pt]=nt(""),[Mt,$t]=nt({loading:!1,error:null,success:!1}),$=ge(null),gt=ge(null);Ut(()=>{localStorage.setItem("theme",h?"dark":"light")},[h]);const ut=async()=>{try{const q=await Nt.getStorageInfo();b(q),S(null)}catch(q){console.error("Storage bilgisi alınamadı:",q),S("Failed to load storage information")}finally{M(!1)}};Ut(()=>{ut();const q=setInterval(ut,3e4);return()=>clearInterval(q)},[]);const kt=q=>q.includes("USB")?"💽":q.includes("Disc")?"💿":"💾",Ot=(q,at,Dt)=>{let{x:It,y:Yt}=q;const{width:At,height:Qt}=at,Kt={width:Math.min(At,Dt.width),height:Math.min(Qt,Dt.height)};return It=Math.max(0,Math.min(It,Dt.width-Kt.width)),Yt=Math.max(0,Math.min(Yt,Dt.height-Kt.height)),{position:{x:It,y:Yt},size:Kt}},Rt=(q,at={},Dt=null)=>{const It=Oo.getConfig(q);if(!It)return;if(at.windowId&&e.some(Qt=>Qt.id===at.windowId)){const Qt=e.find(Kt=>Kt.id===at.windowId);Qt.minimized&&n(e.map(Kt=>Kt.id===Qt.id?{...Kt,minimized:!1}:Kt)),a(Qt.id);return}if(!at.windowId&&e.some(Qt=>Qt.app===q&&!Qt.customInstance)){const Qt=e.find(Kt=>Kt.app===q&&!Kt.customInstance);Qt.minimized&&n(e.map(Kt=>Kt.id===Qt.id?{...Kt,minimized:!1}:Kt)),a(Qt.id);return}const Yt=document.querySelector(".desktop-content");if(Yt==null?void 0:Yt.getBoundingClientRect()){const Qt=at.windowId||Date.now(),Kt={id:Qt,app:q,title:Dt||It.title,icon:It.icon,position:{x:50+e.length*20,y:50+e.length*20},size:{width:It.defaultWidth,height:It.defaultHeight},minSize:{width:It.minWidth,height:It.minHeight},minimized:!1,props:at,customInstance:!!Dt};return n([...e,Kt]),a(Kt.id),Qt}},Ht=q=>{n(e.filter(at=>at.id!==q)),s===q&&a(null)},mt=()=>{f({...u,show:!1})},St=q=>{n(e.map(at=>at.id===q?{...at,minimized:!0}:at))},Et=q=>{if(q.preventDefault(),q.target.closest(".storage-panel")||q.target.closest(".window"))return;const at=q.target,Dt=at.classList.contains("desktop-icons"),It=at.closest(".desktop-item");if(!Dt&&!It)return;const Yt=It?i.find(At=>At.name===It.querySelector(".desktop-item-name").textContent):null;f({show:!0,x:q.pageX,y:q.pageY,item:Yt,isBackground:!It})};Ut(()=>()=>{$.current&&clearTimeout($.current)},[]),Ut(()=>{const q=at=>{if(document.activeElement.tagName==="INPUT"||document.activeElement.tagName==="TEXTAREA")return;if(e.find(At=>At.id===s&&!At.minimized)){const At=document.querySelector(`[data-window-id="${s}"]`);if(!(At!=null&&At.contains(document.activeElement))&&at.key==="Tab"){at.preventDefault();const Qt=At.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');Qt.length>0&&Qt[0].focus()}return}if(!i.length)return;const It=Math.floor((window.innerHeight-60)/120),Yt=Math.floor(j/It);switch(at.key){case"ArrowUp":if(at.preventDefault(),j>-1){const At=j-1;At>=0&&(V(At),J(new Set([i[At].id])))}else V(0),J(new Set([i[0].id]));break;case"ArrowDown":if(at.preventDefault(),j<i.length-1){const At=j+1;V(At),J(new Set([i[At].id]))}break;case"ArrowLeft":if(at.preventDefault(),Yt>0){const At=j-It;At>=0&&(V(At),J(new Set([i[At].id])))}break;case"ArrowRight":if(at.preventDefault(),Yt<Math.ceil(i.length/It)-1){const At=j+It;At<i.length&&(V(At),J(new Set([i[At].id])))}break;case"Enter":if(at.preventDefault(),j>-1&&!e.some(At=>At.app===i[j].app)){const At=i[j];At.app==="systemInfo"?Z(!0):Rt(At.app)}break;case"Escape":V(-1),J(new Set);break}};return window.addEventListener("keydown",q),()=>window.removeEventListener("keydown",q)},[j,i,e,s]);const Vt=(q,at)=>{const Dt=i.findIndex(Yt=>Yt.id===at.id);if(V(Dt),at.type==="link"){window.open(at.url,"_blank");return}if(at.app==="systemInfo"){Z(!0);return}const It=Date.now();A.id===at.id&&It-A.time<500&&A.clickCount===1?(Rt(at.app),R({id:null,time:0,clickCount:0})):(R({id:at.id,time:It,clickCount:1}),J(new Set([at.id])))},dn=()=>{const q=new Date;q.setFullYear(q.getFullYear()+1),document.cookie=`disclaimerAccepted=true; expires=${q.toUTCString()}; path=/`,ct(!0)},jt=q=>{q&&q.name.toLowerCase().endsWith(".pkg")?(rt({uploading:!0,progress:0,error:null,success:!1}),Nt.uploadPkg(q,at=>{rt(Dt=>({...Dt,progress:at}))}).then(at=>{rt({uploading:!1,progress:100,error:null,success:!0}),setTimeout(()=>{rt({uploading:!1,progress:0,error:null,success:!1})},3e3)}).catch(at=>{rt({uploading:!1,progress:0,error:at.message||`An error occurred during installation
`,success:!1})})):rt({uploading:!1,progress:0,error:"Please select a valid .pkg file",success:!1})},fe=async()=>{if(!C.trim()){$t({loading:!1,error:"Please enter a valid URL",success:!1});return}$t({loading:!0,error:null,success:!1});try{await Nt.installPackageFromUrl(C),$t({loading:!1,error:null,success:!0}),setTimeout(()=>{I(!1),pt(""),$t({loading:!1,error:null,success:!1})},2e3)}catch(q){$t({loading:!1,error:q.message||"Failed to install package from URL",success:!1})}},Ve=q=>{const at=q.target.files[0];at&&jt(at),q.target.value=""};return y("div",{className:`desktop ${h?"dark":""}`,onClick:q=>{(q.target.classList.contains("desktop-content")||q.target.classList.contains("desktop-icons"))&&J(new Set),f({...u,show:!1})},onContextMenu:Et,children:[!bt&&y(Xb,{onAccept:dn,isDarkMode:h}),y("div",{className:"desktop-content",children:[y("div",{className:"desktop-icons",children:i.map((q,at)=>y("div",{className:`desktop-item ${G.has(q.id)?"selected":""}`,onClick:Dt=>Vt(Dt,q),tabIndex:0,children:[y("div",{className:"desktop-item-icon icon",children:q.icon}),y("div",{className:"desktop-item-name",children:q.name})]},q.id))}),y("div",{className:`storage-panel ${h?"dark":""}`,children:[y("div",{className:"storage-header",children:["Storage",y("button",{className:"refresh-button icon",onClick:ut,disabled:T,children:"🔄"})]}),T?y("div",{className:"storage-loading",children:"Loading storage info..."}):_?y("div",{className:"storage-error",children:_}):g.map((q,at)=>y("div",{className:"storage-item",children:[y("div",{className:"storage-icon icon",children:kt(q.name)}),y("div",{className:"storage-info",children:[y("div",{className:"storage-name",children:q.name}),y("div",{className:"storage-usage",children:[y("div",{className:"storage-bar",children:y("div",{className:"storage-bar-fill",style:{width:`${q.used/q.total*100}%`}})}),y("div",{className:"storage-text",children:[Nt.formatBytes(q.used)," /"," ",Nt.formatBytes(q.total)]})]})]})]},q.path)),y("div",{className:"storage-dropzone",onClick:()=>{var q;return(q=gt.current)==null?void 0:q.click()},onDragOver:q=>{q.preventDefault(),q.stopPropagation(),q.currentTarget.classList.add("drag-over")},onDragLeave:q=>{q.preventDefault(),q.stopPropagation(),q.currentTarget.classList.remove("drag-over")},onDrop:q=>{q.preventDefault(),q.stopPropagation(),q.currentTarget.classList.remove("drag-over");const Dt=Array.from(q.dataTransfer.files).find(It=>It.name.toLowerCase().endsWith(".pkg"));Dt?jt(Dt):rt({uploading:!1,progress:0,error:"Please drag a valid .pkg file",success:!1})},children:[y("input",{type:"file",ref:gt,style:{display:"none"},accept:".pkg",onChange:Ve}),y("div",{className:"dropzone-content",children:Q.uploading?y("div",{className:"pkg-upload-progress",children:[y("div",{className:"progress-bar-container",children:y("div",{className:"progress-bar-fill",style:{width:`${Q.progress}%`}})}),y("div",{className:"progress-text",children:["Uploading: %",Q.progress.toFixed(1)]})]}):Q.error?y("div",{className:"pkg-upload-error",children:[y("div",{className:"dropzone-icon icon",children:"❌"}),y("div",{className:"dropzone-text",children:Q.error})]}):Q.success?y("div",{className:"pkg-upload-success",children:[y("div",{className:"dropzone-icon icon",children:"✅"}),y("div",{className:"dropzone-text",children:"PKG file successfully uploaded!"})]}):y(Me,{children:[y("div",{className:"dropzone-icon icon",children:"📦"}),y("div",{className:"dropzone-text",children:"PKG Installer - Drag PKG file here"}),y("button",{className:"url-install-button",onClick:q=>{q.stopPropagation(),I(!0)},children:"Install from URL"})]})})]})]}),y(qg,{isDarkMode:h}),y(Fh,{isDarkMode:h,showPanel:it,onClose:()=>Z(!1)}),e.map(q=>{const at=Oo.getComponent(q.app);return y(Kg,{window:q,isActive:s===q.id,isDarkMode:h,onClose:()=>Ht(q.id),onFocus:()=>a(q.id),onDragStart:mt,onMinimize:()=>St(q.id),children:at&&y(at,{contextMenu:u,setContextMenu:f,isDarkMode:h,storage:g,isStorageLoading:T,storageError:_,language:D,onOpenWindow:Dt=>{Rt(Dt.app,Dt.props,Dt.title)},...q.props})},q.id)})]}),y(Gg,{windows:e,activeWindow:s,isDarkMode:h,onWindowClick:(q,at)=>{var It;const Dt=e.find(Yt=>Yt.id===q);if(Dt.minimized){const Yt=(It=document.querySelector(".desktop-content"))==null?void 0:It.getBoundingClientRect();if(Yt){const{position:At,size:Qt}=Ot(Dt.position,Dt.size,Yt);n(e.map(Kt=>Kt.id===q?{...Kt,minimized:!1,position:At,size:Qt}:Kt))}else n(e.map(At=>At.id===q?{...At,minimized:!1}:At))}else at&&(n(e.map(Yt=>Yt.id===q?{...Yt,minimized:!0}:Yt)),a(null));!at&&!Dt.minimized&&a(q)},onThemeToggle:()=>p(!h)}),H&&y("div",{className:`url-modal-overlay ${h?"dark":""}`,onClick:()=>I(!1),children:y("div",{className:`url-modal ${h?"dark":""}`,onClick:q=>q.stopPropagation(),children:[y("div",{className:"url-modal-header",children:[y("h3",{children:"Install Package from URL"}),y("button",{className:"close-button",onClick:()=>I(!1),children:"×"})]}),y("div",{className:"url-modal-content",children:[y("input",{type:"text",className:"url-input",placeholder:"Enter package URL (e.g., http://example.com/game.pkg)",value:C,style:{width:"94%"},onChange:q=>pt(q.target.value),disabled:Mt.loading}),Mt.error&&y("div",{className:"url-error-message",children:Mt.error}),Mt.success&&y("div",{className:"url-success-message",children:"Package installation started successfully!"})]}),y("div",{className:"url-modal-footer",children:y("button",{className:"install-url-button",onClick:fe,disabled:Mt.loading,children:Mt.loading?"Installing...":"Install"})})]})})]})};function Gb(){return navigator.userAgent.includes("PlayStation 4")?document.body.classList.add("ps4"):navigator.userAgent.includes("PlayStation 5")&&document.body.classList.add("ps5"),y(Kb,{})}Ze.init();Ts.defineMode("haxe",function(i,e){var n=i.indentUnit;function s(F){return{type:F,style:"keyword"}}var a=s("keyword a"),u=s("keyword b"),f=s("keyword c"),h=s("operator"),p={type:"atom",style:"atom"},g={type:"attribute",style:"attribute"},M=s("typedef"),b={if:a,while:a,else:u,do:u,try:u,return:f,break:f,continue:f,new:f,throw:f,var:s("var"),final:s("var"),inline:g,static:g,using:s("import"),public:g,private:g,overload:g,extern:g,cast:s("cast"),import:s("import"),macro:s("macro"),function:s("function"),catch:s("catch"),untyped:s("untyped"),callback:s("cb"),for:s("for"),switch:s("switch"),case:s("case"),default:s("default"),in:h,is:h,as:h,never:s("property_access"),trace:s("trace"),class:M,abstract:M,enum:M,interface:M,typedef:M,extends:M,implements:M,dynamic:M,true:p,false:p,null:p},_=/[+\-*&%=<>!?|]/;function S(F,tt,lt){return tt.tokenize=lt,lt(F,tt)}function T(F,tt){for(var lt=!1,vt;(vt=F.next())!=null;){if(vt==tt&&!lt)return!0;lt=!lt&&vt=="\\"}}var M,D;function L(F,tt,lt){return M=F,D=lt,tt}function A(F,tt){var lt=F.next();if(lt=='"')return S(F,tt,R(lt));if(lt=="'")return G(lt,F,tt);if(lt=="}")return tt.interpolationStack.length>0?(tt.tokenize=tt.interpolationStack.pop(),L(lt,"string")):L(lt);if(/[\[\]{}\(\),;\:\.]/.test(lt))return L(lt);if(lt=="0"&&F.eat(/x/i))return F.eatWhile(/[\da-f]/i),L("number","number");if(/\d/.test(lt)||lt=="-"&&F.eat(/\d/))return F.match(/^\d*(?:\.\d*(?!\.))?(?:[eE][+\-]?\d+)?/),L("number","number");if(tt.reAllowed&&lt=="~"&&F.eat(/\//))return T(F,"/"),F.eatWhile(/[gimsu]/),L("regexp","string-2");if(lt=="/")return F.eat("*")?S(F,tt,V):F.eat("/")?(F.skipToEnd(),L("comment","comment")):(F.eatWhile(_),L("operator",null,F.current()));if(lt=="#")return F.skipToEnd(),L("conditional","meta");if(lt=="@")return F.eat(/:/),F.eatWhile(/[\w_]/),L("metadata","meta");if(_.test(lt))return F.eatWhile(_),L("operator",null,F.current());var vt;if(/[A-Z]/.test(lt))return F.eatWhile(/[\w_<>]/),vt=F.current(),L("type","variable-3",vt);F.eatWhile(/[\w_]/);var vt=F.current(),z=b.propertyIsEnumerable(vt)&&b[vt];return z&&tt.kwAllowed?L(z.type,z.style,vt):L("variable","variable",vt)}function R(F){return function(tt,lt){return T(tt,F)&&(lt.tokenize=A),L("string","string")}}function G(F,tt,lt){if(tt.eat(F))return L("string","string");function vt(z,K){for(var _t=!1;;){var Y=z.next();if(Y==null)break;if(Y=="$"&&z.peek()=="$"){z.next();continue}if(Y=="$")return K.interpolationStack.push(K.tokenize),K.tokenize=J,L("string","string");if(Y==F&&!_t){K.tokenize=A;break}_t=!_t&&Y=="\\"}return L("string","string")}return lt.tokenize=vt,vt(tt,lt)}function J(F,tt){return F.eat("$"),F.eat("{")?tt.tokenize=A:tt.tokenize=j,L("string","string")}function j(F,tt){return F.eatWhile(/[\w_]/),tt.tokenize=tt.interpolationStack.pop(),"variable"}function V(F,tt){for(var lt=!1,vt;vt=F.next();){if(vt=="/"&&lt){tt.tokenize=A;break}lt=vt=="*"}return L("comment","comment")}var it={atom:!0,number:!0,variable:!0,string:!0,regexp:!0};function Z(F,tt,lt,vt,z,K){this.indented=F,this.column=tt,this.type=lt,this.prev=z,this.info=K,vt!=null&&(this.align=vt)}function bt(F,tt){for(var lt=F.localVars;lt;lt=lt.next)if(lt.name==tt)return!0}function ct(F,tt,lt,vt,z){var K=F.cc;for(H.state=F,H.stream=z,H.marked=null,H.cc=K,F.lexical.hasOwnProperty("align")||(F.lexical.align=!0);;){var _t=K.length?K.pop():Rt;if(_t(lt,vt)){for(;K.length&&K[K.length-1].lex;)K.pop()();return H.marked?H.marked:lt=="variable"&&bt(F,vt)?"variable-2":lt=="variable"&&Q(F,vt)?"variable-3":tt}}}function Q(F,tt){if(/[a-z]/.test(tt.charAt(0)))return!1;for(var lt=F.importedtypes.length,vt=0;vt<lt;vt++)if(F.importedtypes[vt]==tt)return!0}function rt(F){for(var tt=H.state,lt=tt.importedtypes;lt;lt=lt.next)if(lt.name==F)return;tt.importedtypes={name:F,next:tt.importedtypes}}var H={state:null,column:null,marked:null,cc:null};function I(){for(var F=arguments.length-1;F>=0;F--)H.cc.push(arguments[F])}function C(){return I.apply(null,arguments),!0}function pt(F,tt){for(var lt=tt;lt;lt=lt.next)if(lt.name==F)return!0;return!1}function Mt(F){var tt=H.state;if(tt.context){if(H.marked="def",pt(F,tt.localVars))return;tt.localVars={name:F,next:tt.localVars}}else if(tt.globalVars){if(pt(F,tt.globalVars))return;tt.globalVars={name:F,next:tt.globalVars}}}var $t={name:"this",next:null};function $(){H.state.context||(H.state.localVars=$t),H.state.context={prev:H.state.context,vars:H.state.localVars}}function gt(){H.state.localVars=H.state.context.vars,H.state.context=H.state.context.prev}gt.lex=!0;function ut(F,tt){var lt=function(){var vt=H.state;vt.lexical=new Z(vt.indented,H.stream.column(),F,null,vt.lexical,tt)};return lt.lex=!0,lt}function kt(){var F=H.state;F.lexical.prev&&(F.lexical.type==")"&&(F.indented=F.lexical.indented),F.lexical=F.lexical.prev)}kt.lex=!0;function Ot(F){function tt(lt){return lt==F?C():F==";"?I():C(tt)}return tt}function Rt(F){return F=="@"?C(Vt):F=="var"?C(ut("vardef"),Yt,Ot(";"),kt):F=="keyword a"?C(ut("form"),Ht,Rt,kt):F=="keyword b"?C(ut("form"),Rt,kt):F=="{"?C(ut("}"),$,It,kt,gt):F==";"?C():F=="attribute"?C(Et):F=="function"?C(Ye):F=="for"?C(ut("form"),Ot("("),ut(")"),Qt,Ot(")"),kt,Rt,kt):F=="variable"?C(ut("stat"),Ve):F=="switch"?C(ut("form"),Ht,ut("}","switch"),Ot("{"),It,kt,kt):F=="case"?C(Ht,Ot(":")):F=="default"?C(Ot(":")):F=="catch"?C(ut("form"),$,Ot("("),En,Ot(")"),Rt,kt,gt):F=="import"?C(jt,Ot(";")):F=="typedef"?C(fe):I(ut("stat"),Ht,Ot(";"),kt)}function Ht(F){return it.hasOwnProperty(F)||F=="type"?C(St):F=="function"?C(Ye):F=="keyword c"?C(mt):F=="("?C(ut(")"),mt,Ot(")"),kt,St):F=="operator"?C(Ht):F=="["?C(ut("]"),Dt(mt,"]"),kt,St):F=="{"?C(ut("}"),Dt(at,"}"),kt,St):C()}function mt(F){return F.match(/[;\}\)\],]/)?I():I(Ht)}function St(F,tt){if(F=="operator"&&/\+\+|--/.test(tt))return C(St);if(F=="operator"||F==":")return C(Ht);if(F!=";"){if(F=="(")return C(ut(")"),Dt(Ht,")"),kt,St);if(F==".")return C(q,St);if(F=="[")return C(ut("]"),Ht,Ot("]"),kt,St)}}function Et(F){if(F=="attribute")return C(Et);if(F=="function")return C(Ye);if(F=="var")return C(Yt)}function Vt(F){if(F==":"||F=="variable")return C(Vt);if(F=="(")return C(ut(")"),Dt(dn,")"),kt,Rt)}function dn(F){if(F=="variable")return C()}function jt(F,tt){if(F=="variable"&&/[A-Z]/.test(tt.charAt(0)))return rt(tt),C();if(F=="variable"||F=="property"||F=="."||tt=="*")return C(jt)}function fe(F,tt){if(F=="variable"&&/[A-Z]/.test(tt.charAt(0)))return rt(tt),C();if(F=="type"&&/[A-Z]/.test(tt.charAt(0)))return C()}function Ve(F){return F==":"?C(kt,Rt):I(St,Ot(";"),kt)}function q(F){if(F=="variable")return H.marked="property",C()}function at(F){if(F=="variable"&&(H.marked="property"),it.hasOwnProperty(F))return C(Ot(":"),Ht)}function Dt(F,tt){function lt(vt){return vt==","?C(F,lt):vt==tt?C():C(Ot(tt))}return function(vt){return vt==tt?C():I(F,lt)}}function It(F){return F=="}"?C():I(Rt,It)}function Yt(F,tt){return F=="variable"?(Mt(tt),C(pn,At)):C()}function At(F,tt){if(tt=="=")return C(Ht,At);if(F==",")return C(Yt)}function Qt(F,tt){return F=="variable"?(Mt(tt),C(Kt,Ht)):I()}function Kt(F,tt){if(tt=="in")return C()}function Ye(F,tt){if(F=="variable"||F=="type")return Mt(tt),C(Ye);if(tt=="new")return C(Ye);if(F=="(")return C(ut(")"),$,Dt(En,")"),kt,pn,Rt,gt)}function pn(F){if(F==":")return C(pi)}function pi(F){if(F=="type"||F=="variable")return C();if(F=="{")return C(ut("}"),Dt(In,"}"),kt)}function In(F){if(F=="variable")return C(pn)}function En(F,tt){if(F=="variable")return Mt(tt),C(pn)}return{startState:function(F){var tt=["Int","Float","String","Void","Std","Bool","Dynamic","Array"],lt={tokenize:A,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new Z((F||0)-n,0,"block",!1),localVars:e.localVars,importedtypes:tt,context:e.localVars&&{vars:e.localVars},indented:0,interpolationStack:[]};return e.globalVars&&typeof e.globalVars=="object"&&(lt.globalVars=e.globalVars),lt},token:function(F,tt){if(F.sol()&&(tt.lexical.hasOwnProperty("align")||(tt.lexical.align=!1),tt.indented=F.indentation()),F.eatSpace())return null;var lt=tt.tokenize(F,tt);return M=="comment"?lt:(tt.reAllowed=!!(M=="operator"||M=="keyword c"||M.match(/^[\[{}\(,;:]$/)),tt.kwAllowed=M!=".",ct(tt,lt,M,D,F))},indent:function(F,tt){if(F.tokenize!=A)return 0;var lt=tt&&tt.charAt(0),vt=F.lexical;vt.type=="stat"&&lt=="}"&&(vt=vt.prev);var z=vt.type,K=lt==z;return z=="vardef"?vt.indented+4:z=="form"&&lt=="{"?vt.indented:z=="stat"||z=="form"?vt.indented+n:vt.info=="switch"&&!K?vt.indented+(/^(?:case|default)\b/.test(tt)?n:2*n):vt.align?vt.column+(K?0:1):vt.indented+(K?0:n)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}});Ts.defineMIME("text/x-haxe","haxe");Ts.defineMode("hxml",function(){return{startState:function(){return{define:!1,inString:!1}},token:function(i,e){var a=i.peek(),n=i.sol();if(a=="#")return i.skipToEnd(),"comment";if(n&&a=="-"){var s="variable-2";return i.eat(/-/),i.peek()=="-"&&(i.eat(/-/),s="keyword a"),i.peek()=="D"&&(i.eat(/[D]/),s="keyword c",e.define=!0),i.eatWhile(/[A-Z]/i),s}var a=i.peek();return e.inString==!1&&a=="'"&&(e.inString=!0,i.next()),e.inString==!0?(i.skipTo("'")||i.skipToEnd(),i.peek()=="'"&&(i.next(),e.inString=!1),"string"):(i.next(),null)},lineComment:"#"}});Fi(y(Gb,{}),document.getElementById("app"));
